(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=i(l);fetch(l.href,u)}})();var Qd={exports:{}},kl={};var ov;function $S(){if(ov)return kl;ov=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var m in l)m!=="key"&&(u[m]=l[m])}else u=l;return l=u.ref,{$$typeof:s,type:r,key:f,ref:l!==void 0?l:null,props:u}}return kl.Fragment=t,kl.jsx=i,kl.jsxs=i,kl}var lv;function XS(){return lv||(lv=1,Qd.exports=$S()),Qd.exports}var v=XS(),$d={exports:{}},Nt={};var uv;function WS(){if(uv)return Nt;uv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),R=Symbol.iterator;function P(D){return D===null||typeof D!="object"?null:(D=R&&D[R]||D["@@iterator"],typeof D=="function"?D:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,Y={};function rt(D,U,X){this.props=D,this.context=U,this.refs=Y,this.updater=X||W}rt.prototype.isReactComponent={},rt.prototype.setState=function(D,U){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,U,"setState")},rt.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ft(){}ft.prototype=rt.prototype;function vt(D,U,X){this.props=D,this.context=U,this.refs=Y,this.updater=X||W}var Mt=vt.prototype=new ft;Mt.constructor=vt,$(Mt,rt.prototype),Mt.isPureReactComponent=!0;var at=Array.isArray;function St(){}var N={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function I(D,U,X){var ot=X.ref;return{$$typeof:s,type:D,key:U,ref:ot!==void 0?ot:null,props:X}}function V(D,U){return I(D.type,U,D.props)}function k(D){return typeof D=="object"&&D!==null&&D.$$typeof===s}function C(D){var U={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(X){return U[X]})}var x=/\/+/g;function Et(D,U){return typeof D=="object"&&D!==null&&D.key!=null?C(""+D.key):U.toString(36)}function lt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(St,St):(D.status="pending",D.then(function(U){D.status==="pending"&&(D.status="fulfilled",D.value=U)},function(U){D.status==="pending"&&(D.status="rejected",D.reason=U)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function B(D,U,X,ot,dt){var pt=typeof D;(pt==="undefined"||pt==="boolean")&&(D=null);var At=!1;if(D===null)At=!0;else switch(pt){case"bigint":case"string":case"number":At=!0;break;case"object":switch(D.$$typeof){case s:case t:At=!0;break;case b:return At=D._init,B(At(D._payload),U,X,ot,dt)}}if(At)return dt=dt(D),At=ot===""?"."+Et(D,0):ot,at(dt)?(X="",At!=null&&(X=At.replace(x,"$&/")+"/"),B(dt,U,X,"",function(le){return le})):dt!=null&&(k(dt)&&(dt=V(dt,X+(dt.key==null||D&&D.key===dt.key?"":(""+dt.key).replace(x,"$&/")+"/")+At)),U.push(dt)),1;At=0;var Yt=ot===""?".":ot+":";if(at(D))for(var Lt=0;Lt<D.length;Lt++)ot=D[Lt],pt=Yt+Et(ot,Lt),At+=B(ot,U,X,pt,dt);else if(Lt=P(D),typeof Lt=="function")for(D=Lt.call(D),Lt=0;!(ot=D.next()).done;)ot=ot.value,pt=Yt+Et(ot,Lt++),At+=B(ot,U,X,pt,dt);else if(pt==="object"){if(typeof D.then=="function")return B(lt(D),U,X,ot,dt);throw U=String(D),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return At}function nt(D,U,X){if(D==null)return D;var ot=[],dt=0;return B(D,ot,"","",function(pt){return U.call(X,pt,dt++)}),ot}function L(D){if(D._status===-1){var U=D._result;U=U(),U.then(function(X){(D._status===0||D._status===-1)&&(D._status=1,D._result=X)},function(X){(D._status===0||D._status===-1)&&(D._status=2,D._result=X)}),D._status===-1&&(D._status=0,D._result=U)}if(D._status===1)return D._result.default;throw D._result}var tt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},st={map:nt,forEach:function(D,U,X){nt(D,function(){U.apply(this,arguments)},X)},count:function(D){var U=0;return nt(D,function(){U++}),U},toArray:function(D){return nt(D,function(U){return U})||[]},only:function(D){if(!k(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Nt.Activity=w,Nt.Children=st,Nt.Component=rt,Nt.Fragment=i,Nt.Profiler=l,Nt.PureComponent=vt,Nt.StrictMode=r,Nt.Suspense=g,Nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Nt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return N.H.useMemoCache(D)}},Nt.cache=function(D){return function(){return D.apply(null,arguments)}},Nt.cacheSignal=function(){return null},Nt.cloneElement=function(D,U,X){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ot=$({},D.props),dt=D.key;if(U!=null)for(pt in U.key!==void 0&&(dt=""+U.key),U)!S.call(U,pt)||pt==="key"||pt==="__self"||pt==="__source"||pt==="ref"&&U.ref===void 0||(ot[pt]=U[pt]);var pt=arguments.length-2;if(pt===1)ot.children=X;else if(1<pt){for(var At=Array(pt),Yt=0;Yt<pt;Yt++)At[Yt]=arguments[Yt+2];ot.children=At}return I(D.type,dt,ot)},Nt.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},Nt.createElement=function(D,U,X){var ot,dt={},pt=null;if(U!=null)for(ot in U.key!==void 0&&(pt=""+U.key),U)S.call(U,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(dt[ot]=U[ot]);var At=arguments.length-2;if(At===1)dt.children=X;else if(1<At){for(var Yt=Array(At),Lt=0;Lt<At;Lt++)Yt[Lt]=arguments[Lt+2];dt.children=Yt}if(D&&D.defaultProps)for(ot in At=D.defaultProps,At)dt[ot]===void 0&&(dt[ot]=At[ot]);return I(D,pt,dt)},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(D){return{$$typeof:m,render:D}},Nt.isValidElement=k,Nt.lazy=function(D){return{$$typeof:b,_payload:{_status:-1,_result:D},_init:L}},Nt.memo=function(D,U){return{$$typeof:y,type:D,compare:U===void 0?null:U}},Nt.startTransition=function(D){var U=N.T,X={};N.T=X;try{var ot=D(),dt=N.S;dt!==null&&dt(X,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(St,tt)}catch(pt){tt(pt)}finally{U!==null&&X.types!==null&&(U.types=X.types),N.T=U}},Nt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Nt.use=function(D){return N.H.use(D)},Nt.useActionState=function(D,U,X){return N.H.useActionState(D,U,X)},Nt.useCallback=function(D,U){return N.H.useCallback(D,U)},Nt.useContext=function(D){return N.H.useContext(D)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(D,U){return N.H.useDeferredValue(D,U)},Nt.useEffect=function(D,U){return N.H.useEffect(D,U)},Nt.useEffectEvent=function(D){return N.H.useEffectEvent(D)},Nt.useId=function(){return N.H.useId()},Nt.useImperativeHandle=function(D,U,X){return N.H.useImperativeHandle(D,U,X)},Nt.useInsertionEffect=function(D,U){return N.H.useInsertionEffect(D,U)},Nt.useLayoutEffect=function(D,U){return N.H.useLayoutEffect(D,U)},Nt.useMemo=function(D,U){return N.H.useMemo(D,U)},Nt.useOptimistic=function(D,U){return N.H.useOptimistic(D,U)},Nt.useReducer=function(D,U,X){return N.H.useReducer(D,U,X)},Nt.useRef=function(D){return N.H.useRef(D)},Nt.useState=function(D){return N.H.useState(D)},Nt.useSyncExternalStore=function(D,U,X){return N.H.useSyncExternalStore(D,U,X)},Nt.useTransition=function(){return N.H.useTransition()},Nt.version="19.2.3",Nt}var cv;function Hm(){return cv||(cv=1,$d.exports=WS()),$d.exports}var ht=Hm(),Xd={exports:{}},Ol={},Wd={exports:{}},Zd={};var hv;function ZS(){return hv||(hv=1,(function(s){function t(B,nt){var L=B.length;B.push(nt);t:for(;0<L;){var tt=L-1>>>1,st=B[tt];if(0<l(st,nt))B[tt]=nt,B[L]=st,L=tt;else break t}}function i(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var nt=B[0],L=B.pop();if(L!==nt){B[0]=L;t:for(var tt=0,st=B.length,D=st>>>1;tt<D;){var U=2*(tt+1)-1,X=B[U],ot=U+1,dt=B[ot];if(0>l(X,L))ot<st&&0>l(dt,X)?(B[tt]=dt,B[ot]=L,tt=ot):(B[tt]=X,B[U]=L,tt=U);else if(ot<st&&0>l(dt,L))B[tt]=dt,B[ot]=L,tt=ot;else break t}}return nt}function l(B,nt){var L=B.sortIndex-nt.sortIndex;return L!==0?L:B.id-nt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var g=[],y=[],b=1,w=null,R=3,P=!1,W=!1,$=!1,Y=!1,rt=typeof setTimeout=="function"?setTimeout:null,ft=typeof clearTimeout=="function"?clearTimeout:null,vt=typeof setImmediate<"u"?setImmediate:null;function Mt(B){for(var nt=i(y);nt!==null;){if(nt.callback===null)r(y);else if(nt.startTime<=B)r(y),nt.sortIndex=nt.expirationTime,t(g,nt);else break;nt=i(y)}}function at(B){if($=!1,Mt(B),!W)if(i(g)!==null)W=!0,St||(St=!0,C());else{var nt=i(y);nt!==null&&lt(at,nt.startTime-B)}}var St=!1,N=-1,S=5,I=-1;function V(){return Y?!0:!(s.unstable_now()-I<S)}function k(){if(Y=!1,St){var B=s.unstable_now();I=B;var nt=!0;try{t:{W=!1,$&&($=!1,ft(N),N=-1),P=!0;var L=R;try{e:{for(Mt(B),w=i(g);w!==null&&!(w.expirationTime>B&&V());){var tt=w.callback;if(typeof tt=="function"){w.callback=null,R=w.priorityLevel;var st=tt(w.expirationTime<=B);if(B=s.unstable_now(),typeof st=="function"){w.callback=st,Mt(B),nt=!0;break e}w===i(g)&&r(g),Mt(B)}else r(g);w=i(g)}if(w!==null)nt=!0;else{var D=i(y);D!==null&&lt(at,D.startTime-B),nt=!1}}break t}finally{w=null,R=L,P=!1}nt=void 0}}finally{nt?C():St=!1}}}var C;if(typeof vt=="function")C=function(){vt(k)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Et=x.port2;x.port1.onmessage=k,C=function(){Et.postMessage(null)}}else C=function(){rt(k,0)};function lt(B,nt){N=rt(function(){B(s.unstable_now())},nt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(B){B.callback=null},s.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_next=function(B){switch(R){case 1:case 2:case 3:var nt=3;break;default:nt=R}var L=R;R=nt;try{return B()}finally{R=L}},s.unstable_requestPaint=function(){Y=!0},s.unstable_runWithPriority=function(B,nt){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var L=R;R=B;try{return nt()}finally{R=L}},s.unstable_scheduleCallback=function(B,nt,L){var tt=s.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?tt+L:tt):L=tt,B){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=L+st,B={id:b++,callback:nt,priorityLevel:B,startTime:L,expirationTime:st,sortIndex:-1},L>tt?(B.sortIndex=L,t(y,B),i(g)===null&&B===i(y)&&($?(ft(N),N=-1):$=!0,lt(at,L-tt))):(B.sortIndex=st,t(g,B),W||P||(W=!0,St||(St=!0,C()))),B},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(B){var nt=R;return function(){var L=R;R=nt;try{return B.apply(this,arguments)}finally{R=L}}}})(Zd)),Zd}var fv;function JS(){return fv||(fv=1,Wd.exports=ZS()),Wd.exports}var Jd={exports:{}},hn={};var dv;function tA(){if(dv)return hn;dv=1;var s=Hm();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:g,containerInfo:y,implementation:b}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hn.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return u(g,y,null,b)},hn.flushSync=function(g){var y=f.T,b=r.p;try{if(f.T=null,r.p=2,g)return g()}finally{f.T=y,r.p=b,r.d.f()}},hn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},hn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},hn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,w=m(b,y.crossOrigin),R=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:R,fetchPriority:P}):b==="script"&&r.d.X(g,{crossOrigin:w,integrity:R,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},hn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=m(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},hn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,w=m(b,y.crossOrigin);r.d.L(g,b,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},hn.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=m(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},hn.requestFormReset=function(g){r.d.r(g)},hn.unstable_batchedUpdates=function(g,y){return g(y)},hn.useFormState=function(g,y,b){return f.H.useFormState(g,y,b)},hn.useFormStatus=function(){return f.H.useHostTransitionStatus()},hn.version="19.2.3",hn}var mv;function eA(){if(mv)return Jd.exports;mv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Jd.exports=tA(),Jd.exports}var pv;function nA(){if(pv)return Ol;pv=1;var s=JS(),t=Hm(),i=eA();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(r(188))}function y(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,o=n;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),e;if(d===o)return g(h),n;d=d.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=d;else{for(var _=!1,T=h.child;T;){if(T===a){_=!0,a=h,o=d;break}if(T===o){_=!0,o=h,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,o=h;break}if(T===o){_=!0,o=d,a=h;break}T=T.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function b(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=b(e),n!==null)return n;e=e.sibling}return null}var w=Object.assign,R=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),rt=Symbol.for("react.profiler"),ft=Symbol.for("react.consumer"),vt=Symbol.for("react.context"),Mt=Symbol.for("react.forward_ref"),at=Symbol.for("react.suspense"),St=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function C(e){return e===null||typeof e!="object"?null:(e=k&&e[k]||e["@@iterator"],typeof e=="function"?e:null)}var x=Symbol.for("react.client.reference");function Et(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===x?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $:return"Fragment";case rt:return"Profiler";case Y:return"StrictMode";case at:return"Suspense";case St:return"SuspenseList";case I:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case W:return"Portal";case vt:return e.displayName||"Context";case ft:return(e._context.displayName||"Context")+".Consumer";case Mt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case N:return n=e.displayName||null,n!==null?n:Et(e.type)||"Memo";case S:n=e._payload,e=e._init;try{return Et(e(n))}catch{}}return null}var lt=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},tt=[],st=-1;function D(e){return{current:e}}function U(e){0>st||(e.current=tt[st],tt[st]=null,st--)}function X(e,n){st++,tt[st]=e.current,e.current=n}var ot=D(null),dt=D(null),pt=D(null),At=D(null);function Yt(e,n){switch(X(pt,n),X(dt,e),X(ot,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?D_(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=D_(n),e=N_(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(ot),X(ot,e)}function Lt(){U(ot),U(dt),U(pt)}function le(e){e.memoizedState!==null&&X(At,e);var n=ot.current,a=N_(n,e.type);n!==a&&(X(dt,e),X(ot,a))}function Je(e){dt.current===e&&(U(ot),U(dt)),At.current===e&&(U(At),Cl._currentValue=L)}var Hn,Tn;function un(e){if(Hn===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Hn=n&&n[1]||"",Tn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hn+e+Tn}var Is=!1;function ri(e,n){if(!e||Is)return"";Is=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(K){var F=K}Reflect.construct(e,[],et)}else{try{et.call()}catch(K){F=K}e.call(et.prototype)}}else{try{throw Error()}catch(K){F=K}(et=e())&&typeof et.catch=="function"&&et.catch(function(){})}}catch(K){if(K&&F&&typeof K.stack=="string")return[K.stack,F.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var O=_.split(`
`),H=T.split(`
`);for(h=o=0;o<O.length&&!O[o].includes("DetermineComponentFrameRoot");)o++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(o===O.length||h===H.length)for(o=O.length-1,h=H.length-1;1<=o&&0<=h&&O[o]!==H[h];)h--;for(;1<=o&&0<=h;o--,h--)if(O[o]!==H[h]){if(o!==1||h!==1)do if(o--,h--,0>h||O[o]!==H[h]){var Q=`
`+O[o].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=o&&0<=h);break}}}finally{Is=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?un(a):""}function Ds(e,n){switch(e.tag){case 26:case 27:case 5:return un(e.type);case 16:return un("Lazy");case 13:return e.child!==n&&n!==null?un("Suspense Fallback"):un("Suspense");case 19:return un("SuspenseList");case 0:case 15:return ri(e.type,!1);case 11:return ri(e.type.render,!1);case 1:return ri(e.type,!0);case 31:return un("Activity");default:return""}}function Ti(e){try{var n="",a=null;do n+=Ds(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ge=Object.prototype.hasOwnProperty,yt=s.unstable_scheduleCallback,xt=s.unstable_cancelCallback,he=s.unstable_shouldYield,He=s.unstable_requestPaint,ie=s.unstable_now,De=s.unstable_getCurrentPriorityLevel,Fe=s.unstable_ImmediatePriority,gn=s.unstable_UserBlockingPriority,Ge=s.unstable_NormalPriority,ya=s.unstable_LowPriority,zt=s.unstable_IdlePriority,Nn=s.log,cn=s.unstable_setDisableYieldValue,Ke=null,Ne=null;function Fn(e){if(typeof Nn=="function"&&cn(e),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(Ke,e)}catch{}}var Ae=Math.clz32?Math.clz32:vu,_u=Math.log,_a=Math.LN2;function vu(e){return e>>>=0,e===0?32:31-(_u(e)/_a|0)|0}var bi=256,Dr=262144,ke=4194304;function Si(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ai(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,d=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var T=o&134217727;return T!==0?(o=T&~d,o!==0?h=Si(o):(_&=T,_!==0?h=Si(_):a||(a=T&~e,a!==0&&(h=Si(a))))):(T=o&~d,T!==0?h=Si(T):_!==0?h=Si(_):a||(a=o&~e,a!==0&&(h=Si(a)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:h}function ai(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Wh(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Eu(){var e=ke;return ke<<=1,(ke&62914560)===0&&(ke=4194304),e}function wi(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Nr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Zh(e,n,a,o,h,d){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var T=e.entanglements,O=e.expirationTimes,H=e.hiddenUpdates;for(a=_&~a;0<a;){var Q=31-Ae(a),et=1<<Q;T[Q]=0,O[Q]=-1;var F=H[Q];if(F!==null)for(H[Q]=null,Q=0;Q<F.length;Q++){var K=F[Q];K!==null&&(K.lane&=-536870913)}a&=~et}o!==0&&kr(e,o,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(_&~n))}function kr(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Ae(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function Oo(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-Ae(a),h=1<<o;h&n|e[o]&n&&(e[o]|=n),a&=~h}}function Vo(e,n){var a=n&-n;return a=(a&42)!==0?1:Or(a),(a&(e.suspendedLanes|n))!==0?0:a}function Or(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ji(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Tu(){var e=nt.p;return e!==0?e:(e=window.event,e===void 0?32:tv(e.type))}function oi(e,n){var a=nt.p;try{return nt.p=e,n()}finally{nt.p=a}}var li=Math.random().toString(36).slice(2),Oe="__reactFiber$"+li,$e="__reactProps$"+li,xi="__reactContainer$"+li,va="__reactEvents$"+li,Jh="__reactListeners$"+li,bu="__reactHandles$"+li,Su="__reactResources$"+li,Ri="__reactMarker$"+li;function Ea(e){delete e[Oe],delete e[$e],delete e[va],delete e[Jh],delete e[bu]}function Ci(e){var n=e[Oe];if(n)return n;for(var a=e.parentNode;a;){if(n=a[xi]||a[Oe]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=P_(e);e!==null;){if(a=e[Oe])return a;e=P_(e)}return n}e=a,a=e.parentNode}return null}function Gn(e){if(e=e[Oe]||e[xi]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function kn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function Ii(e){var n=e[Su];return n||(n=e[Su]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ve(e){e[Ri]=!0}var Mo=new Set,jo={};function Di(e,n){Ni(e,n),Ni(e+"Capture",n)}function Ni(e,n){for(jo[e]=n,e=0;e<n.length;e++)Mo.add(n[e])}var Lo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Po={},Uo={};function Au(e){return ge.call(Uo,e)?!0:ge.call(Po,e)?!1:Lo.test(e)?Uo[e]=!0:(Po[e]=!0,!1)}function Ta(e,n,a){if(Au(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function On(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Me(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function Xe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ns(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function zo(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function te(e){if(!e._valueTracker){var n=Ns(e)?"checked":"value";e._valueTracker=zo(e,n,""+e[n])}}function Vr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=Ns(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function ki(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Mr=/[\n"\\]/g;function bn(e){return e.replace(Mr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ba(e,n,a,o,h,d,_,T){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),n!=null?_==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Xe(n)):e.value!==""+Xe(n)&&(e.value=""+Xe(n)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),n!=null?Bo(e,_,Xe(n)):a!=null?Bo(e,_,Xe(a)):o!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+Xe(T):e.removeAttribute("name")}function wu(e,n,a,o,h,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){te(e);return}a=a!=null?""+Xe(a):"",n=n!=null?""+Xe(n):a,T||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=T?e.checked:!!o,e.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),te(e)}function Bo(e,n,a){n==="number"&&ki(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ks(e,n,a,o){if(e=e.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=n.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Xe(a),n=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function xu(e,n,a){if(n!=null&&(n=""+Xe(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Xe(a):""}function Os(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(r(92));if(lt(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=Xe(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),te(e)}function Sn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Ru=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qo(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||Ru.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Ho(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&qo(e,h,o)}else for(var d in n)n.hasOwnProperty(d)&&qo(e,d,n[d])}function Sa(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Aa(e){return Vs.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ui(){}var Fo=null;function Kn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ms=null,Oi=null;function jr(e){var n=Gn(e);if(n&&(e=n.stateNode)){var a=e[$e]||null;t:switch(e=n.stateNode,n.type){case"input":if(ba(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+bn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var h=o[$e]||null;if(!h)throw Error(r(90));ba(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&Vr(o)}break t;case"textarea":xu(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&ks(e,!!a.multiple,n,!1)}}}var wa=!1;function js(e,n,a){if(wa)return e(n,a);wa=!0;try{var o=e(n);return o}finally{if(wa=!1,(Ms!==null||Oi!==null)&&(Tc(),Ms&&(n=Ms,e=Oi,Oi=Ms=null,jr(n),e)))for(n=0;n<e.length;n++)jr(e[n])}}function ci(e,n){var a=e.stateNode;if(a===null)return null;var o=a[$e]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lr=!1;if(Yn)try{var se={};Object.defineProperty(se,"passive",{get:function(){Lr=!0}}),window.addEventListener("test",se,se),window.removeEventListener("test",se,se)}catch{Lr=!1}var Vi=null,Go=null,Pr=null;function Ko(){if(Pr)return Pr;var e,n=Go,a=n.length,o,h="value"in Vi?Vi.value:Vi.textContent,d=h.length;for(e=0;e<a&&n[e]===h[e];e++);var _=a-e;for(o=1;o<=_&&n[a-o]===h[d-o];o++);return Pr=h.slice(e,1<o?1-o:void 0)}function Ur(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ts(){return!0}function hi(){return!1}function tn(e){function n(a,o,h,d,_){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(a=e[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ts:hi,this.isPropagationStopped=hi,this}return w(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),n}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mi=tn(es),Ls=w({},es,{view:0,detail:0}),Yo=tn(Ls),Ps,xa,ji,Ra=w({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Us,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ji&&(ji&&e.type==="mousemove"?(Ps=e.screenX-ji.screenX,xa=e.screenY-ji.screenY):xa=Ps=0,ji=e),Ps)},movementY:function(e){return"movementY"in e?e.movementY:xa}}),Qo=tn(Ra),zr=w({},Ra,{dataTransfer:0}),Iu=tn(zr),Du=w({},Ls,{relatedTarget:0}),Br=tn(Du),$o=w({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),Nu=tn($o),Ca=w({},es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ku=tn(Ca),Ou=w({},es,{data:0}),Li=tn(Ou),Vu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lu(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ju[e])?!!n[e]:!1}function Us(){return Lu}var yn=w({},Ls,{key:function(e){if(e.key){var n=Vu[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ur(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Us,charCode:function(e){return e.type==="keypress"?Ur(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ur(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pu=tn(yn),Uu=w({},Ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ns=tn(Uu),c=w({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Us}),p=tn(c),E=w({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=tn(E),z=w({},Ra,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G=tn(z),ut=w({},es,{newState:0,oldState:0}),Ot=tn(ut),we=[9,13,27,32],Wt=Yn&&"CompositionEvent"in window,ye=null;Yn&&"documentMode"in document&&(ye=document.documentMode);var Qn=Yn&&"TextEvent"in window&&!ye,Pi=Yn&&(!Wt||ye&&8<ye&&11>=ye),fi=" ",di=!1;function qr(e,n){switch(e){case"keyup":return we.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ia(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Da=!1;function vb(e,n){switch(e){case"compositionend":return Ia(n);case"keypress":return n.which!==32?null:(di=!0,fi);case"textInput":return e=n.data,e===fi&&di?null:e;default:return null}}function Eb(e,n){if(Da)return e==="compositionend"||!Wt&&qr(e,n)?(e=Ko(),Pr=Go=Vi=null,Da=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Pi&&n.locale!=="ko"?null:n.data;default:return null}}var Tb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bp(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Tb[e.type]:n==="textarea"}function qp(e,n,a,o){Ms?Oi?Oi.push(o):Oi=[o]:Ms=o,n=Cc(n,"onChange"),0<n.length&&(a=new Mi("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var Xo=null,Wo=null;function bb(e){A_(e,0)}function zu(e){var n=kn(e);if(Vr(n))return e}function Hp(e,n){if(e==="change")return n}var Fp=!1;if(Yn){var tf;if(Yn){var ef="oninput"in document;if(!ef){var Gp=document.createElement("div");Gp.setAttribute("oninput","return;"),ef=typeof Gp.oninput=="function"}tf=ef}else tf=!1;Fp=tf&&(!document.documentMode||9<document.documentMode)}function Kp(){Xo&&(Xo.detachEvent("onpropertychange",Yp),Wo=Xo=null)}function Yp(e){if(e.propertyName==="value"&&zu(Wo)){var n=[];qp(n,Wo,e,Kn(e)),js(bb,n)}}function Sb(e,n,a){e==="focusin"?(Kp(),Xo=n,Wo=a,Xo.attachEvent("onpropertychange",Yp)):e==="focusout"&&Kp()}function Ab(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zu(Wo)}function wb(e,n){if(e==="click")return zu(n)}function xb(e,n){if(e==="input"||e==="change")return zu(n)}function Rb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Vn=typeof Object.is=="function"?Object.is:Rb;function Zo(e,n){if(Vn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!ge.call(n,h)||!Vn(e[h],n[h]))return!1}return!0}function Qp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $p(e,n){var a=Qp(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Qp(a)}}function Xp(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Xp(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Wp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ki(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=ki(e.document)}return n}function nf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Cb=Yn&&"documentMode"in document&&11>=document.documentMode,Na=null,sf=null,Jo=null,rf=!1;function Zp(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;rf||Na==null||Na!==ki(o)||(o=Na,"selectionStart"in o&&nf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Jo&&Zo(Jo,o)||(Jo=o,o=Cc(sf,"onSelect"),0<o.length&&(n=new Mi("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=Na)))}function Hr(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var ka={animationend:Hr("Animation","AnimationEnd"),animationiteration:Hr("Animation","AnimationIteration"),animationstart:Hr("Animation","AnimationStart"),transitionrun:Hr("Transition","TransitionRun"),transitionstart:Hr("Transition","TransitionStart"),transitioncancel:Hr("Transition","TransitionCancel"),transitionend:Hr("Transition","TransitionEnd")},af={},Jp={};Yn&&(Jp=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Fr(e){if(af[e])return af[e];if(!ka[e])return e;var n=ka[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Jp)return af[e]=n[a];return e}var tg=Fr("animationend"),eg=Fr("animationiteration"),ng=Fr("animationstart"),Ib=Fr("transitionrun"),Db=Fr("transitionstart"),Nb=Fr("transitioncancel"),ig=Fr("transitionend"),sg=new Map,of="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");of.push("scrollEnd");function mi(e,n){sg.set(e,n),Di(n,[e])}var Bu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},$n=[],Oa=0,lf=0;function qu(){for(var e=Oa,n=lf=Oa=0;n<e;){var a=$n[n];$n[n++]=null;var o=$n[n];$n[n++]=null;var h=$n[n];$n[n++]=null;var d=$n[n];if($n[n++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}d!==0&&rg(a,h,d)}}function Hu(e,n,a,o){$n[Oa++]=e,$n[Oa++]=n,$n[Oa++]=a,$n[Oa++]=o,lf|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function uf(e,n,a,o){return Hu(e,n,a,o),Fu(e)}function Gr(e,n){return Hu(e,null,null,n),Fu(e)}function rg(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&n!==null&&(h=31-Ae(a),e=d.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=a|536870912),d):null}function Fu(e){if(50<Tl)throw Tl=0,_d=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Va={};function kb(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(e,n,a,o){return new kb(e,n,a,o)}function cf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function is(e,n){var a=e.alternate;return a===null?(a=Mn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ag(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Gu(e,n,a,o,h,d){var _=0;if(o=e,typeof e=="function")cf(e)&&(_=1);else if(typeof e=="string")_=LS(e,a,ot.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case I:return e=Mn(31,a,n,h),e.elementType=I,e.lanes=d,e;case $:return Kr(a.children,h,d,n);case Y:_=8,h|=24;break;case rt:return e=Mn(12,a,n,h|2),e.elementType=rt,e.lanes=d,e;case at:return e=Mn(13,a,n,h),e.elementType=at,e.lanes=d,e;case St:return e=Mn(19,a,n,h),e.elementType=St,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vt:_=10;break t;case ft:_=9;break t;case Mt:_=11;break t;case N:_=14;break t;case S:_=16,o=null;break t}_=29,a=Error(r(130,e===null?"null":typeof e,"")),o=null}return n=Mn(_,a,n,h),n.elementType=e,n.type=o,n.lanes=d,n}function Kr(e,n,a,o){return e=Mn(7,e,o,n),e.lanes=a,e}function hf(e,n,a){return e=Mn(6,e,null,n),e.lanes=a,e}function og(e){var n=Mn(18,null,null,0);return n.stateNode=e,n}function ff(e,n,a){return n=Mn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var lg=new WeakMap;function Xn(e,n){if(typeof e=="object"&&e!==null){var a=lg.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Ti(n)},lg.set(e,n),n)}return{value:e,source:n,stack:Ti(n)}}var Ma=[],ja=0,Ku=null,tl=0,Wn=[],Zn=0,zs=null,Ui=1,zi="";function ss(e,n){Ma[ja++]=tl,Ma[ja++]=Ku,Ku=e,tl=n}function ug(e,n,a){Wn[Zn++]=Ui,Wn[Zn++]=zi,Wn[Zn++]=zs,zs=e;var o=Ui;e=zi;var h=32-Ae(o)-1;o&=~(1<<h),a+=1;var d=32-Ae(n)+h;if(30<d){var _=h-h%5;d=(o&(1<<_)-1).toString(32),o>>=_,h-=_,Ui=1<<32-Ae(n)+h|a<<h|o,zi=d+e}else Ui=1<<d|a<<h|o,zi=e}function df(e){e.return!==null&&(ss(e,1),ug(e,1,0))}function mf(e){for(;e===Ku;)Ku=Ma[--ja],Ma[ja]=null,tl=Ma[--ja],Ma[ja]=null;for(;e===zs;)zs=Wn[--Zn],Wn[Zn]=null,zi=Wn[--Zn],Wn[Zn]=null,Ui=Wn[--Zn],Wn[Zn]=null}function cg(e,n){Wn[Zn++]=Ui,Wn[Zn++]=zi,Wn[Zn++]=zs,Ui=n.id,zi=n.overflow,zs=e}var en=null,fe=null,Kt=!1,Bs=null,Jn=!1,pf=Error(r(519));function qs(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw el(Xn(n,e)),pf}function hg(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[Oe]=e,n[$e]=o,a){case"dialog":Ut("cancel",n),Ut("close",n);break;case"iframe":case"object":case"embed":Ut("load",n);break;case"video":case"audio":for(a=0;a<Sl.length;a++)Ut(Sl[a],n);break;case"source":Ut("error",n);break;case"img":case"image":case"link":Ut("error",n),Ut("load",n);break;case"details":Ut("toggle",n);break;case"input":Ut("invalid",n),wu(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ut("invalid",n);break;case"textarea":Ut("invalid",n),Os(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||C_(n.textContent,a)?(o.popover!=null&&(Ut("beforetoggle",n),Ut("toggle",n)),o.onScroll!=null&&Ut("scroll",n),o.onScrollEnd!=null&&Ut("scrollend",n),o.onClick!=null&&(n.onclick=ui),n=!0):n=!1,n||qs(e,!0)}function fg(e){for(en=e.return;en;)switch(en.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:en=en.return}}function La(e){if(e!==en)return!1;if(!Kt)return fg(e),Kt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Od(e.type,e.memoizedProps)),a=!a),a&&fe&&qs(e),fg(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));fe=L_(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));fe=L_(e)}else n===27?(n=fe,nr(e.type)?(e=Pd,Pd=null,fe=e):fe=n):fe=en?ei(e.stateNode.nextSibling):null;return!0}function Yr(){fe=en=null,Kt=!1}function gf(){var e=Bs;return e!==null&&(Rn===null?Rn=e:Rn.push.apply(Rn,e),Bs=null),e}function el(e){Bs===null?Bs=[e]:Bs.push(e)}var yf=D(null),Qr=null,rs=null;function Hs(e,n,a){X(yf,n._currentValue),n._currentValue=a}function as(e){e._currentValue=yf.current,U(yf)}function _f(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function vf(e,n,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=h;for(var O=0;O<n.length;O++)if(T.context===n[O]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),_f(d.return,a,e),o||(_=null);break t}d=T.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),_f(_,a,e),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===e){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Pa(e,n,a,o){e=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=h.type;Vn(h.pendingProps.value,_.value)||(e!==null?e.push(T):e=[T])}}else if(h===At.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Cl):e=[Cl])}h=h.return}e!==null&&vf(n,e,a,o),n.flags|=262144}function Yu(e){for(e=e.firstContext;e!==null;){if(!Vn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $r(e){Qr=e,rs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function nn(e){return dg(Qr,e)}function Qu(e,n){return Qr===null&&$r(e),dg(e,n)}function dg(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},rs===null){if(e===null)throw Error(r(308));rs=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else rs=rs.next=n;return a}var Ob=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Vb=s.unstable_scheduleCallback,Mb=s.unstable_NormalPriority,je={$$typeof:vt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ef(){return{controller:new Ob,data:new Map,refCount:0}}function nl(e){e.refCount--,e.refCount===0&&Vb(Mb,function(){e.controller.abort()})}var il=null,Tf=0,Ua=0,za=null;function jb(e,n){if(il===null){var a=il=[];Tf=0,Ua=Ad(),za={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Tf++,n.then(mg,mg),n}function mg(){if(--Tf===0&&il!==null){za!==null&&(za.status="fulfilled");var e=il;il=null,Ua=0,za=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Lb(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var pg=B.S;B.S=function(e,n){Zy=ie(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&jb(e,n),pg!==null&&pg(e,n)};var Xr=D(null);function bf(){var e=Xr.current;return e!==null?e:ue.pooledCache}function $u(e,n){n===null?X(Xr,Xr.current):X(Xr,n.pool)}function gg(){var e=bf();return e===null?null:{parent:je._currentValue,pool:e}}var Ba=Error(r(460)),Sf=Error(r(474)),Xu=Error(r(542)),Wu={then:function(){}};function yg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function _g(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(ui,ui),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Eg(e),e;default:if(typeof n.status=="string")n.then(ui,ui);else{if(e=ue,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Eg(e),e}throw Zr=n,Ba}}function Wr(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Zr=a,Ba):a}}var Zr=null;function vg(){if(Zr===null)throw Error(r(459));var e=Zr;return Zr=null,e}function Eg(e){if(e===Ba||e===Xu)throw Error(r(483))}var qa=null,sl=0;function Zu(e){var n=sl;return sl+=1,qa===null&&(qa=[]),_g(qa,e,n)}function rl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Ju(e,n){throw n.$$typeof===R?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Tg(e){function n(j,M){if(e){var q=j.deletions;q===null?(j.deletions=[M],j.flags|=16):q.push(M)}}function a(j,M){if(!e)return null;for(;M!==null;)n(j,M),M=M.sibling;return null}function o(j){for(var M=new Map;j!==null;)j.key!==null?M.set(j.key,j):M.set(j.index,j),j=j.sibling;return M}function h(j,M){return j=is(j,M),j.index=0,j.sibling=null,j}function d(j,M,q){return j.index=q,e?(q=j.alternate,q!==null?(q=q.index,q<M?(j.flags|=67108866,M):q):(j.flags|=67108866,M)):(j.flags|=1048576,M)}function _(j){return e&&j.alternate===null&&(j.flags|=67108866),j}function T(j,M,q,Z){return M===null||M.tag!==6?(M=hf(q,j.mode,Z),M.return=j,M):(M=h(M,q),M.return=j,M)}function O(j,M,q,Z){var Tt=q.type;return Tt===$?Q(j,M,q.props.children,Z,q.key):M!==null&&(M.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===S&&Wr(Tt)===M.type)?(M=h(M,q.props),rl(M,q),M.return=j,M):(M=Gu(q.type,q.key,q.props,null,j.mode,Z),rl(M,q),M.return=j,M)}function H(j,M,q,Z){return M===null||M.tag!==4||M.stateNode.containerInfo!==q.containerInfo||M.stateNode.implementation!==q.implementation?(M=ff(q,j.mode,Z),M.return=j,M):(M=h(M,q.children||[]),M.return=j,M)}function Q(j,M,q,Z,Tt){return M===null||M.tag!==7?(M=Kr(q,j.mode,Z,Tt),M.return=j,M):(M=h(M,q),M.return=j,M)}function et(j,M,q){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=hf(""+M,j.mode,q),M.return=j,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case P:return q=Gu(M.type,M.key,M.props,null,j.mode,q),rl(q,M),q.return=j,q;case W:return M=ff(M,j.mode,q),M.return=j,M;case S:return M=Wr(M),et(j,M,q)}if(lt(M)||C(M))return M=Kr(M,j.mode,q,null),M.return=j,M;if(typeof M.then=="function")return et(j,Zu(M),q);if(M.$$typeof===vt)return et(j,Qu(j,M),q);Ju(j,M)}return null}function F(j,M,q,Z){var Tt=M!==null?M.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Tt!==null?null:T(j,M,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case P:return q.key===Tt?O(j,M,q,Z):null;case W:return q.key===Tt?H(j,M,q,Z):null;case S:return q=Wr(q),F(j,M,q,Z)}if(lt(q)||C(q))return Tt!==null?null:Q(j,M,q,Z,null);if(typeof q.then=="function")return F(j,M,Zu(q),Z);if(q.$$typeof===vt)return F(j,M,Qu(j,q),Z);Ju(j,q)}return null}function K(j,M,q,Z,Tt){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return j=j.get(q)||null,T(M,j,""+Z,Tt);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:return j=j.get(Z.key===null?q:Z.key)||null,O(M,j,Z,Tt);case W:return j=j.get(Z.key===null?q:Z.key)||null,H(M,j,Z,Tt);case S:return Z=Wr(Z),K(j,M,q,Z,Tt)}if(lt(Z)||C(Z))return j=j.get(q)||null,Q(M,j,Z,Tt,null);if(typeof Z.then=="function")return K(j,M,q,Zu(Z),Tt);if(Z.$$typeof===vt)return K(j,M,q,Qu(M,Z),Tt);Ju(M,Z)}return null}function gt(j,M,q,Z){for(var Tt=null,$t=null,_t=M,jt=M=0,qt=null;_t!==null&&jt<q.length;jt++){_t.index>jt?(qt=_t,_t=null):qt=_t.sibling;var Xt=F(j,_t,q[jt],Z);if(Xt===null){_t===null&&(_t=qt);break}e&&_t&&Xt.alternate===null&&n(j,_t),M=d(Xt,M,jt),$t===null?Tt=Xt:$t.sibling=Xt,$t=Xt,_t=qt}if(jt===q.length)return a(j,_t),Kt&&ss(j,jt),Tt;if(_t===null){for(;jt<q.length;jt++)_t=et(j,q[jt],Z),_t!==null&&(M=d(_t,M,jt),$t===null?Tt=_t:$t.sibling=_t,$t=_t);return Kt&&ss(j,jt),Tt}for(_t=o(_t);jt<q.length;jt++)qt=K(_t,j,jt,q[jt],Z),qt!==null&&(e&&qt.alternate!==null&&_t.delete(qt.key===null?jt:qt.key),M=d(qt,M,jt),$t===null?Tt=qt:$t.sibling=qt,$t=qt);return e&&_t.forEach(function(or){return n(j,or)}),Kt&&ss(j,jt),Tt}function wt(j,M,q,Z){if(q==null)throw Error(r(151));for(var Tt=null,$t=null,_t=M,jt=M=0,qt=null,Xt=q.next();_t!==null&&!Xt.done;jt++,Xt=q.next()){_t.index>jt?(qt=_t,_t=null):qt=_t.sibling;var or=F(j,_t,Xt.value,Z);if(or===null){_t===null&&(_t=qt);break}e&&_t&&or.alternate===null&&n(j,_t),M=d(or,M,jt),$t===null?Tt=or:$t.sibling=or,$t=or,_t=qt}if(Xt.done)return a(j,_t),Kt&&ss(j,jt),Tt;if(_t===null){for(;!Xt.done;jt++,Xt=q.next())Xt=et(j,Xt.value,Z),Xt!==null&&(M=d(Xt,M,jt),$t===null?Tt=Xt:$t.sibling=Xt,$t=Xt);return Kt&&ss(j,jt),Tt}for(_t=o(_t);!Xt.done;jt++,Xt=q.next())Xt=K(_t,j,jt,Xt.value,Z),Xt!==null&&(e&&Xt.alternate!==null&&_t.delete(Xt.key===null?jt:Xt.key),M=d(Xt,M,jt),$t===null?Tt=Xt:$t.sibling=Xt,$t=Xt);return e&&_t.forEach(function(QS){return n(j,QS)}),Kt&&ss(j,jt),Tt}function oe(j,M,q,Z){if(typeof q=="object"&&q!==null&&q.type===$&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case P:t:{for(var Tt=q.key;M!==null;){if(M.key===Tt){if(Tt=q.type,Tt===$){if(M.tag===7){a(j,M.sibling),Z=h(M,q.props.children),Z.return=j,j=Z;break t}}else if(M.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===S&&Wr(Tt)===M.type){a(j,M.sibling),Z=h(M,q.props),rl(Z,q),Z.return=j,j=Z;break t}a(j,M);break}else n(j,M);M=M.sibling}q.type===$?(Z=Kr(q.props.children,j.mode,Z,q.key),Z.return=j,j=Z):(Z=Gu(q.type,q.key,q.props,null,j.mode,Z),rl(Z,q),Z.return=j,j=Z)}return _(j);case W:t:{for(Tt=q.key;M!==null;){if(M.key===Tt)if(M.tag===4&&M.stateNode.containerInfo===q.containerInfo&&M.stateNode.implementation===q.implementation){a(j,M.sibling),Z=h(M,q.children||[]),Z.return=j,j=Z;break t}else{a(j,M);break}else n(j,M);M=M.sibling}Z=ff(q,j.mode,Z),Z.return=j,j=Z}return _(j);case S:return q=Wr(q),oe(j,M,q,Z)}if(lt(q))return gt(j,M,q,Z);if(C(q)){if(Tt=C(q),typeof Tt!="function")throw Error(r(150));return q=Tt.call(q),wt(j,M,q,Z)}if(typeof q.then=="function")return oe(j,M,Zu(q),Z);if(q.$$typeof===vt)return oe(j,M,Qu(j,q),Z);Ju(j,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,M!==null&&M.tag===6?(a(j,M.sibling),Z=h(M,q),Z.return=j,j=Z):(a(j,M),Z=hf(q,j.mode,Z),Z.return=j,j=Z),_(j)):a(j,M)}return function(j,M,q,Z){try{sl=0;var Tt=oe(j,M,q,Z);return qa=null,Tt}catch(_t){if(_t===Ba||_t===Xu)throw _t;var $t=Mn(29,_t,null,j.mode);return $t.lanes=Z,$t.return=j,$t}}}var Jr=Tg(!0),bg=Tg(!1),Fs=!1;function Af(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Gs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ks(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Zt&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=Fu(e),rg(e,null,a),n}return Hu(e,o,n,a),Fu(e)}function al(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Oo(e,a)}}function xf(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=n:d=d.next=n}else h=d=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Rf=!1;function ol(){if(Rf){var e=za;if(e!==null)throw e}}function ll(e,n,a,o){Rf=!1;var h=e.updateQueue;Fs=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var O=T,H=O.next;O.next=null,_===null?d=H:_.next=H,_=O;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==_&&(T===null?Q.firstBaseUpdate=H:T.next=H,Q.lastBaseUpdate=O))}if(d!==null){var et=h.baseState;_=0,Q=H=O=null,T=d;do{var F=T.lane&-536870913,K=F!==T.lane;if(K?(Bt&F)===F:(o&F)===F){F!==0&&F===Ua&&(Rf=!0),Q!==null&&(Q=Q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var gt=e,wt=T;F=n;var oe=a;switch(wt.tag){case 1:if(gt=wt.payload,typeof gt=="function"){et=gt.call(oe,et,F);break t}et=gt;break t;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=wt.payload,F=typeof gt=="function"?gt.call(oe,et,F):gt,F==null)break t;et=w({},et,F);break t;case 2:Fs=!0}}F=T.callback,F!==null&&(e.flags|=64,K&&(e.flags|=8192),K=h.callbacks,K===null?h.callbacks=[F]:K.push(F))}else K={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(H=Q=K,O=et):Q=Q.next=K,_|=F;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;K=T,T=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);Q===null&&(O=et),h.baseState=O,h.firstBaseUpdate=H,h.lastBaseUpdate=Q,d===null&&(h.shared.lanes=0),Ws|=_,e.lanes=_,e.memoizedState=et}}function Sg(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function Ag(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Sg(a[e],n)}var Ha=D(null),tc=D(0);function wg(e,n){e=ps,X(tc,e),X(Ha,n),ps=e|n.baseLanes}function Cf(){X(tc,ps),X(Ha,Ha.current)}function If(){ps=tc.current,U(Ha),U(tc)}var jn=D(null),ti=null;function Ys(e){var n=e.alternate;X(xe,xe.current&1),X(jn,e),ti===null&&(n===null||Ha.current!==null||n.memoizedState!==null)&&(ti=e)}function Df(e){X(xe,xe.current),X(jn,e),ti===null&&(ti=e)}function xg(e){e.tag===22?(X(xe,xe.current),X(jn,e),ti===null&&(ti=e)):Qs()}function Qs(){X(xe,xe.current),X(jn,jn.current)}function Ln(e){U(jn),ti===e&&(ti=null),U(xe)}var xe=D(0);function ec(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||jd(a)||Ld(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var os=0,Vt=null,re=null,Le=null,nc=!1,Fa=!1,ta=!1,ic=0,ul=0,Ga=null,Pb=0;function Te(){throw Error(r(321))}function Nf(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Vn(e[a],n[a]))return!1;return!0}function kf(e,n,a,o,h,d){return os=d,Vt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,B.H=e===null||e.memoizedState===null?uy:Yf,ta=!1,d=a(o,h),ta=!1,Fa&&(d=Cg(n,a,o,h)),Rg(e),d}function Rg(e){B.H=fl;var n=re!==null&&re.next!==null;if(os=0,Le=re=Vt=null,nc=!1,ul=0,Ga=null,n)throw Error(r(300));e===null||Pe||(e=e.dependencies,e!==null&&Yu(e)&&(Pe=!0))}function Cg(e,n,a,o){Vt=e;var h=0;do{if(Fa&&(Ga=null),ul=0,Fa=!1,25<=h)throw Error(r(301));if(h+=1,Le=re=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}B.H=cy,d=n(a,o)}while(Fa);return d}function Ub(){var e=B.H,n=e.useState()[0];return n=typeof n.then=="function"?cl(n):n,e=e.useState()[0],(re!==null?re.memoizedState:null)!==e&&(Vt.flags|=1024),n}function Of(){var e=ic!==0;return ic=0,e}function Vf(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Mf(e){if(nc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}nc=!1}os=0,Le=re=Vt=null,Fa=!1,ul=ic=0,Ga=null}function _n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?Vt.memoizedState=Le=e:Le=Le.next=e,Le}function Re(){if(re===null){var e=Vt.alternate;e=e!==null?e.memoizedState:null}else e=re.next;var n=Le===null?Vt.memoizedState:Le.next;if(n!==null)Le=n,re=e;else{if(e===null)throw Vt.alternate===null?Error(r(467)):Error(r(310));re=e,e={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},Le===null?Vt.memoizedState=Le=e:Le=Le.next=e}return Le}function sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cl(e){var n=ul;return ul+=1,Ga===null&&(Ga=[]),e=_g(Ga,e,n),n=Vt,(Le===null?n.memoizedState:Le.next)===null&&(n=n.alternate,B.H=n===null||n.memoizedState===null?uy:Yf),e}function rc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return cl(e);if(e.$$typeof===vt)return nn(e)}throw Error(r(438,String(e)))}function jf(e){var n=null,a=Vt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Vt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=sc(),Vt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=V;return n.index++,a}function ls(e,n){return typeof n=="function"?n(e):n}function ac(e){var n=Re();return Lf(n,re,e)}function Lf(e,n,a){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=e.baseQueue,d=o.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}n.baseQueue=h=d,o.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{n=h.next;var T=_=null,O=null,H=n,Q=!1;do{var et=H.lane&-536870913;if(et!==H.lane?(Bt&et)===et:(os&et)===et){var F=H.revertLane;if(F===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),et===Ua&&(Q=!0);else if((os&F)===F){H=H.next,F===Ua&&(Q=!0);continue}else et={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(T=O=et,_=d):O=O.next=et,Vt.lanes|=F,Ws|=F;et=H.action,ta&&a(d,et),d=H.hasEagerState?H.eagerState:a(d,et)}else F={lane:et,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(T=O=F,_=d):O=O.next=F,Vt.lanes|=et,Ws|=et;H=H.next}while(H!==null&&H!==n);if(O===null?_=d:O.next=T,!Vn(d,e.memoizedState)&&(Pe=!0,Q&&(a=za,a!==null)))throw a;e.memoizedState=d,e.baseState=_,e.baseQueue=O,o.lastRenderedState=d}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Pf(e){var n=Re(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,d=n.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=e(d,_.action),_=_.next;while(_!==h);Vn(d,n.memoizedState)||(Pe=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,o]}function Ig(e,n,a){var o=Vt,h=Re(),d=Kt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=n();var _=!Vn((re||h).memoizedState,a);if(_&&(h.memoizedState=a,Pe=!0),h=h.queue,Bf(kg.bind(null,o,h,e),[e]),h.getSnapshot!==n||_||Le!==null&&Le.memoizedState.tag&1){if(o.flags|=2048,Ka(9,{destroy:void 0},Ng.bind(null,o,h,a,n),null),ue===null)throw Error(r(349));d||(os&127)!==0||Dg(o,n,a)}return a}function Dg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=Vt.updateQueue,n===null?(n=sc(),Vt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Ng(e,n,a,o){n.value=a,n.getSnapshot=o,Og(n)&&Vg(e)}function kg(e,n,a){return a(function(){Og(n)&&Vg(e)})}function Og(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Vn(e,a)}catch{return!0}}function Vg(e){var n=Gr(e,2);n!==null&&Cn(n,e,2)}function Uf(e){var n=_n();if(typeof e=="function"){var a=e;if(e=a(),ta){Fn(!0);try{a()}finally{Fn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:e},n}function Mg(e,n,a,o){return e.baseState=a,Lf(e,re,typeof o=="function"?o:ls)}function zb(e,n,a,o,h){if(uc(e))throw Error(r(485));if(e=n.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};B.T!==null?a(!0):d.isTransition=!1,o(d),a=n.pending,a===null?(d.next=n.pending=d,jg(n,d)):(d.next=a.next,n.pending=a.next=d)}}function jg(e,n){var a=n.action,o=n.payload,h=e.state;if(n.isTransition){var d=B.T,_={};B.T=_;try{var T=a(h,o),O=B.S;O!==null&&O(_,T),Lg(e,n,T)}catch(H){zf(e,n,H)}finally{d!==null&&_.types!==null&&(d.types=_.types),B.T=d}}else try{d=a(h,o),Lg(e,n,d)}catch(H){zf(e,n,H)}}function Lg(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Pg(e,n,o)},function(o){return zf(e,n,o)}):Pg(e,n,a)}function Pg(e,n,a){n.status="fulfilled",n.value=a,Ug(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,jg(e,a)))}function zf(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Ug(n),n=n.next;while(n!==o)}e.action=null}function Ug(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function zg(e,n){return n}function Bg(e,n){if(Kt){var a=ue.formState;if(a!==null){t:{var o=Vt;if(Kt){if(fe){e:{for(var h=fe,d=Jn;h.nodeType!==8;){if(!d){h=null;break e}if(h=ei(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){fe=ei(h.nextSibling),o=h.data==="F!";break t}}qs(o)}o=!1}o&&(n=a[0])}}return a=_n(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zg,lastRenderedState:n},a.queue=o,a=ay.bind(null,Vt,o),o.dispatch=a,o=Uf(!1),d=Kf.bind(null,Vt,!1,o.queue),o=_n(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,a=zb.bind(null,Vt,h,d,a),h.dispatch=a,o.memoizedState=e,[n,a,!1]}function qg(e){var n=Re();return Hg(n,re,e)}function Hg(e,n,a){if(n=Lf(e,n,zg)[0],e=ac(ls)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=cl(n)}catch(_){throw _===Ba?Xu:_}else o=n;n=Re();var h=n.queue,d=h.dispatch;return a!==n.memoizedState&&(Vt.flags|=2048,Ka(9,{destroy:void 0},Bb.bind(null,h,a),null)),[o,d,e]}function Bb(e,n){e.action=n}function Fg(e){var n=Re(),a=re;if(a!==null)return Hg(n,a,e);Re(),n=n.memoizedState,a=Re();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function Ka(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=Vt.updateQueue,n===null&&(n=sc(),Vt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Gg(){return Re().memoizedState}function oc(e,n,a,o){var h=_n();Vt.flags|=e,h.memoizedState=Ka(1|n,{destroy:void 0},a,o===void 0?null:o)}function lc(e,n,a,o){var h=Re();o=o===void 0?null:o;var d=h.memoizedState.inst;re!==null&&o!==null&&Nf(o,re.memoizedState.deps)?h.memoizedState=Ka(n,d,a,o):(Vt.flags|=e,h.memoizedState=Ka(1|n,d,a,o))}function Kg(e,n){oc(8390656,8,e,n)}function Bf(e,n){lc(2048,8,e,n)}function qb(e){Vt.flags|=4;var n=Vt.updateQueue;if(n===null)n=sc(),Vt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Yg(e){var n=Re().memoizedState;return qb({ref:n,nextImpl:e}),function(){if((Zt&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function Qg(e,n){return lc(4,2,e,n)}function $g(e,n){return lc(4,4,e,n)}function Xg(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Wg(e,n,a){a=a!=null?a.concat([e]):null,lc(4,4,Xg.bind(null,n,e),a)}function qf(){}function Zg(e,n){var a=Re();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&Nf(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Jg(e,n){var a=Re();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&Nf(n,o[1]))return o[0];if(o=e(),ta){Fn(!0);try{e()}finally{Fn(!1)}}return a.memoizedState=[o,n],o}function Hf(e,n,a){return a===void 0||(os&1073741824)!==0&&(Bt&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=t_(),Vt.lanes|=e,Ws|=e,a)}function ty(e,n,a,o){return Vn(a,n)?a:Ha.current!==null?(e=Hf(e,a,o),Vn(e,n)||(Pe=!0),e):(os&42)===0||(os&1073741824)!==0&&(Bt&261930)===0?(Pe=!0,e.memoizedState=a):(e=t_(),Vt.lanes|=e,Ws|=e,n)}function ey(e,n,a,o,h){var d=nt.p;nt.p=d!==0&&8>d?d:8;var _=B.T,T={};B.T=T,Kf(e,!1,n,a);try{var O=h(),H=B.S;if(H!==null&&H(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Q=Lb(O,o);hl(e,n,Q,zn(e))}else hl(e,n,o,zn(e))}catch(et){hl(e,n,{then:function(){},status:"rejected",reason:et},zn())}finally{nt.p=d,_!==null&&T.types!==null&&(_.types=T.types),B.T=_}}function Hb(){}function Ff(e,n,a,o){if(e.tag!==5)throw Error(r(476));var h=ny(e).queue;ey(e,h,n,L,a===null?Hb:function(){return iy(e),a(o)})}function ny(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:L},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function iy(e){var n=ny(e);n.next===null&&(n=e.alternate.memoizedState),hl(e,n.next.queue,{},zn())}function Gf(){return nn(Cl)}function sy(){return Re().memoizedState}function ry(){return Re().memoizedState}function Fb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=zn();e=Gs(a);var o=Ks(n,e,a);o!==null&&(Cn(o,n,a),al(o,n,a)),n={cache:Ef()},e.payload=n;return}n=n.return}}function Gb(e,n,a){var o=zn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},uc(e)?oy(n,a):(a=uf(e,n,a,o),a!==null&&(Cn(a,e,o),ly(a,n,o)))}function ay(e,n,a){var o=zn();hl(e,n,a,o)}function hl(e,n,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(uc(e))oy(n,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var _=n.lastRenderedState,T=d(_,a);if(h.hasEagerState=!0,h.eagerState=T,Vn(T,_))return Hu(e,n,h,0),ue===null&&qu(),!1}catch{}if(a=uf(e,n,h,o),a!==null)return Cn(a,e,o),ly(a,n,o),!0}return!1}function Kf(e,n,a,o){if(o={lane:2,revertLane:Ad(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},uc(e)){if(n)throw Error(r(479))}else n=uf(e,a,o,2),n!==null&&Cn(n,e,2)}function uc(e){var n=e.alternate;return e===Vt||n!==null&&n===Vt}function oy(e,n){Fa=nc=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function ly(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Oo(e,a)}}var fl={readContext:nn,use:rc,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useLayoutEffect:Te,useInsertionEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useSyncExternalStore:Te,useId:Te,useHostTransitionStatus:Te,useFormState:Te,useActionState:Te,useOptimistic:Te,useMemoCache:Te,useCacheRefresh:Te};fl.useEffectEvent=Te;var uy={readContext:nn,use:rc,useCallback:function(e,n){return _n().memoizedState=[e,n===void 0?null:n],e},useContext:nn,useEffect:Kg,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,oc(4194308,4,Xg.bind(null,n,e),a)},useLayoutEffect:function(e,n){return oc(4194308,4,e,n)},useInsertionEffect:function(e,n){oc(4,2,e,n)},useMemo:function(e,n){var a=_n();n=n===void 0?null:n;var o=e();if(ta){Fn(!0);try{e()}finally{Fn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=_n();if(a!==void 0){var h=a(n);if(ta){Fn(!0);try{a(n)}finally{Fn(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=Gb.bind(null,Vt,e),[o.memoizedState,e]},useRef:function(e){var n=_n();return e={current:e},n.memoizedState=e},useState:function(e){e=Uf(e);var n=e.queue,a=ay.bind(null,Vt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:qf,useDeferredValue:function(e,n){var a=_n();return Hf(a,e,n)},useTransition:function(){var e=Uf(!1);return e=ey.bind(null,Vt,e.queue,!0,!1),_n().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=Vt,h=_n();if(Kt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),ue===null)throw Error(r(349));(Bt&127)!==0||Dg(o,n,a)}h.memoizedState=a;var d={value:a,getSnapshot:n};return h.queue=d,Kg(kg.bind(null,o,d,e),[e]),o.flags|=2048,Ka(9,{destroy:void 0},Ng.bind(null,o,d,a,n),null),a},useId:function(){var e=_n(),n=ue.identifierPrefix;if(Kt){var a=zi,o=Ui;a=(o&~(1<<32-Ae(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=ic++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Pb++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Gf,useFormState:Bg,useActionState:Bg,useOptimistic:function(e){var n=_n();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Kf.bind(null,Vt,!0,a),a.dispatch=n,[e,n]},useMemoCache:jf,useCacheRefresh:function(){return _n().memoizedState=Fb.bind(null,Vt)},useEffectEvent:function(e){var n=_n(),a={impl:e};return n.memoizedState=a,function(){if((Zt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Yf={readContext:nn,use:rc,useCallback:Zg,useContext:nn,useEffect:Bf,useImperativeHandle:Wg,useInsertionEffect:Qg,useLayoutEffect:$g,useMemo:Jg,useReducer:ac,useRef:Gg,useState:function(){return ac(ls)},useDebugValue:qf,useDeferredValue:function(e,n){var a=Re();return ty(a,re.memoizedState,e,n)},useTransition:function(){var e=ac(ls)[0],n=Re().memoizedState;return[typeof e=="boolean"?e:cl(e),n]},useSyncExternalStore:Ig,useId:sy,useHostTransitionStatus:Gf,useFormState:qg,useActionState:qg,useOptimistic:function(e,n){var a=Re();return Mg(a,re,e,n)},useMemoCache:jf,useCacheRefresh:ry};Yf.useEffectEvent=Yg;var cy={readContext:nn,use:rc,useCallback:Zg,useContext:nn,useEffect:Bf,useImperativeHandle:Wg,useInsertionEffect:Qg,useLayoutEffect:$g,useMemo:Jg,useReducer:Pf,useRef:Gg,useState:function(){return Pf(ls)},useDebugValue:qf,useDeferredValue:function(e,n){var a=Re();return re===null?Hf(a,e,n):ty(a,re.memoizedState,e,n)},useTransition:function(){var e=Pf(ls)[0],n=Re().memoizedState;return[typeof e=="boolean"?e:cl(e),n]},useSyncExternalStore:Ig,useId:sy,useHostTransitionStatus:Gf,useFormState:Fg,useActionState:Fg,useOptimistic:function(e,n){var a=Re();return re!==null?Mg(a,re,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:jf,useCacheRefresh:ry};cy.useEffectEvent=Yg;function Qf(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:w({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var $f={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=zn(),h=Gs(o);h.payload=n,a!=null&&(h.callback=a),n=Ks(e,h,o),n!==null&&(Cn(n,e,o),al(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=zn(),h=Gs(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Ks(e,h,o),n!==null&&(Cn(n,e,o),al(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=zn(),o=Gs(a);o.tag=2,n!=null&&(o.callback=n),n=Ks(e,o,a),n!==null&&(Cn(n,e,a),al(n,e,a))}};function hy(e,n,a,o,h,d,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,_):n.prototype&&n.prototype.isPureReactComponent?!Zo(a,o)||!Zo(h,d):!0}function fy(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&$f.enqueueReplaceState(n,n.state,null)}function ea(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=w({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function dy(e){Bu(e)}function my(e){console.error(e)}function py(e){Bu(e)}function cc(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function gy(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Xf(e,n,a){return a=Gs(a),a.tag=3,a.payload={element:null},a.callback=function(){cc(e,n)},a}function yy(e){return e=Gs(e),e.tag=3,e}function _y(e,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;e.payload=function(){return h(d)},e.callback=function(){gy(n,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){gy(n,a,o),typeof h!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function Kb(e,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Pa(n,a,h,!0),a=jn.current,a!==null){switch(a.tag){case 31:case 13:return ti===null?bc():a.alternate===null&&be===0&&(be=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Wu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Td(e,o,h)),!1;case 22:return a.flags|=65536,o===Wu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Td(e,o,h)),!1}throw Error(r(435,a.tag))}return Td(e,o,h),bc(),!1}if(Kt)return n=jn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==pf&&(e=Error(r(422),{cause:o}),el(Xn(e,a)))):(o!==pf&&(n=Error(r(423),{cause:o}),el(Xn(n,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Xn(o,a),h=Xf(e.stateNode,o,h),xf(e,h),be!==4&&(be=2)),!1;var d=Error(r(520),{cause:o});if(d=Xn(d,a),El===null?El=[d]:El.push(d),be!==4&&(be=2),n===null)return!0;o=Xn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Xf(a.stateNode,o,e),xf(a,e),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Zs===null||!Zs.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=yy(h),_y(h,e,a,o),xf(a,h),!1}a=a.return}while(a!==null);return!1}var Wf=Error(r(461)),Pe=!1;function sn(e,n,a,o){n.child=e===null?bg(n,null,a,o):Jr(n,e.child,a,o)}function vy(e,n,a,o,h){a=a.render;var d=n.ref;if("ref"in o){var _={};for(var T in o)T!=="ref"&&(_[T]=o[T])}else _=o;return $r(n),o=kf(e,n,a,_,d,h),T=Of(),e!==null&&!Pe?(Vf(e,n,h),us(e,n,h)):(Kt&&T&&df(n),n.flags|=1,sn(e,n,o,h),n.child)}function Ey(e,n,a,o,h){if(e===null){var d=a.type;return typeof d=="function"&&!cf(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,Ty(e,n,d,o,h)):(e=Gu(a.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!rd(e,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Zo,a(_,o)&&e.ref===n.ref)return us(e,n,h)}return n.flags|=1,e=is(d,o),e.ref=n.ref,e.return=n,n.child=e}function Ty(e,n,a,o,h){if(e!==null){var d=e.memoizedProps;if(Zo(d,o)&&e.ref===n.ref)if(Pe=!1,n.pendingProps=o=d,rd(e,h))(e.flags&131072)!==0&&(Pe=!0);else return n.lanes=e.lanes,us(e,n,h)}return Zf(e,n,a,o,h)}function by(e,n,a,o){var h=o.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(o=n.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,n.child=null;return Sy(e,n,d,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&$u(n,d!==null?d.cachePool:null),d!==null?wg(n,d):Cf(),xg(n);else return o=n.lanes=536870912,Sy(e,n,d!==null?d.baseLanes|a:a,a,o)}else d!==null?($u(n,d.cachePool),wg(n,d),Qs(),n.memoizedState=null):(e!==null&&$u(n,null),Cf(),Qs());return sn(e,n,h,a),n.child}function dl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Sy(e,n,a,o,h){var d=bf();return d=d===null?null:{parent:je._currentValue,pool:d},n.memoizedState={baseLanes:a,cachePool:d},e!==null&&$u(n,null),Cf(),xg(n),e!==null&&Pa(e,n,o,!0),n.childLanes=h,null}function hc(e,n){return n=dc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Ay(e,n,a){return Jr(n,e.child,null,a),e=hc(n,n.pendingProps),e.flags|=2,Ln(n),n.memoizedState=null,e}function Yb(e,n,a){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Kt){if(o.mode==="hidden")return e=hc(n,o),n.lanes=536870912,dl(null,e);if(Df(n),(e=fe)?(e=j_(e,Jn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:zs!==null?{id:Ui,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},a=og(e),a.return=n,n.child=a,en=n,fe=null)):e=null,e===null)throw qs(n);return n.lanes=536870912,null}return hc(n,o)}var d=e.memoizedState;if(d!==null){var _=d.dehydrated;if(Df(n),h)if(n.flags&256)n.flags&=-257,n=Ay(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(Pe||Pa(e,n,a,!1),h=(a&e.childLanes)!==0,Pe||h){if(o=ue,o!==null&&(_=Vo(o,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Gr(e,_),Cn(o,e,_),Wf;bc(),n=Ay(e,n,a)}else e=d.treeContext,fe=ei(_.nextSibling),en=n,Kt=!0,Bs=null,Jn=!1,e!==null&&cg(n,e),n=hc(n,o),n.flags|=4096;return n}return e=is(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function fc(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Zf(e,n,a,o,h){return $r(n),a=kf(e,n,a,o,void 0,h),o=Of(),e!==null&&!Pe?(Vf(e,n,h),us(e,n,h)):(Kt&&o&&df(n),n.flags|=1,sn(e,n,a,h),n.child)}function wy(e,n,a,o,h,d){return $r(n),n.updateQueue=null,a=Cg(n,o,a,h),Rg(e),o=Of(),e!==null&&!Pe?(Vf(e,n,d),us(e,n,d)):(Kt&&o&&df(n),n.flags|=1,sn(e,n,a,d),n.child)}function xy(e,n,a,o,h){if($r(n),n.stateNode===null){var d=Va,_=a.contextType;typeof _=="object"&&_!==null&&(d=nn(_)),d=new a(o,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=$f,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=o,d.state=n.memoizedState,d.refs={},Af(n),_=a.contextType,d.context=typeof _=="object"&&_!==null?nn(_):Va,d.state=n.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Qf(n,a,_,o),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&$f.enqueueReplaceState(d,d.state,null),ll(n,o,d,h),ol(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){d=n.stateNode;var T=n.memoizedProps,O=ea(a,T);d.props=O;var H=d.context,Q=a.contextType;_=Va,typeof Q=="object"&&Q!==null&&(_=nn(Q));var et=a.getDerivedStateFromProps;Q=typeof et=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||H!==_)&&fy(n,d,o,_),Fs=!1;var F=n.memoizedState;d.state=F,ll(n,o,d,h),ol(),H=n.memoizedState,T||F!==H||Fs?(typeof et=="function"&&(Qf(n,a,et,o),H=n.memoizedState),(O=Fs||hy(n,a,O,o,F,H,_))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=H),d.props=o,d.state=H,d.context=_,o=O):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{d=n.stateNode,wf(e,n),_=n.memoizedProps,Q=ea(a,_),d.props=Q,et=n.pendingProps,F=d.context,H=a.contextType,O=Va,typeof H=="object"&&H!==null&&(O=nn(H)),T=a.getDerivedStateFromProps,(H=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==et||F!==O)&&fy(n,d,o,O),Fs=!1,F=n.memoizedState,d.state=F,ll(n,o,d,h),ol();var K=n.memoizedState;_!==et||F!==K||Fs||e!==null&&e.dependencies!==null&&Yu(e.dependencies)?(typeof T=="function"&&(Qf(n,a,T,o),K=n.memoizedState),(Q=Fs||hy(n,a,Q,o,F,K,O)||e!==null&&e.dependencies!==null&&Yu(e.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,K,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,K,O)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=K),d.props=o,d.state=K,d.context=O,o=Q):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(n.flags|=1024),o=!1)}return d=o,fc(e,n),o=(n.flags&128)!==0,d||o?(d=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&o?(n.child=Jr(n,e.child,null,h),n.child=Jr(n,null,a,h)):sn(e,n,a,h),n.memoizedState=d.state,e=n.child):e=us(e,n,h),e}function Ry(e,n,a,o){return Yr(),n.flags|=256,sn(e,n,a,o),n.child}var Jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function td(e){return{baseLanes:e,cachePool:gg()}}function ed(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Un),e}function Cy(e,n,a){var o=n.pendingProps,h=!1,d=(n.flags&128)!==0,_;if((_=d)||(_=e!==null&&e.memoizedState===null?!1:(xe.current&2)!==0),_&&(h=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,e===null){if(Kt){if(h?Ys(n):Qs(),(e=fe)?(e=j_(e,Jn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:zs!==null?{id:Ui,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},a=og(e),a.return=n,n.child=a,en=n,fe=null)):e=null,e===null)throw qs(n);return Ld(e)?n.lanes=32:n.lanes=536870912,null}var T=o.children;return o=o.fallback,h?(Qs(),h=n.mode,T=dc({mode:"hidden",children:T},h),o=Kr(o,h,a,null),T.return=n,o.return=n,T.sibling=o,n.child=T,o=n.child,o.memoizedState=td(a),o.childLanes=ed(e,_,a),n.memoizedState=Jf,dl(null,o)):(Ys(n),nd(n,T))}var O=e.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(d)n.flags&256?(Ys(n),n.flags&=-257,n=id(e,n,a)):n.memoizedState!==null?(Qs(),n.child=e.child,n.flags|=128,n=null):(Qs(),T=o.fallback,h=n.mode,o=dc({mode:"visible",children:o.children},h),T=Kr(T,h,a,null),T.flags|=2,o.return=n,T.return=n,o.sibling=T,n.child=o,Jr(n,e.child,null,a),o=n.child,o.memoizedState=td(a),o.childLanes=ed(e,_,a),n.memoizedState=Jf,n=dl(null,o));else if(Ys(n),Ld(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var H=_.dgst;_=H,o=Error(r(419)),o.stack="",o.digest=_,el({value:o,source:null,stack:null}),n=id(e,n,a)}else if(Pe||Pa(e,n,a,!1),_=(a&e.childLanes)!==0,Pe||_){if(_=ue,_!==null&&(o=Vo(_,a),o!==0&&o!==O.retryLane))throw O.retryLane=o,Gr(e,o),Cn(_,e,o),Wf;jd(T)||bc(),n=id(e,n,a)}else jd(T)?(n.flags|=192,n.child=e.child,n=null):(e=O.treeContext,fe=ei(T.nextSibling),en=n,Kt=!0,Bs=null,Jn=!1,e!==null&&cg(n,e),n=nd(n,o.children),n.flags|=4096);return n}return h?(Qs(),T=o.fallback,h=n.mode,O=e.child,H=O.sibling,o=is(O,{mode:"hidden",children:o.children}),o.subtreeFlags=O.subtreeFlags&65011712,H!==null?T=is(H,T):(T=Kr(T,h,a,null),T.flags|=2),T.return=n,o.return=n,o.sibling=T,n.child=o,dl(null,o),o=n.child,T=e.child.memoizedState,T===null?T=td(a):(h=T.cachePool,h!==null?(O=je._currentValue,h=h.parent!==O?{parent:O,pool:O}:h):h=gg(),T={baseLanes:T.baseLanes|a,cachePool:h}),o.memoizedState=T,o.childLanes=ed(e,_,a),n.memoizedState=Jf,dl(e.child,o)):(Ys(n),a=e.child,e=a.sibling,a=is(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(_=n.deletions,_===null?(n.deletions=[e],n.flags|=16):_.push(e)),n.child=a,n.memoizedState=null,a)}function nd(e,n){return n=dc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function dc(e,n){return e=Mn(22,e,null,n),e.lanes=0,e}function id(e,n,a){return Jr(n,e.child,null,a),e=nd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Iy(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),_f(e.return,n,a)}function sd(e,n,a,o,h,d){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:d}:(_.isBackwards=n,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=a,_.tailMode=h,_.treeForkCount=d)}function Dy(e,n,a){var o=n.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var _=xe.current,T=(_&2)!==0;if(T?(_=_&1|2,n.flags|=128):_&=1,X(xe,_),sn(e,n,o,a),o=Kt?tl:0,!T&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Iy(e,a,n);else if(e.tag===19)Iy(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)e=a.alternate,e!==null&&ec(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),sd(n,!1,h,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&ec(e)===null){n.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}sd(n,!0,a,null,d,o);break;case"together":sd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function us(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Ws|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Pa(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=is(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=is(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function rd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Yu(e)))}function Qb(e,n,a){switch(n.tag){case 3:Yt(n,n.stateNode.containerInfo),Hs(n,je,e.memoizedState.cache),Yr();break;case 27:case 5:le(n);break;case 4:Yt(n,n.stateNode.containerInfo);break;case 10:Hs(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Df(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ys(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Cy(e,n,a):(Ys(n),e=us(e,n,a),e!==null?e.sibling:null);Ys(n);break;case 19:var h=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Pa(e,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return Dy(e,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),X(xe,xe.current),o)break;return null;case 22:return n.lanes=0,by(e,n,a,n.pendingProps);case 24:Hs(n,je,e.memoizedState.cache)}return us(e,n,a)}function Ny(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)Pe=!0;else{if(!rd(e,a)&&(n.flags&128)===0)return Pe=!1,Qb(e,n,a);Pe=(e.flags&131072)!==0}else Pe=!1,Kt&&(n.flags&1048576)!==0&&ug(n,tl,n.index);switch(n.lanes=0,n.tag){case 16:t:{var o=n.pendingProps;if(e=Wr(n.elementType),n.type=e,typeof e=="function")cf(e)?(o=ea(e,o),n.tag=1,n=xy(null,n,e,o,a)):(n.tag=0,n=Zf(null,n,e,o,a));else{if(e!=null){var h=e.$$typeof;if(h===Mt){n.tag=11,n=vy(null,n,e,o,a);break t}else if(h===N){n.tag=14,n=Ey(null,n,e,o,a);break t}}throw n=Et(e)||e,Error(r(306,n,""))}}return n;case 0:return Zf(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=ea(o,n.pendingProps),xy(e,n,o,h,a);case 3:t:{if(Yt(n,n.stateNode.containerInfo),e===null)throw Error(r(387));o=n.pendingProps;var d=n.memoizedState;h=d.element,wf(e,n),ll(n,o,null,a);var _=n.memoizedState;if(o=_.cache,Hs(n,je,o),o!==d.cache&&vf(n,[je],a,!0),ol(),o=_.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=Ry(e,n,o,a);break t}else if(o!==h){h=Xn(Error(r(424)),n),el(h),n=Ry(e,n,o,a);break t}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,fe=ei(e.firstChild),en=n,Kt=!0,Bs=null,Jn=!0,a=bg(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Yr(),o===h){n=us(e,n,a);break t}sn(e,n,o,a)}n=n.child}return n;case 26:return fc(e,n),e===null?(a=q_(n.type,null,n.pendingProps,null))?n.memoizedState=a:Kt||(a=n.type,e=n.pendingProps,o=Ic(pt.current).createElement(a),o[Oe]=n,o[$e]=e,rn(o,a,e),Ve(o),n.stateNode=o):n.memoizedState=q_(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return le(n),e===null&&Kt&&(o=n.stateNode=U_(n.type,n.pendingProps,pt.current),en=n,Jn=!0,h=fe,nr(n.type)?(Pd=h,fe=ei(o.firstChild)):fe=h),sn(e,n,n.pendingProps.children,a),fc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Kt&&((h=o=fe)&&(o=AS(o,n.type,n.pendingProps,Jn),o!==null?(n.stateNode=o,en=n,fe=ei(o.firstChild),Jn=!1,h=!0):h=!1),h||qs(n)),le(n),h=n.type,d=n.pendingProps,_=e!==null?e.memoizedProps:null,o=d.children,Od(h,d)?o=null:_!==null&&Od(h,_)&&(n.flags|=32),n.memoizedState!==null&&(h=kf(e,n,Ub,null,null,a),Cl._currentValue=h),fc(e,n),sn(e,n,o,a),n.child;case 6:return e===null&&Kt&&((e=a=fe)&&(a=wS(a,n.pendingProps,Jn),a!==null?(n.stateNode=a,en=n,fe=null,e=!0):e=!1),e||qs(n)),null;case 13:return Cy(e,n,a);case 4:return Yt(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Jr(n,null,o,a):sn(e,n,o,a),n.child;case 11:return vy(e,n,n.type,n.pendingProps,a);case 7:return sn(e,n,n.pendingProps,a),n.child;case 8:return sn(e,n,n.pendingProps.children,a),n.child;case 12:return sn(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,Hs(n,n.type,o.value),sn(e,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,$r(n),h=nn(h),o=o(h),n.flags|=1,sn(e,n,o,a),n.child;case 14:return Ey(e,n,n.type,n.pendingProps,a);case 15:return Ty(e,n,n.type,n.pendingProps,a);case 19:return Dy(e,n,a);case 31:return Yb(e,n,a);case 22:return by(e,n,a,n.pendingProps);case 24:return $r(n),o=nn(je),e===null?(h=bf(),h===null&&(h=ue,d=Ef(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),n.memoizedState={parent:o,cache:h},Af(n),Hs(n,je,h)):((e.lanes&a)!==0&&(wf(e,n),ll(n,null,null,a),ol()),h=e.memoizedState,d=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Hs(n,je,o)):(o=d.cache,Hs(n,je,o),o!==h.cache&&vf(n,[je],a,!0))),sn(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function cs(e){e.flags|=4}function ad(e,n,a,o,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(s_())e.flags|=8192;else throw Zr=Wu,Sf}else e.flags&=-16777217}function ky(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Y_(n))if(s_())e.flags|=8192;else throw Zr=Wu,Sf}function mc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Eu():536870912,e.lanes|=n,Xa|=n)}function ml(e,n){if(!Kt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function de(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function $b(e,n,a){var o=n.pendingProps;switch(mf(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(n),null;case 1:return de(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),as(je),Lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(La(n)?cs(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gf())),de(n),null;case 26:var h=n.type,d=n.memoizedState;return e===null?(cs(n),d!==null?(de(n),ky(n,d)):(de(n),ad(n,h,null,o,a))):d?d!==e.memoizedState?(cs(n),de(n),ky(n,d)):(de(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&cs(n),de(n),ad(n,h,e,o,a)),null;case 27:if(Je(n),a=pt.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&cs(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return de(n),null}e=ot.current,La(n)?hg(n):(e=U_(h,o,a),n.stateNode=e,cs(n))}return de(n),null;case 5:if(Je(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&cs(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return de(n),null}if(d=ot.current,La(n))hg(n);else{var _=Ic(pt.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?_.createElement(h,{is:o.is}):_.createElement(h)}}d[Oe]=n,d[$e]=o;t:for(_=n.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===n)break t;for(;_.sibling===null;){if(_.return===null||_.return===n)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}n.stateNode=d;t:switch(rn(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&cs(n)}}return de(n),ad(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&cs(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(r(166));if(e=pt.current,La(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,h=en,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Oe]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||C_(e.nodeValue,a)),e||qs(n,!0)}else e=Ic(e).createTextNode(o),e[Oe]=n,n.stateNode=e}return de(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=La(n),a!==null){if(e===null){if(!o)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Oe]=n}else Yr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;de(n),e=!1}else a=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Ln(n),n):(Ln(n),null);if((n.flags&128)!==0)throw Error(r(558))}return de(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=La(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Oe]=n}else Yr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;de(n),h=!1}else h=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Ln(n),n):(Ln(n),null)}return Ln(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),mc(n,n.updateQueue),de(n),null);case 4:return Lt(),e===null&&Cd(n.stateNode.containerInfo),de(n),null;case 10:return as(n.type),de(n),null;case 19:if(U(xe),o=n.memoizedState,o===null)return de(n),null;if(h=(n.flags&128)!==0,d=o.rendering,d===null)if(h)ml(o,!1);else{if(be!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=ec(e),d!==null){for(n.flags|=128,ml(o,!1),e=d.updateQueue,n.updateQueue=e,mc(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)ag(a,e),a=a.sibling;return X(xe,xe.current&1|2),Kt&&ss(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&ie()>vc&&(n.flags|=128,h=!0,ml(o,!1),n.lanes=4194304)}else{if(!h)if(e=ec(d),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,mc(n,e),ml(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Kt)return de(n),null}else 2*ie()-o.renderingStartTime>vc&&a!==536870912&&(n.flags|=128,h=!0,ml(o,!1),n.lanes=4194304);o.isBackwards?(d.sibling=n.child,n.child=d):(e=o.last,e!==null?e.sibling=d:n.child=d,o.last=d)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ie(),e.sibling=null,a=xe.current,X(xe,h?a&1|2:a&1),Kt&&ss(n,o.treeForkCount),e):(de(n),null);case 22:case 23:return Ln(n),If(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(de(n),n.subtreeFlags&6&&(n.flags|=8192)):de(n),a=n.updateQueue,a!==null&&mc(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&U(Xr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),as(je),de(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function Xb(e,n){switch(mf(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return as(je),Lt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Je(n),null;case 31:if(n.memoizedState!==null){if(Ln(n),n.alternate===null)throw Error(r(340));Yr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Ln(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Yr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return U(xe),null;case 4:return Lt(),null;case 10:return as(n.type),null;case 22:case 23:return Ln(n),If(),e!==null&&U(Xr),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return as(je),null;case 25:return null;default:return null}}function Oy(e,n){switch(mf(n),n.tag){case 3:as(je),Lt();break;case 26:case 27:case 5:Je(n);break;case 4:Lt();break;case 31:n.memoizedState!==null&&Ln(n);break;case 13:Ln(n);break;case 19:U(xe);break;case 10:as(n.type);break;case 22:case 23:Ln(n),If(),e!==null&&U(Xr);break;case 24:as(je)}}function pl(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var d=a.create,_=a.inst;o=d(),_.destroy=o}a=a.next}while(a!==h)}}catch(T){ne(n,n.return,T)}}function $s(e,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&e)===e){var _=o.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,h=n;var O=a,H=T;try{H()}catch(Q){ne(h,O,Q)}}}o=o.next}while(o!==d)}}catch(Q){ne(n,n.return,Q)}}function Vy(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Ag(n,a)}catch(o){ne(e,e.return,o)}}}function My(e,n,a){a.props=ea(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){ne(e,n,o)}}function gl(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){ne(e,n,h)}}function Bi(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){ne(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ne(e,n,h)}else a.current=null}function jy(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){ne(e,e.return,h)}}function od(e,n,a){try{var o=e.stateNode;_S(o,e.type,a,n),o[$e]=n}catch(h){ne(e,e.return,h)}}function Ly(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&nr(e.type)||e.tag===4}function ld(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Ly(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&nr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ud(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ui));else if(o!==4&&(o===27&&nr(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(ud(e,n,a),e=e.sibling;e!==null;)ud(e,n,a),e=e.sibling}function pc(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&nr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(pc(e,n,a),e=e.sibling;e!==null;)pc(e,n,a),e=e.sibling}function Py(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);rn(n,o,a),n[Oe]=e,n[$e]=a}catch(d){ne(e,e.return,d)}}var hs=!1,Ue=!1,cd=!1,Uy=typeof WeakSet=="function"?WeakSet:Set,We=null;function Wb(e,n){if(e=e.containerInfo,Nd=jc,e=Wp(e),nf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,T=-1,O=-1,H=0,Q=0,et=e,F=null;e:for(;;){for(var K;et!==a||h!==0&&et.nodeType!==3||(T=_+h),et!==d||o!==0&&et.nodeType!==3||(O=_+o),et.nodeType===3&&(_+=et.nodeValue.length),(K=et.firstChild)!==null;)F=et,et=K;for(;;){if(et===e)break e;if(F===a&&++H===h&&(T=_),F===d&&++Q===o&&(O=_),(K=et.nextSibling)!==null)break;et=F,F=et.parentNode}et=K}a=T===-1||O===-1?null:{start:T,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(kd={focusedElem:e,selectionRange:a},jc=!1,We=n;We!==null;)if(n=We,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,We=e;else for(;We!==null;){switch(n=We,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=n,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var gt=ea(a.type,h);e=o.getSnapshotBeforeUpdate(gt,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(wt){ne(a,a.return,wt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Md(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Md(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,We=e;break}We=n.return}}function zy(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:ds(e,a),o&4&&pl(5,a);break;case 1:if(ds(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(_){ne(a,a.return,_)}else{var h=ea(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(_){ne(a,a.return,_)}}o&64&&Vy(a),o&512&&gl(a,a.return);break;case 3:if(ds(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Ag(e,n)}catch(_){ne(a,a.return,_)}}break;case 27:n===null&&o&4&&Py(a);case 26:case 5:ds(e,a),n===null&&o&4&&jy(a),o&512&&gl(a,a.return);break;case 12:ds(e,a);break;case 31:ds(e,a),o&4&&Hy(e,a);break;case 13:ds(e,a),o&4&&Fy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=aS.bind(null,a),xS(e,a))));break;case 22:if(o=a.memoizedState!==null||hs,!o){n=n!==null&&n.memoizedState!==null||Ue,h=hs;var d=Ue;hs=o,(Ue=n)&&!d?ms(e,a,(a.subtreeFlags&8772)!==0):ds(e,a),hs=h,Ue=d}break;case 30:break;default:ds(e,a)}}function By(e){var n=e.alternate;n!==null&&(e.alternate=null,By(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ea(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var _e=null,An=!1;function fs(e,n,a){for(a=a.child;a!==null;)qy(e,n,a),a=a.sibling}function qy(e,n,a){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(Ke,a)}catch{}switch(a.tag){case 26:Ue||Bi(a,n),fs(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ue||Bi(a,n);var o=_e,h=An;nr(a.type)&&(_e=a.stateNode,An=!1),fs(e,n,a),wl(a.stateNode),_e=o,An=h;break;case 5:Ue||Bi(a,n);case 6:if(o=_e,h=An,_e=null,fs(e,n,a),_e=o,An=h,_e!==null)if(An)try{(_e.nodeType===9?_e.body:_e.nodeName==="HTML"?_e.ownerDocument.body:_e).removeChild(a.stateNode)}catch(d){ne(a,n,d)}else try{_e.removeChild(a.stateNode)}catch(d){ne(a,n,d)}break;case 18:_e!==null&&(An?(e=_e,V_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),so(e)):V_(_e,a.stateNode));break;case 4:o=_e,h=An,_e=a.stateNode.containerInfo,An=!0,fs(e,n,a),_e=o,An=h;break;case 0:case 11:case 14:case 15:$s(2,a,n),Ue||$s(4,a,n),fs(e,n,a);break;case 1:Ue||(Bi(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&My(a,n,o)),fs(e,n,a);break;case 21:fs(e,n,a);break;case 22:Ue=(o=Ue)||a.memoizedState!==null,fs(e,n,a),Ue=o;break;default:fs(e,n,a)}}function Hy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{so(e)}catch(a){ne(n,n.return,a)}}}function Fy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{so(e)}catch(a){ne(n,n.return,a)}}function Zb(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Uy),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Uy),n;default:throw Error(r(435,e.tag))}}function gc(e,n){var a=Zb(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var h=oS.bind(null,e,o);o.then(h,h)}})}function wn(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=e,_=n,T=_;t:for(;T!==null;){switch(T.tag){case 27:if(nr(T.type)){_e=T.stateNode,An=!1;break t}break;case 5:_e=T.stateNode,An=!1;break t;case 3:case 4:_e=T.stateNode.containerInfo,An=!0;break t}T=T.return}if(_e===null)throw Error(r(160));qy(d,_,h),_e=null,An=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Gy(n,e),n=n.sibling}var pi=null;function Gy(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:wn(n,e),xn(e),o&4&&($s(3,e,e.return),pl(3,e),$s(5,e,e.return));break;case 1:wn(n,e),xn(e),o&512&&(Ue||a===null||Bi(a,a.return)),o&64&&hs&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=pi;if(wn(n,e),xn(e),o&512&&(Ue||a===null||Bi(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ri]||d[Oe]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),rn(d,o,a),d[Oe]=e,Ve(d),o=d;break t;case"link":var _=G_("link","href",h).get(o+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break e}}d=h.createElement(o),rn(d,o,a),h.head.appendChild(d);break;case"meta":if(_=G_("meta","content",h).get(o+(a.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break e}}d=h.createElement(o),rn(d,o,a),h.head.appendChild(d);break;default:throw Error(r(468,o))}d[Oe]=e,Ve(d),o=d}e.stateNode=o}else K_(h,e.type,e.stateNode);else e.stateNode=F_(h,o,e.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?K_(h,e.type,e.stateNode):F_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&od(e,e.memoizedProps,a.memoizedProps)}break;case 27:wn(n,e),xn(e),o&512&&(Ue||a===null||Bi(a,a.return)),a!==null&&o&4&&od(e,e.memoizedProps,a.memoizedProps);break;case 5:if(wn(n,e),xn(e),o&512&&(Ue||a===null||Bi(a,a.return)),e.flags&32){h=e.stateNode;try{Sn(h,"")}catch(gt){ne(e,e.return,gt)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,od(e,h,a!==null?a.memoizedProps:h)),o&1024&&(cd=!0);break;case 6:if(wn(n,e),xn(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(gt){ne(e,e.return,gt)}}break;case 3:if(kc=null,h=pi,pi=Dc(n.containerInfo),wn(n,e),pi=h,xn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{so(n.containerInfo)}catch(gt){ne(e,e.return,gt)}cd&&(cd=!1,Ky(e));break;case 4:o=pi,pi=Dc(e.stateNode.containerInfo),wn(n,e),xn(e),pi=o;break;case 12:wn(n,e),xn(e);break;case 31:wn(n,e),xn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,gc(e,o)));break;case 13:wn(n,e),xn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(_c=ie()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,gc(e,o)));break;case 22:h=e.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,H=hs,Q=Ue;if(hs=H||h,Ue=Q||O,wn(n,e),Ue=Q,hs=H,xn(e),o&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||O||hs||Ue||na(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){O=a=n;try{if(d=O.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=O.stateNode;var et=O.memoizedProps.style,F=et!=null&&et.hasOwnProperty("display")?et.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(gt){ne(O,O.return,gt)}}}else if(n.tag===6){if(a===null){O=n;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(gt){ne(O,O.return,gt)}}}else if(n.tag===18){if(a===null){O=n;try{var K=O.stateNode;h?M_(K,!0):M_(O.stateNode,!1)}catch(gt){ne(O,O.return,gt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,gc(e,a))));break;case 19:wn(n,e),xn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,gc(e,o)));break;case 30:break;case 21:break;default:wn(n,e),xn(e)}}function xn(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(Ly(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=ld(e);pc(e,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(Sn(_,""),a.flags&=-33);var T=ld(e);pc(e,T,_);break;case 3:case 4:var O=a.stateNode.containerInfo,H=ld(e);ud(e,H,O);break;default:throw Error(r(161))}}catch(Q){ne(e,e.return,Q)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Ky(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Ky(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ds(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)zy(e,n.alternate,n),n=n.sibling}function na(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:$s(4,n,n.return),na(n);break;case 1:Bi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&My(n,n.return,a),na(n);break;case 27:wl(n.stateNode);case 26:case 5:Bi(n,n.return),na(n);break;case 22:n.memoizedState===null&&na(n);break;case 30:na(n);break;default:na(n)}e=e.sibling}}function ms(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,d=n,_=d.flags;switch(d.tag){case 0:case 11:case 15:ms(h,d,a),pl(4,d);break;case 1:if(ms(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){ne(o,o.return,H)}if(o=d,h=o.updateQueue,h!==null){var T=o.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)Sg(O[h],T)}catch(H){ne(o,o.return,H)}}a&&_&64&&Vy(d),gl(d,d.return);break;case 27:Py(d);case 26:case 5:ms(h,d,a),a&&o===null&&_&4&&jy(d),gl(d,d.return);break;case 12:ms(h,d,a);break;case 31:ms(h,d,a),a&&_&4&&Hy(h,d);break;case 13:ms(h,d,a),a&&_&4&&Fy(h,d);break;case 22:d.memoizedState===null&&ms(h,d,a),gl(d,d.return);break;case 30:break;default:ms(h,d,a)}n=n.sibling}}function hd(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&nl(a))}function fd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&nl(e))}function gi(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Yy(e,n,a,o),n=n.sibling}function Yy(e,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:gi(e,n,a,o),h&2048&&pl(9,n);break;case 1:gi(e,n,a,o);break;case 3:gi(e,n,a,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&nl(e)));break;case 12:if(h&2048){gi(e,n,a,o),e=n.stateNode;try{var d=n.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){ne(n,n.return,O)}}else gi(e,n,a,o);break;case 31:gi(e,n,a,o);break;case 13:gi(e,n,a,o);break;case 23:break;case 22:d=n.stateNode,_=n.alternate,n.memoizedState!==null?d._visibility&2?gi(e,n,a,o):yl(e,n):d._visibility&2?gi(e,n,a,o):(d._visibility|=2,Ya(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&hd(_,n);break;case 24:gi(e,n,a,o),h&2048&&fd(n.alternate,n);break;default:gi(e,n,a,o)}}function Ya(e,n,a,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,_=n,T=a,O=o,H=_.flags;switch(_.tag){case 0:case 11:case 15:Ya(d,_,T,O,h),pl(8,_);break;case 23:break;case 22:var Q=_.stateNode;_.memoizedState!==null?Q._visibility&2?Ya(d,_,T,O,h):yl(d,_):(Q._visibility|=2,Ya(d,_,T,O,h)),h&&H&2048&&hd(_.alternate,_);break;case 24:Ya(d,_,T,O,h),h&&H&2048&&fd(_.alternate,_);break;default:Ya(d,_,T,O,h)}n=n.sibling}}function yl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,h=o.flags;switch(o.tag){case 22:yl(a,o),h&2048&&hd(o.alternate,o);break;case 24:yl(a,o),h&2048&&fd(o.alternate,o);break;default:yl(a,o)}n=n.sibling}}var _l=8192;function Qa(e,n,a){if(e.subtreeFlags&_l)for(e=e.child;e!==null;)Qy(e,n,a),e=e.sibling}function Qy(e,n,a){switch(e.tag){case 26:Qa(e,n,a),e.flags&_l&&e.memoizedState!==null&&PS(a,pi,e.memoizedState,e.memoizedProps);break;case 5:Qa(e,n,a);break;case 3:case 4:var o=pi;pi=Dc(e.stateNode.containerInfo),Qa(e,n,a),pi=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=_l,_l=16777216,Qa(e,n,a),_l=o):Qa(e,n,a));break;default:Qa(e,n,a)}}function $y(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function vl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];We=o,Wy(o,e)}$y(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xy(e),e=e.sibling}function Xy(e){switch(e.tag){case 0:case 11:case 15:vl(e),e.flags&2048&&$s(9,e,e.return);break;case 3:vl(e);break;case 12:vl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,yc(e)):vl(e);break;default:vl(e)}}function yc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];We=o,Wy(o,e)}$y(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:$s(8,n,n.return),yc(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,yc(n));break;default:yc(n)}e=e.sibling}}function Wy(e,n){for(;We!==null;){var a=We;switch(a.tag){case 0:case 11:case 15:$s(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:nl(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,We=o;else t:for(a=e;We!==null;){o=We;var h=o.sibling,d=o.return;if(By(o),o===a){We=null;break t}if(h!==null){h.return=d,We=h;break t}We=d}}}var Jb={getCacheForType:function(e){var n=nn(je),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return nn(je).controller.signal}},tS=typeof WeakMap=="function"?WeakMap:Map,Zt=0,ue=null,Pt=null,Bt=0,ee=0,Pn=null,Xs=!1,$a=!1,dd=!1,ps=0,be=0,Ws=0,ia=0,md=0,Un=0,Xa=0,El=null,Rn=null,pd=!1,_c=0,Zy=0,vc=1/0,Ec=null,Zs=null,Ye=0,Js=null,Wa=null,gs=0,gd=0,yd=null,Jy=null,Tl=0,_d=null;function zn(){return(Zt&2)!==0&&Bt!==0?Bt&-Bt:B.T!==null?Ad():Tu()}function t_(){if(Un===0)if((Bt&536870912)===0||Kt){var e=Dr;Dr<<=1,(Dr&3932160)===0&&(Dr=262144),Un=e}else Un=536870912;return e=jn.current,e!==null&&(e.flags|=32),Un}function Cn(e,n,a){(e===ue&&(ee===2||ee===9)||e.cancelPendingCommit!==null)&&(Za(e,0),tr(e,Bt,Un,!1)),Nr(e,a),((Zt&2)===0||e!==ue)&&(e===ue&&((Zt&2)===0&&(ia|=a),be===4&&tr(e,Bt,Un,!1)),qi(e))}function e_(e,n,a){if((Zt&6)!==0)throw Error(r(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||ai(e,n),h=o?iS(e,n):Ed(e,n,!0),d=o;do{if(h===0){$a&&!o&&tr(e,n,0,!1);break}else{if(a=e.current.alternate,d&&!eS(a)){h=Ed(e,n,!1),d=!1;continue}if(h===2){if(d=n,e.errorRecoveryDisabledLanes&d)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;t:{var T=e;h=El;var O=T.current.memoizedState.isDehydrated;if(O&&(Za(T,_).flags|=256),_=Ed(T,_,!1),_!==2){if(dd&&!O){T.errorRecoveryDisabledLanes|=d,ia|=d,h=4;break t}d=Rn,Rn=h,d!==null&&(Rn===null?Rn=d:Rn.push.apply(Rn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){Za(e,0),tr(e,n,0,!0);break}t:{switch(o=e,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:tr(o,n,Un,!Xs);break t;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=_c+300-ie(),10<h)){if(tr(o,n,Un,!Xs),Ai(o,0,!0)!==0)break t;gs=n,o.timeoutHandle=k_(n_.bind(null,o,a,Rn,Ec,pd,n,Un,ia,Xa,Xs,d,"Throttled",-0,0),h);break t}n_(o,a,Rn,Ec,pd,n,Un,ia,Xa,Xs,d,null,-0,0)}}break}while(!0);qi(e)}function n_(e,n,a,o,h,d,_,T,O,H,Q,et,F,K){if(e.timeoutHandle=-1,et=n.subtreeFlags,et&8192||(et&16785408)===16785408){et={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ui},Qy(n,d,et);var gt=(d&62914560)===d?_c-ie():(d&4194048)===d?Zy-ie():0;if(gt=US(et,gt),gt!==null){gs=d,e.cancelPendingCommit=gt(c_.bind(null,e,n,d,a,o,h,_,T,O,Q,et,null,F,K)),tr(e,d,_,!H);return}}c_(e,n,d,a,o,h,_,T,O)}function eS(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!Vn(d(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function tr(e,n,a,o){n&=~md,n&=~ia,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var d=31-Ae(h),_=1<<d;o[d]=-1,h&=~_}a!==0&&kr(e,a,n)}function Tc(){return(Zt&6)===0?(bl(0),!1):!0}function vd(){if(Pt!==null){if(ee===0)var e=Pt.return;else e=Pt,rs=Qr=null,Mf(e),qa=null,sl=0,e=Pt;for(;e!==null;)Oy(e.alternate,e),e=e.return;Pt=null}}function Za(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,TS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),gs=0,vd(),ue=e,Pt=a=is(e.current,null),Bt=n,ee=0,Pn=null,Xs=!1,$a=ai(e,n),dd=!1,Xa=Un=md=ia=Ws=be=0,Rn=El=null,pd=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-Ae(o),d=1<<h;n|=e[h],o&=~d}return ps=n,qu(),a}function i_(e,n){Vt=null,B.H=fl,n===Ba||n===Xu?(n=vg(),ee=3):n===Sf?(n=vg(),ee=4):ee=n===Wf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Pn=n,Pt===null&&(be=1,cc(e,Xn(n,e.current)))}function s_(){var e=jn.current;return e===null?!0:(Bt&4194048)===Bt?ti===null:(Bt&62914560)===Bt||(Bt&536870912)!==0?e===ti:!1}function r_(){var e=B.H;return B.H=fl,e===null?fl:e}function a_(){var e=B.A;return B.A=Jb,e}function bc(){be=4,Xs||(Bt&4194048)!==Bt&&jn.current!==null||($a=!0),(Ws&134217727)===0&&(ia&134217727)===0||ue===null||tr(ue,Bt,Un,!1)}function Ed(e,n,a){var o=Zt;Zt|=2;var h=r_(),d=a_();(ue!==e||Bt!==n)&&(Ec=null,Za(e,n)),n=!1;var _=be;t:do try{if(ee!==0&&Pt!==null){var T=Pt,O=Pn;switch(ee){case 8:vd(),_=6;break t;case 3:case 2:case 9:case 6:jn.current===null&&(n=!0);var H=ee;if(ee=0,Pn=null,Ja(e,T,O,H),a&&$a){_=0;break t}break;default:H=ee,ee=0,Pn=null,Ja(e,T,O,H)}}nS(),_=be;break}catch(Q){i_(e,Q)}while(!0);return n&&e.shellSuspendCounter++,rs=Qr=null,Zt=o,B.H=h,B.A=d,Pt===null&&(ue=null,Bt=0,qu()),_}function nS(){for(;Pt!==null;)o_(Pt)}function iS(e,n){var a=Zt;Zt|=2;var o=r_(),h=a_();ue!==e||Bt!==n?(Ec=null,vc=ie()+500,Za(e,n)):$a=ai(e,n);t:do try{if(ee!==0&&Pt!==null){n=Pt;var d=Pn;e:switch(ee){case 1:ee=0,Pn=null,Ja(e,n,d,1);break;case 2:case 9:if(yg(d)){ee=0,Pn=null,l_(n);break}n=function(){ee!==2&&ee!==9||ue!==e||(ee=7),qi(e)},d.then(n,n);break t;case 3:ee=7;break t;case 4:ee=5;break t;case 7:yg(d)?(ee=0,Pn=null,l_(n)):(ee=0,Pn=null,Ja(e,n,d,7));break;case 5:var _=null;switch(Pt.tag){case 26:_=Pt.memoizedState;case 5:case 27:var T=Pt;if(_?Y_(_):T.stateNode.complete){ee=0,Pn=null;var O=T.sibling;if(O!==null)Pt=O;else{var H=T.return;H!==null?(Pt=H,Sc(H)):Pt=null}break e}}ee=0,Pn=null,Ja(e,n,d,5);break;case 6:ee=0,Pn=null,Ja(e,n,d,6);break;case 8:vd(),be=6;break t;default:throw Error(r(462))}}sS();break}catch(Q){i_(e,Q)}while(!0);return rs=Qr=null,B.H=o,B.A=h,Zt=a,Pt!==null?0:(ue=null,Bt=0,qu(),be)}function sS(){for(;Pt!==null&&!he();)o_(Pt)}function o_(e){var n=Ny(e.alternate,e,ps);e.memoizedProps=e.pendingProps,n===null?Sc(e):Pt=n}function l_(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=wy(a,n,n.pendingProps,n.type,void 0,Bt);break;case 11:n=wy(a,n,n.pendingProps,n.type.render,n.ref,Bt);break;case 5:Mf(n);default:Oy(a,n),n=Pt=ag(n,ps),n=Ny(a,n,ps)}e.memoizedProps=e.pendingProps,n===null?Sc(e):Pt=n}function Ja(e,n,a,o){rs=Qr=null,Mf(n),qa=null,sl=0;var h=n.return;try{if(Kb(e,h,n,a,Bt)){be=1,cc(e,Xn(a,e.current)),Pt=null;return}}catch(d){if(h!==null)throw Pt=h,d;be=1,cc(e,Xn(a,e.current)),Pt=null;return}n.flags&32768?(Kt||o===1?e=!0:$a||(Bt&536870912)!==0?e=!1:(Xs=e=!0,(o===2||o===9||o===3||o===6)&&(o=jn.current,o!==null&&o.tag===13&&(o.flags|=16384))),u_(n,e)):Sc(n)}function Sc(e){var n=e;do{if((n.flags&32768)!==0){u_(n,Xs);return}e=n.return;var a=$b(n.alternate,n,ps);if(a!==null){Pt=a;return}if(n=n.sibling,n!==null){Pt=n;return}Pt=n=e}while(n!==null);be===0&&(be=5)}function u_(e,n){do{var a=Xb(e.alternate,e);if(a!==null){a.flags&=32767,Pt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Pt=e;return}Pt=e=a}while(e!==null);be=6,Pt=null}function c_(e,n,a,o,h,d,_,T,O){e.cancelPendingCommit=null;do Ac();while(Ye!==0);if((Zt&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(d=n.lanes|n.childLanes,d|=lf,Zh(e,a,d,_,T,O),e===ue&&(Pt=ue=null,Bt=0),Wa=n,Js=e,gs=a,gd=d,yd=h,Jy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,lS(Ge,function(){return p_(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=B.T,B.T=null,h=nt.p,nt.p=2,_=Zt,Zt|=4;try{Wb(e,n,a)}finally{Zt=_,nt.p=h,B.T=o}}Ye=1,h_(),f_(),d_()}}function h_(){if(Ye===1){Ye=0;var e=Js,n=Wa,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var o=nt.p;nt.p=2;var h=Zt;Zt|=4;try{Gy(n,e);var d=kd,_=Wp(e.containerInfo),T=d.focusedElem,O=d.selectionRange;if(_!==T&&T&&T.ownerDocument&&Xp(T.ownerDocument.documentElement,T)){if(O!==null&&nf(T)){var H=O.start,Q=O.end;if(Q===void 0&&(Q=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(Q,T.value.length);else{var et=T.ownerDocument||document,F=et&&et.defaultView||window;if(F.getSelection){var K=F.getSelection(),gt=T.textContent.length,wt=Math.min(O.start,gt),oe=O.end===void 0?wt:Math.min(O.end,gt);!K.extend&&wt>oe&&(_=oe,oe=wt,wt=_);var j=$p(T,wt),M=$p(T,oe);if(j&&M&&(K.rangeCount!==1||K.anchorNode!==j.node||K.anchorOffset!==j.offset||K.focusNode!==M.node||K.focusOffset!==M.offset)){var q=et.createRange();q.setStart(j.node,j.offset),K.removeAllRanges(),wt>oe?(K.addRange(q),K.extend(M.node,M.offset)):(q.setEnd(M.node,M.offset),K.addRange(q))}}}}for(et=[],K=T;K=K.parentNode;)K.nodeType===1&&et.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<et.length;T++){var Z=et[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}jc=!!Nd,kd=Nd=null}finally{Zt=h,nt.p=o,B.T=a}}e.current=n,Ye=2}}function f_(){if(Ye===2){Ye=0;var e=Js,n=Wa,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var o=nt.p;nt.p=2;var h=Zt;Zt|=4;try{zy(e,n.alternate,n)}finally{Zt=h,nt.p=o,B.T=a}}Ye=3}}function d_(){if(Ye===4||Ye===3){Ye=0,He();var e=Js,n=Wa,a=gs,o=Jy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ye=5:(Ye=0,Wa=Js=null,m_(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Zs=null),Ji(a),n=n.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(Ke,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=B.T,h=nt.p,nt.p=2,B.T=null;try{for(var d=e.onRecoverableError,_=0;_<o.length;_++){var T=o[_];d(T.value,{componentStack:T.stack})}}finally{B.T=n,nt.p=h}}(gs&3)!==0&&Ac(),qi(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===_d?Tl++:(Tl=0,_d=e):Tl=0,bl(0)}}function m_(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,nl(n)))}function Ac(){return h_(),f_(),d_(),p_()}function p_(){if(Ye!==5)return!1;var e=Js,n=gd;gd=0;var a=Ji(gs),o=B.T,h=nt.p;try{nt.p=32>a?32:a,B.T=null,a=yd,yd=null;var d=Js,_=gs;if(Ye=0,Wa=Js=null,gs=0,(Zt&6)!==0)throw Error(r(331));var T=Zt;if(Zt|=4,Xy(d.current),Yy(d,d.current,_,a),Zt=T,bl(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(Ke,d)}catch{}return!0}finally{nt.p=h,B.T=o,m_(e,n)}}function g_(e,n,a){n=Xn(a,n),n=Xf(e.stateNode,n,2),e=Ks(e,n,2),e!==null&&(Nr(e,2),qi(e))}function ne(e,n,a){if(e.tag===3)g_(e,e,a);else for(;n!==null;){if(n.tag===3){g_(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Zs===null||!Zs.has(o))){e=Xn(a,e),a=yy(2),o=Ks(n,a,2),o!==null&&(_y(a,o,n,e),Nr(o,2),qi(o));break}}n=n.return}}function Td(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new tS;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(dd=!0,h.add(a),e=rS.bind(null,e,n,a),n.then(e,e))}function rS(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ue===e&&(Bt&a)===a&&(be===4||be===3&&(Bt&62914560)===Bt&&300>ie()-_c?(Zt&2)===0&&Za(e,0):md|=a,Xa===Bt&&(Xa=0)),qi(e)}function y_(e,n){n===0&&(n=Eu()),e=Gr(e,n),e!==null&&(Nr(e,n),qi(e))}function aS(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),y_(e,a)}function oS(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(n),y_(e,a)}function lS(e,n){return yt(e,n)}var wc=null,to=null,bd=!1,xc=!1,Sd=!1,er=0;function qi(e){e!==to&&e.next===null&&(to===null?wc=to=e:to=to.next=e),xc=!0,bd||(bd=!0,cS())}function bl(e,n){if(!Sd&&xc){Sd=!0;do for(var a=!1,o=wc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var _=o.suspendedLanes,T=o.pingedLanes;d=(1<<31-Ae(42|e)+1)-1,d&=h&~(_&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,T_(o,d))}else d=Bt,d=Ai(o,o===ue?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||ai(o,d)||(a=!0,T_(o,d));o=o.next}while(a);Sd=!1}}function uS(){__()}function __(){xc=bd=!1;var e=0;er!==0&&ES()&&(e=er);for(var n=ie(),a=null,o=wc;o!==null;){var h=o.next,d=v_(o,n);d===0?(o.next=null,a===null?wc=h:a.next=h,h===null&&(to=a)):(a=o,(e!==0||(d&3)!==0)&&(xc=!0)),o=h}Ye!==0&&Ye!==5||bl(e),er!==0&&(er=0)}function v_(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var _=31-Ae(d),T=1<<_,O=h[_];O===-1?((T&a)===0||(T&o)!==0)&&(h[_]=Wh(T,n)):O<=n&&(e.expiredLanes|=T),d&=~T}if(n=ue,a=Bt,a=Ai(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(ee===2||ee===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&xt(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ai(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&xt(o),Ji(a)){case 2:case 8:a=gn;break;case 32:a=Ge;break;case 268435456:a=zt;break;default:a=Ge}return o=E_.bind(null,e),a=yt(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&xt(o),e.callbackPriority=2,e.callbackNode=null,2}function E_(e,n){if(Ye!==0&&Ye!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ac()&&e.callbackNode!==a)return null;var o=Bt;return o=Ai(e,e===ue?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(e_(e,o,n),v_(e,ie()),e.callbackNode!=null&&e.callbackNode===a?E_.bind(null,e):null)}function T_(e,n){if(Ac())return null;e_(e,n,!0)}function cS(){bS(function(){(Zt&6)!==0?yt(Fe,uS):__()})}function Ad(){if(er===0){var e=Ua;e===0&&(e=bi,bi<<=1,(bi&261888)===0&&(bi=256)),er=e}return er}function b_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Aa(""+e)}function S_(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function hS(e,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var d=b_((h[$e]||null).action),_=o.submitter;_&&(n=(n=_[$e]||null)?b_(n.formAction):_.getAttribute("formAction"),n!==null&&(d=n,_=null));var T=new Mi("action","action",null,o,h);e.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(er!==0){var O=_?S_(h,_):new FormData(h);Ff(a,{pending:!0,data:O,method:h.method,action:d},null,O)}}else typeof d=="function"&&(T.preventDefault(),O=_?S_(h,_):new FormData(h),Ff(a,{pending:!0,data:O,method:h.method,action:d},d,O))},currentTarget:h}]})}}for(var wd=0;wd<of.length;wd++){var xd=of[wd],fS=xd.toLowerCase(),dS=xd[0].toUpperCase()+xd.slice(1);mi(fS,"on"+dS)}mi(tg,"onAnimationEnd"),mi(eg,"onAnimationIteration"),mi(ng,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(Ib,"onTransitionRun"),mi(Db,"onTransitionStart"),mi(Nb,"onTransitionCancel"),mi(ig,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Di("onBeforeInput",["compositionend","keypress","textInput","paste"]),Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sl));function A_(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var d=void 0;if(n)for(var _=o.length-1;0<=_;_--){var T=o[_],O=T.instance,H=T.currentTarget;if(T=T.listener,O!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=H;try{d(h)}catch(Q){Bu(Q)}h.currentTarget=null,d=O}else for(_=0;_<o.length;_++){if(T=o[_],O=T.instance,H=T.currentTarget,T=T.listener,O!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=H;try{d(h)}catch(Q){Bu(Q)}h.currentTarget=null,d=O}}}}function Ut(e,n){var a=n[va];a===void 0&&(a=n[va]=new Set);var o=e+"__bubble";a.has(o)||(w_(n,e,2,!1),a.add(o))}function Rd(e,n,a){var o=0;n&&(o|=4),w_(a,e,o,n)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function Cd(e){if(!e[Rc]){e[Rc]=!0,Mo.forEach(function(a){a!=="selectionchange"&&(mS.has(a)||Rd(a,!1,e),Rd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Rc]||(n[Rc]=!0,Rd("selectionchange",!1,n))}}function w_(e,n,a,o){switch(tv(n)){case 2:var h=qS;break;case 8:h=HS;break;default:h=Hd}a=h.bind(null,n,a,e),h=void 0,!Lr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,a,{capture:!0,passive:h}):e.addEventListener(n,a,!0):h!==void 0?e.addEventListener(n,a,{passive:h}):e.addEventListener(n,a,!1)}function Id(e,n,a,o,h){var d=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var T=o.stateNode.containerInfo;if(T===h)break;if(_===4)for(_=o.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;T!==null;){if(_=Ci(T),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){o=d=_;continue t}T=T.parentNode}}o=o.return}js(function(){var H=d,Q=Kn(a),et=[];t:{var F=sg.get(e);if(F!==void 0){var K=Mi,gt=e;switch(e){case"keypress":if(Ur(a)===0)break t;case"keydown":case"keyup":K=Pu;break;case"focusin":gt="focus",K=Br;break;case"focusout":gt="blur",K=Br;break;case"beforeblur":case"afterblur":K=Br;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Iu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=p;break;case tg:case eg:case ng:K=Nu;break;case ig:K=A;break;case"scroll":case"scrollend":K=Yo;break;case"wheel":K=G;break;case"copy":case"cut":case"paste":K=ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=ns;break;case"toggle":case"beforetoggle":K=Ot}var wt=(n&4)!==0,oe=!wt&&(e==="scroll"||e==="scrollend"),j=wt?F!==null?F+"Capture":null:F;wt=[];for(var M=H,q;M!==null;){var Z=M;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||j===null||(Z=ci(M,j),Z!=null&&wt.push(Al(M,Z,q))),oe)break;M=M.return}0<wt.length&&(F=new K(F,gt,null,a,Q),et.push({event:F,listeners:wt}))}}if((n&7)===0){t:{if(F=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",F&&a!==Fo&&(gt=a.relatedTarget||a.fromElement)&&(Ci(gt)||gt[xi]))break t;if((K||F)&&(F=Q.window===Q?Q:(F=Q.ownerDocument)?F.defaultView||F.parentWindow:window,K?(gt=a.relatedTarget||a.toElement,K=H,gt=gt?Ci(gt):null,gt!==null&&(oe=u(gt),wt=gt.tag,gt!==oe||wt!==5&&wt!==27&&wt!==6)&&(gt=null)):(K=null,gt=H),K!==gt)){if(wt=Qo,Z="onMouseLeave",j="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(wt=ns,Z="onPointerLeave",j="onPointerEnter",M="pointer"),oe=K==null?F:kn(K),q=gt==null?F:kn(gt),F=new wt(Z,M+"leave",K,a,Q),F.target=oe,F.relatedTarget=q,Z=null,Ci(Q)===H&&(wt=new wt(j,M+"enter",gt,a,Q),wt.target=q,wt.relatedTarget=oe,Z=wt),oe=Z,K&&gt)e:{for(wt=pS,j=K,M=gt,q=0,Z=j;Z;Z=wt(Z))q++;Z=0;for(var Tt=M;Tt;Tt=wt(Tt))Z++;for(;0<q-Z;)j=wt(j),q--;for(;0<Z-q;)M=wt(M),Z--;for(;q--;){if(j===M||M!==null&&j===M.alternate){wt=j;break e}j=wt(j),M=wt(M)}wt=null}else wt=null;K!==null&&x_(et,F,K,wt,!1),gt!==null&&oe!==null&&x_(et,oe,gt,wt,!0)}}t:{if(F=H?kn(H):window,K=F.nodeName&&F.nodeName.toLowerCase(),K==="select"||K==="input"&&F.type==="file")var $t=Hp;else if(Bp(F))if(Fp)$t=xb;else{$t=Ab;var _t=Sb}else K=F.nodeName,!K||K.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&Sa(H.elementType)&&($t=Hp):$t=wb;if($t&&($t=$t(e,H))){qp(et,$t,a,Q);break t}_t&&_t(e,F,H),e==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&Bo(F,"number",F.value)}switch(_t=H?kn(H):window,e){case"focusin":(Bp(_t)||_t.contentEditable==="true")&&(Na=_t,sf=H,Jo=null);break;case"focusout":Jo=sf=Na=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,Zp(et,a,Q);break;case"selectionchange":if(Cb)break;case"keydown":case"keyup":Zp(et,a,Q)}var jt;if(Wt)t:{switch(e){case"compositionstart":var qt="onCompositionStart";break t;case"compositionend":qt="onCompositionEnd";break t;case"compositionupdate":qt="onCompositionUpdate";break t}qt=void 0}else Da?qr(e,a)&&(qt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(qt="onCompositionStart");qt&&(Pi&&a.locale!=="ko"&&(Da||qt!=="onCompositionStart"?qt==="onCompositionEnd"&&Da&&(jt=Ko()):(Vi=Q,Go="value"in Vi?Vi.value:Vi.textContent,Da=!0)),_t=Cc(H,qt),0<_t.length&&(qt=new Li(qt,e,null,a,Q),et.push({event:qt,listeners:_t}),jt?qt.data=jt:(jt=Ia(a),jt!==null&&(qt.data=jt)))),(jt=Qn?vb(e,a):Eb(e,a))&&(qt=Cc(H,"onBeforeInput"),0<qt.length&&(_t=new Li("onBeforeInput","beforeinput",null,a,Q),et.push({event:_t,listeners:qt}),_t.data=jt)),hS(et,e,H,a,Q)}A_(et,n)})}function Al(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Cc(e,n){for(var a=n+"Capture",o=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ci(e,a),h!=null&&o.unshift(Al(e,h,d)),h=ci(e,n),h!=null&&o.push(Al(e,h,d))),e.tag===3)return o;e=e.return}return[]}function pS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function x_(e,n,a,o,h){for(var d=n._reactName,_=[];a!==null&&a!==o;){var T=a,O=T.alternate,H=T.stateNode;if(T=T.tag,O!==null&&O===o)break;T!==5&&T!==26&&T!==27||H===null||(O=H,h?(H=ci(a,d),H!=null&&_.unshift(Al(a,H,O))):h||(H=ci(a,d),H!=null&&_.push(Al(a,H,O)))),a=a.return}_.length!==0&&e.push({event:n,listeners:_})}var gS=/\r\n?/g,yS=/\u0000|\uFFFD/g;function R_(e){return(typeof e=="string"?e:""+e).replace(gS,`
`).replace(yS,"")}function C_(e,n){return n=R_(n),R_(e)===n}function ae(e,n,a,o,h,d){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Sn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Sn(e,""+o);break;case"className":On(e,"class",o);break;case"tabIndex":On(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":On(e,a,o);break;case"style":Ho(e,o,d);break;case"data":if(n!=="object"){On(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Aa(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&ae(e,n,"name",h.name,h,null),ae(e,n,"formEncType",h.formEncType,h,null),ae(e,n,"formMethod",h.formMethod,h,null),ae(e,n,"formTarget",h.formTarget,h,null)):(ae(e,n,"encType",h.encType,h,null),ae(e,n,"method",h.method,h,null),ae(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Aa(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=ui);break;case"onScroll":o!=null&&Ut("scroll",e);break;case"onScrollEnd":o!=null&&Ut("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Aa(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Ut("beforetoggle",e),Ut("toggle",e),Ta(e,"popover",o);break;case"xlinkActuate":Me(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Me(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Me(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Me(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Me(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Me(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Me(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Me(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Me(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ta(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Cu.get(a)||a,Ta(e,a,o))}}function Dd(e,n,a,o,h,d){switch(a){case"style":Ho(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Sn(e,o):(typeof o=="number"||typeof o=="bigint")&&Sn(e,""+o);break;case"onScroll":o!=null&&Ut("scroll",e);break;case"onScrollEnd":o!=null&&Ut("scrollend",e);break;case"onClick":o!=null&&(e.onclick=ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jo.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),d=e[$e]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(n,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):Ta(e,a,o)}}}function rn(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ut("error",e),Ut("load",e);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:ae(e,n,d,_,a,null)}}h&&ae(e,n,"srcSet",a.srcSet,a,null),o&&ae(e,n,"src",a.src,a,null);return;case"input":Ut("invalid",e);var T=d=_=h=null,O=null,H=null;for(o in a)if(a.hasOwnProperty(o)){var Q=a[o];if(Q!=null)switch(o){case"name":h=Q;break;case"type":_=Q;break;case"checked":O=Q;break;case"defaultChecked":H=Q;break;case"value":d=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,n));break;default:ae(e,n,o,Q,a,null)}}wu(e,d,T,O,H,_,h,!1);return;case"select":Ut("invalid",e),o=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":o=T;default:ae(e,n,h,T,a,null)}n=d,a=_,e.multiple=!!o,n!=null?ks(e,!!o,n,!1):a!=null&&ks(e,!!o,a,!0);return;case"textarea":Ut("invalid",e),d=h=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":o=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:ae(e,n,_,T,a,null)}Os(e,o,h,d);return;case"option":for(O in a)a.hasOwnProperty(O)&&(o=a[O],o!=null)&&(O==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":ae(e,n,O,o,a,null));return;case"dialog":Ut("beforetoggle",e),Ut("toggle",e),Ut("cancel",e),Ut("close",e);break;case"iframe":case"object":Ut("load",e);break;case"video":case"audio":for(o=0;o<Sl.length;o++)Ut(Sl[o],e);break;case"image":Ut("error",e),Ut("load",e);break;case"details":Ut("toggle",e);break;case"embed":case"source":case"link":Ut("error",e),Ut("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(o=a[H],o!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:ae(e,n,H,o,a,null)}return;default:if(Sa(n)){for(Q in a)a.hasOwnProperty(Q)&&(o=a[Q],o!==void 0&&Dd(e,n,Q,o,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(o=a[T],o!=null&&ae(e,n,T,o,a,null))}function _S(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,T=null,O=null,H=null,Q=null;for(K in a){var et=a[K];if(a.hasOwnProperty(K)&&et!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":O=et;default:o.hasOwnProperty(K)||ae(e,n,K,null,o,et)}}for(var F in o){var K=o[F];if(et=a[F],o.hasOwnProperty(F)&&(K!=null||et!=null))switch(F){case"type":d=K;break;case"name":h=K;break;case"checked":H=K;break;case"defaultChecked":Q=K;break;case"value":_=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,n));break;default:K!==et&&ae(e,n,F,K,o,et)}}ba(e,_,T,O,H,Q,d,h);return;case"select":K=_=T=F=null;for(d in a)if(O=a[d],a.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":K=O;default:o.hasOwnProperty(d)||ae(e,n,d,null,o,O)}for(h in o)if(d=o[h],O=a[h],o.hasOwnProperty(h)&&(d!=null||O!=null))switch(h){case"value":F=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==O&&ae(e,n,h,d,o,O)}n=T,a=_,o=K,F!=null?ks(e,!!a,F,!1):!!o!=!!a&&(n!=null?ks(e,!!a,n,!0):ks(e,!!a,a?[]:"",!1));return;case"textarea":K=F=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ae(e,n,T,null,o,h)}for(_ in o)if(h=o[_],d=a[_],o.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":F=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&ae(e,n,_,h,o,d)}xu(e,F,K);return;case"option":for(var gt in a)F=a[gt],a.hasOwnProperty(gt)&&F!=null&&!o.hasOwnProperty(gt)&&(gt==="selected"?e.selected=!1:ae(e,n,gt,null,o,F));for(O in o)F=o[O],K=a[O],o.hasOwnProperty(O)&&F!==K&&(F!=null||K!=null)&&(O==="selected"?e.selected=F&&typeof F!="function"&&typeof F!="symbol":ae(e,n,O,F,o,K));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wt in a)F=a[wt],a.hasOwnProperty(wt)&&F!=null&&!o.hasOwnProperty(wt)&&ae(e,n,wt,null,o,F);for(H in o)if(F=o[H],K=a[H],o.hasOwnProperty(H)&&F!==K&&(F!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,n));break;default:ae(e,n,H,F,o,K)}return;default:if(Sa(n)){for(var oe in a)F=a[oe],a.hasOwnProperty(oe)&&F!==void 0&&!o.hasOwnProperty(oe)&&Dd(e,n,oe,void 0,o,F);for(Q in o)F=o[Q],K=a[Q],!o.hasOwnProperty(Q)||F===K||F===void 0&&K===void 0||Dd(e,n,Q,F,o,K);return}}for(var j in a)F=a[j],a.hasOwnProperty(j)&&F!=null&&!o.hasOwnProperty(j)&&ae(e,n,j,null,o,F);for(et in o)F=o[et],K=a[et],!o.hasOwnProperty(et)||F===K||F==null&&K==null||ae(e,n,et,F,o,K)}function I_(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],d=h.transferSize,_=h.initiatorType,T=h.duration;if(d&&T&&I_(_)){for(_=0,T=h.responseEnd,o+=1;o<a.length;o++){var O=a[o],H=O.startTime;if(H>T)break;var Q=O.transferSize,et=O.initiatorType;Q&&I_(et)&&(O=O.responseEnd,_+=Q*(O<T?1:(T-H)/(O-H)))}if(--o,n+=8*(d+_)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Nd=null,kd=null;function Ic(e){return e.nodeType===9?e:e.ownerDocument}function D_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function N_(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Od(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Vd=null;function ES(){var e=window.event;return e&&e.type==="popstate"?e===Vd?!1:(Vd=e,!0):(Vd=null,!1)}var k_=typeof setTimeout=="function"?setTimeout:void 0,TS=typeof clearTimeout=="function"?clearTimeout:void 0,O_=typeof Promise=="function"?Promise:void 0,bS=typeof queueMicrotask=="function"?queueMicrotask:typeof O_<"u"?function(e){return O_.resolve(null).then(e).catch(SS)}:k_;function SS(e){setTimeout(function(){throw e})}function nr(e){return e==="head"}function V_(e,n){var a=n,o=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(h),so(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")wl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,wl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,T=d.nodeName;d[Ri]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&wl(e.ownerDocument.body);a=h}while(a);so(n)}function M_(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function Md(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Md(a),Ea(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function AS(e,n,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Ri])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=ei(e.nextSibling),e===null)break}return null}function wS(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ei(e.nextSibling),e===null))return null;return e}function j_(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ei(e.nextSibling),e===null))return null;return e}function jd(e){return e.data==="$?"||e.data==="$~"}function Ld(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function xS(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function ei(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Pd=null;function L_(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return ei(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function P_(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function U_(e,n,a){switch(n=Ic(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function wl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ea(e)}var ni=new Map,z_=new Set;function Dc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ys=nt.d;nt.d={f:RS,r:CS,D:IS,C:DS,L:NS,m:kS,X:VS,S:OS,M:MS};function RS(){var e=ys.f(),n=Tc();return e||n}function CS(e){var n=Gn(e);n!==null&&n.tag===5&&n.type==="form"?iy(n):ys.r(e)}var eo=typeof document>"u"?null:document;function B_(e,n,a){var o=eo;if(o&&typeof n=="string"&&n){var h=bn(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),z_.has(h)||(z_.add(h),e={rel:e,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),rn(n,"link",e),Ve(n),o.head.appendChild(n)))}}function IS(e){ys.D(e),B_("dns-prefetch",e,null)}function DS(e,n){ys.C(e,n),B_("preconnect",e,n)}function NS(e,n,a){ys.L(e,n,a);var o=eo;if(o&&e&&n){var h='link[rel="preload"][as="'+bn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+bn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+bn(a.imageSizes)+'"]')):h+='[href="'+bn(e)+'"]';var d=h;switch(n){case"style":d=no(e);break;case"script":d=io(e)}ni.has(d)||(e=w({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),ni.set(d,e),o.querySelector(h)!==null||n==="style"&&o.querySelector(xl(d))||n==="script"&&o.querySelector(Rl(d))||(n=o.createElement("link"),rn(n,"link",e),Ve(n),o.head.appendChild(n)))}}function kS(e,n){ys.m(e,n);var a=eo;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+bn(o)+'"][href="'+bn(e)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=io(e)}if(!ni.has(d)&&(e=w({rel:"modulepreload",href:e},n),ni.set(d,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Rl(d)))return}o=a.createElement("link"),rn(o,"link",e),Ve(o),a.head.appendChild(o)}}}function OS(e,n,a){ys.S(e,n,a);var o=eo;if(o&&e){var h=Ii(o).hoistableStyles,d=no(e);n=n||"default";var _=h.get(d);if(!_){var T={loading:0,preload:null};if(_=o.querySelector(xl(d)))T.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":n},a),(a=ni.get(d))&&Ud(e,a);var O=_=o.createElement("link");Ve(O),rn(O,"link",e),O._p=new Promise(function(H,Q){O.onload=H,O.onerror=Q}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Nc(_,n,o)}_={type:"stylesheet",instance:_,count:1,state:T},h.set(d,_)}}}function VS(e,n){ys.X(e,n);var a=eo;if(a&&e){var o=Ii(a).hoistableScripts,h=io(e),d=o.get(h);d||(d=a.querySelector(Rl(h)),d||(e=w({src:e,async:!0},n),(n=ni.get(h))&&zd(e,n),d=a.createElement("script"),Ve(d),rn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function MS(e,n){ys.M(e,n);var a=eo;if(a&&e){var o=Ii(a).hoistableScripts,h=io(e),d=o.get(h);d||(d=a.querySelector(Rl(h)),d||(e=w({src:e,async:!0,type:"module"},n),(n=ni.get(h))&&zd(e,n),d=a.createElement("script"),Ve(d),rn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function q_(e,n,a,o){var h=(h=pt.current)?Dc(h):null;if(!h)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=no(a.href),a=Ii(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=no(a.href);var d=Ii(h).hoistableStyles,_=d.get(e);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,_),(d=h.querySelector(xl(e)))&&!d._p&&(_.instance=d,_.state.loading=5),ni.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ni.set(e,a),d||jS(h,e,a,_.state))),n&&o===null)throw Error(r(528,""));return _}if(n&&o!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=io(a),a=Ii(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function no(e){return'href="'+bn(e)+'"'}function xl(e){return'link[rel="stylesheet"]['+e+"]"}function H_(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function jS(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),rn(n,"link",a),Ve(n),e.head.appendChild(n))}function io(e){return'[src="'+bn(e)+'"]'}function Rl(e){return"script[async]"+e}function F_(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+bn(a.href)+'"]');if(o)return n.instance=o,Ve(o),o;var h=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Ve(o),rn(o,"style",h),Nc(o,a.precedence,e),n.instance=o;case"stylesheet":h=no(a.href);var d=e.querySelector(xl(h));if(d)return n.state.loading|=4,n.instance=d,Ve(d),d;o=H_(a),(h=ni.get(h))&&Ud(o,h),d=(e.ownerDocument||e).createElement("link"),Ve(d);var _=d;return _._p=new Promise(function(T,O){_.onload=T,_.onerror=O}),rn(d,"link",o),n.state.loading|=4,Nc(d,a.precedence,e),n.instance=d;case"script":return d=io(a.src),(h=e.querySelector(Rl(d)))?(n.instance=h,Ve(h),h):(o=a,(h=ni.get(d))&&(o=w({},a),zd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),Ve(h),rn(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Nc(o,a.precedence,e));return n.instance}function Nc(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,_=0;_<o.length;_++){var T=o[_];if(T.dataset.precedence===n)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Ud(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function zd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var kc=null;function G_(e,n,a){if(kc===null){var o=new Map,h=kc=new Map;h.set(a,o)}else h=kc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[Ri]||d[Oe]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(n)||"";_=e+_;var T=o.get(_);T?T.push(d):o.set(_,[d])}}return o}function K_(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function LS(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Y_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function PS(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=no(o.href),d=n.querySelector(xl(h));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Oc.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=d,Ve(d);return}d=n.ownerDocument||n,o=H_(o),(h=ni.get(h))&&Ud(o,h),d=d.createElement("link"),Ve(d);var _=d;_._p=new Promise(function(T,O){_.onload=T,_.onerror=O}),rn(d,"link",o),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Oc.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Bd=0;function US(e,n){return e.stylesheets&&e.count===0&&Mc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&Mc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&Bd===0&&(Bd=62500*vS());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Mc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Bd?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Oc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Vc=null;function Mc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Vc=new Map,n.forEach(zS,e),Vc=null,Oc.call(e))}function zS(e,n){if(!(n.state.loading&4)){var a=Vc.get(e);if(a)var o=a.get(null);else{a=new Map,Vc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}h=n.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||o,d===o&&a.set(null,h),a.set(_,h),this.count++,o=Oc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var Cl={$$typeof:vt,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function BS(e,n,a,o,h,d,_,T,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.hiddenUpdates=wi(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Q_(e,n,a,o,h,d,_,T,O,H,Q,et){return e=new BS(e,n,a,_,O,H,Q,et,T),n=1,d===!0&&(n|=24),d=Mn(3,null,null,n),e.current=d,d.stateNode=e,n=Ef(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:n},Af(d),e}function $_(e){return e?(e=Va,e):Va}function X_(e,n,a,o,h,d){h=$_(h),o.context===null?o.context=h:o.pendingContext=h,o=Gs(n),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=Ks(e,o,n),a!==null&&(Cn(a,e,n),al(a,e,n))}function W_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function qd(e,n){W_(e,n),(e=e.alternate)&&W_(e,n)}function Z_(e){if(e.tag===13||e.tag===31){var n=Gr(e,67108864);n!==null&&Cn(n,e,67108864),qd(e,67108864)}}function J_(e){if(e.tag===13||e.tag===31){var n=zn();n=Or(n);var a=Gr(e,n);a!==null&&Cn(a,e,n),qd(e,n)}}var jc=!0;function qS(e,n,a,o){var h=B.T;B.T=null;var d=nt.p;try{nt.p=2,Hd(e,n,a,o)}finally{nt.p=d,B.T=h}}function HS(e,n,a,o){var h=B.T;B.T=null;var d=nt.p;try{nt.p=8,Hd(e,n,a,o)}finally{nt.p=d,B.T=h}}function Hd(e,n,a,o){if(jc){var h=Fd(o);if(h===null)Id(e,n,o,Lc,a),ev(e,o);else if(GS(h,e,n,a,o))o.stopPropagation();else if(ev(e,o),n&4&&-1<FS.indexOf(e)){for(;h!==null;){var d=Gn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Si(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var O=1<<31-Ae(_);T.entanglements[1]|=O,_&=~O}qi(d),(Zt&6)===0&&(vc=ie()+500,bl(0))}}break;case 31:case 13:T=Gr(d,2),T!==null&&Cn(T,d,2),Tc(),qd(d,2)}if(d=Fd(o),d===null&&Id(e,n,o,Lc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else Id(e,n,o,null,a)}}function Fd(e){return e=Kn(e),Gd(e)}var Lc=null;function Gd(e){if(Lc=null,e=Ci(e),e!==null){var n=u(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=f(n),e!==null)return e;e=null}else if(a===31){if(e=m(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Lc=e,null}function tv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(De()){case Fe:return 2;case gn:return 8;case Ge:case ya:return 32;case zt:return 268435456;default:return 32}default:return 32}}var Kd=!1,ir=null,sr=null,rr=null,Il=new Map,Dl=new Map,ar=[],FS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ev(e,n){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":Il.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dl.delete(n.pointerId)}}function Nl(e,n,a,o,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},n!==null&&(n=Gn(n),n!==null&&Z_(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function GS(e,n,a,o,h){switch(n){case"focusin":return ir=Nl(ir,e,n,a,o,h),!0;case"dragenter":return sr=Nl(sr,e,n,a,o,h),!0;case"mouseover":return rr=Nl(rr,e,n,a,o,h),!0;case"pointerover":var d=h.pointerId;return Il.set(d,Nl(Il.get(d)||null,e,n,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,Dl.set(d,Nl(Dl.get(d)||null,e,n,a,o,h)),!0}return!1}function nv(e){var n=Ci(e.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){e.blockedOn=n,oi(e.priority,function(){J_(a)});return}}else if(n===31){if(n=m(a),n!==null){e.blockedOn=n,oi(e.priority,function(){J_(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Fd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Fo=o,a.target.dispatchEvent(o),Fo=null}else return n=Gn(a),n!==null&&Z_(n),e.blockedOn=a,!1;n.shift()}return!0}function iv(e,n,a){Pc(e)&&a.delete(n)}function KS(){Kd=!1,ir!==null&&Pc(ir)&&(ir=null),sr!==null&&Pc(sr)&&(sr=null),rr!==null&&Pc(rr)&&(rr=null),Il.forEach(iv),Dl.forEach(iv)}function Uc(e,n){e.blockedOn===n&&(e.blockedOn=null,Kd||(Kd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,KS)))}var zc=null;function sv(e){zc!==e&&(zc=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){zc===e&&(zc=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(Gd(o||a)===null)continue;break}var d=Gn(a);d!==null&&(e.splice(n,3),n-=3,Ff(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function so(e){function n(O){return Uc(O,e)}ir!==null&&Uc(ir,e),sr!==null&&Uc(sr,e),rr!==null&&Uc(rr,e),Il.forEach(n),Dl.forEach(n);for(var a=0;a<ar.length;a++){var o=ar[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<ar.length&&(a=ar[0],a.blockedOn===null);)nv(a),a.blockedOn===null&&ar.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],_=h[$e]||null;if(typeof d=="function")_||sv(a);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[$e]||null)T=_.formAction;else if(Gd(h)!==null)continue}else T=_.action;typeof T=="function"?a[o+1]=T:(a.splice(o,3),o-=3),sv(a)}}}function rv(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Yd(e){this._internalRoot=e}Bc.prototype.render=Yd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,o=zn();X_(a,o,e,n,null,null)},Bc.prototype.unmount=Yd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;X_(e.current,2,null,e,null,null),Tc(),n[xi]=null}};function Bc(e){this._internalRoot=e}Bc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Tu();e={blockedOn:null,target:e,priority:n};for(var a=0;a<ar.length&&n!==0&&n<ar[a].priority;a++);ar.splice(a,0,e),a===0&&nv(e)}};var av=t.version;if(av!=="19.2.3")throw Error(r(527,av,"19.2.3"));nt.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(n),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var YS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{Ke=qc.inject(YS),Ne=qc}catch{}}return Ol.createRoot=function(e,n){if(!l(e))throw Error(r(299));var a=!1,o="",h=dy,d=my,_=py;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError)),n=Q_(e,1,!1,null,null,a,o,null,h,d,_,rv),e[xi]=n.current,Cd(e),new Yd(n)},Ol.hydrateRoot=function(e,n,a){if(!l(e))throw Error(r(299));var o=!1,h="",d=dy,_=my,T=py,O=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),n=Q_(e,1,!0,n,a??null,o,h,O,d,_,T,rv),n.context=$_(null),a=n.current,o=zn(),o=Or(o),h=Gs(o),h.callback=null,Ks(a,h,o),a=o,n.current.lanes=a,Nr(n,a),qi(n),e[xi]=n.current,Cd(e),new Bc(n)},Ol.version="19.2.3",Ol}var gv;function iA(){if(gv)return Xd.exports;gv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Xd.exports=nA(),Xd.exports}var sA=iA();const rA=()=>{};var yv={};const QE=function(s){const t=[];let i=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},aA=function(s){const t=[];let i=0,r=0;for(;i<s.length;){const l=s[i++];if(l<128)t[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[i++];t[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[i++],f=s[i++],m=s[i++],g=((l&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[i++],f=s[i++];t[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return t.join("")},$E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const u=s[l],f=l+1<s.length,m=f?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,b=u>>2,w=(u&3)<<4|m>>4;let R=(m&15)<<2|y>>6,P=y&63;g||(P=64,f||(R=64)),r.push(i[b],i[w],i[R],i[P])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(QE(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):aA(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const u=i[s.charAt(l++)],m=l<s.length?i[s.charAt(l)]:0;++l;const y=l<s.length?i[s.charAt(l)]:64;++l;const w=l<s.length?i[s.charAt(l)]:64;if(++l,u==null||m==null||y==null||w==null)throw new oA;const R=u<<2|m>>4;if(r.push(R),y!==64){const P=m<<4&240|y>>2;if(r.push(P),w!==64){const W=y<<6&192|w;r.push(W)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class oA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lA=function(s){const t=QE(s);return $E.encodeByteArray(t,!0)},ah=function(s){return lA(s).replace(/\./g,"")},XE=function(s){try{return $E.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function uA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const cA=()=>uA().__FIREBASE_DEFAULTS__,hA=()=>{if(typeof process>"u"||typeof yv>"u")return;const s=yv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},fA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&XE(s[1]);return t&&JSON.parse(t)},Rh=()=>{try{return rA()||cA()||hA()||fA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},WE=s=>Rh()?.emulatorHosts?.[s],dA=s=>{const t=WE(s);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},ZE=()=>Rh()?.config,JE=s=>Rh()?.[`_${s}`];class mA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}function Ao(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tT(s){return(await fetch(s,{credentials:"include"})).ok}function pA(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ah(JSON.stringify(i)),ah(JSON.stringify(f)),""].join(".")}const zl={};function gA(){const s={prod:[],emulator:[]};for(const t of Object.keys(zl))zl[t]?s.emulator.push(t):s.prod.push(t);return s}function yA(s){let t=document.getElementById(s),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),i=!0),{created:i,element:t}}let _v=!1;function eT(s,t){if(typeof window>"u"||typeof document>"u"||!Ao(window.location.host)||zl[s]===t||zl[s]||_v)return;zl[s]=t;function i(R){return`__firebase__banner__${R}`}const r="__firebase__banner",u=gA().prod.length>0;function f(){const R=document.getElementById(r);R&&R.remove()}function m(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function g(R,P){R.setAttribute("width","24"),R.setAttribute("id",P),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{_v=!0,f()},R}function b(R,P){R.setAttribute("id",P),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function w(){const R=yA(r),P=i("text"),W=document.getElementById(P)||document.createElement("span"),$=i("learnmore"),Y=document.getElementById($)||document.createElement("a"),rt=i("preprendIcon"),ft=document.getElementById(rt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const vt=R.element;m(vt),b(Y,$);const Mt=y();g(ft,rt),vt.append(ft,W,Y,Mt),document.body.appendChild(vt)}u?(W.innerText="Preview backend disconnected.",ft.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ft.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _A(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function vA(){const s=Rh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function bA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SA(){const s=pn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function AA(){return!vA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wA(){try{return typeof indexedDB=="object"}catch{return!1}}function xA(){return new Promise((s,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(i){t(i)}})}const RA="FirebaseError";class Rs extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=RA,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nu.prototype.create)}}class nu{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},l=`${this.service}/${t}`,u=this.errors[t],f=u?CA(u,r):"Error",m=`${this.serviceName}: ${f} (${l}).`;return new Rs(l,m,r)}}function CA(s,t){return s.replace(IA,(i,r)=>{const l=t[r];return l!=null?String(l):`<${r}?>`})}const IA=/\{\$([^}]+)}/g;function DA(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function vr(s,t){if(s===t)return!0;const i=Object.keys(s),r=Object.keys(t);for(const l of i){if(!r.includes(l))return!1;const u=s[l],f=t[l];if(vv(u)&&vv(f)){if(!vr(u,f))return!1}else if(u!==f)return!1}for(const l of r)if(!i.includes(l))return!1;return!0}function vv(s){return s!==null&&typeof s=="object"}function iu(s){const t=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Vl(s){const t={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");t[decodeURIComponent(l)]=decodeURIComponent(u)}}),t}function Ml(s){const t=s.indexOf("?");if(!t)return"";const i=s.indexOf("#",t);return s.substring(t,i>0?i:void 0)}function NA(s,t){const i=new kA(s,t);return i.subscribe.bind(i)}class kA{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,r){let l;if(t===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");OA(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:r},l.next===void 0&&(l.next=tm),l.error===void 0&&(l.error=tm),l.complete===void 0&&(l.complete=tm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OA(s,t){if(typeof s!="object"||s===null)return!1;for(const i of t)if(i in s&&typeof s[i]=="function")return!0;return!1}function tm(){}function Ie(s){return s&&s._delegate?s._delegate:s}class ua{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const sa="[DEFAULT]";class VA{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new mA;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jA(t))try{this.getOrInitializeService({instanceIdentifier:sa})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(t=sa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=sa){return this.instances.has(t)}getOptions(t=sa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&f.resolve(l)}return l}onInit(t,i){const r=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(r)??new Set;l.add(t),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&t(u,r),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const l of r)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MA(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=sa){return this.component?this.component.multipleInstances?t:sa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MA(s){return s===sa?void 0:s}function jA(s){return s.instantiationMode==="EAGER"}class LA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new VA(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}var Ht;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ht||(Ht={}));const PA={debug:Ht.DEBUG,verbose:Ht.VERBOSE,info:Ht.INFO,warn:Ht.WARN,error:Ht.ERROR,silent:Ht.SILENT},UA=Ht.INFO,zA={[Ht.DEBUG]:"log",[Ht.VERBOSE]:"log",[Ht.INFO]:"info",[Ht.WARN]:"warn",[Ht.ERROR]:"error"},BA=(s,t,...i)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),l=zA[t];if(l)console[l](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Fm{constructor(t){this.name=t,this._logLevel=UA,this._logHandler=BA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ht))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?PA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ht.DEBUG,...t),this._logHandler(this,Ht.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ht.VERBOSE,...t),this._logHandler(this,Ht.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ht.INFO,...t),this._logHandler(this,Ht.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ht.WARN,...t),this._logHandler(this,Ht.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ht.ERROR,...t),this._logHandler(this,Ht.ERROR,...t)}}const qA=(s,t)=>t.some(i=>s instanceof i);let Ev,Tv;function HA(){return Ev||(Ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FA(){return Tv||(Tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nT=new WeakMap,mm=new WeakMap,iT=new WeakMap,em=new WeakMap,Gm=new WeakMap;function GA(s){const t=new Promise((i,r)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{i(mr(s.result)),l()},f=()=>{r(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",f)});return t.then(i=>{i instanceof IDBCursor&&nT.set(i,s)}).catch(()=>{}),Gm.set(t,s),t}function KA(s){if(mm.has(s))return;const t=new Promise((i,r)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{i(),l()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});mm.set(s,t)}let pm={get(s,t,i){if(s instanceof IDBTransaction){if(t==="done")return mm.get(s);if(t==="objectStoreNames")return s.objectStoreNames||iT.get(s);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return mr(s[t])},set(s,t,i){return s[t]=i,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function YA(s){pm=s(pm)}function QA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=s.call(nm(this),t,...i);return iT.set(r,t.sort?t.sort():[t]),mr(r)}:FA().includes(s)?function(...t){return s.apply(nm(this),t),mr(nT.get(this))}:function(...t){return mr(s.apply(nm(this),t))}}function $A(s){return typeof s=="function"?QA(s):(s instanceof IDBTransaction&&KA(s),qA(s,HA())?new Proxy(s,pm):s)}function mr(s){if(s instanceof IDBRequest)return GA(s);if(em.has(s))return em.get(s);const t=$A(s);return t!==s&&(em.set(s,t),Gm.set(t,s)),t}const nm=s=>Gm.get(s);function XA(s,t,{blocked:i,upgrade:r,blocking:l,terminated:u}={}){const f=indexedDB.open(s,t),m=mr(f);return r&&f.addEventListener("upgradeneeded",g=>{r(mr(f.result),g.oldVersion,g.newVersion,mr(f.transaction),g)}),i&&f.addEventListener("blocked",g=>i(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const WA=["get","getKey","getAll","getAllKeys","count"],ZA=["put","add","delete","clear"],im=new Map;function bv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(im.get(t))return im.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,l=ZA.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(l||WA.includes(i)))return;const u=async function(f,...m){const g=this.transaction(f,l?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[i](...m),l&&g.done]))[0]};return im.set(t,u),u}YA(s=>({...s,get:(t,i,r)=>bv(t,i)||s.get(t,i,r),has:(t,i)=>!!bv(t,i)||s.has(t,i)}));class JA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(t1(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function t1(s){return s.getComponent()?.type==="VERSION"}const gm="@firebase/app",Sv="0.14.6";const Ss=new Fm("@firebase/app"),e1="@firebase/app-compat",n1="@firebase/analytics-compat",i1="@firebase/analytics",s1="@firebase/app-check-compat",r1="@firebase/app-check",a1="@firebase/auth",o1="@firebase/auth-compat",l1="@firebase/database",u1="@firebase/data-connect",c1="@firebase/database-compat",h1="@firebase/functions",f1="@firebase/functions-compat",d1="@firebase/installations",m1="@firebase/installations-compat",p1="@firebase/messaging",g1="@firebase/messaging-compat",y1="@firebase/performance",_1="@firebase/performance-compat",v1="@firebase/remote-config",E1="@firebase/remote-config-compat",T1="@firebase/storage",b1="@firebase/storage-compat",S1="@firebase/firestore",A1="@firebase/ai",w1="@firebase/firestore-compat",x1="firebase",R1="12.6.0";const ym="[DEFAULT]",C1={[gm]:"fire-core",[e1]:"fire-core-compat",[i1]:"fire-analytics",[n1]:"fire-analytics-compat",[r1]:"fire-app-check",[s1]:"fire-app-check-compat",[a1]:"fire-auth",[o1]:"fire-auth-compat",[l1]:"fire-rtdb",[u1]:"fire-data-connect",[c1]:"fire-rtdb-compat",[h1]:"fire-fn",[f1]:"fire-fn-compat",[d1]:"fire-iid",[m1]:"fire-iid-compat",[p1]:"fire-fcm",[g1]:"fire-fcm-compat",[y1]:"fire-perf",[_1]:"fire-perf-compat",[v1]:"fire-rc",[E1]:"fire-rc-compat",[T1]:"fire-gcs",[b1]:"fire-gcs-compat",[S1]:"fire-fst",[w1]:"fire-fst-compat",[A1]:"fire-vertex","fire-js":"fire-js",[x1]:"fire-js-all"};const oh=new Map,I1=new Map,_m=new Map;function Av(s,t){try{s.container.addComponent(t)}catch(i){Ss.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,i)}}function po(s){const t=s.name;if(_m.has(t))return Ss.debug(`There were multiple attempts to register component ${t}.`),!1;_m.set(t,s);for(const i of oh.values())Av(i,s);for(const i of I1.values())Av(i,s);return!0}function Km(s,t){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(t)}function ii(s){return s==null?!1:s.settings!==void 0}const D1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new nu("app","Firebase",D1);class N1{constructor(t,i,r){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ua("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}const wo=R1;function sT(s,t={}){let i=s;typeof t!="object"&&(t={name:t});const r={name:ym,automaticDataCollectionEnabled:!0,...t},l=r.name;if(typeof l!="string"||!l)throw pr.create("bad-app-name",{appName:String(l)});if(i||(i=ZE()),!i)throw pr.create("no-options");const u=oh.get(l);if(u){if(vr(i,u.options)&&vr(r,u.config))return u;throw pr.create("duplicate-app",{appName:l})}const f=new LA(l);for(const g of _m.values())f.addComponent(g);const m=new N1(i,r,f);return oh.set(l,m),m}function rT(s=ym){const t=oh.get(s);if(!t&&s===ym&&ZE())return sT();if(!t)throw pr.create("no-app",{appName:s});return t}function gr(s,t,i){let r=C1[s]??s;i&&(r+=`-${i}`);const l=r.match(/\s|\//),u=t.match(/\s|\//);if(l||u){const f=[`Unable to register library "${r}" with version "${t}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ss.warn(f.join(" "));return}po(new ua(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const k1="firebase-heartbeat-database",O1=1,Kl="firebase-heartbeat-store";let sm=null;function aT(){return sm||(sm=XA(k1,O1,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Kl)}catch(i){console.warn(i)}}}}).catch(s=>{throw pr.create("idb-open",{originalErrorMessage:s.message})})),sm}async function V1(s){try{const i=(await aT()).transaction(Kl),r=await i.objectStore(Kl).get(oT(s));return await i.done,r}catch(t){if(t instanceof Rs)Ss.warn(t.message);else{const i=pr.create("idb-get",{originalErrorMessage:t?.message});Ss.warn(i.message)}}}async function wv(s,t){try{const r=(await aT()).transaction(Kl,"readwrite");await r.objectStore(Kl).put(t,oT(s)),await r.done}catch(i){if(i instanceof Rs)Ss.warn(i.message);else{const r=pr.create("idb-set",{originalErrorMessage:i?.message});Ss.warn(r.message)}}}function oT(s){return`${s.name}!${s.options.appId}`}const M1=1024,j1=30;class L1{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new U1(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>j1){const l=z1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Ss.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xv(),{heartbeatsToSend:i,unsentEntries:r}=P1(this._heartbeatsCache.heartbeats),l=ah(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ss.warn(t),""}}}function xv(){return new Date().toISOString().substring(0,10)}function P1(s,t=M1){const i=[];let r=s.slice();for(const l of s){const u=i.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),Rv(i)>t){u.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),Rv(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class U1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wA()?xA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await V1(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return wv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return wv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Rv(s){return ah(JSON.stringify({version:2,heartbeats:s})).length}function z1(s){if(s.length===0)return-1;let t=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,t=r);return t}function B1(s){po(new ua("platform-logger",t=>new JA(t),"PRIVATE")),po(new ua("heartbeat",t=>new L1(t),"PRIVATE")),gr(gm,Sv,s),gr(gm,Sv,"esm2020"),gr("fire-js","")}B1("");var q1="firebase",H1="12.7.0";gr(q1,H1,"app");var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var yr,lT;(function(){var s;function t(N,S){function I(){}I.prototype=S.prototype,N.F=S.prototype,N.prototype=new I,N.prototype.constructor=N,N.D=function(V,k,C){for(var x=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)x[Et-2]=arguments[Et];return S.prototype[k].apply(V,x)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,i),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(N,S,I){I||(I=0);const V=Array(16);if(typeof S=="string")for(var k=0;k<16;++k)V[k]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(k=0;k<16;++k)V[k]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=N.g[0],I=N.g[1],k=N.g[2];let C=N.g[3],x;x=S+(C^I&(k^C))+V[0]+3614090360&4294967295,S=I+(x<<7&4294967295|x>>>25),x=C+(k^S&(I^k))+V[1]+3905402710&4294967295,C=S+(x<<12&4294967295|x>>>20),x=k+(I^C&(S^I))+V[2]+606105819&4294967295,k=C+(x<<17&4294967295|x>>>15),x=I+(S^k&(C^S))+V[3]+3250441966&4294967295,I=k+(x<<22&4294967295|x>>>10),x=S+(C^I&(k^C))+V[4]+4118548399&4294967295,S=I+(x<<7&4294967295|x>>>25),x=C+(k^S&(I^k))+V[5]+1200080426&4294967295,C=S+(x<<12&4294967295|x>>>20),x=k+(I^C&(S^I))+V[6]+2821735955&4294967295,k=C+(x<<17&4294967295|x>>>15),x=I+(S^k&(C^S))+V[7]+4249261313&4294967295,I=k+(x<<22&4294967295|x>>>10),x=S+(C^I&(k^C))+V[8]+1770035416&4294967295,S=I+(x<<7&4294967295|x>>>25),x=C+(k^S&(I^k))+V[9]+2336552879&4294967295,C=S+(x<<12&4294967295|x>>>20),x=k+(I^C&(S^I))+V[10]+4294925233&4294967295,k=C+(x<<17&4294967295|x>>>15),x=I+(S^k&(C^S))+V[11]+2304563134&4294967295,I=k+(x<<22&4294967295|x>>>10),x=S+(C^I&(k^C))+V[12]+1804603682&4294967295,S=I+(x<<7&4294967295|x>>>25),x=C+(k^S&(I^k))+V[13]+4254626195&4294967295,C=S+(x<<12&4294967295|x>>>20),x=k+(I^C&(S^I))+V[14]+2792965006&4294967295,k=C+(x<<17&4294967295|x>>>15),x=I+(S^k&(C^S))+V[15]+1236535329&4294967295,I=k+(x<<22&4294967295|x>>>10),x=S+(k^C&(I^k))+V[1]+4129170786&4294967295,S=I+(x<<5&4294967295|x>>>27),x=C+(I^k&(S^I))+V[6]+3225465664&4294967295,C=S+(x<<9&4294967295|x>>>23),x=k+(S^I&(C^S))+V[11]+643717713&4294967295,k=C+(x<<14&4294967295|x>>>18),x=I+(C^S&(k^C))+V[0]+3921069994&4294967295,I=k+(x<<20&4294967295|x>>>12),x=S+(k^C&(I^k))+V[5]+3593408605&4294967295,S=I+(x<<5&4294967295|x>>>27),x=C+(I^k&(S^I))+V[10]+38016083&4294967295,C=S+(x<<9&4294967295|x>>>23),x=k+(S^I&(C^S))+V[15]+3634488961&4294967295,k=C+(x<<14&4294967295|x>>>18),x=I+(C^S&(k^C))+V[4]+3889429448&4294967295,I=k+(x<<20&4294967295|x>>>12),x=S+(k^C&(I^k))+V[9]+568446438&4294967295,S=I+(x<<5&4294967295|x>>>27),x=C+(I^k&(S^I))+V[14]+3275163606&4294967295,C=S+(x<<9&4294967295|x>>>23),x=k+(S^I&(C^S))+V[3]+4107603335&4294967295,k=C+(x<<14&4294967295|x>>>18),x=I+(C^S&(k^C))+V[8]+1163531501&4294967295,I=k+(x<<20&4294967295|x>>>12),x=S+(k^C&(I^k))+V[13]+2850285829&4294967295,S=I+(x<<5&4294967295|x>>>27),x=C+(I^k&(S^I))+V[2]+4243563512&4294967295,C=S+(x<<9&4294967295|x>>>23),x=k+(S^I&(C^S))+V[7]+1735328473&4294967295,k=C+(x<<14&4294967295|x>>>18),x=I+(C^S&(k^C))+V[12]+2368359562&4294967295,I=k+(x<<20&4294967295|x>>>12),x=S+(I^k^C)+V[5]+4294588738&4294967295,S=I+(x<<4&4294967295|x>>>28),x=C+(S^I^k)+V[8]+2272392833&4294967295,C=S+(x<<11&4294967295|x>>>21),x=k+(C^S^I)+V[11]+1839030562&4294967295,k=C+(x<<16&4294967295|x>>>16),x=I+(k^C^S)+V[14]+4259657740&4294967295,I=k+(x<<23&4294967295|x>>>9),x=S+(I^k^C)+V[1]+2763975236&4294967295,S=I+(x<<4&4294967295|x>>>28),x=C+(S^I^k)+V[4]+1272893353&4294967295,C=S+(x<<11&4294967295|x>>>21),x=k+(C^S^I)+V[7]+4139469664&4294967295,k=C+(x<<16&4294967295|x>>>16),x=I+(k^C^S)+V[10]+3200236656&4294967295,I=k+(x<<23&4294967295|x>>>9),x=S+(I^k^C)+V[13]+681279174&4294967295,S=I+(x<<4&4294967295|x>>>28),x=C+(S^I^k)+V[0]+3936430074&4294967295,C=S+(x<<11&4294967295|x>>>21),x=k+(C^S^I)+V[3]+3572445317&4294967295,k=C+(x<<16&4294967295|x>>>16),x=I+(k^C^S)+V[6]+76029189&4294967295,I=k+(x<<23&4294967295|x>>>9),x=S+(I^k^C)+V[9]+3654602809&4294967295,S=I+(x<<4&4294967295|x>>>28),x=C+(S^I^k)+V[12]+3873151461&4294967295,C=S+(x<<11&4294967295|x>>>21),x=k+(C^S^I)+V[15]+530742520&4294967295,k=C+(x<<16&4294967295|x>>>16),x=I+(k^C^S)+V[2]+3299628645&4294967295,I=k+(x<<23&4294967295|x>>>9),x=S+(k^(I|~C))+V[0]+4096336452&4294967295,S=I+(x<<6&4294967295|x>>>26),x=C+(I^(S|~k))+V[7]+1126891415&4294967295,C=S+(x<<10&4294967295|x>>>22),x=k+(S^(C|~I))+V[14]+2878612391&4294967295,k=C+(x<<15&4294967295|x>>>17),x=I+(C^(k|~S))+V[5]+4237533241&4294967295,I=k+(x<<21&4294967295|x>>>11),x=S+(k^(I|~C))+V[12]+1700485571&4294967295,S=I+(x<<6&4294967295|x>>>26),x=C+(I^(S|~k))+V[3]+2399980690&4294967295,C=S+(x<<10&4294967295|x>>>22),x=k+(S^(C|~I))+V[10]+4293915773&4294967295,k=C+(x<<15&4294967295|x>>>17),x=I+(C^(k|~S))+V[1]+2240044497&4294967295,I=k+(x<<21&4294967295|x>>>11),x=S+(k^(I|~C))+V[8]+1873313359&4294967295,S=I+(x<<6&4294967295|x>>>26),x=C+(I^(S|~k))+V[15]+4264355552&4294967295,C=S+(x<<10&4294967295|x>>>22),x=k+(S^(C|~I))+V[6]+2734768916&4294967295,k=C+(x<<15&4294967295|x>>>17),x=I+(C^(k|~S))+V[13]+1309151649&4294967295,I=k+(x<<21&4294967295|x>>>11),x=S+(k^(I|~C))+V[4]+4149444226&4294967295,S=I+(x<<6&4294967295|x>>>26),x=C+(I^(S|~k))+V[11]+3174756917&4294967295,C=S+(x<<10&4294967295|x>>>22),x=k+(S^(C|~I))+V[2]+718787259&4294967295,k=C+(x<<15&4294967295|x>>>17),x=I+(C^(k|~S))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(k+(x<<21&4294967295|x>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+C&4294967295}r.prototype.v=function(N,S){S===void 0&&(S=N.length);const I=S-this.blockSize,V=this.C;let k=this.h,C=0;for(;C<S;){if(k==0)for(;C<=I;)l(this,N,C),C+=this.blockSize;if(typeof N=="string"){for(;C<S;)if(V[k++]=N.charCodeAt(C++),k==this.blockSize){l(this,V),k=0;break}}else for(;C<S;)if(V[k++]=N[C++],k==this.blockSize){l(this,V),k=0;break}}this.h=k,this.o+=S},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;S=this.o*8;for(var I=N.length-8;I<N.length;++I)N[I]=S&255,S/=256;for(this.v(N),N=Array(16),S=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)N[S++]=this.g[I]>>>V&255;return N};function u(N,S){var I=m;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=S(N)}function f(N,S){this.h=S;const I=[];let V=!0;for(let k=N.length-1;k>=0;k--){const C=N[k]|0;V&&C==S||(I[k]=C,V=!1)}this.g=I}var m={};function g(N){return-128<=N&&N<128?u(N,function(S){return new f([S|0],S<0?-1:0)}):new f([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return w;if(N<0)return Y(y(-N));const S=[];let I=1;for(let V=0;N>=I;V++)S[V]=N/I|0,I*=4294967296;return new f(S,0)}function b(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return Y(b(N.substring(1),S));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=y(Math.pow(S,8));let V=w;for(let C=0;C<N.length;C+=8){var k=Math.min(8,N.length-C);const x=parseInt(N.substring(C,C+k),S);k<8?(k=y(Math.pow(S,k)),V=V.j(k).add(y(x))):(V=V.j(I),V=V.add(y(x)))}return V}var w=g(0),R=g(1),P=g(16777216);s=f.prototype,s.m=function(){if($(this))return-Y(this).m();let N=0,S=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);N+=(V>=0?V:4294967296+V)*S,S*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(W(this))return"0";if($(this))return"-"+Y(this).toString(N);const S=y(Math.pow(N,6));var I=this;let V="";for(;;){const k=Mt(I,S).g;I=rt(I,k.j(S));let C=((I.g.length>0?I.g[0]:I.h)>>>0).toString(N);if(I=k,W(I))return C+V;for(;C.length<6;)C="0"+C;V=C+V}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function W(N){if(N.h!=0)return!1;for(let S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function $(N){return N.h==-1}s.l=function(N){return N=rt(this,N),$(N)?-1:W(N)?0:1};function Y(N){const S=N.g.length,I=[];for(let V=0;V<S;V++)I[V]=~N.g[V];return new f(I,~N.h).add(R)}s.abs=function(){return $(this)?Y(this):this},s.add=function(N){const S=Math.max(this.g.length,N.g.length),I=[];let V=0;for(let k=0;k<=S;k++){let C=V+(this.i(k)&65535)+(N.i(k)&65535),x=(C>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);V=x>>>16,C&=65535,x&=65535,I[k]=x<<16|C}return new f(I,I[I.length-1]&-2147483648?-1:0)};function rt(N,S){return N.add(Y(S))}s.j=function(N){if(W(this)||W(N))return w;if($(this))return $(N)?Y(this).j(Y(N)):Y(Y(this).j(N));if($(N))return Y(this.j(Y(N)));if(this.l(P)<0&&N.l(P)<0)return y(this.m()*N.m());const S=this.g.length+N.g.length,I=[];for(var V=0;V<2*S;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let k=0;k<N.g.length;k++){const C=this.i(V)>>>16,x=this.i(V)&65535,Et=N.i(k)>>>16,lt=N.i(k)&65535;I[2*V+2*k]+=x*lt,ft(I,2*V+2*k),I[2*V+2*k+1]+=C*lt,ft(I,2*V+2*k+1),I[2*V+2*k+1]+=x*Et,ft(I,2*V+2*k+1),I[2*V+2*k+2]+=C*Et,ft(I,2*V+2*k+2)}for(N=0;N<S;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=S;N<2*S;N++)I[N]=0;return new f(I,0)};function ft(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function vt(N,S){this.g=N,this.h=S}function Mt(N,S){if(W(S))throw Error("division by zero");if(W(N))return new vt(w,w);if($(N))return S=Mt(Y(N),S),new vt(Y(S.g),Y(S.h));if($(S))return S=Mt(N,Y(S)),new vt(Y(S.g),S.h);if(N.g.length>30){if($(N)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var I=R,V=S;V.l(N)<=0;)I=at(I),V=at(V);var k=St(I,1),C=St(V,1);for(V=St(V,2),I=St(I,2);!W(V);){var x=C.add(V);x.l(N)<=0&&(k=k.add(I),C=x),V=St(V,1),I=St(I,1)}return S=rt(N,k.j(S)),new vt(k,S)}for(k=w;N.l(S)>=0;){for(I=Math.max(1,Math.floor(N.m()/S.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),C=y(I),x=C.j(S);$(x)||x.l(N)>0;)I-=V,C=y(I),x=C.j(S);W(C)&&(C=R),k=k.add(C),N=rt(N,x)}return new vt(k,N)}s.B=function(N){return Mt(this,N).h},s.and=function(N){const S=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<S;V++)I[V]=this.i(V)&N.i(V);return new f(I,this.h&N.h)},s.or=function(N){const S=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<S;V++)I[V]=this.i(V)|N.i(V);return new f(I,this.h|N.h)},s.xor=function(N){const S=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<S;V++)I[V]=this.i(V)^N.i(V);return new f(I,this.h^N.h)};function at(N){const S=N.g.length+1,I=[];for(let V=0;V<S;V++)I[V]=N.i(V)<<1|N.i(V-1)>>>31;return new f(I,N.h)}function St(N,S){const I=S>>5;S%=32;const V=N.g.length-I,k=[];for(let C=0;C<V;C++)k[C]=S>0?N.i(C+I)>>>S|N.i(C+I+1)<<32-S:N.i(C+I);return new f(k,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,lT=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=b,yr=f}).apply(typeof Cv<"u"?Cv:typeof self<"u"?self:typeof window<"u"?window:{});var Hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var uT,jl,cT,$c,vm,hT,fT,dT;(function(){var s,t=Object.defineProperty;function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hc=="object"&&Hc];for(var p=0;p<c.length;++p){var E=c[p];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=i(this);function l(c,p){if(p)t:{var E=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var z=c[A];if(!(z in E))break t;E=E[z]}c=c[c.length-1],A=E[c],p=p(A),p!=A&&p!=null&&t(E,c,{configurable:!0,writable:!0,value:p})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(p){var E=[],A;for(A in p)Object.prototype.hasOwnProperty.call(p,A)&&E.push([A,p[A]]);return E}});var u=u||{},f=this||self;function m(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function g(c,p,E){return c.call.apply(c.bind,arguments)}function y(c,p,E){return y=g,y.apply(null,arguments)}function b(c,p){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function w(c,p){function E(){}E.prototype=p.prototype,c.Z=p.prototype,c.prototype=new E,c.prototype.constructor=c,c.Ob=function(A,z,G){for(var ut=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)ut[Ot-2]=arguments[Ot];return p.prototype[z].apply(A,ut)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function P(c){const p=c.length;if(p>0){const E=Array(p);for(let A=0;A<p;A++)E[A]=c[A];return E}return[]}function W(c,p){for(let A=1;A<arguments.length;A++){const z=arguments[A];var E=typeof z;if(E=E!="object"?E:z?Array.isArray(z)?"array":E:"null",E=="array"||E=="object"&&typeof z.length=="number"){E=c.length||0;const G=z.length||0;c.length=E+G;for(let ut=0;ut<G;ut++)c[E+ut]=z[ut]}else c.push(z)}}class ${constructor(p,E){this.i=p,this.j=E,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function Y(c){f.setTimeout(()=>{throw c},0)}function rt(){var c=N;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class ft{constructor(){this.h=this.g=null}add(p,E){const A=vt.get();A.set(p,E),this.h?this.h.next=A:this.g=A,this.h=A}}var vt=new $(()=>new Mt,c=>c.reset());class Mt{constructor(){this.next=this.g=this.h=null}set(p,E){this.h=p,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let at,St=!1,N=new ft,S=()=>{const c=Promise.resolve(void 0);at=()=>{c.then(I)}};function I(){for(var c;c=rt();){try{c.h.call(c.g)}catch(E){Y(E)}var p=vt;p.j(c),p.h<100&&(p.h++,c.next=p.g,p.g=c)}St=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};f.addEventListener("test",E,p),f.removeEventListener("test",E,p)}catch{}return c})();function x(c){return/^[\s\xa0]*$/.test(c)}function Et(c,p){k.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,p)}w(Et,k),Et.prototype.init=function(c,p){const E=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget,p||(E=="mouseover"?p=c.fromElement:E=="mouseout"&&(p=c.toElement)),this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Et.Z.h.call(this)},Et.prototype.h=function(){Et.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var lt="closure_listenable_"+(Math.random()*1e6|0),B=0;function nt(c,p,E,A,z){this.listener=c,this.proxy=null,this.src=p,this.type=E,this.capture=!!A,this.ha=z,this.key=++B,this.da=this.fa=!1}function L(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function tt(c,p,E){for(const A in c)p.call(E,c[A],A,c)}function st(c,p){for(const E in c)p.call(void 0,c[E],E,c)}function D(c){const p={};for(const E in c)p[E]=c[E];return p}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(c,p){let E,A;for(let z=1;z<arguments.length;z++){A=arguments[z];for(E in A)c[E]=A[E];for(let G=0;G<U.length;G++)E=U[G],Object.prototype.hasOwnProperty.call(A,E)&&(c[E]=A[E])}}function ot(c){this.src=c,this.g={},this.h=0}ot.prototype.add=function(c,p,E,A,z){const G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);const ut=pt(c,p,A,z);return ut>-1?(p=c[ut],E||(p.fa=!1)):(p=new nt(p,this.src,G,!!A,z),p.fa=E,c.push(p)),p};function dt(c,p){const E=p.type;if(E in c.g){var A=c.g[E],z=Array.prototype.indexOf.call(A,p,void 0),G;(G=z>=0)&&Array.prototype.splice.call(A,z,1),G&&(L(p),c.g[E].length==0&&(delete c.g[E],c.h--))}}function pt(c,p,E,A){for(let z=0;z<c.length;++z){const G=c[z];if(!G.da&&G.listener==p&&G.capture==!!E&&G.ha==A)return z}return-1}var At="closure_lm_"+(Math.random()*1e6|0),Yt={};function Lt(c,p,E,A,z){if(Array.isArray(p)){for(let G=0;G<p.length;G++)Lt(c,p[G],E,A,z);return null}return E=Ti(E),c&&c[lt]?c.J(p,E,m(A)?!!A.capture:!1,z):le(c,p,E,!1,A,z)}function le(c,p,E,A,z,G){if(!p)throw Error("Invalid event type");const ut=m(z)?!!z.capture:!!z;let Ot=ri(c);if(Ot||(c[At]=Ot=new ot(c)),E=Ot.add(p,E,A,ut,G),E.proxy)return E;if(A=Je(),E.proxy=A,A.src=c,A.listener=E,c.addEventListener)C||(z=ut),z===void 0&&(z=!1),c.addEventListener(p.toString(),A,z);else if(c.attachEvent)c.attachEvent(un(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Je(){function c(E){return p.call(c.src,c.listener,E)}const p=Is;return c}function Hn(c,p,E,A,z){if(Array.isArray(p))for(var G=0;G<p.length;G++)Hn(c,p[G],E,A,z);else A=m(A)?!!A.capture:!!A,E=Ti(E),c&&c[lt]?(c=c.i,G=String(p).toString(),G in c.g&&(p=c.g[G],E=pt(p,E,A,z),E>-1&&(L(p[E]),Array.prototype.splice.call(p,E,1),p.length==0&&(delete c.g[G],c.h--)))):c&&(c=ri(c))&&(p=c.g[p.toString()],c=-1,p&&(c=pt(p,E,A,z)),(E=c>-1?p[c]:null)&&Tn(E))}function Tn(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[lt])dt(p.i,c);else{var E=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(E,A,c.capture):p.detachEvent?p.detachEvent(un(E),A):p.addListener&&p.removeListener&&p.removeListener(A),(E=ri(p))?(dt(E,c),E.h==0&&(E.src=null,p[At]=null)):L(c)}}}function un(c){return c in Yt?Yt[c]:Yt[c]="on"+c}function Is(c,p){if(c.da)c=!0;else{p=new Et(p,this);const E=c.listener,A=c.ha||c.src;c.fa&&Tn(c),c=E.call(A,p)}return c}function ri(c){return c=c[At],c instanceof ot?c:null}var Ds="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ti(c){return typeof c=="function"?c:(c[Ds]||(c[Ds]=function(p){return c.handleEvent(p)}),c[Ds])}function ge(){V.call(this),this.i=new ot(this),this.M=this,this.G=null}w(ge,V),ge.prototype[lt]=!0,ge.prototype.removeEventListener=function(c,p,E,A){Hn(this,c,p,E,A)};function yt(c,p){var E,A=c.G;if(A)for(E=[];A;A=A.G)E.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new k(p,c);else if(p instanceof k)p.target=p.target||c;else{var z=p;p=new k(A,c),X(p,z)}z=!0;let G,ut;if(E)for(ut=E.length-1;ut>=0;ut--)G=p.g=E[ut],z=xt(G,A,!0,p)&&z;if(G=p.g=c,z=xt(G,A,!0,p)&&z,z=xt(G,A,!1,p)&&z,E)for(ut=0;ut<E.length;ut++)G=p.g=E[ut],z=xt(G,A,!1,p)&&z}ge.prototype.N=function(){if(ge.Z.N.call(this),this.i){var c=this.i;for(const p in c.g){const E=c.g[p];for(let A=0;A<E.length;A++)L(E[A]);delete c.g[p],c.h--}}this.G=null},ge.prototype.J=function(c,p,E,A){return this.i.add(String(c),p,!1,E,A)},ge.prototype.K=function(c,p,E,A){return this.i.add(String(c),p,!0,E,A)};function xt(c,p,E,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();let z=!0;for(let G=0;G<p.length;++G){const ut=p[G];if(ut&&!ut.da&&ut.capture==E){const Ot=ut.listener,we=ut.ha||ut.src;ut.fa&&dt(c.i,ut),z=Ot.call(we,A)!==!1&&z}}return z&&!A.defaultPrevented}function he(c,p){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:f.setTimeout(c,p||0)}function He(c){c.g=he(()=>{c.g=null,c.i&&(c.i=!1,He(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class ie extends V{constructor(p,E){super(),this.m=p,this.l=E,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:He(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function De(c){V.call(this),this.h=c,this.g={}}w(De,V);var Fe=[];function gn(c){tt(c.g,function(p,E){this.g.hasOwnProperty(E)&&Tn(p)},c),c.g={}}De.prototype.N=function(){De.Z.N.call(this),gn(this)},De.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ge=f.JSON.stringify,ya=f.JSON.parse,zt=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function Nn(){}function cn(){}var Ke={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ne(){k.call(this,"d")}w(Ne,k);function Fn(){k.call(this,"c")}w(Fn,k);var Ae={},_u=null;function _a(){return _u=_u||new ge}Ae.Ia="serverreachability";function vu(c){k.call(this,Ae.Ia,c)}w(vu,k);function bi(c){const p=_a();yt(p,new vu(p))}Ae.STAT_EVENT="statevent";function Dr(c,p){k.call(this,Ae.STAT_EVENT,c),this.stat=p}w(Dr,k);function ke(c){const p=_a();yt(p,new Dr(p,c))}Ae.Ja="timingevent";function Si(c,p){k.call(this,Ae.Ja,c),this.size=p}w(Si,k);function Ai(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},p)}function ai(){this.g=!0}ai.prototype.ua=function(){this.g=!1};function Wh(c,p,E,A,z,G){c.info(function(){if(c.g)if(G){var ut="",Ot=G.split("&");for(let Wt=0;Wt<Ot.length;Wt++){var we=Ot[Wt].split("=");if(we.length>1){const ye=we[0];we=we[1];const Qn=ye.split("_");ut=Qn.length>=2&&Qn[1]=="type"?ut+(ye+"="+we+"&"):ut+(ye+"=redacted&")}}}else ut=null;else ut=G;return"XMLHTTP REQ ("+A+") [attempt "+z+"]: "+p+`
`+E+`
`+ut})}function Eu(c,p,E,A,z,G,ut){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+z+"]: "+p+`
`+E+`
`+G+" "+ut})}function wi(c,p,E,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Zh(c,E)+(A?" "+A:"")})}function Nr(c,p){c.info(function(){return"TIMEOUT: "+p})}ai.prototype.info=function(){};function Zh(c,p){if(!c.g)return p;if(!p)return null;try{const G=JSON.parse(p);if(G){for(c=0;c<G.length;c++)if(Array.isArray(G[c])){var E=G[c];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var z=A[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ut=1;ut<A.length;ut++)A[ut]=""}}}}return Ge(G)}catch{return p}}var kr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Oo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vo;function Or(){}w(Or,Nn),Or.prototype.g=function(){return new XMLHttpRequest},Vo=new Or;function Ji(c){return encodeURIComponent(String(c))}function Tu(c){var p=1;c=c.split(":");const E=[];for(;p>0&&c.length;)E.push(c.shift()),p--;return c.length&&E.push(c.join(":")),E}function oi(c,p,E,A){this.j=c,this.i=p,this.l=E,this.S=A||1,this.V=new De(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new li}function li(){this.i=null,this.g="",this.h=!1}var Oe={},$e={};function xi(c,p,E){c.M=1,c.A=Vr(Me(p)),c.u=E,c.R=!0,va(c,null)}function va(c,p){c.F=Date.now(),Ri(c),c.B=Me(c.A);var E=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),Sa(E.i,"t",A),c.C=0,E=c.j.L,c.h=new li,c.g=ju(c.j,E?p:null,!c.u),c.P>0&&(c.O=new ie(y(c.Y,c,c.g),c.P)),p=c.V,E=c.g,A=c.ba;var z="readystatechange";Array.isArray(z)||(z&&(Fe[0]=z.toString()),z=Fe);for(let G=0;G<z.length;G++){const ut=Lt(E,z[G],A||p.handleEvent,!1,p.h||p);if(!ut)break;p.g[ut.key]=ut}p=c.J?D(c.J):{},c.u?(c.v||(c.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,p)):(c.v="GET",c.g.ea(c.B,c.v,null,p)),bi(),Wh(c.i,c.v,c.B,c.l,c.S,c.u)}oi.prototype.ba=function(c){c=c.target;const p=this.O;p&&hi(c)==3?p.j():this.Y(c)},oi.prototype.Y=function(c){try{if(c==this.g)t:{const Ot=hi(this.g),we=this.g.ya(),Wt=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||tn(this.g)))){this.K||Ot!=4||we==7||(we==8||Wt<=0?bi(3):bi(2)),Ci(this);var p=this.g.ca();this.X=p;var E=Jh(this);if(this.o=p==200,Eu(this.i,this.v,this.B,this.l,this.S,Ot,p),this.o){if(this.U&&!this.L){e:{if(this.g){var A,z=this.g;if((A=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(A)){var G=A;break e}}G=null}if(c=G)wi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ii(this,c);else{this.o=!1,this.m=3,ke(12),kn(this),Gn(this);break t}}if(this.R){c=!0;let ye;for(;!this.K&&this.C<E.length;)if(ye=Su(this,E),ye==$e){Ot==4&&(this.m=4,ke(14),c=!1),wi(this.i,this.l,null,"[Incomplete Response]");break}else if(ye==Oe){this.m=4,ke(15),wi(this.i,this.l,E,"[Invalid Chunk]"),c=!1;break}else wi(this.i,this.l,ye,null),Ii(this,ye);if(bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||E.length!=0||this.h.h||(this.m=1,ke(16),c=!1),this.o=this.o&&c,!c)wi(this.i,this.l,E,"[Invalid Chunked Response]"),kn(this),Gn(this);else if(E.length>0&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.aa&&!ut.P&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),$o(ut),ut.P=!0,ke(11))}}else wi(this.i,this.l,E,null),Ii(this,E);Ot==4&&kn(this),this.o&&!this.K&&(Ot==4?ku(this.j,this):(this.o=!1,Ri(this)))}else es(this.g),p==400&&E.indexOf("Unknown SID")>0?(this.m=3,ke(12)):(this.m=0,ke(13)),kn(this),Gn(this)}}}catch{}};function Jh(c){if(!bu(c))return c.g.la();const p=tn(c.g);if(p==="")return"";let E="";const A=p.length,z=hi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return kn(c),Gn(c),"";c.h.i=new f.TextDecoder}for(let G=0;G<A;G++)c.h.h=!0,E+=c.h.i.decode(p[G],{stream:!(z&&G==A-1)});return p.length=0,c.h.g+=E,c.C=0,c.h.g}function bu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Su(c,p){var E=c.C,A=p.indexOf(`
`,E);return A==-1?$e:(E=Number(p.substring(E,A)),isNaN(E)?Oe:(A+=1,A+E>p.length?$e:(p=p.slice(A,A+E),c.C=A+E,p)))}oi.prototype.cancel=function(){this.K=!0,kn(this)};function Ri(c){c.T=Date.now()+c.H,Ea(c,c.H)}function Ea(c,p){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ai(y(c.aa,c),p)}function Ci(c){c.D&&(f.clearTimeout(c.D),c.D=null)}oi.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Nr(this.i,this.B),this.M!=2&&(bi(),ke(17)),kn(this),this.m=2,Gn(this)):Ea(this,this.T-c)};function Gn(c){c.j.I==0||c.K||ku(c.j,c)}function kn(c){Ci(c);var p=c.O;p&&typeof p.dispose=="function"&&p.dispose(),c.O=null,gn(c.V),c.g&&(p=c.g,c.g=null,p.abort(),p.dispose())}function Ii(c,p){try{var E=c.j;if(E.I!=0&&(E.g==c||Ni(E.h,c))){if(!c.L&&Ni(E.h,c)&&E.I==3){try{var A=E.Ba.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var z=A;if(z[0]==0){t:if(!E.v){if(E.g)if(E.g.F+3e3<c.F)Ca(E),Ps(E);else break t;Br(E),ke(18)}}else E.xa=z[1],0<E.xa-E.K&&z[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ai(y(E.Va,E),6e3));Di(E.h)<=1&&E.ta&&(E.ta=void 0)}else Li(E,11)}else if((c.L||E.g==c)&&Ca(E),!x(p))for(z=E.Ba.g.parse(p),p=0;p<z.length;p++){let Wt=z[p];const ye=Wt[0];if(!(ye<=E.K))if(E.K=ye,Wt=Wt[1],E.I==2)if(Wt[0]=="c"){E.M=Wt[1],E.ba=Wt[2];const Qn=Wt[3];Qn!=null&&(E.ka=Qn,E.j.info("VER="+E.ka));const Pi=Wt[4];Pi!=null&&(E.za=Pi,E.j.info("SVER="+E.za));const fi=Wt[5];fi!=null&&typeof fi=="number"&&fi>0&&(A=1.5*fi,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const di=c.g;if(di){const qr=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qr){var G=A.h;G.g||qr.indexOf("spdy")==-1&&qr.indexOf("quic")==-1&&qr.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Lo(G,G.h),G.h=null))}if(A.G){const Ia=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(A.wa=Ia,te(A.J,A.G,Ia))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-c.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var ut=c;if(A.na=Mu(A,A.L?A.ba:null,A.W),ut.L){Po(A.h,ut);var Ot=ut,we=A.O;we&&(Ot.H=we),Ot.D&&(Ci(Ot),Ri(Ot)),A.g=ut}else Du(A);E.i.length>0&&ji(E)}else Wt[0]!="stop"&&Wt[0]!="close"||Li(E,7);else E.I==3&&(Wt[0]=="stop"||Wt[0]=="close"?Wt[0]=="stop"?Li(E,7):Yo(E):Wt[0]!="noop"&&E.l&&E.l.qa(Wt),E.A=0)}}bi(4)}catch{}}var Ve=class{constructor(c,p){this.g=c,this.map=p}};function Mo(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Di(c){return c.h?1:c.g?c.g.size:0}function Ni(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Lo(c,p){c.g?c.g.add(p):c.h=p}function Po(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Mo.prototype.cancel=function(){if(this.i=Uo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Uo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const E of c.g.values())p=p.concat(E.G);return p}return P(c.i)}var Au=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(c,p){if(c){c=c.split("&");for(let E=0;E<c.length;E++){const A=c[E].indexOf("=");let z,G=null;A>=0?(z=c[E].substring(0,A),G=c[E].substring(A+1)):z=c[E],p(z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function On(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;c instanceof On?(this.l=c.l,Xe(this,c.j),this.o=c.o,this.g=c.g,Ns(this,c.u),this.h=c.h,zo(this,Cu(c.i)),this.m=c.m):c&&(p=String(c).match(Au))?(this.l=!1,Xe(this,p[1]||"",!0),this.o=ki(p[2]||""),this.g=ki(p[3]||"",!0),Ns(this,p[4]),this.h=ki(p[5]||"",!0),zo(this,p[6]||"",!0),this.m=ki(p[7]||"")):(this.l=!1,this.i=new Os(null,this.l))}On.prototype.toString=function(){const c=[];var p=this.j;p&&c.push(Mr(p,ba,!0),":");var E=this.g;return(E||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Mr(p,ba,!0),"@"),c.push(Ji(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&c.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(Mr(E,E.charAt(0)=="/"?Bo:wu,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",Mr(E,xu)),c.join("")},On.prototype.resolve=function(c){const p=Me(this);let E=!!c.j;E?Xe(p,c.j):E=!!c.o,E?p.o=c.o:E=!!c.g,E?p.g=c.g:E=c.u!=null;var A=c.h;if(E)Ns(p,c.u);else if(E=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var z=p.h.lastIndexOf("/");z!=-1&&(A=p.h.slice(0,z+1)+A)}if(z=A,z==".."||z==".")A="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){A=z.lastIndexOf("/",0)==0,z=z.split("/");const G=[];for(let ut=0;ut<z.length;){const Ot=z[ut++];Ot=="."?A&&ut==z.length&&G.push(""):Ot==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),A&&ut==z.length&&G.push("")):(G.push(Ot),A=!0)}A=G.join("/")}else A=z}return E?p.h=A:E=c.i.toString()!=="",E?zo(p,Cu(c.i)):E=!!c.m,E&&(p.m=c.m),p};function Me(c){return new On(c)}function Xe(c,p,E){c.j=E?ki(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Ns(c,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);c.u=p}else c.u=null}function zo(c,p,E){p instanceof Os?(c.i=p,Aa(c.i,c.l)):(E||(p=Mr(p,ks)),c.i=new Os(p,c.l))}function te(c,p,E){c.i.set(p,E)}function Vr(c){return te(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ki(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Mr(c,p,E){return typeof c=="string"?(c=encodeURI(c).replace(p,bn),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function bn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ba=/[#\/\?@]/g,wu=/[#\?:]/g,Bo=/[#\?]/g,ks=/[#\?@]/g,xu=/#/g;function Os(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Sn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ta(c.i,function(p,E){c.add(decodeURIComponent(p.replace(/\+/g," ")),E)}))}s=Os.prototype,s.add=function(c,p){Sn(this),this.i=null,c=Vs(this,c);let E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(p),this.h+=1,this};function Ru(c,p){Sn(c),p=Vs(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function qo(c,p){return Sn(c),p=Vs(c,p),c.g.has(p)}s.forEach=function(c,p){Sn(this),this.g.forEach(function(E,A){E.forEach(function(z){c.call(p,z,A,this)},this)},this)};function Ho(c,p){Sn(c);let E=[];if(typeof p=="string")qo(c,p)&&(E=E.concat(c.g.get(Vs(c,p))));else for(c=Array.from(c.g.values()),p=0;p<c.length;p++)E=E.concat(c[p]);return E}s.set=function(c,p){return Sn(this),this.i=null,c=Vs(this,c),qo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},s.get=function(c,p){return c?(c=Ho(this,c),c.length>0?String(c[0]):p):p};function Sa(c,p,E){Ru(c,p),E.length>0&&(c.i=null,c.g.set(Vs(c,p),P(E)),c.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(let A=0;A<p.length;A++){var E=p[A];const z=Ji(E);E=Ho(this,E);for(let G=0;G<E.length;G++){let ut=z;E[G]!==""&&(ut+="="+Ji(E[G])),c.push(ut)}}return this.i=c.join("&")};function Cu(c){const p=new Os;return p.i=c.i,c.g&&(p.g=new Map(c.g),p.h=c.h),p}function Vs(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Aa(c,p){p&&!c.j&&(Sn(c),c.i=null,c.g.forEach(function(E,A){const z=A.toLowerCase();A!=z&&(Ru(this,A),Sa(this,z,E))},c)),c.j=p}function ui(c,p){const E=new ai;if(f.Image){const A=new Image;A.onload=b(Kn,E,"TestLoadImage: loaded",!0,p,A),A.onerror=b(Kn,E,"TestLoadImage: error",!1,p,A),A.onabort=b(Kn,E,"TestLoadImage: abort",!1,p,A),A.ontimeout=b(Kn,E,"TestLoadImage: timeout",!1,p,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function Fo(c,p){const E=new ai,A=new AbortController,z=setTimeout(()=>{A.abort(),Kn(E,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(G=>{clearTimeout(z),G.ok?Kn(E,"TestPingServer: ok",!0,p):Kn(E,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(z),Kn(E,"TestPingServer: error",!1,p)})}function Kn(c,p,E,A,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),A(E)}catch{}}function Ms(){this.g=new zt}function Oi(c){this.i=c.Sb||null,this.h=c.ab||!1}w(Oi,Nn),Oi.prototype.g=function(){return new jr(this.i,this.h)};function jr(c,p){ge.call(this),this.H=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(jr,ge),s=jr.prototype,s.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=p,this.readyState=1,ci(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(p.body=c),(this.H||f).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,js(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function wa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?js(this):ci(this),this.readyState==3&&wa(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,js(this))},s.Na=function(c){this.g&&(this.response=c,js(this))},s.ga=function(){this.g&&js(this)};function js(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ci(c)}s.setRequestHeader=function(c,p){this.A.append(c,p)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var E=p.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=p.next();return c.join(`\r
`)};function ci(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(jr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Yn(c){let p="";return tt(c,function(E,A){p+=A,p+=":",p+=E,p+=`\r
`}),p}function Lr(c,p,E){t:{for(A in E){var A=!1;break t}A=!0}A||(E=Yn(E),typeof c=="string"?E!=null&&Ji(E):te(c,p,E))}function se(c){ge.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(se,ge);var Vi=/^https?$/i,Go=["POST","PUT"];s=se.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,p,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vo.g(),this.g.onreadystatechange=R(y(this.Ca,this));try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(G){Pr(this,G);return}if(c=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var z in A)E.set(z,A[z]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const G of A.keys())E.set(G,A.get(G));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(G=>G.toLowerCase()=="content-type"),z=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Go,p,void 0)>=0)||A||z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ut]of E)this.g.setRequestHeader(G,ut);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(G){Pr(this,G)}};function Pr(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.o=5,Ko(c),ts(c)}function Ko(c){c.A||(c.A=!0,yt(c,"complete"),yt(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,yt(this,"complete"),yt(this,"abort"),ts(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),se.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ur(this):this.Xa())},s.Xa=function(){Ur(this)};function Ur(c){if(c.h&&typeof u<"u"){if(c.v&&hi(c)==4)setTimeout(c.Ca.bind(c),0);else if(yt(c,"readystatechange"),hi(c)==4){c.h=!1;try{const G=c.ca();t:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var E;if(!(E=p)){var A;if(A=G===0){let ut=String(c.D).match(Au)[1]||null;!ut&&f.self&&f.self.location&&(ut=f.self.location.protocol.slice(0,-1)),A=!Vi.test(ut?ut.toLowerCase():"")}E=A}if(E)yt(c,"complete"),yt(c,"success");else{c.o=6;try{var z=hi(c)>2?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.ca()+"]",Ko(c)}}finally{ts(c)}}}}function ts(c,p){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const E=c.g;c.g=null,p||yt(c,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function hi(c){return c.g?c.g.readyState:0}s.ca=function(){try{return hi(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),ya(p)}};function tn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function es(c){const p={};c=(c.g&&hi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(x(c[A]))continue;var E=Tu(c[A]);const z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const G=p[z]||[];p[z]=G,G.push(E)}st(p,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mi(c,p,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||p}function Ls(c){this.za=0,this.i=[],this.j=new ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mi("baseRetryDelayMs",5e3,c),this.Za=Mi("retryDelaySeedMs",1e4,c),this.Ta=Mi("forwardChannelMaxRetries",2,c),this.va=Mi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Mo(c&&c.concurrentRequestLimit),this.Ba=new Ms,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ls.prototype,s.ka=8,s.I=1,s.connect=function(c,p,E,A){ke(0),this.W=c,this.H=p||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=Mu(this,null,this.W),ji(this)};function Yo(c){if(xa(c),c.I==3){var p=c.V++,E=Me(c.J);if(te(E,"SID",c.M),te(E,"RID",p),te(E,"TYPE","terminate"),zr(c,E),p=new oi(c,c.j,p),p.M=2,p.A=Vr(Me(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(p.A.toString(),"")}catch{}!E&&f.Image&&(new Image().src=p.A,E=!0),E||(p.g=ju(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Ri(p)}Vu(c)}function Ps(c){c.g&&($o(c),c.g.cancel(),c.g=null)}function xa(c){Ps(c),c.v&&(f.clearTimeout(c.v),c.v=null),Ca(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function ji(c){if(!jo(c.h)&&!c.m){c.m=!0;var p=c.Ea;at||S(),St||(at(),St=!0),N.add(p,c),c.D=0}}function Ra(c,p){return Di(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=p.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ai(y(c.Ea,c,p),Ou(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const z=new oi(this,this.j,c);let G=this.o;if(this.U&&(G?(G=D(G),X(G,this.U)):G=this.U),this.u!==null||this.R||(z.J=G,G=null),this.S)t:{for(var p=0,E=0;E<this.i.length;E++){e:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,p>4096){p=E;break t}if(p===4096||E===this.i.length-1){p=E+1;break t}}p=1e3}else p=1e3;p=Iu(this,z,p),E=Me(this.J),te(E,"RID",c),te(E,"CVER",22),this.G&&te(E,"X-HTTP-Session-Id",this.G),zr(this,E),G&&(this.R?p="headers="+Ji(Yn(G))+"&"+p:this.u&&Lr(E,this.u,G)),Lo(this.h,z),this.Ra&&te(E,"TYPE","init"),this.S?(te(E,"$req",p),te(E,"SID","null"),z.U=!0,xi(z,E,null)):xi(z,E,p),this.I=2}}else this.I==3&&(c?Qo(this,c):this.i.length==0||jo(this.h)||Qo(this))};function Qo(c,p){var E;p?E=p.l:E=c.V++;const A=Me(c.J);te(A,"SID",c.M),te(A,"RID",E),te(A,"AID",c.K),zr(c,A),c.u&&c.o&&Lr(A,c.u,c.o),E=new oi(c,c.j,E,c.D+1),c.u===null&&(E.J=c.o),p&&(c.i=p.G.concat(c.i)),p=Iu(c,E,1e3),E.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Lo(c.h,E),xi(E,A,p)}function zr(c,p){c.H&&tt(c.H,function(E,A){te(p,A,E)}),c.l&&tt({},function(E,A){te(p,A,E)})}function Iu(c,p,E){E=Math.min(c.i.length,E);const A=c.l?y(c.l.Ka,c.l,c):null;t:{var z=c.i;let Ot=-1;for(;;){const we=["count="+E];Ot==-1?E>0?(Ot=z[0].g,we.push("ofs="+Ot)):Ot=0:we.push("ofs="+Ot);let Wt=!0;for(let ye=0;ye<E;ye++){var G=z[ye].g;const Qn=z[ye].map;if(G-=Ot,G<0)Ot=Math.max(0,z[ye].g-100),Wt=!1;else try{G="req"+G+"_"||"";try{var ut=Qn instanceof Map?Qn:Object.entries(Qn);for(const[Pi,fi]of ut){let di=fi;m(fi)&&(di=Ge(fi)),we.push(G+Pi+"="+encodeURIComponent(di))}}catch(Pi){throw we.push(G+"type="+encodeURIComponent("_badmap")),Pi}}catch{A&&A(Qn)}}if(Wt){ut=we.join("&");break t}}ut=void 0}return c=c.i.splice(0,E),p.G=c,ut}function Du(c){if(!c.g&&!c.v){c.Y=1;var p=c.Da;at||S(),St||(at(),St=!0),N.add(p,c),c.A=0}}function Br(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ai(y(c.Da,c),Ou(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,Nu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ai(y(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ke(10),Ps(this),Nu(this))};function $o(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Nu(c){c.g=new oi(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var p=Me(c.na);te(p,"RID","rpc"),te(p,"SID",c.M),te(p,"AID",c.K),te(p,"CI",c.F?"0":"1"),!c.F&&c.ia&&te(p,"TO",c.ia),te(p,"TYPE","xmlhttp"),zr(c,p),c.u&&c.o&&Lr(p,c.u,c.o),c.O&&(c.g.H=c.O);var E=c.g;c=c.ba,E.M=1,E.A=Vr(Me(p)),E.u=null,E.R=!0,va(E,c)}s.Va=function(){this.C!=null&&(this.C=null,Ps(this),Br(this),ke(19))};function Ca(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function ku(c,p){var E=null;if(c.g==p){Ca(c),$o(c),c.g=null;var A=2}else if(Ni(c.h,p))E=p.G,Po(c.h,p),A=1;else return;if(c.I!=0){if(p.o)if(A==1){E=p.u?p.u.length:0,p=Date.now()-p.F;var z=c.D;A=_a(),yt(A,new Si(A,E)),ji(c)}else Du(c);else if(z=p.m,z==3||z==0&&p.X>0||!(A==1&&Ra(c,p)||A==2&&Br(c)))switch(E&&E.length>0&&(p=c.h,p.i=p.i.concat(E)),z){case 1:Li(c,5);break;case 4:Li(c,10);break;case 3:Li(c,6);break;default:Li(c,2)}}}function Ou(c,p){let E=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(E*=2),E*p}function Li(c,p){if(c.j.info("Error code "+p),p==2){var E=y(c.bb,c),A=c.Ua;const z=!A;A=new On(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Xe(A,"https"),Vr(A),z?ui(A.toString(),E):Fo(A.toString(),E)}else ke(2);c.I=0,c.l&&c.l.pa(p),Vu(c),xa(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))};function Vu(c){if(c.I=0,c.ja=[],c.l){const p=Uo(c.h);(p.length!=0||c.i.length!=0)&&(W(c.ja,p),W(c.ja,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.oa()}}function Mu(c,p,E){var A=E instanceof On?Me(E):new On(E);if(A.g!="")p&&(A.g=p+"."+A.g),Ns(A,A.u);else{var z=f.location;A=z.protocol,p=p?p+"."+z.hostname:z.hostname,z=+z.port;const G=new On(null);A&&Xe(G,A),p&&(G.g=p),z&&Ns(G,z),E&&(G.h=E),A=G}return E=c.G,p=c.wa,E&&p&&te(A,E,p),te(A,"VER",c.ka),zr(c,A),A}function ju(c,p,E){if(p&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Aa&&!c.ma?new se(new Oi({ab:E})):new se(c.ma),p.Fa(c.L),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lu(){}s=Lu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Us(){}Us.prototype.g=function(c,p){return new yn(c,p)};function yn(c,p){ge.call(this),this.g=new Ls(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(c?c["X-WebChannel-Client-Profile"]=p.sa:c={"X-WebChannel-Client-Profile":p.sa}),this.g.U=c,(c=p&&p.Qb)&&!x(c)&&(this.g.u=c),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!x(p)&&(this.g.G=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new ns(this)}w(yn,ge),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Yo(this.g)},yn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.v&&(E={},E.__data__=Ge(c),c=E);p.i.push(new Ve(p.Ya++,c)),p.I==3&&ji(p)},yn.prototype.N=function(){this.g.l=null,delete this.j,Yo(this.g),delete this.g,yn.Z.N.call(this)};function Pu(c){Ne.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const E in p){c=E;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}w(Pu,Ne);function Uu(){Fn.call(this),this.status=1}w(Uu,Fn);function ns(c){this.g=c}w(ns,Lu),ns.prototype.ra=function(){yt(this.g,"a")},ns.prototype.qa=function(c){yt(this.g,new Pu(c))},ns.prototype.pa=function(c){yt(this.g,new Uu)},ns.prototype.oa=function(){yt(this.g,"b")},Us.prototype.createWebChannel=Us.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,dT=function(){return new Us},fT=function(){return _a()},hT=Ae,vm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},kr.NO_ERROR=0,kr.TIMEOUT=8,kr.HTTP_ERROR=6,$c=kr,Oo.COMPLETE="complete",cT=Oo,cn.EventType=Ke,Ke.OPEN="a",Ke.CLOSE="b",Ke.ERROR="c",Ke.MESSAGE="d",ge.prototype.listen=ge.prototype.J,jl=cn,se.prototype.listenOnce=se.prototype.K,se.prototype.getLastError=se.prototype.Ha,se.prototype.getLastErrorCode=se.prototype.ya,se.prototype.getStatus=se.prototype.ca,se.prototype.getResponseJson=se.prototype.La,se.prototype.getResponseText=se.prototype.la,se.prototype.send=se.prototype.ea,se.prototype.setWithCredentials=se.prototype.Fa,uT=se}).apply(typeof Hc<"u"?Hc:typeof self<"u"?self:typeof window<"u"?window:{});const Iv="@firebase/firestore",Dv="4.9.3";class dn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");let xo="12.7.0";const ca=new Fm("@firebase/firestore");function ro(){return ca.logLevel}function mt(s,...t){if(ca.logLevel<=Ht.DEBUG){const i=t.map(Ym);ca.debug(`Firestore (${xo}): ${s}`,...i)}}function As(s,...t){if(ca.logLevel<=Ht.ERROR){const i=t.map(Ym);ca.error(`Firestore (${xo}): ${s}`,...i)}}function go(s,...t){if(ca.logLevel<=Ht.WARN){const i=t.map(Ym);ca.warn(`Firestore (${xo}): ${s}`,...i)}}function Ym(s){if(typeof s=="string")return s;try{return(function(i){return JSON.stringify(i)})(s)}catch{return s}}function Ct(s,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,mT(s,r,i)}function mT(s,t,i){let r=`FIRESTORE (${xo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw As(r),new Error(r)}function Jt(s,t,i,r){let l="Unexpected state";typeof i=="string"?l=i:r=i,s||mT(t,l,r)}function kt(s,t){return s}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends Rs{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ts{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}}class pT{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class F1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable((()=>i(dn.UNAUTHENTICATED)))}shutdown(){}}class G1{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class K1{constructor(t){this.t=t,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Jt(this.o===void 0,42304);let r=this.i;const l=g=>this.i!==r?(r=this.i,i(g)):Promise.resolve();let u=new Ts;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ts,t.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},m=g=>{mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ts)}}),0),f()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((r=>this.i!==t?(mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Jt(typeof r.accessToken=="string",31837,{l:r}),new pT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Jt(t===null||typeof t=="string",2055,{h:t}),new dn(t)}}class Y1{constructor(t,i,r){this.P=t,this.T=i,this.I=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Q1{constructor(t,i,r){this.P=t,this.T=i,this.I=r}getToken(){return Promise.resolve(new Y1(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable((()=>i(dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Nv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $1{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ii(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Jt(this.o===void 0,3512);const r=u=>{u.error!=null&&mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,mt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const l=u=>{mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Nv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((i=>i?(Jt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new Nv(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function X1(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<s;r++)i[r]=Math.floor(256*Math.random());return i}class Qm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=X1(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<i&&(r+=t.charAt(l[u]%62))}return r}}function Ft(s,t){return s<t?-1:s>t?1:0}function Em(s,t){const i=Math.min(s.length,t.length);for(let r=0;r<i;r++){const l=s.charAt(r),u=t.charAt(r);if(l!==u)return rm(l)===rm(u)?Ft(l,u):rm(l)?1:-1}return Ft(s.length,t.length)}const W1=55296,Z1=57343;function rm(s){const t=s.charCodeAt(0);return t>=W1&&t<=Z1}function yo(s,t,i){return s.length===t.length&&s.every(((r,l)=>i(r,t[l])))}const kv="__name__";class Hi{constructor(t,i,r){i===void 0?i=0:i>t.length&&Ct(637,{offset:i,range:t.length}),r===void 0?r=t.length-i:r>t.length-i&&Ct(1746,{length:r,range:t.length-i}),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return Hi.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Hi?t.forEach((r=>{i.push(r)})):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let l=0;l<r;l++){const u=Hi.compareSegments(t.get(l),i.get(l));if(u!==0)return u}return Ft(t.length,i.length)}static compareSegments(t,i){const r=Hi.isNumericId(t),l=Hi.isNumericId(i);return r&&!l?-1:!r&&l?1:r&&l?Hi.extractNumericId(t).compare(Hi.extractNumericId(i)):Em(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return yr.fromString(t.substring(4,t.length-2))}}class ce extends Hi{construct(t,i,r){return new ce(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new ct(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter((l=>l.length>0)))}return new ce(i)}static emptyPath(){return new ce([])}}const J1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Hi{construct(t,i,r){return new on(t,i,r)}static isValidIdentifier(t){return J1.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kv}static keyField(){return new on([kv])}static fromServerFormat(t){const i=[];let r="",l=0;const u=()=>{if(r.length===0)throw new ct(J.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let f=!1;for(;l<t.length;){const m=t[l];if(m==="\\"){if(l+1===t.length)throw new ct(J.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ct(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,l+=2}else m==="`"?(f=!f,l++):m!=="."||f?(r+=m,l++):(u(),l++)}if(u(),f)throw new ct(J.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new on(i)}static emptyPath(){return new on([])}}class bt{constructor(t){this.path=t}static fromPath(t){return new bt(ce.fromString(t))}static fromName(t){return new bt(ce.fromString(t).popFirst(5))}static empty(){return new bt(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ce.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return ce.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new bt(new ce(t.slice()))}}function gT(s,t,i){if(!i)throw new ct(J.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function tw(s,t,i,r){if(t===!0&&r===!0)throw new ct(J.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function Ov(s){if(!bt.isDocumentKey(s))throw new ct(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Vv(s){if(bt.isDocumentKey(s))throw new ct(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function yT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ch(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":Ct(12329,{type:typeof s})}function vn(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new ct(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Ch(s);throw new ct(J.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return s}function qe(s,t){const i={typeString:s};return t&&(i.value=t),i}function su(s,t){if(!yT(s))throw new ct(J.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in t)if(t[r]){const l=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){i=`JSON missing required field: '${r}'`;break}const f=s[r];if(l&&typeof f!==l){i=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){i=`Expected '${r}' field to equal '${u.value}'`;break}}if(i)throw new ct(J.INVALID_ARGUMENT,i);return!0}const Mv=-62135596800,jv=1e6;class me{static now(){return me.fromMillis(Date.now())}static fromDate(t){return me.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor((t-1e3*i)*jv);return new me(i,r)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new ct(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ct(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<Mv)throw new ct(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ct(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jv}_compareTo(t){return this.seconds===t.seconds?Ft(this.nanoseconds,t.nanoseconds):Ft(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(su(t,me._jsonSchema))return new me(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Mv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}me._jsonSchemaVersion="firestore/timestamp/1.0",me._jsonSchema={type:qe("string",me._jsonSchemaVersion),seconds:qe("number"),nanoseconds:qe("number")};class Dt{static fromTimestamp(t){return new Dt(t)}static min(){return new Dt(new me(0,0))}static max(){return new Dt(new me(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Yl=-1;function ew(s,t){const i=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=Dt.fromTimestamp(r===1e9?new me(i+1,0):new me(i,r));return new Er(l,bt.empty(),t)}function nw(s){return new Er(s.readTime,s.key,Yl)}class Er{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new Er(Dt.min(),bt.empty(),Yl)}static max(){return new Er(Dt.max(),bt.empty(),Yl)}}function iw(s,t){let i=s.readTime.compareTo(t.readTime);return i!==0?i:(i=bt.comparator(s.documentKey,t.documentKey),i!==0?i:Ft(s.largestBatchId,t.largestBatchId))}const sw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Ro(s){if(s.code!==J.FAILED_PRECONDITION||s.message!==sw)throw s;mt("LocalStore","Unexpectedly lost primary lease")}class it{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&Ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new it(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(i,u).next(r,l)}}))}toPromise(){return new Promise(((t,i)=>{this.next(t,i)}))}wrapUserFunction(t){try{const i=t();return i instanceof it?i:it.resolve(i)}catch(i){return it.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction((()=>t(i))):it.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction((()=>t(i))):it.reject(i)}static resolve(t){return new it(((i,r)=>{i(t)}))}static reject(t){return new it(((i,r)=>{r(t)}))}static waitFor(t){return new it(((i,r)=>{let l=0,u=0,f=!1;t.forEach((m=>{++l,m.next((()=>{++u,f&&u===l&&i()}),(g=>r(g)))})),f=!0,u===l&&i()}))}static or(t){let i=it.resolve(!1);for(const r of t)i=i.next((l=>l?it.resolve(l):r()));return i}static forEach(t,i){const r=[];return t.forEach(((l,u)=>{r.push(i.call(this,l,u))})),this.waitFor(r)}static mapArray(t,i){return new it(((r,l)=>{const u=t.length,f=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;i(t[y]).next((b=>{f[y]=b,++m,m===u&&r(f)}),(b=>l(b)))}}))}static doWhile(t,i){return new it(((r,l)=>{const u=()=>{t()===!0?i().next((()=>{u()}),l):r()};u()}))}}function aw(s){const t=s.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Co(s){return s.name==="IndexedDbTransactionError"}class Ih{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Ih.ce=-1;const $m=-1;function Dh(s){return s==null}function lh(s){return s===0&&1/s==-1/0}function ow(s){return typeof s=="number"&&Number.isInteger(s)&&!lh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const _T="";function lw(s){let t="";for(let i=0;i<s.length;i++)t.length>0&&(t=Lv(t)),t=uw(s.get(i),t);return Lv(t)}function uw(s,t){let i=t;const r=s.length;for(let l=0;l<r;l++){const u=s.charAt(l);switch(u){case"\0":i+="";break;case _T:i+="";break;default:i+=u}}return i}function Lv(s){return s+_T+""}function Pv(s){let t=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t++;return t}function xr(s,t){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t(i,s[i])}function vT(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}class Ee{constructor(t,i){this.comparator=t,this.root=i||an.EMPTY}insert(t,i){return new Ee(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,an.BLACK,null,null))}remove(t){return new Ee(this.comparator,this.root.remove(t,this.comparator).copy(null,null,an.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(t,r.key);if(l===0)return i+r.left.size;l<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((i,r)=>(t(i,r),!1)))}toString(){const t=[];return this.inorderTraversal(((i,r)=>(t.push(`${i}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Fc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Fc(this.root,t,this.comparator,!0)}}class Fc{constructor(t,i,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=i?r(t.key,i):1,i&&l&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class an{constructor(t,i,r,l,u){this.key=t,this.value=i,this.color=r??an.RED,this.left=l??an.EMPTY,this.right=u??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,l,u){return new an(t??this.key,i??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let l=this;const u=r(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,i,r),null):u===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return an.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ct(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ct(27949);return t+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct(57766)}get value(){throw Ct(16141)}get color(){throw Ct(16727)}get left(){throw Ct(29726)}get right(){throw Ct(36894)}copy(t,i,r,l,u){return this}insert(t,i,r){return new an(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qe{constructor(t){this.comparator=t,this.data=new Ee(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((i,r)=>(t(i),!1)))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new Uv(this.data.getIterator())}getIteratorFrom(t){return new Uv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach((r=>{i=i.add(r)})),i}isEqual(t){if(!(t instanceof Qe)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((i=>{t.push(i)})),t}toString(){const t=[];return this.forEach((i=>t.push(i))),"SortedSet("+t.toString()+")"}copy(t){const i=new Qe(this.comparator);return i.data=t,i}}class Uv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class qn{constructor(t){this.fields=t,t.sort(on.comparator)}static empty(){return new qn([])}unionWith(t){let i=new Qe(on.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new qn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return yo(this.fields,t.fields,((i,r)=>i.isEqual(r)))}}class ET extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ln{constructor(t){this.binaryString=t}static fromBase64String(t){const i=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new ET("Invalid base64 string: "+u):u}})(t);return new ln(i)}static fromUint8Array(t){const i=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(t);return new ln(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const r=new Uint8Array(i.length);for(let l=0;l<i.length;l++)r[l]=i.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ft(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const cw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(s){if(Jt(!!s,39018),typeof s=="string"){let t=0;const i=cw.exec(s);if(Jt(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ce(s.seconds),nanos:Ce(s.nanos)}}function Ce(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function br(s){return typeof s=="string"?ln.fromBase64String(s):ln.fromUint8Array(s)}const TT="server_timestamp",bT="__type__",ST="__previous_value__",AT="__local_write_time__";function Xm(s){return(s?.mapValue?.fields||{})[bT]?.stringValue===TT}function Nh(s){const t=s.mapValue.fields[ST];return Xm(t)?Nh(t):t}function Ql(s){const t=Tr(s.mapValue.fields[AT].timestampValue);return new me(t.seconds,t.nanos)}class hw{constructor(t,i,r,l,u,f,m,g,y,b){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b}}const uh="(default)";class $l{constructor(t,i){this.projectId=t,this.database=i||uh}static empty(){return new $l("","")}get isDefaultDatabase(){return this.database===uh}isEqual(t){return t instanceof $l&&t.projectId===this.projectId&&t.database===this.database}}const wT="__type__",fw="__max__",Gc={mapValue:{}},xT="__vector__",ch="value";function Sr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Xm(s)?4:mw(s)?9007199254740991:dw(s)?10:11:Ct(28295,{value:s})}function Wi(s,t){if(s===t)return!0;const i=Sr(s);if(i!==Sr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Ql(s).isEqual(Ql(t));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=Tr(l.timestampValue),m=Tr(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(l,u){return br(l.bytesValue).isEqual(br(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(l,u){return Ce(l.geoPointValue.latitude)===Ce(u.geoPointValue.latitude)&&Ce(l.geoPointValue.longitude)===Ce(u.geoPointValue.longitude)})(s,t);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Ce(l.integerValue)===Ce(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=Ce(l.doubleValue),m=Ce(u.doubleValue);return f===m?lh(f)===lh(m):isNaN(f)&&isNaN(m)}return!1})(s,t);case 9:return yo(s.arrayValue.values||[],t.arrayValue.values||[],Wi);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},m=u.mapValue.fields||{};if(Pv(f)!==Pv(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!Wi(f[g],m[g])))return!1;return!0})(s,t);default:return Ct(52216,{left:s})}}function Xl(s,t){return(s.values||[]).find((i=>Wi(i,t)))!==void 0}function _o(s,t){if(s===t)return 0;const i=Sr(s),r=Sr(t);if(i!==r)return Ft(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return Ft(s.booleanValue,t.booleanValue);case 2:return(function(u,f){const m=Ce(u.integerValue||u.doubleValue),g=Ce(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,t);case 3:return zv(s.timestampValue,t.timestampValue);case 4:return zv(Ql(s),Ql(t));case 5:return Em(s.stringValue,t.stringValue);case 6:return(function(u,f){const m=br(u),g=br(f);return m.compareTo(g)})(s.bytesValue,t.bytesValue);case 7:return(function(u,f){const m=u.split("/"),g=f.split("/");for(let y=0;y<m.length&&y<g.length;y++){const b=Ft(m[y],g[y]);if(b!==0)return b}return Ft(m.length,g.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,f){const m=Ft(Ce(u.latitude),Ce(f.latitude));return m!==0?m:Ft(Ce(u.longitude),Ce(f.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return Bv(s.arrayValue,t.arrayValue);case 10:return(function(u,f){const m=u.fields||{},g=f.fields||{},y=m[ch]?.arrayValue,b=g[ch]?.arrayValue,w=Ft(y?.values?.length||0,b?.values?.length||0);return w!==0?w:Bv(y,b)})(s.mapValue,t.mapValue);case 11:return(function(u,f){if(u===Gc.mapValue&&f===Gc.mapValue)return 0;if(u===Gc.mapValue)return 1;if(f===Gc.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=f.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let w=0;w<g.length&&w<b.length;++w){const R=Em(g[w],b[w]);if(R!==0)return R;const P=_o(m[g[w]],y[b[w]]);if(P!==0)return P}return Ft(g.length,b.length)})(s.mapValue,t.mapValue);default:throw Ct(23264,{he:i})}}function zv(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Ft(s,t);const i=Tr(s),r=Tr(t),l=Ft(i.seconds,r.seconds);return l!==0?l:Ft(i.nanos,r.nanos)}function Bv(s,t){const i=s.values||[],r=t.values||[];for(let l=0;l<i.length&&l<r.length;++l){const u=_o(i[l],r[l]);if(u)return u}return Ft(i.length,r.length)}function vo(s){return Tm(s)}function Tm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const r=Tr(i);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return br(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return bt.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let r="[",l=!0;for(const u of i.values||[])l?l=!1:r+=",",r+=Tm(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(i){const r=Object.keys(i.fields||{}).sort();let l="{",u=!0;for(const f of r)u?u=!1:l+=",",l+=`${f}:${Tm(i.fields[f])}`;return l+"}"})(s.mapValue):Ct(61005,{value:s})}function Xc(s){switch(Sr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Nh(s);return t?16+Xc(t):16;case 5:return 2*s.stringValue.length;case 6:return br(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+Xc(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return xr(r.fields,((u,f)=>{l+=u.length+Xc(f)})),l})(s.mapValue);default:throw Ct(13486,{value:s})}}function qv(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function bm(s){return!!s&&"integerValue"in s}function Wm(s){return!!s&&"arrayValue"in s}function Hv(s){return!!s&&"nullValue"in s}function Fv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Wc(s){return!!s&&"mapValue"in s}function dw(s){return(s?.mapValue?.fields||{})[wT]?.stringValue===xT}function Bl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return xr(s.mapValue.fields,((i,r)=>t.mapValue.fields[i]=Bl(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Bl(s.arrayValue.values[i]);return t}return{...s}}function mw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===fw}class Dn{constructor(t){this.value=t}static empty(){return new Dn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!Wc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Bl(i)}setAll(t){let i=on.emptyPath(),r={},l=[];t.forEach(((f,m)=>{if(!i.isImmediateParentOf(m)){const g=this.getFieldsMap(i);this.applyChanges(g,r,l),r={},l=[],i=m.popLast()}f?r[m.lastSegment()]=Bl(f):l.push(m.lastSegment())}));const u=this.getFieldsMap(i);this.applyChanges(u,r,l)}delete(t){const i=this.field(t.popLast());Wc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Wi(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let l=i.mapValue.fields[t.get(r)];Wc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,r){xr(i,((l,u)=>t[l]=u));for(const l of r)delete t[l]}clone(){return new Dn(Bl(this.value))}}function RT(s){const t=[];return xr(s.fields,((i,r)=>{const l=new on([i]);if(Wc(r)){const u=RT(r.mapValue).fields;if(u.length===0)t.push(l);else for(const f of u)t.push(l.child(f))}else t.push(l)})),new qn(t)}class mn{constructor(t,i,r,l,u,f,m){this.key=t,this.documentType=i,this.version=r,this.readTime=l,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(t){return new mn(t,0,Dt.min(),Dt.min(),Dt.min(),Dn.empty(),0)}static newFoundDocument(t,i,r,l){return new mn(t,1,i,Dt.min(),r,l,0)}static newNoDocument(t,i){return new mn(t,2,i,Dt.min(),Dt.min(),Dn.empty(),0)}static newUnknownDocument(t,i){return new mn(t,3,i,Dt.min(),Dt.min(),Dn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(Dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof mn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hh{constructor(t,i){this.position=t,this.inclusive=i}}function Gv(s,t,i){let r=0;for(let l=0;l<s.position.length;l++){const u=t[l],f=s.position[l];if(u.field.isKeyField()?r=bt.comparator(bt.fromName(f.referenceValue),i.key):r=_o(f,i.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kv(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Wi(s.position[i],t.position[i]))return!1;return!0}class Wl{constructor(t,i="asc"){this.field=t,this.dir=i}}function pw(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}class CT{}class Be extends CT{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new yw(t,i,r):i==="array-contains"?new Ew(t,r):i==="in"?new Tw(t,r):i==="not-in"?new bw(t,r):i==="array-contains-any"?new Sw(t,r):new Be(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new _w(t,r):new vw(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(_o(i,this.value)):i!==null&&Sr(this.value)===Sr(i)&&this.matchesComparison(_o(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vi extends CT{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new vi(t,i)}matches(t){return IT(this)?this.filters.find((i=>!i.matches(t)))===void 0:this.filters.find((i=>i.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,i)=>t.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function IT(s){return s.op==="and"}function DT(s){return gw(s)&&IT(s)}function gw(s){for(const t of s.filters)if(t instanceof vi)return!1;return!0}function Sm(s){if(s instanceof Be)return s.field.canonicalString()+s.op.toString()+vo(s.value);if(DT(s))return s.filters.map((t=>Sm(t))).join(",");{const t=s.filters.map((i=>Sm(i))).join(",");return`${s.op}(${t})`}}function NT(s,t){return s instanceof Be?(function(r,l){return l instanceof Be&&r.op===l.op&&r.field.isEqual(l.field)&&Wi(r.value,l.value)})(s,t):s instanceof vi?(function(r,l){return l instanceof vi&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,f,m)=>u&&NT(f,l.filters[m])),!0):!1})(s,t):void Ct(19439)}function kT(s){return s instanceof Be?(function(i){return`${i.field.canonicalString()} ${i.op} ${vo(i.value)}`})(s):s instanceof vi?(function(i){return i.op.toString()+" {"+i.getFilters().map(kT).join(" ,")+"}"})(s):"Filter"}class yw extends Be{constructor(t,i,r){super(t,i,r),this.key=bt.fromName(r.referenceValue)}matches(t){const i=bt.comparator(t.key,this.key);return this.matchesComparison(i)}}class _w extends Be{constructor(t,i){super(t,"in",i),this.keys=OT("in",i)}matches(t){return this.keys.some((i=>i.isEqual(t.key)))}}class vw extends Be{constructor(t,i){super(t,"not-in",i),this.keys=OT("not-in",i)}matches(t){return!this.keys.some((i=>i.isEqual(t.key)))}}function OT(s,t){return(t.arrayValue?.values||[]).map((i=>bt.fromName(i.referenceValue)))}class Ew extends Be{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Wm(i)&&Xl(i.arrayValue,this.value)}}class Tw extends Be{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Xl(this.value.arrayValue,i)}}class bw extends Be{constructor(t,i){super(t,"not-in",i)}matches(t){if(Xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Xl(this.value.arrayValue,i)}}class Sw extends Be{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Wm(i)||!i.arrayValue.values)&&i.arrayValue.values.some((r=>Xl(this.value.arrayValue,r)))}}class Aw{constructor(t,i=null,r=[],l=[],u=null,f=null,m=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function Yv(s,t=null,i=[],r=[],l=null,u=null,f=null){return new Aw(s,t,i,r,l,u,f)}function Zm(s){const t=kt(s);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map((r=>Sm(r))).join(","),i+="|ob:",i+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Dh(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>vo(r))).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>vo(r))).join(",")),t.Te=i}return t.Te}function Jm(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!pw(s.orderBy[i],t.orderBy[i]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!NT(s.filters[i],t.filters[i]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!Kv(s.startAt,t.startAt)&&Kv(s.endAt,t.endAt)}function Am(s){return bt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Io{constructor(t,i=null,r=[],l=[],u=null,f="F",m=null,g=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ww(s,t,i,r,l,u,f,m){return new Io(s,t,i,r,l,u,f,m)}function kh(s){return new Io(s)}function Qv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function VT(s){return s.collectionGroup!==null}function ql(s){const t=kt(s);if(t.Ie===null){t.Ie=[];const i=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),i.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Qe(on.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(t).forEach((u=>{i.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Wl(u,r))})),i.has(on.keyField().canonicalString())||t.Ie.push(new Wl(on.keyField(),r))}return t.Ie}function Gi(s){const t=kt(s);return t.Ee||(t.Ee=xw(t,ql(s))),t.Ee}function xw(s,t){if(s.limitType==="F")return Yv(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Wl(l.field,u)}));const i=s.endAt?new hh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new hh(s.startAt.position,s.startAt.inclusive):null;return Yv(s.path,s.collectionGroup,t,s.filters,s.limit,i,r)}}function wm(s,t){const i=s.filters.concat([t]);return new Io(s.path,s.collectionGroup,s.explicitOrderBy.slice(),i,s.limit,s.limitType,s.startAt,s.endAt)}function fh(s,t,i){return new Io(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,i,s.startAt,s.endAt)}function Oh(s,t){return Jm(Gi(s),Gi(t))&&s.limitType===t.limitType}function MT(s){return`${Zm(Gi(s))}|lt:${s.limitType}`}function ao(s){return`Query(target=${(function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map((l=>kT(l))).join(", ")}]`),Dh(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map((l=>vo(l))).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map((l=>vo(l))).join(",")),`Target(${r})`})(Gi(s))}; limitType=${s.limitType})`}function Vh(s,t){return t.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):bt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,l){for(const u of ql(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(s,t)&&(function(r,l){return!(r.startAt&&!(function(f,m,g){const y=Gv(f,m,g);return f.inclusive?y<=0:y<0})(r.startAt,ql(r),l)||r.endAt&&!(function(f,m,g){const y=Gv(f,m,g);return f.inclusive?y>=0:y>0})(r.endAt,ql(r),l))})(s,t)}function Rw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function jT(s){return(t,i)=>{let r=!1;for(const l of ql(s)){const u=Cw(l,t,i);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function Cw(s,t,i){const r=s.field.isKeyField()?bt.comparator(t.key,i.key):(function(u,f,m){const g=f.data.field(u),y=m.data.field(u);return g!==null&&y!==null?_o(g,y):Ct(42886)})(s.field,t,i);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Ct(19790,{direction:s.dir})}}class ma{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,t))return u}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),l=this.inner[r];if(l===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],t))return void(l[u]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return r.length===1?delete this.inner[i]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(t){xr(this.inner,((i,r)=>{for(const[l,u]of r)t(l,u)}))}isEmpty(){return vT(this.inner)}size(){return this.innerSize}}const Iw=new Ee(bt.comparator);function ws(){return Iw}const LT=new Ee(bt.comparator);function Ll(...s){let t=LT;for(const i of s)t=t.insert(i.key,i);return t}function PT(s){let t=LT;return s.forEach(((i,r)=>t=t.insert(i,r.overlayedDocument))),t}function aa(){return Hl()}function UT(){return Hl()}function Hl(){return new ma((s=>s.toString()),((s,t)=>s.isEqual(t)))}const Dw=new Ee(bt.comparator),Nw=new Qe(bt.comparator);function Gt(...s){let t=Nw;for(const i of s)t=t.add(i);return t}const kw=new Qe(Ft);function Ow(){return kw}function tp(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lh(t)?"-0":t}}function zT(s){return{integerValue:""+s}}function Vw(s,t){return ow(t)?zT(t):tp(s,t)}class Mh{constructor(){this._=void 0}}function Mw(s,t,i){return s instanceof Zl?(function(l,u){const f={fields:{[bT]:{stringValue:TT},[AT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Xm(u)&&(u=Nh(u)),u&&(f.fields[ST]=u),{mapValue:f}})(i,t):s instanceof Eo?qT(s,t):s instanceof Jl?HT(s,t):(function(l,u){const f=BT(l,u),m=$v(f)+$v(l.Ae);return bm(f)&&bm(l.Ae)?zT(m):tp(l.serializer,m)})(s,t)}function jw(s,t,i){return s instanceof Eo?qT(s,t):s instanceof Jl?HT(s,t):i}function BT(s,t){return s instanceof dh?(function(r){return bm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class Zl extends Mh{}class Eo extends Mh{constructor(t){super(),this.elements=t}}function qT(s,t){const i=FT(t);for(const r of s.elements)i.some((l=>Wi(l,r)))||i.push(r);return{arrayValue:{values:i}}}class Jl extends Mh{constructor(t){super(),this.elements=t}}function HT(s,t){let i=FT(t);for(const r of s.elements)i=i.filter((l=>!Wi(l,r)));return{arrayValue:{values:i}}}class dh extends Mh{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function $v(s){return Ce(s.integerValue||s.doubleValue)}function FT(s){return Wm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class GT{constructor(t,i){this.field=t,this.transform=i}}function Lw(s,t){return s.field.isEqual(t.field)&&(function(r,l){return r instanceof Eo&&l instanceof Eo||r instanceof Jl&&l instanceof Jl?yo(r.elements,l.elements,Wi):r instanceof dh&&l instanceof dh?Wi(r.Ae,l.Ae):r instanceof Zl&&l instanceof Zl})(s.transform,t.transform)}class Pw{constructor(t,i){this.version=t,this.transformResults=i}}class En{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new En}static exists(t){return new En(void 0,t)}static updateTime(t){return new En(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Zc(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class jh{}function KT(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Lh(s.key,En.none()):new ru(s.key,s.data,En.none());{const i=s.data,r=Dn.empty();let l=new Qe(on.comparator);for(let u of t.fields)if(!l.has(u)){let f=i.field(u);f===null&&u.length>1&&(u=u.popLast(),f=i.field(u)),f===null?r.delete(u):r.set(u,f),l=l.add(u)}return new Rr(s.key,r,new qn(l.toArray()),En.none())}}function Uw(s,t,i){s instanceof ru?(function(l,u,f){const m=l.value.clone(),g=Wv(l.fieldTransforms,u,f.transformResults);m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(s,t,i):s instanceof Rr?(function(l,u,f){if(!Zc(l.precondition,u))return void u.convertToUnknownDocument(f.version);const m=Wv(l.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(YT(l)),g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(s,t,i):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,i)}function Fl(s,t,i,r){return s instanceof ru?(function(u,f,m,g){if(!Zc(u.precondition,f))return m;const y=u.value.clone(),b=Zv(u.fieldTransforms,g,f);return y.setAll(b),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(s,t,i,r):s instanceof Rr?(function(u,f,m,g){if(!Zc(u.precondition,f))return m;const y=Zv(u.fieldTransforms,g,f),b=f.data;return b.setAll(YT(u)),b.setAll(y),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,t,i,r):(function(u,f,m){return Zc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(s,t,i)}function zw(s,t){let i=null;for(const r of s.fieldTransforms){const l=t.data.field(r.field),u=BT(r.transform,l||null);u!=null&&(i===null&&(i=Dn.empty()),i.set(r.field,u))}return i||null}function Xv(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&yo(r,l,((u,f)=>Lw(u,f)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class ru extends jh{constructor(t,i,r,l=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Rr extends jh{constructor(t,i,r,l,u=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function YT(s){const t=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const r=s.data.field(i);t.set(i,r)}})),t}function Wv(s,t,i){const r=new Map;Jt(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let l=0;l<i.length;l++){const u=s[l],f=u.transform,m=t.data.field(u.field);r.set(u.field,jw(f,m,i[l]))}return r}function Zv(s,t,i){const r=new Map;for(const l of s){const u=l.transform,f=i.data.field(l.field);r.set(l.field,Mw(u,f,t))}return r}class Lh extends jh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bw extends jh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qw{constructor(t,i,r,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(t.key)&&Uw(u,t,r[l])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=Fl(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=Fl(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=UT();return this.mutations.forEach((l=>{const u=t.get(l.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=i.has(l.key)?null:m;const g=KT(f,m);g!==null&&r.set(l.key,g),f.isValidDocument()||f.convertToNoDocument(Dt.min())})),r}keys(){return this.mutations.reduce(((t,i)=>t.add(i.key)),Gt())}isEqual(t){return this.batchId===t.batchId&&yo(this.mutations,t.mutations,((i,r)=>Xv(i,r)))&&yo(this.baseMutations,t.baseMutations,((i,r)=>Xv(i,r)))}}class ep{constructor(t,i,r,l){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=l}static from(t,i,r){Jt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let l=(function(){return Dw})();const u=t.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,r[f].version);return new ep(t,i,r,l)}}class Hw{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Fw{constructor(t,i){this.count=t,this.unchangedNames=i}}var ze,Qt;function Gw(s){switch(s){case J.OK:return Ct(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ct(15467,{code:s})}}function QT(s){if(s===void 0)return As("GRPC error has no .code"),J.UNKNOWN;switch(s){case ze.OK:return J.OK;case ze.CANCELLED:return J.CANCELLED;case ze.UNKNOWN:return J.UNKNOWN;case ze.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case ze.INTERNAL:return J.INTERNAL;case ze.UNAVAILABLE:return J.UNAVAILABLE;case ze.UNAUTHENTICATED:return J.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case ze.NOT_FOUND:return J.NOT_FOUND;case ze.ALREADY_EXISTS:return J.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return J.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case ze.ABORTED:return J.ABORTED;case ze.OUT_OF_RANGE:return J.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return J.UNIMPLEMENTED;case ze.DATA_LOSS:return J.DATA_LOSS;default:return Ct(39323,{code:s})}}(Qt=ze||(ze={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";function Kw(){return new TextEncoder}const Yw=new yr([4294967295,4294967295],0);function Jv(s){const t=Kw().encode(s),i=new lT;return i.update(t),new Uint8Array(i.digest())}function tE(s){const t=new DataView(s.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),l=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new yr([i,r],0),new yr([l,u],0)]}class np{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new Pl(`Invalid padding: ${i}`);if(r<0)throw new Pl(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Pl(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new Pl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=yr.fromNumber(this.ge)}ye(t,i,r){let l=t.add(i.multiply(yr.fromNumber(r)));return l.compare(Yw)===1&&(l=new yr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=Jv(t),[r,l]=tE(i);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);if(!this.we(f))return!1}return!0}static create(t,i,r){const l=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new np(u,l,i);return r.forEach((m=>f.insert(m))),f}insert(t){if(this.ge===0)return;const i=Jv(t),[r,l]=tE(i);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);this.Se(f)}}Se(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class Pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ph{constructor(t,i,r,l,u){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const l=new Map;return l.set(t,au.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new Ph(Dt.min(),l,new Ee(Ft),ws(),Gt())}}class au{constructor(t,i,r,l,u){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new au(r,i,Gt(),Gt(),Gt())}}class Jc{constructor(t,i,r,l){this.be=t,this.removedTargetIds=i,this.key=r,this.De=l}}class $T{constructor(t,i){this.targetId=t,this.Ce=i}}class XT{constructor(t,i,r=ln.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=l}}class eE{constructor(){this.ve=0,this.Fe=nE(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Gt(),i=Gt(),r=Gt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:r=r.add(l);break;default:Ct(38017,{changeType:u})}})),new au(this.Me,this.xe,t,i,r)}qe(){this.Oe=!1,this.Fe=nE()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Jt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Qw{constructor(t){this.Ge=t,this.ze=new Map,this.je=ws(),this.Je=Kc(),this.He=Kc(),this.Ye=new Ee(Ft)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,(i=>{const r=this.nt(i);switch(t.state){case 0:this.rt(i)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),r.Le(t.resumeToken));break;default:Ct(56790,{state:t.state})}}))}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach(((r,l)=>{this.rt(l)&&i(l)}))}st(t){const i=t.targetId,r=t.Ce.count,l=this.ot(i);if(l){const u=l.target;if(Am(u))if(r===0){const f=new bt(u.path);this.et(i,f,mn.newNoDocument(f,Dt.min()))}else Jt(r===1,20013,{expectedCount:r});else{const f=this._t(i);if(f!==r){const m=this.ut(t),g=m?this.ct(m,t,f):1;if(g!==0){this.it(i);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,y)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=i;let f,m;try{f=br(r).toUint8Array()}catch(g){if(g instanceof ET)return go("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new np(f,l,u)}catch(g){return go(g instanceof Pl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,i,r){return i.Ce.count===r-this.Pt(t,i.targetId)?0:2}Pt(t,i){const r=this.Ge.getRemoteKeysForTarget(i);let l=0;return r.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(i,u,null),l++)})),l}Tt(t){const i=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&Am(m.target)){const g=new bt(m.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,mn.newNoDocument(g,t))}u.Be&&(i.set(f,u.ke()),u.qe())}}));let r=Gt();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(t)));const l=new Ph(t,i,this.Ye,this.je,r);return this.je=ws(),this.Je=Kc(),this.He=Kc(),this.Ye=new Ee(Ft),l}Xe(t,i){if(!this.rt(t))return;const r=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,r),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,r){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),r&&(this.je=this.je.insert(i,r))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new eE,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new Qe(Ft),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new Qe(Ft),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||mt("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new eE),this.Ge.getRemoteKeysForTarget(t).forEach((i=>{this.et(t,i,null)}))}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function Kc(){return new Ee(bt.comparator)}function nE(){return new Ee(bt.comparator)}const $w={asc:"ASCENDING",desc:"DESCENDING"},Xw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ww={and:"AND",or:"OR"};class Zw{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function xm(s,t){return s.useProto3Json||Dh(t)?t:{value:t}}function mh(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function WT(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function Jw(s,t){return mh(s,t.toTimestamp())}function Ki(s){return Jt(!!s,49232),Dt.fromTimestamp((function(i){const r=Tr(i);return new me(r.seconds,r.nanos)})(s))}function ip(s,t){return Rm(s,t).canonicalString()}function Rm(s,t){const i=(function(l){return new ce(["projects",l.projectId,"databases",l.database])})(s).child("documents");return t===void 0?i:i.child(t)}function ZT(s){const t=ce.fromString(s);return Jt(i0(t),10190,{key:t.toString()}),t}function Cm(s,t){return ip(s.databaseId,t.path)}function am(s,t){const i=ZT(t);if(i.get(1)!==s.databaseId.projectId)throw new ct(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new ct(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new bt(t0(i))}function JT(s,t){return ip(s.databaseId,t)}function tx(s){const t=ZT(s);return t.length===4?ce.emptyPath():t0(t)}function Im(s){return new ce(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function t0(s){return Jt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function iE(s,t,i){return{name:Cm(s,t),fields:i.value.mapValue.fields}}function ex(s,t){let i;if("targetChange"in t){t.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ct(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?(Jt(b===void 0||typeof b=="string",58123),ln.fromBase64String(b||"")):(Jt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),ln.fromUint8Array(b||new Uint8Array))})(s,t.targetChange.resumeToken),f=t.targetChange.cause,m=f&&(function(y){const b=y.code===void 0?J.UNKNOWN:QT(y.code);return new ct(b,y.message||"")})(f);i=new XT(r,l,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const l=am(s,r.document.name),u=Ki(r.document.updateTime),f=r.document.createTime?Ki(r.document.createTime):Dt.min(),m=new Dn({mapValue:{fields:r.document.fields}}),g=mn.newFoundDocument(l,u,f,m),y=r.targetIds||[],b=r.removedTargetIds||[];i=new Jc(y,b,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const l=am(s,r.document),u=r.readTime?Ki(r.readTime):Dt.min(),f=mn.newNoDocument(l,u),m=r.removedTargetIds||[];i=new Jc([],m,f.key,f)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const l=am(s,r.document),u=r.removedTargetIds||[];i=new Jc([],u,l,null)}else{if(!("filter"in t))return Ct(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,f=new Fw(l,u),m=r.targetId;i=new $T(m,f)}}return i}function nx(s,t){let i;if(t instanceof ru)i={update:iE(s,t.key,t.value)};else if(t instanceof Lh)i={delete:Cm(s,t.key)};else if(t instanceof Rr)i={update:iE(s,t.key,t.data),updateMask:hx(t.fieldMask)};else{if(!(t instanceof Bw))return Ct(16599,{Vt:t.type});i={verify:Cm(s,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map((r=>(function(u,f){const m=f.transform;if(m instanceof Zl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Eo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Jl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof dh)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ct(20930,{transform:f.transform})})(0,r)))),t.precondition.isNone||(i.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:Jw(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ct(27497)})(s,t.precondition)),i}function ix(s,t){return s&&s.length>0?(Jt(t!==void 0,14353),s.map((i=>(function(l,u){let f=l.updateTime?Ki(l.updateTime):Ki(u);return f.isEqual(Dt.min())&&(f=Ki(u)),new Pw(f,l.transformResults||[])})(i,t)))):[]}function sx(s,t){return{documents:[JT(s,t.path)]}}function rx(s,t){const i={structuredQuery:{}},r=t.path;let l;t.collectionGroup!==null?(l=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=JT(s,l);const u=(function(y){if(y.length!==0)return n0(vi.create(y,"and"))})(t.filters);u&&(i.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((b=>(function(R){return{field:oo(R.field),direction:lx(R.dir)}})(b)))})(t.orderBy);f&&(i.structuredQuery.orderBy=f);const m=xm(s,t.limit);return m!==null&&(i.structuredQuery.limit=m),t.startAt&&(i.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(i.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:i,parent:l}}function ax(s){let t=tx(s.parent);const i=s.structuredQuery,r=i.from?i.from.length:0;let l=null;if(r>0){Jt(r===1,65062);const b=i.from[0];b.allDescendants?l=b.collectionId:t=t.child(b.collectionId)}let u=[];i.where&&(u=(function(w){const R=e0(w);return R instanceof vi&&DT(R)?R.getFilters():[R]})(i.where));let f=[];i.orderBy&&(f=(function(w){return w.map((R=>(function(W){return new Wl(lo(W.field),(function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(R)))})(i.orderBy));let m=null;i.limit&&(m=(function(w){let R;return R=typeof w=="object"?w.value:w,Dh(R)?null:R})(i.limit));let g=null;i.startAt&&(g=(function(w){const R=!!w.before,P=w.values||[];return new hh(P,R)})(i.startAt));let y=null;return i.endAt&&(y=(function(w){const R=!w.before,P=w.values||[];return new hh(P,R)})(i.endAt)),ww(t,l,f,u,m,"F",g,y)}function ox(s,t){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct(28987,{purpose:l})}})(t.purpose);return i==null?null:{"goog-listen-tags":i}}function e0(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=lo(i.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=lo(i.unaryFilter.field);return Be.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=lo(i.unaryFilter.field);return Be.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=lo(i.unaryFilter.field);return Be.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ct(61313);default:return Ct(60726)}})(s):s.fieldFilter!==void 0?(function(i){return Be.create(lo(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ct(58110);default:return Ct(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return vi.create(i.compositeFilter.filters.map((r=>e0(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ct(1026)}})(i.compositeFilter.op))})(s):Ct(30097,{filter:s})}function lx(s){return $w[s]}function ux(s){return Xw[s]}function cx(s){return Ww[s]}function oo(s){return{fieldPath:s.canonicalString()}}function lo(s){return on.fromServerFormat(s.fieldPath)}function n0(s){return s instanceof Be?(function(i){if(i.op==="=="){if(Fv(i.value))return{unaryFilter:{field:oo(i.field),op:"IS_NAN"}};if(Hv(i.value))return{unaryFilter:{field:oo(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Fv(i.value))return{unaryFilter:{field:oo(i.field),op:"IS_NOT_NAN"}};if(Hv(i.value))return{unaryFilter:{field:oo(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(i.field),op:ux(i.op),value:i.value}}})(s):s instanceof vi?(function(i){const r=i.getFilters().map((l=>n0(l)));return r.length===1?r[0]:{compositeFilter:{op:cx(i.op),filters:r}}})(s):Ct(54877,{filter:s})}function hx(s){const t=[];return s.fields.forEach((i=>t.push(i.canonicalString()))),{fieldPaths:t}}function i0(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class dr{constructor(t,i,r,l,u=Dt.min(),f=Dt.min(),m=ln.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new dr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class fx{constructor(t){this.yt=t}}function dx(s){const t=ax({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?fh(t,t.limit,"L"):t}class mx{constructor(){this.Cn=new px}addToCollectionParentIndex(t,i){return this.Cn.add(i),it.resolve()}getCollectionParents(t,i){return it.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return it.resolve()}deleteFieldIndex(t,i){return it.resolve()}deleteAllFieldIndexes(t){return it.resolve()}createTargetIndexes(t,i){return it.resolve()}getDocumentsMatchingTarget(t,i){return it.resolve(null)}getIndexType(t,i){return it.resolve(0)}getFieldIndexes(t,i){return it.resolve([])}getNextCollectionGroupToUpdate(t){return it.resolve(null)}getMinOffset(t,i){return it.resolve(Er.min())}getMinOffsetFromCollectionGroup(t,i){return it.resolve(Er.min())}updateCollectionGroup(t,i,r){return it.resolve()}updateIndexEntries(t,i){return it.resolve()}}class px{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),l=this.index[i]||new Qe(ce.comparator),u=!l.has(r);return this.index[i]=l.add(r),u}has(t){const i=t.lastSegment(),r=t.popLast(),l=this.index[i];return l&&l.has(r)}getEntries(t){return(this.index[t]||new Qe(ce.comparator)).toArray()}}const sE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},s0=41943040;class In{static withCacheSize(t){return new In(t,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(s0,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);class To{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new To(0)}static cr(){return new To(-1)}}const rE="LruGarbageCollector",gx=1048576;function aE([s,t],[i,r]){const l=Ft(s,i);return l===0?Ft(t,r):l}class yx{constructor(t){this.Ir=t,this.buffer=new Qe(aE),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();aE(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class _x{constructor(t,i,r){this.garbageCollector=t,this.asyncQueue=i,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){mt(rE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Co(i)?mt(rE,"Ignoring IndexedDB error during garbage collection: ",i):await Ro(i)}await this.Vr(3e5)}))}}class vx{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next((r=>Math.floor(i/100*r)))}nthSequenceNumber(t,i){if(i===0)return it.resolve(Ih.ce);const r=new yx(i);return this.mr.forEachTarget(t,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(t,i,r){return this.mr.removeTargets(t,i,r)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(mt("LruGarbageCollector","Garbage collection skipped; disabled"),it.resolve(sE)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(mt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sE):this.yr(t,i)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let r,l,u,f,m,g,y;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(mt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,f=Date.now(),this.nthSequenceNumber(t,l)))).next((w=>(r=w,m=Date.now(),this.removeTargets(t,r,i)))).next((w=>(u=w,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((w=>(y=Date.now(),ro()<=Ht.DEBUG&&mt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${l} in `+(m-f)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),it.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:w}))))}}function Ex(s,t){return new vx(s,t)}class Tx{constructor(){this.changes=new ma((t=>t.toString()),((t,i)=>t.isEqual(i))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,mn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?it.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class bx{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}class Sx{constructor(t,i,r,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=l}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next((l=>(r=l,this.remoteDocumentCache.getEntry(t,i)))).next((l=>(r!==null&&Fl(r.mutation,l,qn.empty(),me.now()),l)))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next((r=>this.getLocalViewOfDocuments(t,r,Gt()).next((()=>r))))}getLocalViewOfDocuments(t,i,r=Gt()){const l=aa();return this.populateOverlays(t,l,i).next((()=>this.computeViews(t,i,l,r).next((u=>{let f=Ll();return u.forEach(((m,g)=>{f=f.insert(m,g.overlayedDocument)})),f}))))}getOverlayedDocuments(t,i){const r=aa();return this.populateOverlays(t,r,i).next((()=>this.computeViews(t,i,r,Gt())))}populateOverlays(t,i,r){const l=[];return r.forEach((u=>{i.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(t,l).next((u=>{u.forEach(((f,m)=>{i.set(f,m)}))}))}computeViews(t,i,r,l){let u=ws();const f=Hl(),m=(function(){return Hl()})();return i.forEach(((g,y)=>{const b=r.get(y.key);l.has(y.key)&&(b===void 0||b.mutation instanceof Rr)?u=u.insert(y.key,y):b!==void 0?(f.set(y.key,b.mutation.getFieldMask()),Fl(b.mutation,y,b.mutation.getFieldMask(),me.now())):f.set(y.key,qn.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((y,b)=>f.set(y,b))),i.forEach(((y,b)=>m.set(y,new bx(b,f.get(y)??null)))),m)))}recalculateAndSaveOverlays(t,i){const r=Hl();let l=new Ee(((f,m)=>f-m)),u=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next((f=>{for(const m of f)m.keys().forEach((g=>{const y=i.get(g);if(y===null)return;let b=r.get(g)||qn.empty();b=m.applyToLocalView(y,b),r.set(g,b);const w=(l.get(m.batchId)||Gt()).add(g);l=l.insert(m.batchId,w)}))})).next((()=>{const f=[],m=l.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,b=g.value,w=UT();b.forEach((R=>{if(!u.has(R)){const P=KT(i.get(R),r.get(R));P!==null&&w.set(R,P),u=u.add(R)}})),f.push(this.documentOverlayCache.saveOverlays(t,y,w))}return it.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,i,r,l){return(function(f){return bt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):VT(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,l):this.getDocumentsMatchingCollectionQuery(t,i,r,l)}getNextDocuments(t,i,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,l-u.size):it.resolve(aa());let m=Yl,g=u;return f.next((y=>it.forEach(y,((b,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(b)?it.resolve():this.remoteDocumentCache.getEntry(t,b).next((R=>{g=g.insert(b,R)}))))).next((()=>this.populateOverlays(t,y,u))).next((()=>this.computeViews(t,g,y,Gt()))).next((b=>({batchId:m,changes:PT(b)})))))}))}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new bt(i)).next((r=>{let l=Ll();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(t,i,r,l){const u=i.collectionGroup;let f=Ll();return this.indexManager.getCollectionParents(t,u).next((m=>it.forEach(m,(g=>{const y=(function(w,R){return new Io(R,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(i,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,y,r,l).next((b=>{b.forEach(((w,R)=>{f=f.insert(w,R)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,i,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,u,l)))).next((f=>{u.forEach(((g,y)=>{const b=y.getKey();f.get(b)===null&&(f=f.insert(b,mn.newInvalidDocument(b)))}));let m=Ll();return f.forEach(((g,y)=>{const b=u.get(g);b!==void 0&&Fl(b.mutation,y,qn.empty(),me.now()),Vh(i,y)&&(m=m.insert(g,y))})),m}))}}class Ax{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return it.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Ki(l.createTime)}})(i)),it.resolve()}getNamedQuery(t,i){return it.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:dx(l.bundledQuery),readTime:Ki(l.readTime)}})(i)),it.resolve()}}class wx{constructor(){this.overlays=new Ee(bt.comparator),this.qr=new Map}getOverlay(t,i){return it.resolve(this.overlays.get(i))}getOverlays(t,i){const r=aa();return it.forEach(i,(l=>this.getOverlay(t,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(t,i,r){return r.forEach(((l,u)=>{this.St(t,i,u)})),it.resolve()}removeOverlaysForBatchId(t,i,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),it.resolve()}getOverlaysForCollection(t,i,r){const l=aa(),u=i.length+1,f=new bt(i.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!i.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>r&&l.set(g.getKey(),g)}return it.resolve(l)}getOverlaysForCollectionGroup(t,i,r,l){let u=new Ee(((y,b)=>y-b));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===i&&y.largestBatchId>r){let b=u.get(y.largestBatchId);b===null&&(b=aa(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const m=aa(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>m.set(y,b))),!(m.size()>=l)););return it.resolve(m)}St(t,i,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new Hw(i,r));let u=this.qr.get(i);u===void 0&&(u=Gt(),this.qr.set(i,u)),this.qr.set(i,u.add(r.key))}}class xx{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(t){return it.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,it.resolve()}}class sp{constructor(){this.Qr=new Qe(Ze.$r),this.Ur=new Qe(Ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const r=new Ze(t,i);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,i){t.forEach((r=>this.addReference(r,i)))}removeReference(t,i){this.Gr(new Ze(t,i))}zr(t,i){t.forEach((r=>this.removeReference(r,i)))}jr(t){const i=new bt(new ce([])),r=new Ze(i,t),l=new Ze(i,t+1),u=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new bt(new ce([])),r=new Ze(i,t),l=new Ze(i,t+1);let u=Gt();return this.Ur.forEachInRange([r,l],(f=>{u=u.add(f.key)})),u}containsKey(t){const i=new Ze(t,0),r=this.Qr.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class Ze{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return bt.comparator(t.key,i.key)||Ft(t.Yr,i.Yr)}static Kr(t,i){return Ft(t.Yr,i.Yr)||bt.comparator(t.key,i.key)}}class Rx{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Qe(Ze.$r)}checkEmpty(t){return it.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new qw(u,i,r,l);this.mutationQueue.push(f);for(const m of l)this.Zr=this.Zr.add(new Ze(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return it.resolve(f)}lookupMutationBatch(t,i){return it.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,l=this.ei(r),u=l<0?0:l;return it.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return it.resolve(this.mutationQueue.length===0?$m:this.tr-1)}getAllMutationBatches(t){return it.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new Ze(i,0),l=new Ze(i,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,l],(f=>{const m=this.Xr(f.Yr);u.push(m)})),it.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new Qe(Ft);return i.forEach((l=>{const u=new Ze(l,0),f=new Ze(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{r=r.add(m.Yr)}))})),it.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,l=r.length+1;let u=r;bt.isDocumentKey(u)||(u=u.child(""));const f=new Ze(new bt(u),0);let m=new Qe(Ft);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===l&&(m=m.add(g.Yr)),!0)}),f),it.resolve(this.ti(m))}ti(t){const i=[];return t.forEach((r=>{const l=this.Xr(r);l!==null&&i.push(l)})),i}removeMutationBatch(t,i){Jt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return it.forEach(i.mutations,(l=>{const u=new Ze(l.key,i.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,i){const r=new Ze(i,0),l=this.Zr.firstAfterOrEqual(r);return it.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,it.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class Cx{constructor(t){this.ri=t,this.docs=(function(){return new Ee(bt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,l=this.docs.get(r),u=l?l.size:0,f=this.ri(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return it.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(i))}getEntries(t,i){let r=ws();return i.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():mn.newInvalidDocument(l))})),it.resolve(r)}getDocumentsMatchingQuery(t,i,r,l){let u=ws();const f=i.path,m=new bt(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||iw(nw(b),r)<=0||(l.has(b.key)||Vh(i,b))&&(u=u.insert(b.key,b.mutableCopy()))}return it.resolve(u)}getAllFromCollectionGroup(t,i,r,l){Ct(9500)}ii(t,i){return it.forEach(this.docs,(r=>i(r)))}newChangeBuffer(t){return new Ix(this)}getSize(t){return it.resolve(this.size)}}class Ix extends Tx{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(r)})),it.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}class Dx{constructor(t){this.persistence=t,this.si=new ma((i=>Zm(i)),Jm),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.oi=0,this._i=new sp,this.targetCount=0,this.ai=To.ur()}forEachTarget(t,i){return this.si.forEach(((r,l)=>i(l))),it.resolve()}getLastRemoteSnapshotVersion(t){return it.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return it.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),it.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.oi&&(this.oi=i),it.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new To(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,it.resolve()}updateTargetData(t,i){return this.Pr(i),it.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,it.resolve()}removeTargets(t,i,r){let l=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=i&&r.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),l++)})),it.waitFor(u).next((()=>l))}getTargetCount(t){return it.resolve(this.targetCount)}getTargetData(t,i){const r=this.si.get(i)||null;return it.resolve(r)}addMatchingKeys(t,i,r){return this._i.Wr(i,r),it.resolve()}removeMatchingKeys(t,i,r){this._i.zr(i,r);const l=this.persistence.referenceDelegate,u=[];return l&&i.forEach((f=>{u.push(l.markPotentiallyOrphaned(t,f))})),it.waitFor(u)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),it.resolve()}getMatchingKeysForTargetId(t,i){const r=this._i.Hr(i);return it.resolve(r)}containsKey(t,i){return it.resolve(this._i.containsKey(i))}}class r0{constructor(t,i){this.ui={},this.overlays={},this.ci=new Ih(0),this.li=!1,this.li=!0,this.hi=new xx,this.referenceDelegate=t(this),this.Pi=new Dx(this),this.indexManager=new mx,this.remoteDocumentCache=(function(l){return new Cx(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new fx(i),this.Ii=new Ax(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new wx,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.ui[t.toKey()];return r||(r=new Rx(i,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,r){mt("MemoryPersistence","Starting transaction:",t);const l=new Nx(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(t,i){return it.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,i))))}}class Nx extends rw{constructor(t){super(),this.currentSequenceNumber=t}}class rp{constructor(t){this.persistence=t,this.Ri=new sp,this.Vi=null}static mi(t){return new rp(t)}get fi(){if(this.Vi)return this.Vi;throw Ct(60996)}addReference(t,i,r){return this.Ri.addReference(r,i),this.fi.delete(r.toString()),it.resolve()}removeReference(t,i,r){return this.Ri.removeReference(r,i),this.fi.add(r.toString()),it.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),it.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,i)))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return it.forEach(this.fi,(r=>{const l=bt.fromPath(r);return this.gi(t,l).next((u=>{u||i.removeEntry(l,Dt.min())}))})).next((()=>(this.Vi=null,i.apply(t))))}updateLimboDocument(t,i){return this.gi(t,i).next((r=>{r?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(t){return 0}gi(t,i){return it.or([()=>it.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class ph{constructor(t,i){this.persistence=t,this.pi=new ma((r=>lw(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=Ex(this,i)}static mi(t,i){return new ph(t,i)}Ei(){}di(t){return it.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>i.next((l=>r+l))))}wr(t){let i=0;return this.pr(t,(r=>{i++})).next((()=>i))}pr(t,i){return it.forEach(this.pi,((r,l)=>this.br(t,r,l).next((u=>u?it.resolve():i(l)))))}removeTargets(t,i,r){return this.persistence.getTargetCache().removeTargets(t,i,r)}removeOrphanedDocuments(t,i){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(t,(f=>this.br(t,f,i).next((m=>{m||(r++,u.removeEntry(f,Dt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),it.resolve()}removeTarget(t,i){const r=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,i,r){return this.pi.set(r,t.currentSequenceNumber),it.resolve()}removeReference(t,i,r){return this.pi.set(r,t.currentSequenceNumber),it.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),it.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=Xc(t.data.value)),i}br(t,i,r){return it.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return it.resolve(l!==void 0&&l>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class ap{constructor(t,i,r,l){this.targetId=t,this.fromCache=i,this.Es=r,this.ds=l}static As(t,i){let r=Gt(),l=Gt();for(const u of i.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new ap(t,i.fromCache,r,l)}}class kx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Ox{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return AA()?8:aw(pn())>0?6:4})()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,r,l){const u={result:null};return this.ys(t,i).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(t,i,l,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new kx;return this.Ss(t,i,f).next((m=>{if(u.result=m,this.Vs)return this.bs(t,i,f,m.size)}))})).next((()=>u.result))}bs(t,i,r,l){return r.documentReadCount<this.fs?(ro()<=Ht.DEBUG&&mt("QueryEngine","SDK will not create cache indexes for query:",ao(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),it.resolve()):(ro()<=Ht.DEBUG&&mt("QueryEngine","Query:",ao(i),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(ro()<=Ht.DEBUG&&mt("QueryEngine","The SDK decides to create cache indexes for query:",ao(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Gi(i))):it.resolve())}ys(t,i){if(Qv(i))return it.resolve(null);let r=Gi(i);return this.indexManager.getIndexType(t,r).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=fh(i,null,"F"),r=Gi(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const f=Gt(...u);return this.ps.getDocuments(t,f).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const y=this.Ds(i,m);return this.Cs(i,y,f,g.readTime)?this.ys(t,fh(i,null,"F")):this.vs(t,y,i,g)}))))})))))}ws(t,i,r,l){return Qv(i)||l.isEqual(Dt.min())?it.resolve(null):this.ps.getDocuments(t,r).next((u=>{const f=this.Ds(i,u);return this.Cs(i,f,r,l)?it.resolve(null):(ro()<=Ht.DEBUG&&mt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ao(i)),this.vs(t,f,i,ew(l,Yl)).next((m=>m)))}))}Ds(t,i){let r=new Qe(jT(t));return i.forEach(((l,u)=>{Vh(t,u)&&(r=r.add(u))})),r}Cs(t,i,r,l){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const u=t.limitType==="F"?i.last():i.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(t,i,r){return ro()<=Ht.DEBUG&&mt("QueryEngine","Using full collection scan to execute query:",ao(i)),this.ps.getDocumentsMatchingQuery(t,i,Er.min(),r)}vs(t,i,r,l){return this.ps.getDocumentsMatchingQuery(t,r,l).next((u=>(i.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const op="LocalStore",Vx=3e8;class Mx{constructor(t,i,r,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new Ee(Ft),this.xs=new ma((u=>Zm(u)),Jm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Sx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>t.collect(i,this.Ms)))}}function jx(s,t,i,r){return new Mx(s,t,i,r)}async function a0(s,t){const i=kt(s);return await i.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return i.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,i.Bs(t),i.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],m=[];let g=Gt();for(const y of l){f.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of u){m.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return i.localDocuments.getDocuments(r,g).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:m})))}))}))}function Lx(s,t){const i=kt(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=t.batch.keys(),u=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,b){const w=y.batch,R=w.keys();let P=it.resolve();return R.forEach((W=>{P=P.next((()=>b.getEntry(g,W))).next(($=>{const Y=y.docVersions.get(W);Jt(Y!==null,48541),$.version.compareTo(Y)<0&&(w.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),b.addEntry($)))}))})),P.next((()=>m.mutationQueue.removeMutationBatch(g,w)))})(i,r,t,u).next((()=>u.apply(r))).next((()=>i.mutationQueue.performConsistencyCheck(r))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(r,l,t.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Gt();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(t)))).next((()=>i.localDocuments.getDocuments(r,l)))}))}function o0(s){const t=kt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>t.Pi.getLastRemoteSnapshotVersion(i)))}function Px(s,t){const i=kt(s),r=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const m=[];t.targetChanges.forEach(((b,w)=>{const R=l.get(w);if(!R)return;m.push(i.Pi.removeMatchingKeys(u,b.removedDocuments,w).next((()=>i.Pi.addMatchingKeys(u,b.addedDocuments,w))));let P=R.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(w)!==null?P=P.withResumeToken(ln.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):b.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(b.resumeToken,r)),l=l.insert(w,P),(function($,Y,rt){return $.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=Vx?!0:rt.addedDocuments.size+rt.modifiedDocuments.size+rt.removedDocuments.size>0})(R,P,b)&&m.push(i.Pi.updateTargetData(u,P))}));let g=ws(),y=Gt();if(t.documentUpdates.forEach((b=>{t.resolvedLimboDocuments.has(b)&&m.push(i.persistence.referenceDelegate.updateLimboDocument(u,b))})),m.push(Ux(u,f,t.documentUpdates).next((b=>{g=b.ks,y=b.qs}))),!r.isEqual(Dt.min())){const b=i.Pi.getLastRemoteSnapshotVersion(u).next((w=>i.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(b)}return it.waitFor(m).next((()=>f.apply(u))).next((()=>i.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(i.Ms=l,u)))}function Ux(s,t,i){let r=Gt(),l=Gt();return i.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let f=ws();return i.forEach(((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(m)),g.isNoDocument()&&g.version.isEqual(Dt.min())?(t.removeEntry(m,g.readTime),f=f.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),f=f.insert(m,g)):mt(op,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{ks:f,qs:l}}))}function zx(s,t){const i=kt(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=$m),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function Bx(s,t){const i=kt(s);return i.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return i.Pi.getTargetData(r,t).next((u=>u?(l=u,it.resolve(l)):i.Pi.allocateTargetId(r).next((f=>(l=new dr(t,f,"TargetPurposeListen",r.currentSequenceNumber),i.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=i.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(r.targetId,r),i.xs.set(t,r.targetId)),r}))}async function Dm(s,t,i){const r=kt(s),l=r.Ms.get(t),u=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!Co(f))throw f;mt(op,`Failed to update sequence numbers for target ${t}: ${f}`)}r.Ms=r.Ms.remove(t),r.xs.delete(l.target)}function oE(s,t,i){const r=kt(s);let l=Dt.min(),u=Gt();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,y,b){const w=kt(g),R=w.xs.get(b);return R!==void 0?it.resolve(w.Ms.get(R)):w.Pi.getTargetData(y,b)})(r,f,Gi(t)).next((m=>{if(m)return l=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,t,i?l:Dt.min(),i?u:Gt()))).next((m=>(qx(r,Rw(t),m),{documents:m,Qs:u})))))}function qx(s,t,i){let r=s.Os.get(t)||Dt.min();i.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}class lE{constructor(){this.activeTargetIds=Ow()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Hx{constructor(){this.Mo=new lE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,r){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new lE,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Fx{Oo(t){}shutdown(){}}const uE="ConnectivityMonitor";class cE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){mt(uE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){mt(uE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Yc=null;function Nm(){return Yc===null?Yc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yc++,"0x"+Yc.toString(16)}const om="RestConnection",Gx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kx{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===uh?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(t,i,r,l,u){const f=Nm(),m=this.zo(t,i.toUriEncodedString());mt(om,`Sending RPC '${t}' ${f}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,u);const{host:y}=new URL(m),b=Ao(y);return this.Jo(t,m,g,r,b).then((w=>(mt(om,`Received RPC '${t}' ${f}: `,w),w)),(w=>{throw go(om,`RPC '${t}' ${f} failed with error: `,w,"url: ",m,"request:",r),w}))}Ho(t,i,r,l,u,f){return this.Go(t,i,r,l,u)}jo(t,i,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,u)=>t[u]=l)),r&&r.headers.forEach(((l,u)=>t[u]=l))}zo(t,i){const r=Gx[t];return`${this.Uo}/v1/${i}:${r}`}terminate(){}}class Yx{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const fn="WebChannelConnection";class Qx extends Kx{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,r,l,u){const f=Nm();return new Promise(((m,g)=>{const y=new uT;y.setWithCredentials(!0),y.listenOnce(cT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case $c.NO_ERROR:const w=y.getResponseJson();mt(fn,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(w)),m(w);break;case $c.TIMEOUT:mt(fn,`RPC '${t}' ${f} timed out`),g(new ct(J.DEADLINE_EXCEEDED,"Request time out"));break;case $c.HTTP_ERROR:const R=y.getStatus();if(mt(fn,`RPC '${t}' ${f} failed with status:`,R,"response text:",y.getResponseText()),R>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const W=P?.error;if(W&&W.status&&W.message){const $=(function(rt){const ft=rt.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(ft)>=0?ft:J.UNKNOWN})(W.status);g(new ct($,W.message))}else g(new ct(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ct(J.UNAVAILABLE,"Connection failed."));break;default:Ct(9055,{l_:t,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{mt(fn,`RPC '${t}' ${f} completed.`)}}));const b=JSON.stringify(l);mt(fn,`RPC '${t}' ${f} sending request:`,l),y.send(i,"POST",b,r,15)}))}T_(t,i,r){const l=Nm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=dT(),m=fT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,i,r),g.encodeInitMessageHeaders=!0;const b=u.join("");mt(fn,`Creating RPC '${t}' stream ${l}: ${b}`,g);const w=f.createWebChannel(b,g);this.I_(w);let R=!1,P=!1;const W=new Yx({Yo:Y=>{P?mt(fn,`Not sending because RPC '${t}' stream ${l} is closed:`,Y):(R||(mt(fn,`Opening RPC '${t}' stream ${l} transport.`),w.open(),R=!0),mt(fn,`RPC '${t}' stream ${l} sending:`,Y),w.send(Y))},Zo:()=>w.close()}),$=(Y,rt,ft)=>{Y.listen(rt,(vt=>{try{ft(vt)}catch(Mt){setTimeout((()=>{throw Mt}),0)}}))};return $(w,jl.EventType.OPEN,(()=>{P||(mt(fn,`RPC '${t}' stream ${l} transport opened.`),W.o_())})),$(w,jl.EventType.CLOSE,(()=>{P||(P=!0,mt(fn,`RPC '${t}' stream ${l} transport closed`),W.a_(),this.E_(w))})),$(w,jl.EventType.ERROR,(Y=>{P||(P=!0,go(fn,`RPC '${t}' stream ${l} transport errored. Name:`,Y.name,"Message:",Y.message),W.a_(new ct(J.UNAVAILABLE,"The operation could not be completed")))})),$(w,jl.EventType.MESSAGE,(Y=>{if(!P){const rt=Y.data[0];Jt(!!rt,16349);const ft=rt,vt=ft?.error||ft[0]?.error;if(vt){mt(fn,`RPC '${t}' stream ${l} received error:`,vt);const Mt=vt.status;let at=(function(S){const I=ze[S];if(I!==void 0)return QT(I)})(Mt),St=vt.message;at===void 0&&(at=J.INTERNAL,St="Unknown error status: "+Mt+" with message "+vt.message),P=!0,W.a_(new ct(at,St)),w.close()}else mt(fn,`RPC '${t}' stream ${l} received:`,rt),W.u_(rt)}})),$(m,hT.STAT_EVENT,(Y=>{Y.stat===vm.PROXY?mt(fn,`RPC '${t}' stream ${l} detected buffering proxy`):Y.stat===vm.NOPROXY&&mt(fn,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((i=>i===t))}}function lm(){return typeof document<"u"?document:null}function Uh(s){return new Zw(s,!0)}class l0{constructor(t,i,r=1e3,l=1.5,u=6e4){this.Mi=t,this.timerId=i,this.d_=r,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-r);l>0&&mt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const hE="PersistentStream";class u0{constructor(t,i,r,l,u,f,m,g){this.Mi=t,this.S_=r,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new l0(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===J.RESOURCE_EXHAUSTED?(As(i.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===i&&this.G_(r,l)}),(r=>{t((()=>{const l=new ct(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(t,i){const r=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return mt(hE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget((()=>this.D_===t?i():(mt(hE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $x extends u0{constructor(t,i,r,l,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,l,f),this.serializer=u}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=ex(this.serializer,t),r=(function(u){if(!("targetChange"in u))return Dt.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Dt.min():f.readTime?Ki(f.readTime):Dt.min()})(t);return this.listener.H_(i,r)}Y_(t){const i={};i.database=Im(this.serializer),i.addTarget=(function(u,f){let m;const g=f.target;if(m=Am(g)?{documents:sx(u,g)}:{query:rx(u,g).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=WT(u,f.resumeToken);const y=xm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(Dt.min())>0){m.readTime=mh(u,f.snapshotVersion.toTimestamp());const y=xm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,t);const r=ox(this.serializer,t);r&&(i.labels=r),this.q_(i)}Z_(t){const i={};i.database=Im(this.serializer),i.removeTarget=t,this.q_(i)}}class Xx extends u0{constructor(t,i,r,l,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return Jt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Jt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Jt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=ix(t.writeResults,t.commitTime),r=Ki(t.commitTime);return this.listener.na(r,i)}ra(){const t={};t.database=Im(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map((r=>nx(this.serializer,r)))};this.q_(i)}}class Wx{}class Zx extends Wx{constructor(t,i,r,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ct(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(t,Rm(i,r),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ct(J.UNKNOWN,u.toString())}))}Ho(t,i,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(t,Rm(i,r),l,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ct(J.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Jx{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(As(i),this.aa=!1):mt("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ha="RemoteStore";class tR{constructor(t,i,r,l,u){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{pa(this)&&(mt(ha,"Restarting streams for network reachability change."),await(async function(g){const y=kt(g);y.Ea.add(4),await ou(y),y.Ra.set("Unknown"),y.Ea.delete(4),await zh(y)})(this))}))})),this.Ra=new Jx(r,l)}}async function zh(s){if(pa(s))for(const t of s.da)await t(!0)}async function ou(s){for(const t of s.da)await t(!1)}function c0(s,t){const i=kt(s);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),hp(i)?cp(i):Do(i).O_()&&up(i,t))}function lp(s,t){const i=kt(s),r=Do(i);i.Ia.delete(t),r.O_()&&h0(i,t),i.Ia.size===0&&(r.O_()?r.L_():pa(i)&&i.Ra.set("Unknown"))}function up(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Dt.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}Do(s).Y_(t)}function h0(s,t){s.Va.Ue(t),Do(s).Z_(t)}function cp(s){s.Va=new Qw({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),Do(s).start(),s.Ra.ua()}function hp(s){return pa(s)&&!Do(s).x_()&&s.Ia.size>0}function pa(s){return kt(s).Ea.size===0}function f0(s){s.Va=void 0}async function eR(s){s.Ra.set("Online")}async function nR(s){s.Ia.forEach(((t,i)=>{up(s,t)}))}async function iR(s,t){f0(s),hp(s)?(s.Ra.ha(t),cp(s)):s.Ra.set("Unknown")}async function sR(s,t,i){if(s.Ra.set("Online"),t instanceof XT&&t.state===2&&t.cause)try{await(async function(l,u){const f=u.cause;for(const m of u.targetIds)l.Ia.has(m)&&(await l.remoteSyncer.rejectListen(m,f),l.Ia.delete(m),l.Va.removeTarget(m))})(s,t)}catch(r){mt(ha,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await gh(s,r)}else if(t instanceof Jc?s.Va.Ze(t):t instanceof $T?s.Va.st(t):s.Va.tt(t),!i.isEqual(Dt.min()))try{const r=await o0(s.localStore);i.compareTo(r)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(y);b&&u.Ia.set(y,b.withResumeToken(g.resumeToken,f))}})),m.targetMismatches.forEach(((g,y)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(ln.EMPTY_BYTE_STRING,b.snapshotVersion)),h0(u,g);const w=new dr(b.target,g,y,b.sequenceNumber);up(u,w)})),u.remoteSyncer.applyRemoteEvent(m)})(s,i)}catch(r){mt(ha,"Failed to raise snapshot:",r),await gh(s,r)}}async function gh(s,t,i){if(!Co(t))throw t;s.Ea.add(1),await ou(s),s.Ra.set("Offline"),i||(i=()=>o0(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{mt(ha,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await zh(s)}))}function d0(s,t){return t().catch((i=>gh(s,i,t)))}async function Bh(s){const t=kt(s),i=Ar(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:$m;for(;rR(t);)try{const l=await zx(t.localStore,r);if(l===null){t.Ta.length===0&&i.L_();break}r=l.batchId,aR(t,l)}catch(l){await gh(t,l)}m0(t)&&p0(t)}function rR(s){return pa(s)&&s.Ta.length<10}function aR(s,t){s.Ta.push(t);const i=Ar(s);i.O_()&&i.X_&&i.ea(t.mutations)}function m0(s){return pa(s)&&!Ar(s).x_()&&s.Ta.length>0}function p0(s){Ar(s).start()}async function oR(s){Ar(s).ra()}async function lR(s){const t=Ar(s);for(const i of s.Ta)t.ea(i.mutations)}async function uR(s,t,i){const r=s.Ta.shift(),l=ep.from(r,t,i);await d0(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Bh(s)}async function cR(s,t){t&&Ar(s).X_&&await(async function(r,l){if((function(f){return Gw(f)&&f!==J.ABORTED})(l.code)){const u=r.Ta.shift();Ar(r).B_(),await d0(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Bh(r)}})(s,t),m0(s)&&p0(s)}async function fE(s,t){const i=kt(s);i.asyncQueue.verifyOperationInProgress(),mt(ha,"RemoteStore received new credentials");const r=pa(i);i.Ea.add(3),await ou(i),r&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await zh(i)}async function hR(s,t){const i=kt(s);t?(i.Ea.delete(2),await zh(i)):t||(i.Ea.add(2),await ou(i),i.Ra.set("Unknown"))}function Do(s){return s.ma||(s.ma=(function(i,r,l){const u=kt(i);return u.sa(),new $x(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:eR.bind(null,s),t_:nR.bind(null,s),r_:iR.bind(null,s),H_:sR.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),hp(s)?cp(s):s.Ra.set("Unknown")):(await s.ma.stop(),f0(s))}))),s.ma}function Ar(s){return s.fa||(s.fa=(function(i,r,l){const u=kt(i);return u.sa(),new Xx(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:oR.bind(null,s),r_:cR.bind(null,s),ta:lR.bind(null,s),na:uR.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await Bh(s)):(await s.fa.stop(),s.Ta.length>0&&(mt(ha,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class fp{constructor(t,i,r,l,u){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new Ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,l,u){const f=Date.now()+r,m=new fp(t,i,f,l,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct(J.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dp(s,t){if(As("AsyncQueue",`${t}: ${s}`),Co(s))return new ct(J.UNAVAILABLE,`${t}: ${s}`);throw s}class co{static emptySet(t){return new co(t.comparator)}constructor(t){this.comparator=t?(i,r)=>t(i,r)||bt.comparator(i.key,r.key):(i,r)=>bt.comparator(i.key,r.key),this.keyedMap=Ll(),this.sortedSet=new Ee(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((i,r)=>(t(i),!1)))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof co)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((i=>{t.push(i.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new co;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}class dE{constructor(){this.ga=new Ee(bt.comparator)}track(t){const i=t.doc.key,r=this.ga.get(i);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(i,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(i):t.type===1&&r.type===2?this.ga=this.ga.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):Ct(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal(((i,r)=>{t.push(r)})),t}}class bo{constructor(t,i,r,l,u,f,m,g,y){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,i,r,l,u){const f=[];return i.forEach((m=>{f.push({type:0,doc:m})})),new bo(t,i,co.emptySet(i),f,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Oh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==r[l].type||!i[l].doc.isEqual(r[l].doc))return!1;return!0}}class fR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class dR{constructor(){this.queries=mE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const l=kt(i),u=l.queries;l.queries=mE(),u.forEach(((f,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new ct(J.ABORTED,"Firestore shutting down"))}}function mE(){return new ma((s=>MT(s)),Oh)}async function mp(s,t){const i=kt(s);let r=3;const l=t.query;let u=i.queries.get(l);u?!u.ba()&&t.Da()&&(r=2):(u=new fR,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await i.onListen(l,!0);break;case 1:u.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(f){const m=dp(f,`Initialization of query '${ao(t.query)}' failed`);return void t.onError(m)}i.queries.set(l,u),u.Sa.push(t),t.va(i.onlineState),u.wa&&t.Fa(u.wa)&&gp(i)}async function pp(s,t){const i=kt(s),r=t.query;let l=3;const u=i.queries.get(r);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=t.Da()?0:1:!u.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function mR(s,t){const i=kt(s);let r=!1;for(const l of t){const u=l.query,f=i.queries.get(u);if(f){for(const m of f.Sa)m.Fa(l)&&(r=!0);f.wa=l}}r&&gp(i)}function pR(s,t,i){const r=kt(s),l=r.queries.get(t);if(l)for(const u of l.Sa)u.onError(i);r.queries.delete(t)}function gp(s){s.Ca.forEach((t=>{t.next()}))}var km,pE;(pE=km||(km={})).Ma="default",pE.Cache="cache";class yp{constructor(t,i,r){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const l of t.docChanges)l.type!==3&&r.push(l);t=new bo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const r=i!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=bo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==km.Cache}}class g0{constructor(t){this.key=t}}class y0{constructor(t){this.key=t}}class gR{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gt(),this.mutatedKeys=Gt(),this.eu=jT(t),this.tu=new co(this.eu)}get nu(){return this.Ya}ru(t,i){const r=i?i.iu:new dE,l=i?i.tu:this.tu;let u=i?i.mutatedKeys:this.mutatedKeys,f=l,m=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((b,w)=>{const R=l.get(b),P=Vh(this.query,w)?w:null,W=!!R&&this.mutatedKeys.has(R.key),$=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let Y=!1;R&&P?R.data.isEqual(P.data)?W!==$&&(r.track({type:3,doc:P}),Y=!0):this.su(R,P)||(r.track({type:2,doc:P}),Y=!0,(g&&this.eu(P,g)>0||y&&this.eu(P,y)<0)&&(m=!0)):!R&&P?(r.track({type:0,doc:P}),Y=!0):R&&!P&&(r.track({type:1,doc:R}),Y=!0,(g||y)&&(m=!0)),Y&&(P?(f=f.add(P),u=$?u.add(b):u.delete(b)):(f=f.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{tu:f,iu:r,Cs:m,mutatedKeys:u}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,l){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((b,w)=>(function(P,W){const $=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct(20277,{Rt:Y})}};return $(P)-$(W)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(r),l=l??!1;const m=i&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,y=g!==this.Za;return this.Za=g,f.length!==0||y?{snapshot:new bo(this.query,t.tu,u,f,t.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),t.modifiedDocuments.forEach((i=>{})),t.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Gt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const i=[];return t.forEach((r=>{this.Xa.has(r)||i.push(new y0(r))})),this.Xa.forEach((r=>{t.has(r)||i.push(new g0(r))})),i}cu(t){this.Ya=t.Qs,this.Xa=Gt();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _p="SyncEngine";class yR{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class _R{constructor(t){this.key=t,this.hu=!1}}class vR{constructor(t,i,r,l,u,f){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ma((m=>MT(m)),Oh),this.Iu=new Map,this.Eu=new Set,this.du=new Ee(bt.comparator),this.Au=new Map,this.Ru=new sp,this.Vu={},this.mu=new Map,this.fu=To.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ER(s,t,i=!0){const r=S0(s);let l;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await _0(r,t,i,!0),l}async function TR(s,t){const i=S0(s);await _0(i,t,!0,!1)}async function _0(s,t,i,r){const l=await Bx(s.localStore,Gi(t)),u=l.targetId,f=s.sharedClientState.addLocalQueryTarget(u,i);let m;return r&&(m=await bR(s,t,u,f==="current",l.resumeToken)),s.isPrimaryClient&&i&&c0(s.remoteStore,l),m}async function bR(s,t,i,r,l){s.pu=(w,R,P)=>(async function($,Y,rt,ft){let vt=Y.view.ru(rt);vt.Cs&&(vt=await oE($.localStore,Y.query,!1).then((({documents:N})=>Y.view.ru(N,vt))));const Mt=ft&&ft.targetChanges.get(Y.targetId),at=ft&&ft.targetMismatches.get(Y.targetId)!=null,St=Y.view.applyChanges(vt,$.isPrimaryClient,Mt,at);return yE($,Y.targetId,St.au),St.snapshot})(s,w,R,P);const u=await oE(s.localStore,t,!0),f=new gR(t,u.Qs),m=f.ru(u.documents),g=au.createSynthesizedTargetChangeForCurrentChange(i,r&&s.onlineState!=="Offline",l),y=f.applyChanges(m,s.isPrimaryClient,g);yE(s,i,y.au);const b=new yR(t,i,f);return s.Tu.set(t,b),s.Iu.has(i)?s.Iu.get(i).push(t):s.Iu.set(i,[t]),y.snapshot}async function SR(s,t,i){const r=kt(s),l=r.Tu.get(t),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((f=>!Oh(f,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Dm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),i&&lp(r.remoteStore,l.targetId),Om(r,l.targetId)})).catch(Ro)):(Om(r,l.targetId),await Dm(r.localStore,l.targetId,!0))}async function AR(s,t){const i=kt(s),r=i.Tu.get(t),l=i.Iu.get(r.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),lp(i.remoteStore,r.targetId))}async function wR(s,t,i){const r=kR(s);try{const l=await(function(f,m){const g=kt(f),y=me.now(),b=m.reduce(((P,W)=>P.add(W.key)),Gt());let w,R;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let W=ws(),$=Gt();return g.Ns.getEntries(P,b).next((Y=>{W=Y,W.forEach(((rt,ft)=>{ft.isValidDocument()||($=$.add(rt))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,W))).next((Y=>{w=Y;const rt=[];for(const ft of m){const vt=zw(ft,w.get(ft.key).overlayedDocument);vt!=null&&rt.push(new Rr(ft.key,vt,RT(vt.value.mapValue),En.exists(!0)))}return g.mutationQueue.addMutationBatch(P,y,rt,m)})).next((Y=>{R=Y;const rt=Y.applyToLocalDocumentSet(w,$);return g.documentOverlayCache.saveOverlays(P,Y.batchId,rt)}))})).then((()=>({batchId:R.batchId,changes:PT(w)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(l.batchId),(function(f,m,g){let y=f.Vu[f.currentUser.toKey()];y||(y=new Ee(Ft)),y=y.insert(m,g),f.Vu[f.currentUser.toKey()]=y})(r,l.batchId,i),await lu(r,l.changes),await Bh(r.remoteStore)}catch(l){const u=dp(l,"Failed to persist write");i.reject(u)}}async function v0(s,t){const i=kt(s);try{const r=await Px(i.localStore,t);t.targetChanges.forEach(((l,u)=>{const f=i.Au.get(u);f&&(Jt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Jt(f.hu,14607):l.removedDocuments.size>0&&(Jt(f.hu,42227),f.hu=!1))})),await lu(i,r,t)}catch(r){await Ro(r)}}function gE(s,t,i){const r=kt(s);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const l=[];r.Tu.forEach(((u,f)=>{const m=f.view.va(t);m.snapshot&&l.push(m.snapshot)})),(function(f,m){const g=kt(f);g.onlineState=m;let y=!1;g.queries.forEach(((b,w)=>{for(const R of w.Sa)R.va(m)&&(y=!0)})),y&&gp(g)})(r.eventManager,t),l.length&&r.Pu.H_(l),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function xR(s,t,i){const r=kt(s);r.sharedClientState.updateQueryState(t,"rejected",i);const l=r.Au.get(t),u=l&&l.key;if(u){let f=new Ee(bt.comparator);f=f.insert(u,mn.newNoDocument(u,Dt.min()));const m=Gt().add(u),g=new Ph(Dt.min(),new Map,new Ee(Ft),f,m);await v0(r,g),r.du=r.du.remove(u),r.Au.delete(t),vp(r)}else await Dm(r.localStore,t,!1).then((()=>Om(r,t,i))).catch(Ro)}async function RR(s,t){const i=kt(s),r=t.batch.batchId;try{const l=await Lx(i.localStore,t);T0(i,r,null),E0(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await lu(i,l)}catch(l){await Ro(l)}}async function CR(s,t,i){const r=kt(s);try{const l=await(function(f,m){const g=kt(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,m).next((w=>(Jt(w!==null,37113),b=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(r.localStore,t);T0(r,t,i),E0(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await lu(r,l)}catch(l){await Ro(l)}}function E0(s,t){(s.mu.get(t)||[]).forEach((i=>{i.resolve()})),s.mu.delete(t)}function T0(s,t,i){const r=kt(s);let l=r.Vu[r.currentUser.toKey()];if(l){const u=l.get(t);u&&(i?u.reject(i):u.resolve(),l=l.remove(t)),r.Vu[r.currentUser.toKey()]=l}}function Om(s,t,i=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),i&&s.Pu.yu(r,i);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||b0(s,r)}))}function b0(s,t){s.Eu.delete(t.path.canonicalString());const i=s.du.get(t);i!==null&&(lp(s.remoteStore,i),s.du=s.du.remove(t),s.Au.delete(i),vp(s))}function yE(s,t,i){for(const r of i)r instanceof g0?(s.Ru.addReference(r.key,t),IR(s,r)):r instanceof y0?(mt(_p,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||b0(s,r.key)):Ct(19791,{wu:r})}function IR(s,t){const i=t.key,r=i.path.canonicalString();s.du.get(i)||s.Eu.has(r)||(mt(_p,"New document in limbo: "+i),s.Eu.add(r),vp(s))}function vp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const i=new bt(ce.fromString(t)),r=s.fu.next();s.Au.set(r,new _R(i)),s.du=s.du.insert(i,r),c0(s.remoteStore,new dr(Gi(kh(i.path)),r,"TargetPurposeLimboResolution",Ih.ce))}}async function lu(s,t,i){const r=kt(s),l=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{f.push(r.pu(g,t,i).then((y=>{if((y||i)&&r.isPrimaryClient){const b=y?!y.fromCache:i?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){l.push(y);const b=ap.As(g.targetId,y);u.push(b)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(g,y){const b=kt(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>it.forEach(y,(R=>it.forEach(R.Es,(P=>b.persistence.referenceDelegate.addReference(w,R.targetId,P))).next((()=>it.forEach(R.ds,(P=>b.persistence.referenceDelegate.removeReference(w,R.targetId,P)))))))))}catch(w){if(!Co(w))throw w;mt(op,"Failed to update sequence numbers: "+w)}for(const w of y){const R=w.targetId;if(!w.fromCache){const P=b.Ms.get(R),W=P.snapshotVersion,$=P.withLastLimboFreeSnapshotVersion(W);b.Ms=b.Ms.insert(R,$)}}})(r.localStore,u))}async function DR(s,t){const i=kt(s);if(!i.currentUser.isEqual(t)){mt(_p,"User change. New user:",t.toKey());const r=await a0(i.localStore,t);i.currentUser=t,(function(u,f){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new ct(J.CANCELLED,f))}))})),u.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await lu(i,r.Ls)}}function NR(s,t){const i=kt(s),r=i.Au.get(t);if(r&&r.hu)return Gt().add(r.key);{let l=Gt();const u=i.Iu.get(t);if(!u)return l;for(const f of u){const m=i.Tu.get(f);l=l.unionWith(m.view.nu)}return l}}function S0(s){const t=kt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=v0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=NR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xR.bind(null,t),t.Pu.H_=mR.bind(null,t.eventManager),t.Pu.yu=pR.bind(null,t.eventManager),t}function kR(s){const t=kt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=RR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=CR.bind(null,t),t}class yh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Uh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return jx(this.persistence,new Ox,t.initialUser,this.serializer)}Cu(t){return new r0(rp.mi,this.serializer)}Du(t){return new Hx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yh.provider={build:()=>new yh};class OR extends yh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){Jt(this.persistence.referenceDelegate instanceof ph,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new _x(r,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new r0((r=>ph.mi(r,i)),this.serializer)}}class Vm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DR.bind(null,this.syncEngine),await hR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new dR})()}createDatastore(t){const i=Uh(t.databaseInfo.databaseId),r=(function(u){return new Qx(u)})(t.databaseInfo);return(function(u,f,m,g){return new Zx(u,f,m,g)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,l,u,f,m){return new tR(r,l,u,f,m)})(this.localStore,this.datastore,t.asyncQueue,(i=>gE(this.syncEngine,i,0)),(function(){return cE.v()?new cE:new Fx})())}createSyncEngine(t,i){return(function(l,u,f,m,g,y,b){const w=new vR(l,u,f,m,g,y);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const r=kt(i);mt(ha,"RemoteStore shutting down."),r.Ea.add(5),await ou(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Vm.provider={build:()=>new Vm};class Ep{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):As("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout((()=>{this.muted||t(i)}),0)}}const wr="FirestoreClient";class VR{constructor(t,i,r,l,u){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=l,this.user=dn.UNAUTHENTICATED,this.clientId=Qm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{mt(wr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(mt(wr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=dp(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function um(s,t){s.asyncQueue.verifyOperationInProgress(),mt(wr,"Initializing OfflineComponentProvider");const i=s.configuration;await t.initialize(i);let r=i.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await a0(t.localStore,l),r=l)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function _E(s,t){s.asyncQueue.verifyOperationInProgress();const i=await MR(s);mt(wr,"Initializing OnlineComponentProvider"),await t.initialize(i,s.configuration),s.setCredentialChangeListener((r=>fE(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>fE(t.remoteStore,l))),s._onlineComponents=t}async function MR(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){mt(wr,"Using user provided OfflineComponentProvider");try{await um(s,s._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!(function(l){return l.name==="FirebaseError"?l.code===J.FAILED_PRECONDITION||l.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;go("Error using user provided cache. Falling back to memory cache: "+i),await um(s,new yh)}}else mt(wr,"Using default OfflineComponentProvider"),await um(s,new OR(void 0));return s._offlineComponents}async function A0(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(mt(wr,"Using user provided OnlineComponentProvider"),await _E(s,s._uninitializedComponentsProvider._online)):(mt(wr,"Using default OnlineComponentProvider"),await _E(s,new Vm))),s._onlineComponents}function jR(s){return A0(s).then((t=>t.syncEngine))}async function _h(s){const t=await A0(s),i=t.eventManager;return i.onListen=ER.bind(null,t.syncEngine),i.onUnlisten=SR.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=TR.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=AR.bind(null,t.syncEngine),i}function LR(s,t,i={}){const r=new Ts;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,g,y){const b=new Ep({next:R=>{b.Nu(),f.enqueueAndForget((()=>pp(u,w)));const P=R.docs.has(m);!P&&R.fromCache?y.reject(new ct(J.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&R.fromCache&&g&&g.source==="server"?y.reject(new ct(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),w=new yp(kh(m.path),b,{includeMetadataChanges:!0,qa:!0});return mp(u,w)})(await _h(s),s.asyncQueue,t,i,r))),r.promise}function PR(s,t,i={}){const r=new Ts;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,g,y){const b=new Ep({next:R=>{b.Nu(),f.enqueueAndForget((()=>pp(u,w))),R.fromCache&&g.source==="server"?y.reject(new ct(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),w=new yp(m,b,{includeMetadataChanges:!0,qa:!0});return mp(u,w)})(await _h(s),s.asyncQueue,t,i,r))),r.promise}function w0(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}const vE=new Map;const x0="firestore.googleapis.com",EE=!0;class TE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ct(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=x0,this.ssl=EE}else this.host=t.host,this.ssl=t.ssl??EE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=s0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<gx)throw new ct(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}tw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w0(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ct(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ct(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ct(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class qh{constructor(t,i,r,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ct(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ct(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new F1;switch(r.type){case"firstParty":return new Q1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ct(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const r=vE.get(i);r&&(mt("ComponentProvider","Removing Datastore"),vE.delete(i),r.terminate())})(this),Promise.resolve()}}function UR(s,t,i,r={}){s=vn(s,qh);const l=Ao(t),u=s._getSettings(),f={...u,emulatorOptions:s._getEmulatorOptions()},m=`${t}:${i}`;l&&(tT(`https://${m}`),eT("Firestore",!0)),u.host!==x0&&u.host!==m&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:l,emulatorOptions:r};if(!vr(g,f)&&(s._setSettings(g),r.mockUserToken)){let y,b;if(typeof r.mockUserToken=="string")y=r.mockUserToken,b=dn.MOCK_USER;else{y=pA(r.mockUserToken,s._app?.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new ct(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new dn(w)}s._authCredentials=new G1(new pT(y,b))}}class Cs{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Cs(this.firestore,t,this._query)}}class Se{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _r(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Se(this.firestore,t,this._key)}toJSON(){return{type:Se._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,r){if(su(i,Se._jsonSchema))return new Se(t,r||null,new bt(ce.fromString(i.referencePath)))}}Se._jsonSchemaVersion="firestore/documentReference/1.0",Se._jsonSchema={type:qe("string",Se._jsonSchemaVersion),referencePath:qe("string")};class _r extends Cs{constructor(t,i,r){super(t,i,kh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Se(this.firestore,null,new bt(t))}withConverter(t){return new _r(this.firestore,t,this._path)}}function ve(s,t,...i){if(s=Ie(s),gT("collection","path",t),s instanceof qh){const r=ce.fromString(t,...i);return Vv(r),new _r(s,null,r)}{if(!(s instanceof Se||s instanceof _r))throw new ct(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ce.fromString(t,...i));return Vv(r),new _r(s.firestore,null,r)}}function pe(s,t,...i){if(s=Ie(s),arguments.length===1&&(t=Qm.newId()),gT("doc","path",t),s instanceof qh){const r=ce.fromString(t,...i);return Ov(r),new Se(s,null,new bt(r))}{if(!(s instanceof Se||s instanceof _r))throw new ct(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ce.fromString(t,...i));return Ov(r),new Se(s.firestore,s instanceof _r?s.converter:null,new bt(r))}}const bE="AsyncQueue";class SE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new l0(this,"async_queue_retry"),this._c=()=>{const r=lm();r&&mt(bE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const i=lm();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=lm();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Ts;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Co(t))throw t;mt(bE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const i=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,As("INTERNAL UNHANDLED ERROR: ",AE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=i,i}enqueueAfterDelay(t,i,r){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=fp.createAndSchedule(this,t,i,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Ct(47125,{Pc:AE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((i,r)=>i.targetTimeMs-r.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function AE(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}function wE(s){return(function(i,r){if(typeof i!="object"||i===null)return!1;const l=i;for(const u of r)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class Zi extends qh{constructor(t,i,r,l){super(t,i,r,l),this.type="firestore",this._queue=new SE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new SE(t),this._firestoreClient=void 0,await t}}}function zR(s,t){const i=typeof s=="object"?s:rT(),r=typeof s=="string"?s:uh,l=Km(i,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=dA("firestore");u&&UR(l,...u)}return l}function uu(s){if(s._terminated)throw new ct(J.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||BR(s),s._firestoreClient}function BR(s){const t=s._freezeSettings(),i=(function(l,u,f,m){return new hw(l,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,w0(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new VR(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class si{constructor(t){this._byteString=t}static fromBase64String(t){try{return new si(ln.fromBase64String(t))}catch(i){throw new ct(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new si(ln.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:si._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(su(t,si._jsonSchema))return si.fromBase64String(t.bytes)}}si._jsonSchemaVersion="firestore/bytes/1.0",si._jsonSchema={type:qe("string",si._jsonSchemaVersion),bytes:qe("string")};class cu{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new ct(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class hu{constructor(t){this._methodName=t}}class Yi{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new ct(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new ct(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ft(this._lat,t._lat)||Ft(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yi._jsonSchemaVersion}}static fromJSON(t){if(su(t,Yi._jsonSchema))return new Yi(t.latitude,t.longitude)}}Yi._jsonSchemaVersion="firestore/geoPoint/1.0",Yi._jsonSchema={type:qe("string",Yi._jsonSchemaVersion),latitude:qe("number"),longitude:qe("number")};class Qi{constructor(t){this._values=(t||[]).map((i=>i))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Qi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(su(t,Qi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((i=>typeof i=="number")))return new Qi(t.vectorValues);throw new ct(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qi._jsonSchemaVersion="firestore/vectorValue/1.0",Qi._jsonSchema={type:qe("string",Qi._jsonSchemaVersion),vectorValues:qe("object")};const qR=/^__.*__$/;class HR{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new Rr(t,this.data,this.fieldMask,i,this.fieldTransforms):new ru(t,this.data,i,this.fieldTransforms)}}class R0{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return new Rr(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function C0(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct(40011,{Ac:s})}}class Hh{constructor(t,i,r,l,u,f){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Hh({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),r=this.Vc({path:i,fc:!1});return r.gc(t),r}yc(t){const i=this.path?.child(t),r=this.Vc({path:i,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return vh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((i=>t.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>t.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(C0(this.Ac)&&qR.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class FR{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||Uh(t)}Cc(t,i,r,l=!1){return new Hh({Ac:t,methodName:i,Dc:r,path:on.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fu(s){const t=s._freezeSettings(),i=Uh(s._databaseId);return new FR(s._databaseId,!!t.ignoreUndefinedProperties,i)}function Tp(s,t,i,r,l,u={}){const f=s.Cc(u.merge||u.mergeFields?2:0,t,i,l);Ap("Data must be an object, but it was:",f,r);const m=N0(r,f);let g,y;if(u.merge)g=new qn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const b=[];for(const w of u.mergeFields){const R=Mm(t,w,i);if(!f.contains(R))throw new ct(J.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);O0(b,R)||b.push(R)}g=new qn(b),y=f.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=f.fieldTransforms;return new HR(new Dn(m),g,y)}class Fh extends hu{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Fh}}function GR(s,t,i){return new Hh({Ac:3,Dc:t.settings.Dc,methodName:s._methodName,fc:i},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class bp extends hu{_toFieldTransform(t){return new GT(t.path,new Zl)}isEqual(t){return t instanceof bp}}class Sp extends hu{constructor(t,i){super(t),this.vc=i}_toFieldTransform(t){const i=GR(this,t,!0),r=this.vc.map((u=>No(u,i))),l=new Eo(r);return new GT(t.path,l)}isEqual(t){return t instanceof Sp&&vr(this.vc,t.vc)}}function I0(s,t,i,r){const l=s.Cc(1,t,i);Ap("Data must be an object, but it was:",l,r);const u=[],f=Dn.empty();xr(r,((g,y)=>{const b=wp(t,g,i);y=Ie(y);const w=l.yc(b);if(y instanceof Fh)u.push(b);else{const R=No(y,w);R!=null&&(u.push(b),f.set(b,R))}}));const m=new qn(u);return new R0(f,m,l.fieldTransforms)}function D0(s,t,i,r,l,u){const f=s.Cc(1,t,i),m=[Mm(t,r,i)],g=[l];if(u.length%2!=0)throw new ct(J.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)m.push(Mm(t,u[R])),g.push(u[R+1]);const y=[],b=Dn.empty();for(let R=m.length-1;R>=0;--R)if(!O0(y,m[R])){const P=m[R];let W=g[R];W=Ie(W);const $=f.yc(P);if(W instanceof Fh)y.push(P);else{const Y=No(W,$);Y!=null&&(y.push(P),b.set(P,Y))}}const w=new qn(y);return new R0(b,w,f.fieldTransforms)}function KR(s,t,i,r=!1){return No(i,s.Cc(r?4:3,t))}function No(s,t){if(k0(s=Ie(s)))return Ap("Unsupported field value:",t,s),N0(s,t);if(s instanceof hu)return(function(r,l){if(!C0(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,l){const u=[];let f=0;for(const m of r){let g=No(m,l.wc(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}})(s,t)}return(function(r,l){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Vw(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=me.fromDate(r);return{timestampValue:mh(l.serializer,u)}}if(r instanceof me){const u=new me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mh(l.serializer,u)}}if(r instanceof Yi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof si)return{bytesValue:WT(l.serializer,r._byteString)};if(r instanceof Se){const u=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ip(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Qi)return(function(f,m){return{mapValue:{fields:{[wT]:{stringValue:xT},[ch]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return tp(m.serializer,y)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Ch(r)}`)})(s,t)}function N0(s,t){const i={};return vT(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):xr(s,((r,l)=>{const u=No(l,t.mc(r));u!=null&&(i[r]=u)})),{mapValue:{fields:i}}}function k0(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof me||s instanceof Yi||s instanceof si||s instanceof Se||s instanceof hu||s instanceof Qi)}function Ap(s,t,i){if(!k0(i)||!yT(i)){const r=Ch(i);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function Mm(s,t,i){if((t=Ie(t))instanceof cu)return t._internalPath;if(typeof t=="string")return wp(s,t);throw vh("Field path arguments must be of type string or ",s,!1,void 0,i)}const YR=new RegExp("[~\\*/\\[\\]]");function wp(s,t,i){if(t.search(YR)>=0)throw vh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new cu(...t.split("."))._internalPath}catch{throw vh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function vh(s,t,i,r,l){const u=r&&!r.isEmpty(),f=l!==void 0;let m=`Function ${t}() called with invalid data`;i&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${r}`),f&&(g+=` in document ${l}`),g+=")"),new ct(J.INVALID_ARGUMENT,m+s+g)}function O0(s,t){return s.some((i=>i.isEqual(t)))}class V0{constructor(t,i,r,l,u){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Se(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new QR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(Gh("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class QR extends V0{data(){return super.data()}}function Gh(s,t){return typeof t=="string"?wp(s,t):t instanceof cu?t._internalPath:t._delegate._internalPath}function M0(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ct(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xp{}class Rp extends xp{}function yi(s,t,...i){let r=[];t instanceof xp&&r.push(t),r=r.concat(i),(function(u){const f=u.filter((g=>g instanceof Cp)).length,m=u.filter((g=>g instanceof Kh)).length;if(f>1||f>0&&m>0)throw new ct(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)s=l._apply(s);return s}class Kh extends Rp{constructor(t,i,r){super(),this._field=t,this._op=i,this._value=r,this.type="where"}static _create(t,i,r){return new Kh(t,i,r)}_apply(t){const i=this._parse(t);return j0(t._query,i),new Cs(t.firestore,t.converter,wm(t._query,i))}_parse(t){const i=fu(t.firestore);return(function(u,f,m,g,y,b,w){let R;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ct(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){RE(w,b);const W=[];for(const $ of w)W.push(xE(g,u,$));R={arrayValue:{values:W}}}else R=xE(g,u,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||RE(w,b),R=KR(m,f,w,b==="in"||b==="not-in");return Be.create(y,b,R)})(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}}function Bn(s,t,i){const r=t,l=Gh("where",s);return Kh._create(l,r,i)}class Cp extends xp{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new Cp(t,i)}_parse(t){const i=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return i.length===1?i[0]:vi.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return i.getFilters().length===0?t:((function(l,u){let f=l;const m=u.getFlattenedFilters();for(const g of m)j0(f,g),f=wm(f,g)})(t._query,i),new Cs(t.firestore,t.converter,wm(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ip extends Rp{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new Ip(t,i)}_apply(t){const i=(function(l,u,f){if(l.startAt!==null)throw new ct(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new ct(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wl(u,f)})(t._query,this._field,this._direction);return new Cs(t.firestore,t.converter,(function(l,u){const f=l.explicitOrderBy.concat([u]);return new Io(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,i))}}function Yh(s,t="asc"){const i=t,r=Gh("orderBy",s);return Ip._create(r,i)}class Dp extends Rp{constructor(t,i,r){super(),this.type=t,this._limit=i,this._limitType=r}static _create(t,i,r){return new Dp(t,i,r)}_apply(t){return new Cs(t.firestore,t.converter,fh(t._query,this._limit,this._limitType))}}function $R(s){return Dp._create("limit",s,"F")}function xE(s,t,i){if(typeof(i=Ie(i))=="string"){if(i==="")throw new ct(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VT(t)&&i.indexOf("/")!==-1)throw new ct(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const r=t.path.child(ce.fromString(i));if(!bt.isDocumentKey(r))throw new ct(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qv(s,new bt(r))}if(i instanceof Se)return qv(s,i._key);throw new ct(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ch(i)}.`)}function RE(s,t){if(!Array.isArray(s)||s.length===0)throw new ct(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function j0(s,t){const i=(function(l,u){for(const f of l)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(i!==null)throw i===t.op?new ct(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ct(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}class XR{convertValue(t,i="none"){switch(Sr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ce(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(br(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw Ct(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return xr(t,((l,u)=>{r[l]=this.convertValue(u,i)})),r}convertVectorValue(t){const i=t.fields?.[ch].arrayValue?.values?.map((r=>Ce(r.doubleValue)));return new Qi(i)}convertGeoPoint(t){return new Yi(Ce(t.latitude),Ce(t.longitude))}convertArray(t,i){return(t.values||[]).map((r=>this.convertValue(r,i)))}convertServerTimestamp(t,i){switch(i){case"previous":const r=Nh(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(Ql(t));default:return null}}convertTimestamp(t){const i=Tr(t);return new me(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=ce.fromString(t);Jt(i0(r),9688,{name:t});const l=new $l(r.get(1),r.get(3)),u=new bt(r.popFirst(5));return l.isEqual(i)||As(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),u}}function Np(s,t,i){let r;return r=s?i&&(i.merge||i.mergeFields)?s.toFirestore(t,i):s.toFirestore(t):t,r}class Ul{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class oa extends V0{constructor(t,i,r,l,u,f){super(t,i,r,l,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(Gh("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=oa._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}oa._jsonSchemaVersion="firestore/documentSnapshot/1.0",oa._jsonSchema={type:qe("string",oa._jsonSchemaVersion),bundleSource:qe("string","DocumentSnapshot"),bundleName:qe("string"),bundle:qe("string")};class th extends oa{data(t={}){return super.data(t)}}class la{constructor(t,i,r,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new Ul(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const t=[];return this.forEach((i=>t.push(i))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach((r=>{t.call(i,new th(this._firestore,this._userDataWriter,r.key,r,new Ul(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ct(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((m=>{const g=new th(l._firestore,l._userDataWriter,m.doc.key,m.doc,new Ul(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new th(l._firestore,l._userDataWriter,m.doc.key,m.doc,new Ul(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,b=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),b=f.indexOf(m.doc.key)),{type:WR(m.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=la._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Qm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(i.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function WR(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct(61501,{type:s})}}function eh(s){s=vn(s,Se);const t=vn(s.firestore,Zi);return LR(uu(t),s._key).then((i=>L0(t,s,i)))}la._jsonSchemaVersion="firestore/querySnapshot/1.0",la._jsonSchema={type:qe("string",la._jsonSchemaVersion),bundleSource:qe("string","QuerySnapshot"),bundleName:qe("string"),bundle:qe("string")};class kp extends XR{constructor(t){super(),this.firestore=t}convertBytes(t){return new si(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Se(this.firestore,null,i)}}function ra(s){s=vn(s,Cs);const t=vn(s.firestore,Zi),i=uu(t),r=new kp(t);return M0(s._query),PR(i,s._query).then((l=>new la(t,r,s,l)))}function cm(s,t,i){s=vn(s,Se);const r=vn(s.firestore,Zi),l=Np(s.converter,t,i);return du(r,[Tp(fu(r),"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,En.none())])}function _s(s,t,i,...r){s=vn(s,Se);const l=vn(s.firestore,Zi),u=fu(l);let f;return f=typeof(t=Ie(t))=="string"||t instanceof cu?D0(u,"updateDoc",s._key,t,i,r):I0(u,"updateDoc",s._key,t),du(l,[f.toMutation(s._key,En.exists(!0))])}function jm(s){return du(vn(s.firestore,Zi),[new Lh(s._key,En.none())])}function So(s,t){const i=vn(s.firestore,Zi),r=pe(s),l=Np(s.converter,t);return du(i,[Tp(fu(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,En.exists(!1))]).then((()=>r))}function Fi(s,...t){s=Ie(s);let i={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||wE(t[r])||(i=t[r++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(wE(t[r])){const g=t[r];t[r]=g.next?.bind(g),t[r+1]=g.error?.bind(g),t[r+2]=g.complete?.bind(g)}let u,f,m;if(s instanceof Se)f=vn(s.firestore,Zi),m=kh(s._key.path),u={next:g=>{t[r]&&t[r](L0(f,s,g))},error:t[r+1],complete:t[r+2]};else{const g=vn(s,Cs);f=vn(g.firestore,Zi),m=g._query;const y=new kp(f);u={next:b=>{t[r]&&t[r](new la(f,y,g,b))},error:t[r+1],complete:t[r+2]},M0(s._query)}return(function(y,b,w,R){const P=new Ep(R),W=new yp(b,P,w);return y.asyncQueue.enqueueAndForget((async()=>mp(await _h(y),W))),()=>{P.Nu(),y.asyncQueue.enqueueAndForget((async()=>pp(await _h(y),W)))}})(uu(f),m,l,u)}function du(s,t){return(function(r,l){const u=new Ts;return r.asyncQueue.enqueueAndForget((async()=>wR(await jR(r),l,u))),u.promise})(uu(s),t)}function L0(s,t,i){const r=i.docs.get(t._key),l=new kp(s);return new oa(s,l,t._key,r,new Ul(i.hasPendingWrites,i.fromCache),t.converter)}class ZR{constructor(t,i){this._firestore=t,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=fu(t)}set(t,i,r){this._verifyNotCommitted();const l=hm(t,this._firestore),u=Np(l.converter,i,r),f=Tp(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,r);return this._mutations.push(f.toMutation(l._key,En.none())),this}update(t,i,r,...l){this._verifyNotCommitted();const u=hm(t,this._firestore);let f;return f=typeof(i=Ie(i))=="string"||i instanceof cu?D0(this._dataReader,"WriteBatch.update",u._key,i,r,l):I0(this._dataReader,"WriteBatch.update",u._key,i),this._mutations.push(f.toMutation(u._key,En.exists(!0))),this}delete(t){this._verifyNotCommitted();const i=hm(t,this._firestore);return this._mutations=this._mutations.concat(new Lh(i._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ct(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hm(s,t){if((s=Ie(s)).firestore!==t)throw new ct(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function Lm(){return new bp("serverTimestamp")}function JR(...s){return new Sp("arrayUnion",s)}function Pm(s){return uu(s=vn(s,Zi)),new ZR(s,(t=>du(s,t)))}(function(t,i=!0){(function(l){xo=l})(wo),po(new ua("firestore",((r,{instanceIdentifier:l,options:u})=>{const f=r.getProvider("app").getImmediate(),m=new Zi(new K1(r.getProvider("auth-internal")),new $1(f,r.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ct(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $l(y.options.projectId,b)})(f,l),f);return u={useFetchStreams:i,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),gr(Iv,Dv,t),gr(Iv,Dv,"esm2020")})();function P0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tC=P0,U0=new nu("auth","Firebase",P0());const Eh=new Fm("@firebase/auth");function eC(s,...t){Eh.logLevel<=Ht.WARN&&Eh.warn(`Auth (${wo}): ${s}`,...t)}function nh(s,...t){Eh.logLevel<=Ht.ERROR&&Eh.error(`Auth (${wo}): ${s}`,...t)}function Ei(s,...t){throw Op(s,...t)}function $i(s,...t){return Op(s,...t)}function z0(s,t,i){const r={...tC(),[t]:i};return new nu("auth","Firebase",r).create(t,{appName:s.name})}function bs(s){return z0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Op(s,...t){if(typeof s!="string"){const i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return U0.create(s,...t)}function Rt(s,t,...i){if(!s)throw Op(t,...i)}function vs(s){const t="INTERNAL ASSERTION FAILED: "+s;throw nh(t),new Error(t)}function xs(s,t){s||vs(t)}function Um(){return typeof self<"u"&&self.location?.href||""}function nC(){return CE()==="http:"||CE()==="https:"}function CE(){return typeof self<"u"&&self.location?.protocol||null}function iC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nC()||TA()||"connection"in navigator)?navigator.onLine:!0}function sC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class mu{constructor(t,i){this.shortDelay=t,this.longDelay=i,xs(i>t,"Short delay should be less than long delay!"),this.isMobile=_A()||bA()}get(){return iC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vp(s,t){xs(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}class B0{static initialize(t,i,r){this.fetchImpl=t,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const aC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oC=new mu(3e4,6e4);function Cr(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function Ir(s,t,i,r,l={}){return q0(s,l,async()=>{let u={},f={};r&&(t==="GET"?f=r:u={body:JSON.stringify(r)});const m=iu({key:s.config.apiKey,...f}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:t,headers:g,...u};return EA()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Ao(s.emulatorConfig.host)&&(y.credentials="include"),B0.fetch()(await H0(s,s.config.apiHost,i,m),y)})}async function q0(s,t,i){s._canInitEmulator=!1;const r={...rC,...t};try{const l=new uC(s),u=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Qc(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qc(s,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw Qc(s,"email-already-in-use",f);if(g==="USER_DISABLED")throw Qc(s,"user-disabled",f);const b=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw z0(s,b,y);Ei(s,b)}}catch(l){if(l instanceof Rs)throw l;Ei(s,"network-request-failed",{message:String(l)})}}async function pu(s,t,i,r,l={}){const u=await Ir(s,t,i,r,l);return"mfaPendingCredential"in u&&Ei(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function H0(s,t,i,r){const l=`${t}${i}?${r}`,u=s,f=u.config.emulator?Vp(s.config,l):`${s.config.apiScheme}://${l}`;return aC.includes(i)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function lC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r($i(this.auth,"network-request-failed")),oC.get())})}}function Qc(s,t,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const l=$i(s,t,r);return l.customData._tokenResponse=i,l}function IE(s){return s!==void 0&&s.enterprise!==void 0}class cC{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return lC(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hC(s,t){return Ir(s,"GET","/v2/recaptchaConfig",Cr(s,t))}async function fC(s,t){return Ir(s,"POST","/v1/accounts:delete",t)}async function Th(s,t){return Ir(s,"POST","/v1/accounts:lookup",t)}function Gl(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function dC(s,t=!1){const i=Ie(s),r=await i.getIdToken(t),l=Mp(r);Rt(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u?.sign_in_provider;return{claims:l,token:r,authTime:Gl(fm(l.auth_time)),issuedAtTime:Gl(fm(l.iat)),expirationTime:Gl(fm(l.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function fm(s){return Number(s)*1e3}function Mp(s){const[t,i,r]=s.split(".");if(t===void 0||i===void 0||r===void 0)return nh("JWT malformed, contained fewer than 3 sections"),null;try{const l=XE(i);return l?JSON.parse(l):(nh("Failed to decode base64 JWT payload"),null)}catch(l){return nh("Caught error parsing JWT payload as JSON",l?.toString()),null}}function DE(s){const t=Mp(s);return Rt(t,"internal-error"),Rt(typeof t.exp<"u","internal-error"),Rt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function tu(s,t,i=!1){if(i)return t;try{return await t}catch(r){throw r instanceof Rs&&mC(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function mC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class pC{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class zm{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gl(this.lastLoginAt),this.creationTime=Gl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function bh(s){const t=s.auth,i=await s.getIdToken(),r=await tu(s,Th(t,{idToken:i}));Rt(r?.users.length,t,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?F0(l.providerUserInfo):[],f=yC(s.providerData,u),m=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!f?.length,y=m?g:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new zm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function gC(s){const t=Ie(s);await bh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function yC(s,t){return[...s.filter(r=>!t.some(l=>l.providerId===r.providerId)),...t]}function F0(s){return s.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}async function _C(s,t){const i=await q0(s,{},async()=>{const r=iu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,f=await H0(s,l,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&Ao(s.emulatorConfig.host)&&(g.credentials="include"),B0.fetch()(f,g)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function vC(s,t){return Ir(s,"POST","/v2/accounts:revokeToken",Cr(s,t))}class ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Rt(t.idToken,"internal-error"),Rt(typeof t.idToken<"u","internal-error"),Rt(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):DE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){Rt(t.length!==0,"internal-error");const i=DE(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Rt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:r,refreshToken:l,expiresIn:u}=await _C(t,i);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(t,i,r){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,i){const{refreshToken:r,accessToken:l,expirationTime:u}=i,f=new ho;return r&&(Rt(typeof r=="string","internal-error",{appName:t}),f.refreshToken=r),l&&(Rt(typeof l=="string","internal-error",{appName:t}),f.accessToken=l),u&&(Rt(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ho,this.toJSON())}_performRefresh(){return vs("not implemented")}}function lr(s,t){Rt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class _i{constructor({uid:t,auth:i,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new pC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new zm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await tu(this,this.stsTokenManager.getToken(this.auth,t));return Rt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return dC(this,t)}reload(){return gC(this)}_assign(t){this!==t&&(Rt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new _i({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){Rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),i&&await bh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(bs(this.auth));const t=await this.getIdToken();return await tu(this,fC(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const r=i.displayName??void 0,l=i.email??void 0,u=i.phoneNumber??void 0,f=i.photoURL??void 0,m=i.tenantId??void 0,g=i._redirectEventId??void 0,y=i.createdAt??void 0,b=i.lastLoginAt??void 0,{uid:w,emailVerified:R,isAnonymous:P,providerData:W,stsTokenManager:$}=i;Rt(w&&$,t,"internal-error");const Y=ho.fromJSON(this.name,$);Rt(typeof w=="string",t,"internal-error"),lr(r,t.name),lr(l,t.name),Rt(typeof R=="boolean",t,"internal-error"),Rt(typeof P=="boolean",t,"internal-error"),lr(u,t.name),lr(f,t.name),lr(m,t.name),lr(g,t.name),lr(y,t.name),lr(b,t.name);const rt=new _i({uid:w,auth:t,email:l,emailVerified:R,displayName:r,isAnonymous:P,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:Y,createdAt:y,lastLoginAt:b});return W&&Array.isArray(W)&&(rt.providerData=W.map(ft=>({...ft}))),g&&(rt._redirectEventId=g),rt}static async _fromIdTokenResponse(t,i,r=!1){const l=new ho;l.updateFromServerResponse(i);const u=new _i({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:r});return await bh(u),u}static async _fromGetAccountInfoResponse(t,i,r){const l=i.users[0];Rt(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?F0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!u?.length,m=new ho;m.updateFromIdToken(r);const g=new _i({uid:l.localId,auth:t,stsTokenManager:m,isAnonymous:f}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new zm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const NE=new Map;function Es(s){xs(s instanceof Function,"Expected a class definition");let t=NE.get(s);return t?(xs(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,NE.set(s,t),t)}class G0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}G0.type="NONE";const kE=G0;function ih(s,t,i){return`firebase:${s}:${t}:${i}`}class fo{constructor(t,i,r){this.persistence=t,this.auth=i,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=ih(this.userKey,l.apiKey,u),this.fullPersistenceKey=ih("persistence",l.apiKey,u),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await Th(this.auth,{idToken:t}).catch(()=>{});return i?_i._fromGetAccountInfoResponse(this.auth,i,t):null}return _i._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,r="authUser"){if(!i.length)return new fo(Es(kE),t,r);const l=(await Promise.all(i.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||Es(kE);const f=ih(r,t.config.apiKey,t.name);let m=null;for(const y of i)try{const b=await y._get(f);if(b){let w;if(typeof b=="string"){const R=await Th(t,{idToken:b}).catch(()=>{});if(!R)break;w=await _i._fromGetAccountInfoResponse(t,R,b)}else w=_i._fromJSON(t,b);y!==u&&(m=w),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new fo(u,t,r):(u=g[0],m&&await u._set(f,m.toJSON()),await Promise.all(i.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new fo(u,t,r))}}function OE(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if($0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(K0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(W0(t))return"Blackberry";if(Z0(t))return"Webos";if(Y0(t))return"Safari";if((t.includes("chrome/")||Q0(t))&&!t.includes("edge/"))return"Chrome";if(X0(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function K0(s=pn()){return/firefox\//i.test(s)}function Y0(s=pn()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Q0(s=pn()){return/crios\//i.test(s)}function $0(s=pn()){return/iemobile/i.test(s)}function X0(s=pn()){return/android/i.test(s)}function W0(s=pn()){return/blackberry/i.test(s)}function Z0(s=pn()){return/webos/i.test(s)}function jp(s=pn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function EC(s=pn()){return jp(s)&&!!window.navigator?.standalone}function TC(){return SA()&&document.documentMode===10}function J0(s=pn()){return jp(s)||X0(s)||Z0(s)||W0(s)||/windows phone/i.test(s)||$0(s)}function tb(s,t=[]){let i;switch(s){case"Browser":i=OE(pn());break;case"Worker":i=`${OE(pn())}-${s}`;break;default:i=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${wo}/${r}`}class bC{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const r=u=>new Promise((f,m)=>{try{const g=t(u);f(g)}catch(g){m(g)}});r.onAbort=i,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const r of this.queue)await r(t),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function SC(s,t={}){return Ir(s,"GET","/v2/passwordPolicy",Cr(s,t))}const AC=6;class wC{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??AC,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=t.length>=r),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let l=0;l<t.length;l++)r=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,i,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class xC{constructor(t,i,r,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new bC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=U0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=Es(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fo.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await Th(this,{idToken:t}),r=await _i._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(ii(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===f)&&m?.user&&(r=m.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await bh(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=sC()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ii(this.app))return Promise.reject(bs(this));const i=t?Ie(t):null;return i&&Rt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&Rt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(bs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ii(this.app)?Promise.reject(bs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await SC(this),i=new wC(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new nu("auth","Firebase",t())}onAuthStateChanged(t,i,r){return this.registerStateListener(this.authStateSubscription,t,i,r)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,r){return this.registerStateListener(this.idTokenSubscription,t,i,r)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await vC(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const r=await this.getOrInitRedirectPersistenceManager(i);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&Es(t)||this._popupRedirectResolver;Rt(i,this,"argument-error"),this.redirectPersistenceManager=await fo.create(this,[Es(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,r,l){if(this._deleted)return()=>{};const u=typeof i=="function"?i:i.next.bind(i);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rt(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof i=="function"){const g=t.addObserver(i,r,l);return()=>{f=!0,g()}}else{const g=t.addObserver(i);return()=>{f=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=tb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if(ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&eC(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ga(s){return Ie(s)}class VE{constructor(t){this.auth=t,this.observer=null,this.addObserver=NA(i=>this.observer=i)}get next(){return Rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RC(s){Qh=s}function eb(s){return Qh.loadJS(s)}function CC(){return Qh.recaptchaEnterpriseScript}function IC(){return Qh.gapiScript}function DC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class NC{constructor(){this.enterprise=new kC}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class kC{ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const OC="recaptcha-enterprise",nb="NO_RECAPTCHA";class VC{constructor(t){this.type=OC,this.auth=ga(t)}async verify(t="verify",i=!1){async function r(u){if(!i){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{hC(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new cC(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,f(y.siteKey)}}).catch(g=>{m(g)})})}function l(u,f,m){const g=window.grecaptcha;IE(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:t}).then(y=>{f(y)}).catch(()=>{f(nb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NC().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(m=>{if(!i&&IE(window.grecaptcha))l(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=CC();g.length!==0&&(g+=m),eb(g).then(()=>{l(m,u,f)}).catch(y=>{f(y)})}}).catch(m=>{f(m)})})}}async function ME(s,t,i,r=!1,l=!1){const u=new VC(s);let f;if(l)f=nb;else try{f=await u.verify(i)}catch{f=await u.verify(i,!0)}const m={...t};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Bm(s,t,i,r,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await ME(s,t,i,i==="getOobCode");return r(s,u)}else return r(s,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await ME(s,t,i,i==="getOobCode");return r(s,f)}else return Promise.reject(u)})}function MC(s,t){const i=Km(s,"auth");if(i.isInitialized()){const l=i.getImmediate(),u=i.getOptions();if(vr(u,t??{}))return l;Ei(l,"already-initialized")}return i.initialize({options:t})}function jC(s,t){const i=t?.persistence||[],r=(Array.isArray(i)?i:[i]).map(Es);t?.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t?.popupRedirectResolver)}function LC(s,t,i){const r=ga(s);Rt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const l=!1,u=ib(t),{host:f,port:m}=PC(t),g=m===null?"":`:${m}`,y={url:`${u}//${f}${g}/`},b=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){Rt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Rt(vr(y,r.config.emulator)&&vr(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,Ao(f)?(tT(`${u}//${f}${g}`),eT("Auth",!0)):UC()}function ib(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function PC(s){const t=ib(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:jE(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:jE(f)}}}function jE(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function UC(){function s(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Lp{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return vs("not implemented")}_getIdTokenResponse(t){return vs("not implemented")}_linkToIdToken(t,i){return vs("not implemented")}_getReauthenticationResolver(t){return vs("not implemented")}}async function zC(s,t){return Ir(s,"POST","/v1/accounts:signUp",t)}async function BC(s,t){return pu(s,"POST","/v1/accounts:signInWithPassword",Cr(s,t))}async function qC(s,t){return pu(s,"POST","/v1/accounts:signInWithEmailLink",Cr(s,t))}async function HC(s,t){return pu(s,"POST","/v1/accounts:signInWithEmailLink",Cr(s,t))}class eu extends Lp{constructor(t,i,r,l=null){super("password",r),this._email=t,this._password=i,this._tenantId=l}static _fromEmailAndPassword(t,i){return new eu(t,i,"password")}static _fromEmailAndCode(t,i,r=null){return new eu(t,i,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(t,i,"signInWithPassword",BC);case"emailLink":return qC(t,{email:this._email,oobCode:this._password});default:Ei(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const r={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(t,r,"signUpPassword",zC);case"emailLink":return HC(t,{idToken:i,email:this._email,oobCode:this._password});default:Ei(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function mo(s,t){return pu(s,"POST","/v1/accounts:signInWithIdp",Cr(s,t))}const FC="http://localhost";class fa extends Lp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new fa(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Ei("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:l,...u}=i;if(!r||!l)return null;const f=new fa(r,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const i=this.buildRequest();return mo(t,i)}_linkToIdToken(t,i){const r=this.buildRequest();return r.idToken=i,mo(t,r)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,mo(t,i)}buildRequest(){const t={requestUri:FC,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=iu(i)}return t}}function GC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KC(s){const t=Vl(Ml(s)).link,i=t?Vl(Ml(t)).deep_link_id:null,r=Vl(Ml(s)).deep_link_id;return(r?Vl(Ml(r)).link:null)||r||i||t||s}class Pp{constructor(t){const i=Vl(Ml(t)),r=i.apiKey??null,l=i.oobCode??null,u=GC(i.mode??null);Rt(r&&l&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=l,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(t){const i=KC(t);try{return new Pp(i)}catch{return null}}}class ko{constructor(){this.providerId=ko.PROVIDER_ID}static credential(t,i){return eu._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=Pp.parseLink(i);return Rt(r,"argument-error"),eu._fromEmailAndCode(t,r.code,r.tenantId)}}ko.PROVIDER_ID="password";ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class sb{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class gu extends sb{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class ur extends gu{constructor(){super("facebook.com")}static credential(t){return fa._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ur.credentialFromTaggedObject(t)}static credentialFromError(t){return ur.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ur.credential(t.oauthAccessToken)}catch{return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";ur.PROVIDER_ID="facebook.com";class cr extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return fa._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return cr.credentialFromTaggedObject(t)}static credentialFromError(t){return cr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return cr.credential(i,r)}catch{return null}}}cr.GOOGLE_SIGN_IN_METHOD="google.com";cr.PROVIDER_ID="google.com";class hr extends gu{constructor(){super("github.com")}static credential(t){return fa._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return hr.credentialFromTaggedObject(t)}static credentialFromError(t){return hr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return hr.credential(t.oauthAccessToken)}catch{return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com";hr.PROVIDER_ID="github.com";class fr extends gu{constructor(){super("twitter.com")}static credential(t,i){return fa._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return fr.credentialFromTaggedObject(t)}static credentialFromError(t){return fr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=t;if(!i||!r)return null;try{return fr.credential(i,r)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";async function YC(s,t){return pu(s,"POST","/v1/accounts:signUp",Cr(s,t))}class da{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,r,l=!1){const u=await _i._fromIdTokenResponse(t,r,l),f=LE(r);return new da({user:u,providerId:f,_tokenResponse:r,operationType:i})}static async _forOperation(t,i,r){await t._updateTokensIfNecessary(r,!0);const l=LE(r);return new da({user:t,providerId:l,_tokenResponse:r,operationType:i})}}function LE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Sh extends Rs{constructor(t,i,r,l){super(i.code,i.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Sh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,i,r,l){return new Sh(t,i,r,l)}}function rb(s,t,i,r){return(t==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Sh._fromErrorAndOperation(s,u,t,r):u})}async function QC(s,t,i=!1){const r=await tu(s,t._linkToIdToken(s.auth,await s.getIdToken()),i);return da._forOperation(s,"link",r)}async function $C(s,t,i=!1){const{auth:r}=s;if(ii(r.app))return Promise.reject(bs(r));const l="reauthenticate";try{const u=await tu(s,rb(r,l,t,s),i);Rt(u.idToken,r,"internal-error");const f=Mp(u.idToken);Rt(f,r,"internal-error");const{sub:m}=f;return Rt(s.uid===m,r,"user-mismatch"),da._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Ei(r,"user-mismatch"),u}}async function ab(s,t,i=!1){if(ii(s.app))return Promise.reject(bs(s));const r="signIn",l=await rb(s,r,t),u=await da._fromIdTokenResponse(s,r,l);return i||await s._updateCurrentUser(u.user),u}async function XC(s,t){return ab(ga(s),t)}async function ob(s){const t=ga(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function WC(s,t,i){if(ii(s.app))return Promise.reject(bs(s));const r=ga(s),f=await Bm(r,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&ob(s),g}),m=await da._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(m.user),m}function ZC(s,t,i){return ii(s.app)?Promise.reject(bs(s)):XC(Ie(s),ko.credential(t,i)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ob(s),r})}function JC(s,t,i,r){return Ie(s).onIdTokenChanged(t,i,r)}function tI(s,t,i){return Ie(s).beforeAuthStateChanged(t,i)}function eI(s,t,i,r){return Ie(s).onAuthStateChanged(t,i,r)}function nI(s){return Ie(s).signOut()}const Ah="__sak";class lb{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(Ah,"1"),this.storage.removeItem(Ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const iI=1e3,sI=10;class ub extends lb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),l=this.localCache[i];r!==l&&t(i,l,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const r=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!i&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);TC()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,sI):l()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},iI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}ub.type="LOCAL";const rI=ub;class cb extends lb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}cb.type="SESSION";const hb=cb;function aI(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}class $h{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const r=new $h(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:r,eventType:l,data:u}=i.data,f=this.handlersMap[l];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const m=Array.from(f).map(async y=>y(i.origin,u)),g=await aI(m);i.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:g})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];function Up(s="",t=10){let i="";for(let r=0;r<t;r++)i+=Math.floor(Math.random()*10);return s+i}class oI{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((m,g)=>{const y=Up("",20);l.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(w){const R=w;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(R.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:y,data:i},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Xi(){return window}function lI(s){Xi().location.href=s}function fb(){return typeof Xi().WorkerGlobalScope<"u"&&typeof Xi().importScripts=="function"}async function uI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cI(){return navigator?.serviceWorker?.controller||null}function hI(){return fb()?self:null}const db="firebaseLocalStorageDb",fI=1,wh="firebaseLocalStorage",mb="fbase_key";class yu{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Xh(s,t){return s.transaction([wh],t?"readwrite":"readonly").objectStore(wh)}function dI(){const s=indexedDB.deleteDatabase(db);return new yu(s).toPromise()}function qm(){const s=indexedDB.open(db,fI);return new Promise((t,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(wh,{keyPath:mb})}catch(l){i(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(wh)?t(r):(r.close(),await dI(),t(await qm()))})})}async function PE(s,t,i){const r=Xh(s,!0).put({[mb]:t,value:i});return new yu(r).toPromise()}async function mI(s,t){const i=Xh(s,!1).get(t),r=await new yu(i).toPromise();return r===void 0?null:r.value}function UE(s,t){const i=Xh(s,!0).delete(t);return new yu(i).toPromise()}const pI=800,gI=3;class pb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qm(),this.db)}async _withRetries(t){let i=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(i++>gI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance(hI()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await uI(),!this.activeServiceWorker)return;this.sender=new oI(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||cI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await qm();return await PE(t,Ah,"1"),await UE(t,Ah),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>PE(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(r=>mI(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>UE(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const u=Xh(l,!1).getAll();return new yu(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(t.length!==0)for(const{fbase_key:l,value:u}of t)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pb.type="LOCAL";const yI=pb;new mu(3e4,6e4);function _I(s,t){return t?Es(t):(Rt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class zp extends Lp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return mo(t,this._buildIdpRequest())}_linkToIdToken(t,i){return mo(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return mo(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function vI(s){return ab(s.auth,new zp(s),s.bypassAuthState)}function EI(s){const{auth:t,user:i}=s;return Rt(i,t,"internal-error"),$C(i,new zp(s),s.bypassAuthState)}async function TI(s){const{auth:t,user:i}=s;return Rt(i,t,"internal-error"),QC(i,new zp(s),s.bypassAuthState)}class gb{constructor(t,i,r,l,u=!1){this.auth=t,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:r,postBody:l,tenantId:u,error:f,type:m}=t;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:i,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return vI;case"linkViaPopup":case"linkViaRedirect":return TI;case"reauthViaPopup":case"reauthViaRedirect":return EI;default:Ei(this.auth,"internal-error")}}resolve(t){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bI=new mu(2e3,1e4);class uo extends gb{constructor(t,i,r,l,u){super(t,i,l,u),this.provider=r,this.authWindow=null,this.pollId=null,uo.currentPopupAction&&uo.currentPopupAction.cancel(),uo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Rt(t,this.auth,"internal-error"),t}async onExecution(){xs(this.filter.length===1,"Popup operations only handle one event");const t=Up();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject($i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject($i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,bI.get())};t()}}uo.currentPopupAction=null;const SI="pendingRedirect",sh=new Map;class AI extends gb{constructor(t,i,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let t=sh.get(this.auth._key());if(!t){try{const r=await wI(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(i){t=()=>Promise.reject(i)}sh.set(this.auth._key(),t)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wI(s,t){const i=CI(t),r=RI(s);if(!await r._isAvailable())return!1;const l=await r._get(i)==="true";return await r._remove(i),l}function xI(s,t){sh.set(s._key(),t)}function RI(s){return Es(s._redirectPersistence)}function CI(s){return ih(SI,s.config.apiKey,s.name)}async function II(s,t,i=!1){if(ii(s.app))return Promise.reject(bs(s));const r=ga(s),l=_I(r,t),f=await new AI(r,l,i).execute();return f&&!i&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,t)),f}const DI=600*1e3;class NI{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(i=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!kI(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!yb(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";i.onError($i(this.auth,r))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const r=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=DI&&this.cachedEventUids.clear(),this.cachedEventUids.has(zE(t))}saveEventToCache(t){this.cachedEventUids.add(zE(t)),this.lastProcessedEventTime=Date.now()}}function zE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function yb({type:s,error:t}){return s==="unknown"&&t?.code==="auth/no-auth-event"}function kI(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yb(s);default:return!1}}async function OI(s,t={}){return Ir(s,"GET","/v1/projects",t)}const VI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MI=/^https?/;async function jI(s){if(s.config.emulator)return;const{authorizedDomains:t}=await OI(s);for(const i of t)try{if(LI(i))return}catch{}Ei(s,"unauthorized-domain")}function LI(s){const t=Um(),{protocol:i,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&f.hostname===r}if(!MI.test(i))return!1;if(VI.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}const PI=new mu(3e4,6e4);function BE(){const s=Xi().___jsl;if(s?.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function UI(s){return new Promise((t,i)=>{function r(){BE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{BE(),i($i(s,"network-request-failed"))},timeout:PI.get()})}if(Xi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Xi().gapi?.load)r();else{const l=DC("iframefcb");return Xi()[l]=()=>{gapi.load?r():i($i(s,"network-request-failed"))},eb(`${IC()}?onload=${l}`).catch(u=>i(u))}}).catch(t=>{throw rh=null,t})}let rh=null;function zI(s){return rh=rh||UI(s),rh}const BI=new mu(5e3,15e3),qI="__/auth/iframe",HI="emulator/auth/iframe",FI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KI(s){const t=s.config;Rt(t.authDomain,s,"auth-domain-config-required");const i=t.emulator?Vp(t,HI):`https://${s.config.authDomain}/${qI}`,r={apiKey:t.apiKey,appName:s.name,v:wo},l=GI.get(s.config.apiHost);l&&(r.eid=l);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${i}?${iu(r).slice(1)}`}async function YI(s){const t=await zI(s),i=Xi().gapi;return Rt(i,s,"internal-error"),t.open({where:document.body,url:KI(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FI,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const f=$i(s,"network-request-failed"),m=Xi().setTimeout(()=>{u(f)},BI.get());function g(){Xi().clearTimeout(m),l(r)}r.ping(g).then(g,()=>{u(f)})}))}const QI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$I=500,XI=600,WI="_blank",ZI="http://localhost";class qE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JI(s,t,i,r=$I,l=XI){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...QI,width:r.toString(),height:l.toString(),top:u,left:f},y=pn().toLowerCase();i&&(m=Q0(y)?WI:i),K0(y)&&(t=t||ZI,g.scrollbars="yes");const b=Object.entries(g).reduce((R,[P,W])=>`${R}${P}=${W},`,"");if(EC(y)&&m!=="_self")return t2(t||"",m),new qE(null);const w=window.open(t||"",m,b);Rt(w,s,"popup-blocked");try{w.focus()}catch{}return new qE(w)}function t2(s,t){const i=document.createElement("a");i.href=s,i.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}const e2="__/auth/handler",n2="emulator/auth/handler",i2=encodeURIComponent("fac");async function HE(s,t,i,r,l,u){Rt(s.config.authDomain,s,"auth-domain-config-required"),Rt(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:wo,eventId:l};if(t instanceof sb){t.setDefaultLanguage(s.languageCode),f.providerId=t.providerId||"",DA(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[b,w]of Object.entries({}))f[b]=w}if(t instanceof gu){const b=t.getScopes().filter(w=>w!=="");b.length>0&&(f.scopes=b.join(","))}s.tenantId&&(f.tid=s.tenantId);const m=f;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const g=await s._getAppCheckToken(),y=g?`#${i2}=${encodeURIComponent(g)}`:"";return`${s2(s)}?${iu(m).slice(1)}${y}`}function s2({config:s}){return s.emulator?Vp(s,n2):`https://${s.authDomain}/${e2}`}const dm="webStorageSupport";class r2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hb,this._completeRedirectFn=II,this._overrideRedirectResult=xI}async _openPopup(t,i,r,l){xs(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await HE(t,i,r,Um(),l);return JI(t,u,Up())}async _openRedirect(t,i,r,l){await this._originValidation(t);const u=await HE(t,i,r,Um(),l);return lI(u),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:u}=this.eventManagers[i];return l?Promise.resolve(l):(xs(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(t){const i=await YI(t),r=new NI(t);return i.register("authEvent",l=>(Rt(l?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=i,r}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(dm,{type:dm},l=>{const u=l?.[0]?.[dm];u!==void 0&&i(!!u),Ei(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=jI(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return J0()||Y0()||jp()}}const a2=r2;var FE="@firebase/auth",GE="1.12.0";class o2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function l2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function u2(s){po(new ua("auth",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=r.options;Rt(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:f,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tb(s)},y=new xC(r,l,u,g);return jC(y,i),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,r)=>{t.getProvider("auth-internal").initialize()})),po(new ua("auth-internal",t=>{const i=ga(t.getProvider("auth").getImmediate());return(r=>new o2(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(FE,GE,l2(s)),gr(FE,GE,"esm2020")}const c2=300,h2=JE("authIdTokenMaxAge")||c2;let KE=null;const f2=s=>async t=>{const i=t&&await t.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>h2)return;const l=i?.token;KE!==l&&(KE=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function d2(s=rT()){const t=Km(s,"auth");if(t.isInitialized())return t.getImmediate();const i=MC(s,{popupRedirectResolver:a2,persistence:[yI,rI,hb]}),r=JE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=f2(u.toString());tI(i,f,()=>f(i.currentUser)),JC(i,m=>f(m))}}const l=WE("auth");return l&&LC(i,`http://${l}`),i}function m2(){return document.getElementsByTagName("head")?.[0]??document}RC({loadJS(s){return new Promise((t,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=l=>{const u=$i("internal-error");u.customData=l,i(u)},r.type="text/javascript",r.charset="UTF-8",m2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});u2("Browser");const p2={apiKey:"AIzaSyDd7oNAtznb5DT6R6yAP7Y1yMeVoY4fKhU",authDomain:"notar-app.firebaseapp.com",projectId:"notar-app",storageBucket:"notar-app.firebasestorage.app",messagingSenderId:"620852234294",appId:"1:620852234294:web:e32df64dccc8a2b8ed3097"},_b=sT(p2),It=zR(_b),xh=d2(_b),g2=({onBack:s,showNotification:t})=>{const[i,r]=ht.useState(new Date().toISOString().slice(0,7)),[l,u]=ht.useState([]),[f,m]=ht.useState(!1),[g,y]=ht.useState([]),[b,w]=ht.useState({}),[R,P]=ht.useState(!1),[W,$]=ht.useState([]),Y=(L,tt)=>{const st=new Date(L);return st.setDate(st.getDate()+parseInt(tt)),st.toISOString().slice(0,10)},[rt,ft]=ht.useState({customer_id:"",customer_name:"",address:"",type:"b2c",payment_term:14,date:new Date().toISOString().slice(0,10),due_date:Y(new Date().toISOString().slice(0,10),14),rows:[{date:new Date().toISOString().slice(0,10),text:"",price_work:"",price_material:""}]});ht.useEffect(()=>{(async()=>{const st=await eh(pe(It,"settings","company_profile"));st.exists()&&(y(st.data().tasks||[]),w(st.data()))})(),(async()=>{const st=yi(ve(It,"customers"),Yh("name")),D=await ra(st);$(D.docs.map(U=>({id:U.id,...U.data()})))})()},[]);const vt=L=>{const tt=L.target.value,st=W.find(D=>D.id===tt);ft(st?D=>({...D,customer_id:st.id,customer_name:st.name,address:`${st.street||""}, ${st.zip||""} ${st.city||""}`,type:st.type||"b2c"}):D=>({...D,customer_id:""}))},Mt=L=>{ft(tt=>({...tt,date:L,due_date:Y(L,tt.payment_term)}))},at=L=>{ft(tt=>({...tt,payment_term:L,due_date:Y(tt.date,L)}))},St=()=>{ft({...rt,rows:[...rt.rows,{date:rt.date,text:"",price_work:"",price_material:""}]})},N=(L,tt,st)=>{const D=[...rt.rows];D[L][tt]=st,ft({...rt,rows:D})},S=L=>{const tt=rt.rows.filter((st,D)=>D!==L);ft({...rt,rows:tt})},I=L=>{const tt=parseFloat(L.price_work)||0,st=parseFloat(L.price_material)||0;return tt+st},V=async()=>{if(!rt.customer_name||rt.rows.length===0)return t("Tyt asiakas ja vhintn yksi rivi.","error");m(!0);try{const L=pe(It,"settings","company_profile"),tt=await eh(L);let st=1e3;tt.exists()&&tt.data().invoice_start_number&&(st=parseInt(tt.data().invoice_start_number));const U=1+(b.alv_pros?parseFloat(b.alv_pros):25.5)/100;let X=0;const ot=rt.rows.map(pt=>{const At=parseFloat(pt.price_work)||0,Yt=parseFloat(pt.price_material)||0,le=(At+Yt)*U;X+=le;let Je=[];return At>0&&Je.push(`Ty: ${At.toFixed(2)}`),Yt>0&&Je.push(`Tarvike: ${Yt.toFixed(2)}`),{type:"row",text:`${new Date(pt.date).getDate()+"."+(new Date(pt.date).getMonth()+1)+"."} ${pt.text}`,total:le,details:Je.join(", ")+" (alv0)",raw_work_net:At,raw_material_net:Yt,raw_date:pt.date}}),dt=st.toString();await So(ve(It,"invoices"),{invoice_number:dt,title:rt.customer_name,customer_name:rt.customer_name,customer_type:rt.type,billing_address:rt.address,month:i,date:rt.date,due_date:rt.due_date,rows:ot,total_sum:X,status:"open",created_at:Lm(),is_quick_invoice:!0}),await _s(L,{invoice_start_number:(st+1).toString()}),t("Pikalasku luotu ja tallennettu arkistoon! ","success"),P(!1),ft({customer_id:"",customer_name:"",address:"",type:"b2c",payment_term:14,date:new Date().toISOString().slice(0,10),due_date:Y(new Date().toISOString().slice(0,10),14),rows:[{date:new Date().toISOString().slice(0,10),text:"",price_work:"",price_material:""}]})}catch(L){console.error(L),t("Virhe: "+L.message,"error")}finally{m(!1)}},k=L=>L.task_type==="fixed_monthly"||L.origin==="contract_generated"?"Sopimukset":["extra","material"].includes(L.task_type)?"Erillistyt":"Kiinteisthuolto",C=L=>{const tt=String(L).replace(/\D/g,""),st=[7,3,1];let D=0;for(let X=0;X<tt.length;X++)D+=parseInt(tt.charAt(tt.length-1-X))*st[X%3];const U=(10-D%10)%10;return tt+U},x=(L,tt,st,D)=>{if(!L||!tt||!st||!D)return"";const U=L.replace(/[^0-9]/g,"");if(U.length<16)return"";const X=U.slice(0,16),ot=parseFloat(tt).toFixed(2);let[dt,pt]=ot.split(".");dt=dt.padStart(6,"0").slice(-6);const At=dt+pt,Yt=st.replace(/[^0-9]/g,"").padStart(20,"0"),Lt=new Date(D),le=Lt.getFullYear().toString().slice(-2),Je=(Lt.getMonth()+1).toString().padStart(2,"0"),Hn=Lt.getDate().toString().padStart(2,"0"),Tn=le+Je+Hn;return`4${X}${At}000${Yt}${Tn}`},Et=async()=>{if(window.confirm(`Haluatko varmasti poistaa merkinnt, ett ${i} kk-maksut on laskutettu?`)){m(!0);try{const[L,tt]=i.split("-"),st=`${i}-01`,D=new Date(L,tt,0).getDate(),U=`${i}-${D}`,X=yi(ve(It,"work_entries"),Bn("origin","==","fixed_fee"),Bn("date",">=",st),Bn("date","<=",U)),ot=await ra(X);if(ot.empty){t("Ei nollattavaa.","error"),m(!1);return}const dt=Pm(It);ot.docs.forEach(pt=>dt.delete(pt.ref)),await dt.commit(),t(`Nollattu ${ot.size} kk-maksua.`,"success"),u([])}catch(L){console.error(L),t("Virhe: "+L.message,"error")}finally{m(!1)}}},lt=async()=>{m(!0),u([]);try{const[L,tt]=i.split("-"),st=`${i}-01`,D=new Date(L,tt,0).getDate(),U=`${i}-${D}`,X=`${tt}/${L}`,ot=yi(ve(It,"work_entries"),Bn("invoiced","==",!1),Bn("date",">=",st),Bn("date","<=",U)),pt=(await ra(ot)).docs.map(yt=>({id:yt.id,...yt.data(),origin:"work_entry"})),At=yi(ve(It,"work_entries"),Bn("origin","==","fixed_fee"),Bn("date",">=",st),Bn("date","<=",U)),Lt=(await ra(At)).docs.map(yt=>yt.data()),le=(yt,xt,he)=>Lt.some(He=>He.customer_id===yt&&He.task_id===he&&(xt?He.property_id===xt:!0)),Je=await ra(ve(It,"customers")),Hn=await ra(ve(It,"properties")),Tn={};Je.forEach(yt=>{Tn[yt.id]={id:yt.id,...yt.data()}});const un={};Hn.forEach(yt=>{const xt=yt.data();un[yt.id]={address:xt.address,cost_center:xt.cost_center,group:xt.group,contracts:xt.contracts,customer_id:xt.customer_id,id:yt.id}});const Is=g.filter(yt=>yt.type==="fixed_monthly"),ri=[];Hn.docs.forEach(yt=>{const xt={id:yt.id,...yt.data()};Is.forEach(he=>{const He=xt.contracts?.[he.id];if(He?.active&&!le(xt.customer_id,xt.id,he.id)){const ie=Tn[xt.customer_id];ie&&ri.push({id:`gen_${xt.id}_${he.id}`,customer_id:ie.id,customer_name:ie.name,property_id:xt.id,property_address:xt.address,task_id:he.id,task_name:he.label,task_type:"fixed_monthly",price_work:He.price,date:U,description:`${he.label} (${X})`,origin:"contract_generated",group:xt.group||ie.group_names?.[0]||"Sopimukset",cost_center:xt.cost_center})}})}),Object.values(Tn).forEach(yt=>{yt.type==="b2c"&&Is.forEach(xt=>{const he=yt.contracts?.[xt.id];he?.active&&!le(yt.id,null,xt.id)&&ri.push({id:`gen_${yt.id}_${xt.id}`,customer_id:yt.id,customer_name:yt.name,task_id:xt.id,task_name:xt.label,task_type:"fixed_monthly",price_work:he.price,date:U,description:`${xt.label} (${X})`,origin:"contract_generated",group:"Yksityiset"})})});const Ds=[...pt,...ri];if(Ds.length===0){t("Ei laskutettavaa.","error"),m(!1);return}const Ti={};Ds.forEach(yt=>{const xt=Tn[yt.customer_id];if(!xt)return;let he=yt.customer_id,He=xt.name;const ie=k(yt);if(xt.type==="isannointi"){let De=yt.group;!De&&yt.property_id&&un[yt.property_id]&&(De=un[yt.property_id].group),De=De||"Muu",he=`${yt.customer_id}_${De}_${ie}`,He=`${xt.name} - ${De} - ${ie}`}Ti[he]||(Ti[he]={key:he,customer:xt,title:He,category:ie,entries:[]}),Ti[he].entries.push(yt)});const ge=Object.values(Ti).map(yt=>{const{customer:xt,entries:he}=yt,He=[];let ie=0;he.sort((Fe,gn)=>(Fe.property_address||"ZZZ").localeCompare(gn.property_address||"ZZZ")||new Date(Fe.date)-new Date(gn.date));const De={};return he.forEach(Fe=>{let gn=Fe.cost_center;Fe.property_id&&un[Fe.property_id]&&(gn=un[Fe.property_id].cost_center||gn);let Ge=Fe.property_address||"Yleinen";xt.type!=="b2c"&&(Ge=gn?`Viite: KP ${gn} / ${Fe.property_address}`:`Viite: - / ${Fe.property_address}`),De[Ge]||(De[Ge]=[]),De[Ge].push(Fe)}),Object.entries(De).forEach(([Fe,gn])=>{(xt.type!=="b2c"||Object.keys(De).length>1)&&He.push({type:"header",text:Fe});const Ge={},ya=[];gn.forEach(zt=>{if(["checkbox","kg","fixed","hourly"].includes(zt.task_type)&&zt.task_type!=="extra"&&zt.task_type!=="material"&&zt.task_type!=="fixed_monthly"){const cn=`${zt.task_name}_${zt.price_work}`;Ge[cn]||(Ge[cn]={name:zt.task_name,price:parseFloat(zt.price_work||0),dates:[],unit:zt.task_type==="kg"?"kg":"kpl",totalQty:0});const Ke=new Date(zt.date).getDate()+"."+(new Date(zt.date).getMonth()+1)+".";Ge[cn].dates.push(Ke);const Ne=zt.task_type==="kg"?parseFloat(zt.value||0):1;Ge[cn].totalQty+=Ne}else ya.push(zt)}),Object.values(Ge).forEach(zt=>{const Nn=zt.totalQty*zt.price;ie+=Nn,zt.dates.sort((cn,Ke)=>parseInt(cn)-parseInt(Ke)),He.push({type:"row",text:`${zt.name} (${zt.dates.join(", ")})`,details:`${zt.totalQty} ${zt.unit} x ${zt.price} `,total:Nn})}),ya.forEach(zt=>{const Nn=parseFloat(zt.price_work||0),cn=parseFloat(zt.price_material||0);ie+=Nn+cn;let Ke=zt.description||zt.task_name;zt.task_type!=="fixed_monthly"&&(Ke=`${new Date(zt.date).getDate()+"."+(new Date(zt.date).getMonth()+1)+"."} ${Ke}`),He.push({type:"row",text:Ke,details:cn>0?`Ty: ${Nn}, Tarvike: ${cn}`:`${Nn} `,total:Nn+cn})})}),{id:yt.key,customerName:xt.name,invoiceTitle:yt.title,customerType:xt.type,billingAddress:`${xt.street}, ${xt.zip} ${xt.city}`,rows:He,totalSum:ie,rawEntries:he}});ge.sort((yt,xt)=>yt.invoiceTitle.localeCompare(xt.invoiceTitle)),u(ge),t(`Luotu ${ge.length} laskuluonnosta.`,"success")}catch(L){console.error(L),t("Virhe: "+L.message,"error")}finally{m(!1)}},B=async()=>{if(window.confirm("Hyvksytnk laskut?")){m(!0);try{const L=pe(It,"settings","company_profile"),tt=await eh(L);let st=1e3;tt.exists()&&tt.data().invoice_start_number&&(st=parseInt(tt.data().invoice_start_number));const D=Pm(It),U=Lm();for(const X of l){const ot=st.toString();st++;const dt=pe(ve(It,"invoices")),pt=new Date(new Date().toISOString().slice(0,10));pt.setDate(pt.getDate()+14);const At=pt.toISOString().slice(0,10);D.set(dt,{invoice_number:ot,title:X.invoiceTitle,customer_name:X.customerName,customer_type:X.customerType,billing_address:X.billingAddress,month:i,date:new Date().toISOString().slice(0,10),due_date:At,rows:X.rows,total_sum:X.totalSum,status:"open",created_at:U});for(const Yt of X.rawEntries)if(Yt.origin==="work_entry"){const Lt=pe(It,"work_entries",Yt.id);D.update(Lt,{invoiced:!0,invoice_id:dt.id})}else if(Yt.origin==="contract_generated"){const Lt=pe(ve(It,"work_entries"));D.set(Lt,{...Yt,origin:"fixed_fee",invoiced:!0,invoice_id:dt.id,created_at:U})}}D.update(L,{invoice_start_number:st.toString()}),await D.commit(),t("Laskut luotu ja arkistoitu! ","success"),u([])}catch(L){console.error(L),t("Virhe: "+L.message,"error")}finally{m(!1)}}},nt=L=>{const tt=b.invoice_start_number||"Luonnos",st=C(tt);let D=L.due_date;if(!D){const le=new Date(L.date);le.setDate(le.getDate()+14),D=le.toISOString().slice(0,10)}const U=new Date(D).toLocaleDateString("fi-FI"),X=x(b.iban,L.totalSum,st,D),ot=L.customer_type==="b2c",dt=b.alv_pros?parseFloat(b.alv_pros):25.5,pt=1+dt/100,At=L.rows.map(le=>{if(le.type==="header")return`<tr><td colspan="2" style="font-weight:bold;background:#eee">${le.text}</td></tr>`;let Je=le.total;return ot||(Je=le.total/pt),`<tr><td>${le.text} ${le.details?`<br><small style="color:#666">${le.details}</small>`:""}</td><td style="text-align:right">${Je.toFixed(2)}</td></tr>`}).join(""),Yt=`<html><head><title>Esikatselu</title><style>
            body{font-family:Arial,sans-serif;padding:20px;font-size:12px;color:#333}
            .header{display:flex;justify-content:space-between;margin-bottom:30px}
            .company{font-size:14px;font-weight:bold}
            .meta{text-align:right}
            table{width:100%;border-collapse:collapse;margin-bottom:20px}
            th{text-align:left;border-bottom:2px solid #000;padding:5px}
            td{border-bottom:1px solid #ddd;padding:5px}
            .totals{text-align:right;font-size:14px;font-weight:bold;margin-top:20px}
            .barcode{margin-top:20px;padding:10px;background:#f0f0f0;border:1px solid #ccc;font-family:monospace;letter-spacing:1px;text-align:center;font-weight:bold;font-size:14px}
            .vat-info {text-align:right; font-size:12px; margin-bottom:5px;}
        </style></head><body>
            <div class="header">
                <div class="company">${b.nimi||"Yritys"}<br>${b.katu||""}<br>${b.postinro||""} ${b.toimipaikka||""}</div>
                <div class="meta">Pivys: ${new Date().toLocaleDateString()}<br>Laskun nro: ${tt} (Luonnos)<br>Viite: ${st}</div>
            </div>
            <h3>${L.invoiceTitle}</h3>
            <table><thead><tr><th>Kuvaus</th><th style="text-align:right">Summa ${ot?"(sis. alv)":"(alv 0%)"}</th></tr></thead><tbody>
                ${At}
            </tbody></table>
            
            <div style="border-top: 1px solid #000; padding-top:10px">
                ${ot?"":`
                    <div class="vat-info">Veroton: ${(L.total_sum/pt).toFixed(2)} </div>
                    <div class="vat-info">ALV ${dt}%: ${(L.total_sum-L.total_sum/pt).toFixed(2)} </div>
                `}
                <div class="totals">Yhteens: ${L.totalSum.toFixed(2)} </div>
            </div>

            <div style="margin-top:20px; border-top:1px dashed #ccc; padding-top:10px">
                <b>Maksutiedot:</b><br>
                Erpiv: <b>${U}</b><br>
                Viitenumero: ${st}<br>
                IBAN: ${b.iban||""}
            </div>

            ${X?`<div class="barcode">Virtuaaliviivakoodi: ${X}</div>`:""}
        </body></html>`,Lt=window.open("","","width=800,height=600");Lt.document.write(Yt),Lt.document.close()};return v.jsxs("div",{className:"admin-section",children:[v.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),v.jsx("h2",{children:"Laskutus"}),v.jsxs("div",{className:"card-box",style:{display:"flex",gap:"20px",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between"},children:[v.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[v.jsx("label",{children:"Valitse kuukausi:"}),v.jsx("input",{type:"month",value:i,onChange:L=>r(L.target.value),style:{fontSize:"1.1rem"}}),v.jsx("button",{onClick:lt,className:"save-btn",disabled:f,children:f?"Haetaan...":" Hae laskutettavat"})]}),v.jsx("button",{onClick:()=>P(!0),className:"save-btn",style:{background:"#ff9800",border:"1px solid #ffb74d"},children:" Luo tyhj lasku"}),v.jsx("div",{style:{width:"100%",textAlign:"right"},children:v.jsx("button",{onClick:Et,className:"back-btn",style:{borderColor:"#d32f2f",color:"#d32f2f",fontSize:"0.8rem"},children:" Nollaa KK-laskutustieto"})}),l.length>0&&v.jsx("button",{onClick:B,className:"save-btn",style:{background:"#e65100",width:"100%"},children:" Hyvksy & Merkitse laskutetuksi"})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[l.map((L,tt)=>v.jsxs("div",{style:{background:"#1e1e1e",border:"1px solid #444",borderRadius:"8px",overflow:"hidden"},children:[v.jsxs("div",{style:{background:"#333",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{children:[v.jsx("h3",{style:{margin:0},children:L.invoiceTitle}),v.jsx("span",{style:{fontSize:"0.8em",color:"#aaa"},children:L.customerType==="b2c"?"Yksityinen (Sis. ALV)":"Yritys/Isnninti (+ ALV)"})]}),v.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[v.jsxs("div",{style:{textAlign:"right"},children:[v.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#4caf50"},children:[L.totalSum.toFixed(2)," "]}),v.jsxs("small",{children:[L.rows.filter(st=>st.type!=="header").length," rivi"]})]}),v.jsx("button",{onClick:()=>nt(L),className:"icon-btn",style:{fontSize:"1.5rem"},title:"Esikatselu",children:""})]})]}),v.jsx("div",{style:{padding:"15px"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},children:[v.jsx("thead",{children:v.jsxs("tr",{style:{borderBottom:"1px solid #555",color:"#aaa",textAlign:"left"},children:[v.jsx("th",{style:{paddingBottom:"5px"},children:"Kuvaus"}),v.jsx("th",{style:{textAlign:"right"},children:"Peruste"}),v.jsx("th",{style:{textAlign:"right"},children:"Yhteens"})]})}),v.jsx("tbody",{children:L.rows.map((st,D)=>v.jsx("tr",{style:{borderBottom:st.type==="header"?"2px solid #444":"1px solid #2c2c2c",background:st.type==="header"?"#2c2c2c":"transparent"},children:st.type==="header"?v.jsx("td",{colSpan:"3",style:{padding:"15px 5px 5px 5px",fontWeight:"bold",color:"#2196f3",fontSize:"1rem"},children:st.text}):v.jsxs(v.Fragment,{children:[v.jsx("td",{style:{padding:"8px 5px"},children:st.text}),v.jsx("td",{style:{textAlign:"right",color:"#ccc"},children:st.details}),v.jsxs("td",{style:{textAlign:"right",fontWeight:"bold"},children:[st.total.toFixed(2)," "]})]})},D))})]})})]},tt)),l.length===0&&!f&&v.jsx("p",{style:{textAlign:"center",color:"#666",marginTop:"20px"},children:"Ei laskuja nkyviss."})]}),R&&v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content",style:{maxWidth:"800px"},children:[v.jsx("h3",{children:"Uusi Lasku (Manuaalinen)"}),v.jsx("p",{style:{fontSize:"0.9rem",color:"#aaa",marginBottom:"15px"},children:"Tm luo laskun suoraan arkistoon. Ei vaikuta tykirjauksiin."}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Valitse asiakas (tai kirjoita nimi)"}),v.jsxs("select",{value:rt.customer_id,onChange:vt,style:{marginBottom:"5px"},children:[v.jsx("option",{value:"",children:"-- Valitse listasta --"}),W.map(L=>v.jsx("option",{value:L.id,children:L.name},L.id))]}),v.jsx("input",{placeholder:"Asiakkaan nimi...",value:rt.customer_name,onChange:L=>ft(tt=>({...tt,customer_name:L.target.value}))})]}),v.jsxs("div",{className:"form-group",style:{background:"#2c2c2c",padding:"10px",borderRadius:"6px",border:"1px solid #444"},children:[v.jsx("label",{style:{marginBottom:"5px"},children:"Asiakastyyppi (Vaikuttaa ALV-nyttn)"}),v.jsxs("div",{style:{display:"flex",gap:"20px"},children:[v.jsxs("label",{style:{cursor:"pointer",display:"flex",alignItems:"center"},children:[v.jsx("input",{type:"radio",name:"ctype",checked:rt.type==="b2c",onChange:()=>ft(L=>({...L,type:"b2c"})),style:{width:"auto",marginRight:"5px"}}),"Yksityinen (Sis. ALV)"]}),v.jsxs("label",{style:{cursor:"pointer",display:"flex",alignItems:"center"},children:[v.jsx("input",{type:"radio",name:"ctype",checked:rt.type!=="b2c",onChange:()=>ft(L=>({...L,type:"b2b"})),style:{width:"auto",marginRight:"5px"}}),"Yritys (+ ALV)"]})]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Osoite"}),v.jsx("input",{value:rt.address,onChange:L=>ft(tt=>({...tt,address:L.target.value})),placeholder:"Katuosoite, Postinro Ptp"})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{children:[v.jsx("label",{children:"Laskun Pivys"}),v.jsx("input",{type:"date",value:rt.date,onChange:L=>Mt(L.target.value)})]}),v.jsxs("div",{children:[v.jsx("label",{children:"Maksuehto / Erpiv"}),v.jsxs("div",{style:{display:"flex",gap:"5px"},children:[v.jsxs("select",{value:rt.payment_term,onChange:L=>at(L.target.value),style:{flex:1},children:[v.jsx("option",{value:"7",children:"7 pv netto"}),v.jsx("option",{value:"14",children:"14 pv netto"}),v.jsx("option",{value:"30",children:"30 pv netto"})]}),v.jsx("input",{type:"date",value:rt.due_date,onChange:L=>ft(tt=>({...tt,due_date:L.target.value})),title:"Muokkaa erpiv ksin"})]})]})]}),v.jsx("label",{children:"Laskurivit (Hinnat aina ALV 0%):"}),v.jsxs("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid #444",padding:"10px",borderRadius:"6px",marginBottom:"15px"},children:[rt.rows.map((L,tt)=>v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"130px 2fr 100px 100px 40px",gap:"5px",marginBottom:"8px",alignItems:"end"},children:[v.jsxs("div",{children:[v.jsx("label",{style:{fontSize:"0.7em"},children:"Pivys"}),v.jsx("input",{type:"date",value:L.date,onChange:st=>N(tt,"date",st.target.value),style:{fontSize:"0.9rem",padding:"8px"}})]}),v.jsxs("div",{children:[v.jsx("label",{style:{fontSize:"0.7em"},children:"Kuvaus"}),v.jsx("input",{placeholder:"Mit tehtiin...",value:L.text,onChange:st=>N(tt,"text",st.target.value),style:{fontSize:"0.9rem",padding:"8px"}})]}),v.jsxs("div",{children:[v.jsx("label",{style:{fontSize:"0.7em"},children:"Ty  (0%)"}),v.jsx("input",{type:"number",placeholder:"0.00",value:L.price_work,onChange:st=>N(tt,"price_work",st.target.value),style:{textAlign:"right",fontSize:"0.9rem",padding:"8px"}})]}),v.jsxs("div",{children:[v.jsx("label",{style:{fontSize:"0.7em"},children:"Tarvike  (0%)"}),v.jsx("input",{type:"number",placeholder:"0.00",value:L.price_material,onChange:st=>N(tt,"price_material",st.target.value),style:{textAlign:"right",fontSize:"0.9rem",padding:"8px"}})]}),v.jsx("button",{onClick:()=>S(tt),style:{background:"none",border:"none",color:"#ff5252",cursor:"pointer",padding:"10px"},children:""})]},tt)),v.jsx("button",{onClick:St,className:"back-btn",style:{width:"100%",marginTop:"5px",borderStyle:"dashed"},children:"+ Lis rivi"})]}),v.jsxs("div",{style:{textAlign:"right",fontWeight:"bold",fontSize:"1.2rem",marginBottom:"20px"},children:["Veroton: ",rt.rows.reduce((L,tt)=>L+I(tt),0).toFixed(2)," ",v.jsxs("span",{style:{fontSize:"0.8em",color:"#aaa",marginLeft:"10px"},children:["(+ ALV ",b.alv_pros||25.5,"%: ",(rt.rows.reduce((L,tt)=>L+I(tt),0)*(b.alv_pros?parseFloat(b.alv_pros)/100:.255)).toFixed(2)," )"]})]}),v.jsxs("div",{style:{display:"flex",gap:"10px"},children:[v.jsx("button",{onClick:V,className:"save-btn",disabled:f,children:" Tallenna Arkistoon"}),v.jsx("button",{onClick:()=>P(!1),className:"back-btn",children:"Peruuta"})]})]})})]})},y2=({onBack:s,showNotification:t,requestConfirm:i})=>{const[r,l]=ht.useState([]),[u,f]=ht.useState(!0),[m,g]=ht.useState({}),[y,b]=ht.useState(!1),[w,R]=ht.useState(""),[P,W]=ht.useState(""),[$,Y]=ht.useState({start:"",end:""});ht.useEffect(()=>{(async()=>{const x=await eh(pe(It,"settings","company_profile"));x.exists()&&g(x.data())})()},[]),ht.useEffect(()=>{f(!0);const C=yi(ve(It,"invoices"),Yh("created_at","desc"),$R(100)),x=Fi(C,Et=>{const lt=Et.docs.map(B=>({id:B.id,...B.data()}));l(lt),f(!1)},Et=>{console.error("Virhe:",Et),f(!1)});return()=>x()},[]);const rt=[...new Set(r.map(C=>C.customer_name))].sort(),ft=C=>{const x=String(C).replace(/\D/g,""),Et=[7,3,1];let lt=0;for(let nt=0;nt<x.length;nt++)lt+=parseInt(x.charAt(x.length-1-nt))*Et[nt%3];const B=(10-lt%10)%10;return x+B},vt=C=>{if(!C)return"";const x=new Date(C);return x.setDate(x.getDate()+14),x.toLocaleDateString("fi-FI")},Mt=(C,x,Et,lt)=>{if(!C||!x||!Et||!lt)return"";const B=C.replace(/[^0-9]/g,"");if(B.length<16)return"";const nt=B.slice(0,16),L=parseFloat(x).toFixed(2);let[tt,st]=L.split(".");tt=tt.padStart(6,"0").slice(-6);const D=tt+st,U=Et.replace(/[^0-9]/g,"").padStart(20,"0"),X=new Date(lt);X.setDate(X.getDate()+14);const ot=X.getFullYear().toString().slice(-2),dt=(X.getMonth()+1).toString().padStart(2,"0"),pt=X.getDate().toString().padStart(2,"0"),At=ot+dt+pt;return`4${nt}${D}000${U}${At}`},at=C=>{i("Merkitnk lasku maksetuksi?",async()=>{await _s(pe(It,"invoices",C.id),{status:"paid"}),t("Merkitty maksetuksi.","success")})},St=C=>{i("Mittidnk lasku? Se j arkistoon, mutta merkitn perutuksi.",async()=>{await _s(pe(It,"invoices",C.id),{status:"cancelled"}),t("Lasku mittity.","info")})},N=C=>{i(`VAROITUS: Haluatko poistaa laskun kokonaan?

- Lasku poistuu arkistosta.
- Tyt palautuvat "tekemttmiksi".`,async()=>{f(!0);try{const x=Pm(It),Et=yi(ve(It,"work_entries"),Bn("invoice_id","==",C.id));(await ra(Et)).docs.forEach(B=>{const nt=B.data();nt.origin==="contract_generated"||nt.origin==="fixed_fee"?x.delete(B.ref):x.update(B.ref,{invoiced:!1,invoice_id:null})}),x.delete(pe(It,"invoices",C.id)),await x.commit(),t("Lasku poistettu ja tyt palautettu listalle.","success")}catch(x){console.error(x),t("Virhe: "+x.message,"error")}finally{f(!1)}})},S=async C=>{i("Luodaanko hyvityslasku?",async()=>{const x=C.rows.map(Et=>({...Et,total:-Et.total}));await So(ve(It,"invoices"),{title:`HYVITYSLASKU - ${C.title}`,customer_name:C.customer_name,customer_type:C.customer_type,billing_address:C.billing_address,month:C.month,date:new Date().toISOString().slice(0,10),rows:x,total_sum:-C.total_sum,status:"paid",type:"credit_note",original_invoice_id:C.id,created_at:Lm()}),await _s(pe(It,"invoices",C.id),{status:"credited"}),t("Hyvityslasku luotu.","success")})},I=C=>{const x=C.invoice_number||"Luonnos",Et=ft(x),lt=vt(C.date),B=new Date(C.date).toLocaleDateString("fi-FI"),nt=C.total_sum/1.255,L=C.total_sum-nt,tt=Mt(m.iban,C.total_sum,Et,C.date),st=`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Lasku ${x}</title>
                <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"><\/script>
                <style>
                    @page { size: A4; margin: 10mm 15mm; }
                    body { font-family: Arial, Helvetica, sans-serif; font-size: 13px; color: #000; line-height: 1.3; }
                    .container { width: 100%; max-width: 210mm; margin: 0 auto; position: relative; min-height: 270mm; }
                    
                    /* HEADER */
                    .header { display: flex; justify-content: space-between; margin-bottom: 40px; }
                    .company-name { font-size: 18px; font-weight: bold; text-transform: uppercase; margin-bottom: 5px; }
                    .company-details { font-size: 12px; color: #333; line-height: 1.4; }
                    .meta-box { text-align: left; width: 320px; }
                    .meta-row { display: flex; justify-content: space-between; margin-bottom: 2px; }
                    .meta-label { font-weight: bold; text-transform: uppercase; font-size: 11px; width: 130px; }
                    .meta-value { text-align: right; width: 100%; }

                    /* RECIPIENT */
                    .recipient { margin-top: 10px; margin-bottom: 30px; border: 1px solid #aaa; padding: 15px; width: 300px; border-radius: 2px; min-height: 80px;}
                    .recipient b { font-size: 14px; display:block; margin-bottom: 5px; }

                    /* TABLE */
                    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
                    th { text-align: left; background-color: #ddd; padding: 6px 8px; border: 1px solid #999; font-size: 11px; font-weight: bold; text-transform: uppercase; }
                    td { padding: 6px 8px; border: 1px solid #ccc; vertical-align: top; font-size: 12px; }
                    .col-desc { width: 75%; }
                    .col-sum { width: 25%; text-align: right; }
                    .row-header td { background-color: #f0f0f0; font-weight: bold; border-top: 2px solid #666; font-size: 12px; }
                    .small-text { font-size: 11px; color: #444; display: block; margin-top: 2px; font-style: italic; }

                    /* TOTALS */
                    .totals-section { display: flex; justify-content: flex-end; margin-bottom: 40px; page-break-inside: avoid; }
                    .totals-box { width: 250px; }
                    .total-row { display: flex; justify-content: space-between; margin-bottom: 3px; font-size: 12px; }
                    .total-final { font-size: 14px; font-weight: bold; border-top: 1px solid #000; padding-top: 5px; margin-top: 5px; }

                    /* FOOTER & BARCODE */
                    .footer-wrapper { position: absolute; bottom: 0; left: 0; right: 0; border-top: 2px dashed #000; padding-top: 10px; }
                    .footer-header { font-size: 10px; font-weight: bold; margin-bottom: 5px; text-transform: uppercase; }
                    .footer-content { display: flex; justify-content: space-between; font-size: 12px; }
                    .bank-details { width: 40%; }
                    .payment-details { width: 55%; text-align: right; }
                    .payment-row { display: flex; justify-content: space-between; margin-bottom: 6px; border-bottom: 1px solid #eee; padding-bottom: 2px; }
                    .payment-label { font-weight: bold; font-size: 11px; }
                    
                    /* Viivakoodialue */
                    .barcode-container { margin-top: 10px; text-align: left; padding: 5px 0; display: flex; flex-direction: column; align-items: center; }
                    .barcode-number { font-family: monospace; letter-spacing: 1px; font-size: 11px; margin-top: 5px; }
                    svg#barcode { width: 100%; max-width: 400px; height: 50px; }

                    tr { page-break-inside: avoid; }
                </style>
            </head>
            <body>
                <div class="container">
                    <div class="header">
                        <div>
                            <div class="company-name">${m.nimi||"KRKLN NOTAR OY"}</div>
                            <div class="company-details">
                                ${m.katu||""}<br>
                                ${m.postinro||""} ${m.toimipaikka||""}<br>
                                Puh: ${m.puhelin||""}<br>
                                Email: ${m.email||""}
                            </div>
                        </div>
                        <div class="meta-box">
                            <div class="meta-row"><span class="meta-label">PIVMR:</span> <span class="meta-value">${B}</span></div>
                            <div class="meta-row"><span class="meta-label">LASKUN NRO:</span> <span class="meta-value">${x}</span></div>
                            <div class="meta-row"><span class="meta-label">VIITENUMERO:</span> <span class="meta-value">${Et}</span></div>
                            <div class="meta-row" style="margin-top:10px"><span class="meta-label">ERPIV:</span> <span class="meta-value">${lt}</span></div>
                        </div>
                    </div>

                    <div class="recipient">
                        <b>${C.customer_name}</b><br>
                        ${C.billing_address?C.billing_address.replace(",","<br>"):""}
                    </div>

                    <table>
                        <thead><tr><th class="col-desc">KUVAUS</th><th class="col-sum">SUMMA</th></tr></thead>
                        <tbody>
                            ${C.rows.map(U=>{if(U.type==="header"){let X=U.text.replace("","").trim();return X.startsWith("Viite:")&&(X=X.replace("Viite:","Kohde:")),`<tr class="row-header"><td colspan="2">${X}</td></tr>`}return`<tr><td>${U.text} ${U.details?`<span class="small-text">${U.details}</span>`:""}</td><td style="text-align:right">${U.total.toFixed(2)} </td></tr>`}).join("")}
                        </tbody>
                    </table>

                    <div class="totals-section">
                        <div class="totals-box">
                            <div class="total-row"><span>VLISUMMA:</span> <span>${nt.toFixed(2)} </span></div>
                            <div class="total-row"><span>ALV (${m.alv_pros||"25.5"}%):</span> <span>${L.toFixed(2)} </span></div>
                            <div class="total-row total-final"><span>YHTEENS:</span> <span>${C.total_sum.toFixed(2)} </span></div>
                        </div>
                    </div>

                    <div class="footer-wrapper">
                        <div class="footer-header">Maksettaessa kytettv viitenumeroa</div>
                        <div class="footer-content">
                            <div class="bank-details">
                                <div class="bank-row"><span class="bank-label" style="display:inline-block;width:60px;font-weight:bold">Saaja:</span> ${m.nimi||"Krkln Notar Oy"}</div>
                                <div class="bank-row"><span class="bank-label" style="display:inline-block;width:60px;font-weight:bold">IBAN:</span> ${m.iban||"-"}</div>
                                <div class="bank-row"><span class="bank-label" style="display:inline-block;width:60px;font-weight:bold">BIC:</span> -</div>
                            </div>
                            <div class="payment-details">
                                <div class="payment-row"><span class="payment-label">Viitenumero:</span> <span>${Et}</span></div>
                                <div class="payment-row"><span class="payment-label">Erpiv:</span> <span>${lt}</span></div>
                                <div class="payment-row"><span class="payment-label">Euroa:</span> <span>${C.total_sum.toFixed(2)}</span></div>
                            </div>
                        </div>
                        
                        ${tt?`
                        <div class="barcode-container">
                            <svg id="barcode"></svg>
                            <div class="barcode-number">Virtuaaliviivakoodi: ${tt}</div>
                        </div>
                        `:""}
                    </div>
                </div>
                
                <script>
                    // Kun sivu on ladattu, piirretn viivakoodi ja tulostetaan
                    window.onload = function() {
                        try {
                            if ("${tt}") {
                                JsBarcode("#barcode", "${tt}", {
                                    format: "CODE128",
                                    lineColor: "#000",
                                    width: 1.5,
                                    height: 40,
                                    displayValue: false, // Ei numeroa viivojen alle (meill on se erikseen)
                                    margin: 0
                                });
                            }
                        } catch(e) { console.error("Viivakoodivirhe:", e); }
                        
                        setTimeout(() => { window.print(); }, 800);
                    };
                <\/script>
            </body>
            </html>
        `,D=window.open("","_blank","width=950,height=1200");D?(D.document.write(st),D.document.close()):t("Salli ponnahdusikkunat!","error")},V=C=>{const x=new Date;let Et=new Date;if(C==="thisMonth")Et=new Date(x.getFullYear(),x.getMonth(),1);else if(C==="prevMonth")Et=new Date(x.getFullYear(),x.getMonth()-1,1),x.setDate(0);else if(C==="3kk")Et.setMonth(Et.getMonth()-3);else if(C==="year")Et.setFullYear(Et.getFullYear()-1);else if(C==="clear"){Y({start:"",end:""});return}const lt=B=>B.toISOString().split("T")[0];Y({start:lt(Et),end:lt(x)})},k=r.filter(C=>{const x=w.toLowerCase(),Et=!w||C.customer_name.toLowerCase().includes(x)||C.title.toLowerCase().includes(x)||C.invoice_number&&C.invoice_number.includes(x),lt=!P||C.customer_name===P;let B=!0;return $.start&&$.end&&(B=C.date>=$.start&&C.date<=$.end),Et&&lt&&B});return v.jsxs("div",{className:"admin-section",children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[v.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),v.jsx("h2",{style:{margin:0},children:"Laskuarkisto"})]}),v.jsxs("div",{className:"card-box",style:{padding:"15px"},children:[v.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[v.jsxs("div",{style:{flex:1,position:"relative",display:"flex",alignItems:"center",background:"#2c2c2c",borderRadius:"6px",padding:"8px 12px",border:"1px solid #444"},children:[v.jsx("span",{style:{fontSize:"1.1rem",marginRight:"10px"},children:""}),v.jsx("input",{placeholder:"Hae asiakasta tai laskun numeroa...",value:w,onChange:C=>R(C.target.value),style:{border:"none",background:"transparent",color:"white",fontSize:"1rem",outline:"none",width:"100%"}}),w&&v.jsx("button",{onClick:()=>R(""),style:{background:"none",border:"none",color:"#888",cursor:"pointer",fontSize:"1.1rem"},children:""})]}),v.jsx("button",{onClick:()=>b(!y),className:"save-btn",style:{background:y?"#1976d2":"#333",minWidth:"120px"},children:y?"Piilota ":"Suodattimet "})]}),y&&v.jsxs("div",{style:{marginTop:"15px",borderTop:"1px solid #444",paddingTop:"15px",display:"flex",flexDirection:"column",gap:"15px"},children:[v.jsxs("div",{children:[v.jsx("label",{style:{marginBottom:"5px",color:"#aaa"},children:"Aikajakso:"}),v.jsxs("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:[v.jsx("button",{className:"back-btn",onClick:()=>V("thisMonth"),children:"Tm kuu"}),v.jsx("button",{className:"back-btn",onClick:()=>V("prevMonth"),children:"Edellinen"}),v.jsx("button",{className:"back-btn",onClick:()=>V("3kk"),children:"3 kk"}),v.jsx("button",{className:"back-btn",onClick:()=>V("year"),children:"Vuosi"}),v.jsx("button",{className:"back-btn",onClick:()=>V("clear"),style:{color:"#ff5252",borderColor:"#ff5252"},children:"Tyhjenn"})]})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{children:[v.jsx("label",{children:"Tarkka aikavli:"}),v.jsxs("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[v.jsx("input",{type:"date",value:$.start,onChange:C=>Y({...$,start:C.target.value})}),v.jsx("span",{children:"-"}),v.jsx("input",{type:"date",value:$.end,onChange:C=>Y({...$,end:C.target.value})})]})]}),v.jsxs("div",{children:[v.jsx("label",{children:"Asiakas:"}),v.jsxs("select",{value:P,onChange:C=>W(C.target.value),children:[v.jsx("option",{value:"",children:"-- Kaikki --"}),rt.map(C=>v.jsx("option",{value:C,children:C},C))]})]})]})]})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[u&&v.jsx("p",{style:{textAlign:"center",color:"#aaa"},children:"Ladataan laskuja..."}),!u&&k.length===0&&v.jsx("div",{style:{textAlign:"center",padding:"30px",color:"#666",border:"2px dashed #333",borderRadius:"8px"},children:v.jsx("p",{children:"Ei laskuja."})}),k.map(C=>v.jsxs("div",{style:{background:"#1e1e1e",border:"1px solid #333",borderRadius:"6px",padding:"10px 15px",display:"flex",justifyContent:"space-between",alignItems:"center",opacity:C.status==="cancelled"?.6:1},children:[v.jsxs("div",{style:{flex:1},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[v.jsxs("span",{style:{fontWeight:"bold",fontSize:"1rem",color:C.total_sum<0?"#ff5252":"white"},children:[C.title," ",v.jsxs("span",{style:{fontWeight:"normal",color:"#aaa",fontSize:"0.9rem"},children:["(#",C.invoice_number||"---",")"]})]}),C.status==="open"&&v.jsx("span",{style:{background:"#ff9800",color:"black",padding:"1px 5px",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"bold"},children:"AVOIN"}),C.status==="paid"&&v.jsx("span",{style:{background:"#4caf50",color:"white",padding:"1px 5px",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"bold"},children:"MAKSETTU"}),C.status==="cancelled"&&v.jsx("span",{style:{background:"#d32f2f",color:"white",padding:"1px 5px",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"bold"},children:"MITTITY"}),C.status==="credited"&&v.jsx("span",{style:{background:"#9c27b0",color:"white",padding:"1px 5px",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"bold"},children:"HYVITETTY"})]}),v.jsxs("div",{style:{fontSize:"0.85rem",color:"#aaa",marginTop:"2px"},children:[C.date,"  ",C.customer_name]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[v.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",minWidth:"80px",textAlign:"right",color:C.total_sum<0?"#ff5252":"#4caf50"},children:[C.total_sum.toFixed(2)," "]}),v.jsxs("div",{style:{display:"flex",gap:"5px"},children:[v.jsx("button",{onClick:()=>I(C),className:"icon-btn",title:"Tulosta",children:""}),v.jsx("button",{onClick:()=>I(C),className:"icon-btn",title:"Lataa PDF",style:{color:"#90caf9"},children:" PDF"}),C.status==="open"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>at(C),className:"icon-btn",style:{color:"#4caf50"},title:"Merkitse maksetuksi",children:""}),v.jsx("button",{onClick:()=>S(C),className:"icon-btn",style:{color:"#ff9800"},title:"Hyvityslasku",children:""}),v.jsx("button",{onClick:()=>St(C),className:"icon-btn",style:{color:"#d32f2f"},title:"Mitti",children:""})]}),C.status==="cancelled"&&v.jsx("button",{onClick:()=>N(C),className:"icon-btn",style:{color:"#ff5252",border:"1px solid #555",borderRadius:"4px",padding:"2px 5px"},title:"Poista pysyvsti",children:" Tuhoa"})]})]})]},C.id))]})]})},_2=()=>{const[s,t]=ht.useState(""),[i,r]=ht.useState(""),[l,u]=ht.useState(!1),[f,m]=ht.useState(""),g=async y=>{y.preventDefault(),m("");try{l?await WC(xh,s,i):await ZC(xh,s,i)}catch(b){console.error("Login error:",b),b.code==="auth/invalid-credential"?m("Vr shkposti tai salasana."):b.code==="auth/email-already-in-use"?m("Shkposti on jo kytss."):b.code==="auth/weak-password"?m("Salasanan pit olla vhintn 6 merkki."):m("Virhe: "+b.message)}};return v.jsx("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px"},children:v.jsxs("div",{className:"card-box",style:{maxWidth:"400px",width:"100%",textAlign:"center"},children:[v.jsx("h2",{style:{marginTop:0},children:l?"Luo tunnus":"Kirjaudu sisn"}),v.jsx("p",{style:{color:"#aaa",marginBottom:"20px"},children:"Krkln Notar Oy"}),v.jsxs("form",{onSubmit:g,children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{style:{textAlign:"left"},children:"Shkposti"}),v.jsx("input",{type:"email",value:s,onChange:y=>t(y.target.value),required:!0,placeholder:"esim. posti@firma.fi"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{style:{textAlign:"left"},children:"Salasana"}),v.jsx("input",{type:"password",value:i,onChange:y=>r(y.target.value),required:!0,placeholder:"******"})]}),f&&v.jsx("div",{style:{backgroundColor:"rgba(211, 47, 47, 0.1)",color:"#ff5252",padding:"10px",borderRadius:"6px",marginBottom:"15px",border:"1px solid #d32f2f"},children:f}),v.jsx("button",{type:"submit",className:"save-btn",style:{width:"100%",padding:"15px"},children:l?"Rekisteridy":"Kirjaudu"})]}),v.jsx("div",{style:{marginTop:"20px",borderTop:"1px solid #444",paddingTop:"15px"},children:v.jsx("button",{onClick:()=>{u(!l),m("")},className:"back-btn",style:{border:"none",color:"#2196f3",textDecoration:"underline"},children:l?"Onko sinulla jo tunnus? Kirjaudu":"Eik tunnusta? Rekisteridy"})})]})})},v2="/notar-app/assets/logo-D7EU7HDK.jpeg",E2=({msg:s,type:t})=>s?v.jsxs("div",{className:`notification-toast ${t}`,children:[t==="success"?"":""," ",s]}):null,T2=({isOpen:s,message:t,onConfirm:i,onCancel:r})=>s?v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content",style:{textAlign:"center"},children:[v.jsx("h3",{children:"Vahvistus"}),v.jsx("p",{style:{whiteSpace:"pre-wrap"},children:t}),v.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center",marginTop:"20px"},children:[v.jsx("button",{onClick:i,className:"save-btn",children:"Kyll"}),v.jsx("button",{onClick:r,className:"back-btn",children:"Peruuta"})]})]})}):null,YE=({task:s,contractData:t,onToggle:i,onPriceChange:r,isOverridden:l=!1})=>{const u=t?.active||!1,f=t?.price||"";let m="",g="0";return s.type==="kg"?m=" / kg":s.type==="hourly"?m=" / h":s.type==="fixed"?m=" (Kerta)":s.type==="fixed_monthly"?m=" / kk":(s.type==="extra"||s.type==="material")&&(m="",g="0"),v.jsxs("div",{style:{marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #333",paddingBottom:"8px",backgroundColor:l?"#2e2e10":"transparent",padding:l?"5px":"0",borderRadius:"4px"},children:[v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",fontWeight:u?"bold":"normal",flex:1,color:"white"},children:[v.jsx("input",{type:"checkbox",className:"big-checkbox",checked:u,onChange:i}),s.label,l&&v.jsx("span",{style:{fontSize:"0.7em",color:"#ffb74d"},children:"(Kohdekohtainen)"})]}),u&&v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[v.jsx("input",{type:"number",placeholder:g,value:f,onChange:r,style:{width:"90px",padding:"8px",textAlign:"right"}}),v.jsx("span",{style:{fontSize:"0.8em",color:"#aaa"},children:m})]})]})},b2=({currentView:s,setCurrentView:t})=>{const[i,r]=ht.useState(new Date),[l,u]=ht.useState(null),[f,m]=ht.useState("Paikannetaan..."),[g,y]=ht.useState(null);ht.useEffect(()=>{const $=setInterval(()=>r(new Date),1e3);return()=>clearInterval($)},[]),ht.useEffect(()=>{if(!navigator.geolocation){m("Ei paikannusta");return}navigator.geolocation.getCurrentPosition(async $=>{const Y=$.coords.latitude,rt=$.coords.longitude;y({lat:Y.toFixed(3),lon:rt.toFixed(3)});try{const vt=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${Y}&longitude=${rt}&current_weather=true`)).json();u(vt.current_weather);const at=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${Y}&lon=${rt}`)).json(),St=at.address.city||at.address.town||at.address.village||at.address.municipality||"Tuntematon",N=at.address.road||"";m(N?`${N}, ${St}`:St)}catch(ft){console.error("Stietojen haku eponnistui",ft),m("S ei saatavilla")}},$=>{console.error("Sijaintivirhe",$),m("Lahti (Oletus)")})},[]);const b=$=>$===void 0?"":$<=1?"":$<=3?"":$<=48?"":$<=67?"":$<=77?"":$<=82?"":$<=86?"":$<=99?"":"",R=["SU","MA","TI","KE","TO","PE","LA"][i.getDay()],P=i.toLocaleDateString("fi-FI"),W=i.toLocaleTimeString("fi-FI",{hour:"2-digit",minute:"2-digit"}).replace(".",".");return v.jsxs("div",{className:"info-bar-container",children:[v.jsxs("div",{className:"info-left",children:[v.jsxs("div",{className:"weather-box",children:[v.jsx("span",{className:"weather-icon",children:l?b(l.weathercode):"..."}),v.jsx("span",{className:"weather-temp",children:l?`${l.temperature>0?"+":""}${l.temperature}C`:"--"})]}),v.jsxs("div",{className:"location-box",children:[v.jsx("div",{children:f}),g&&v.jsxs("div",{className:"coords",children:["N ",g.lat," E ",g.lon]})]})]}),v.jsx("div",{className:"info-right",children:v.jsxs("div",{className:"time-box",children:[v.jsx("div",{className:"clock-time",children:W}),v.jsxs("div",{className:"clock-date",children:[R," ",P]})]})}),v.jsxs("div",{className:"info-center",children:[v.jsx("button",{className:`nav-btn ${s==="tyot"||s==="log"?"active":""}`,onClick:()=>t("tyot"),children:" Tyt"}),v.jsx("button",{className:`nav-btn ${s!=="tyot"&&s!=="log"?"active":""}`,onClick:()=>t("admin"),children:" Toimisto"})]})]})},S2=({onBack:s,showNotification:t,requestConfirm:i})=>{const[r,l]=ht.useState([]),[u,f]=ht.useState(""),[m,g]=ht.useState(null);ht.useEffect(()=>{const R=yi(ve(It,"work_entries"),Bn("invoiced","==",!1)),P=Fi(R,W=>{const $=W.docs.map(Y=>({id:Y.id,...Y.data()}));$.sort((Y,rt)=>Y.date<rt.date?1:-1),l($)});return()=>P()},[]);const y=R=>{i("Poistetaanko tm kirjaus pysyvsti?",async()=>{await jm(pe(It,"work_entries",R)),t("Kirjaus poistettu","success")})},b=async()=>{if(m)try{await _s(pe(It,"work_entries",m.id),{date:m.date,description:m.description||"",value:m.value||!0,price_work:m.price_work||"0",price_material:m.price_material||"0"}),t("Muutokset tallennettu!","success"),g(null)}catch(R){t("Virhe: "+R.message,"error")}},w=r.filter(R=>R.customer_name&&R.customer_name.toLowerCase().includes(u.toLowerCase())||R.property_address&&R.property_address.toLowerCase().includes(u.toLowerCase())||R.task_name&&R.task_name.toLowerCase().includes(u.toLowerCase()));return v.jsxs("div",{className:"admin-section",children:[v.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),v.jsx("h2",{children:"Tyhistoria"}),v.jsxs("div",{className:"card-box",children:[v.jsx("input",{placeholder:" Etsi...",value:u,onChange:R=>f(R.target.value),style:{marginBottom:"10px"}}),v.jsxs("p",{style:{fontSize:"0.9em",color:"#aaa"},children:["Yhteens: ",w.length," kirjausta"]})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[w.map(R=>v.jsxs("div",{style:{background:"#1e1e1e",padding:"15px",borderRadius:"8px",border:"1px solid #333",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[v.jsxs("div",{children:[v.jsxs("div",{style:{fontWeight:"bold",color:"#2196f3",fontSize:"1.1rem"},children:[R.task_name," ",v.jsxs("span",{style:{color:"white",fontSize:"0.9rem"},children:["- ",R.date]})]}),v.jsx("div",{style:{fontWeight:"bold",marginTop:"5px"},children:R.customer_name}),v.jsx("div",{style:{fontSize:"0.9rem"},children:R.property_address}),v.jsxs("div",{style:{marginTop:"5px",fontSize:"0.9rem",color:"#ccc"},children:[R.task_type==="kg"&&v.jsxs("span",{children:["Mr: ",v.jsxs("b",{children:[R.value," kg"]})," | "]}),v.jsxs("span",{children:["Hinta: ",v.jsxs("b",{children:[R.price_work," "]})]}),R.price_material>0&&v.jsxs("span",{children:[" + Tarvike ",R.price_material," "]}),R.description&&v.jsx("div",{style:{marginTop:"3px"},children:v.jsxs("i",{children:['"',R.description,'"']})})]})]}),v.jsxs("div",{style:{display:"flex",gap:"10px"},children:[v.jsx("button",{onClick:()=>g(R),className:"icon-btn edit-btn",title:"Muokkaa",children:""}),v.jsx("button",{onClick:()=>y(R.id),className:"icon-btn delete-btn",title:"Poista",children:""})]})]},R.id)),w.length===0&&v.jsx("p",{children:"Ei kirjauksia."})]}),m&&v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content",children:[v.jsx("h3",{children:"Muokkaa kirjausta"}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Pivmr"}),v.jsx("input",{type:"date",value:m.date,onChange:R=>g({...m,date:R.target.value})})]}),m.task_type==="kg"&&v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Mr (kg)"}),v.jsx("input",{type:"number",value:m.value,onChange:R=>g({...m,value:R.target.value})})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{children:[v.jsx("label",{children:"Ty Hinta ()"}),v.jsx("input",{type:"number",value:m.price_work,onChange:R=>g({...m,price_work:R.target.value})})]}),m.task_type==="material"&&v.jsxs("div",{children:[v.jsx("label",{children:"Tarvike ()"}),v.jsx("input",{type:"number",value:m.price_material,onChange:R=>g({...m,price_material:R.target.value})})]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Selite"}),v.jsx("input",{value:m.description||"",onChange:R=>g({...m,description:R.target.value}),placeholder:"Listiedot..."})]}),v.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[v.jsx("button",{onClick:b,className:"save-btn",children:"Tallenna"}),v.jsx("button",{onClick:()=>g(null),className:"back-btn",children:"Peruuta"})]})]})})]})},A2=({availableTasks:s,onOpenLog:t,showNotification:i})=>{const[r,l]=ht.useState(null),u=s.filter(lt=>lt.showInWorkView!==!1),[f,m]=ht.useState(new Date().toISOString().slice(0,10)),[g,y]=ht.useState([]),[b,w]=ht.useState({}),[R,P]=ht.useState("all"),[W,$]=ht.useState([]),[Y,rt]=ht.useState(""),[ft,vt]=ht.useState(""),[Mt,at]=ht.useState([]),[St,N]=ht.useState(""),[S,I]=ht.useState(""),[V,k]=ht.useState("");ht.useEffect(()=>{if(!r)return;if(["checkbox","fixed","kg","hourly"].includes(r.type))Fi(ve(It,"customers"),B=>{const nt=B.docs.map(L=>({id:L.id,...L.data()}));Fi(ve(It,"properties"),L=>{const tt=L.docs.map(U=>({id:U.id,...U.data()}));let st=[];tt.forEach(U=>{const X=nt.find(At=>At.id===U.customer_id);if(!X)return;const ot=U.contracts?.[r.id],dt=X.contracts?.[r.id];if(ot?.active||dt?.active){const At=ot?.active?ot.price:dt?.price||"0";st.push({id:U.id,type:"property",name:U.address,group:U.group||"Ei ryhm",customerName:X.name,customerType:X.type,parentId:X.id,contractPrice:At})}}),nt.forEach(U=>{const X=U.contracts?.[r.id];U.type==="b2c"&&X?.active&&st.push({id:U.id,type:"customer",name:U.street?`${U.name} (${U.street})`:U.name,group:"Yksityiset",customerName:U.name,customerType:"b2c",parentId:U.id,contractPrice:X.price||"0"})}),y(st);const D={};st.forEach(U=>D[U.id]=r.type==="kg"?"":!0),w(D)})});else{const B=yi(ve(It,"customers"),Yh("name"));Fi(B,nt=>$(nt.docs.map(L=>({id:L.id,...L.data()}))))}},[r]),ht.useEffect(()=>{if(Y){const lt=yi(ve(It,"properties"),Bn("customer_id","==",Y));Fi(lt,B=>at(B.docs.map(nt=>({id:nt.id,...nt.data()}))))}},[Y]);const C=async()=>{const lt=[];for(const[B,nt]of Object.entries(b)){if(!nt)continue;const L=g.find(tt=>tt.id===B);L&&lt.push(So(ve(It,"work_entries"),{date:f,task_id:r.id,task_name:r.label,task_type:r.type,property_id:B,property_address:L.name,customer_name:L.customerName,group:L.group,customer_id:L.parentId,value:nt,price_work:L.contractPrice,invoiced:!1,created_at:new Date}))}await Promise.all(lt),i(`Tallennettu ${lt.length} kirjausta!`,"success"),l(null)},x=async()=>{if(!Y||!S)return i("Tyt pakolliset kentt!","error");const lt=W.find(nt=>nt.id===Y);let B={id:Y,address:lt.street||lt.name,group:"Yksityinen"};if(ft){const nt=Mt.find(L=>L.id===ft);nt&&(B={id:nt.id,address:nt.address,group:nt.group})}else if(lt.type!=="b2c")return i("Valitse kohde listasta!","error");await So(ve(It,"work_entries"),{date:f,task_id:r.id,task_name:r.label,task_type:r.type,property_id:B.id,property_address:B.address,group:B.group,customer_id:Y,customer_name:lt.name,description:St,price_work:S,price_material:V,invoiced:!1,created_at:new Date}),i("Kirjaus tallennettu!","success"),l(null),N(""),I(""),k("")};if(!r)return v.jsxs("div",{children:[v.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"Valitse tytehtv:"}),v.jsx("div",{className:"button-grid",children:u.map(lt=>v.jsx("button",{className:"work-button",style:{backgroundColor:lt.color||"#2196f3"},onClick:()=>l(lt),children:lt.label},lt.id))}),v.jsx("div",{style:{textAlign:"center",marginTop:"30px"},children:v.jsx("button",{onClick:t,className:"back-btn",style:{padding:"15px",width:"100%",fontSize:"1rem"},children:" Selaa & Muokkaa kirjauksia "})})]});const Et=["checkbox","fixed","kg","hourly"].includes(r.type);return v.jsxs("div",{className:"admin-section",children:[v.jsx("button",{onClick:()=>l(null),className:"back-btn",style:{marginBottom:"20px"},children:" Takaisin"}),v.jsx("h2",{style:{borderBottom:`4px solid ${r.color}`,display:"inline-block",paddingBottom:"5px"},children:r.label}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Pivmr:"}),v.jsx("input",{type:"date",value:f,onChange:lt=>m(lt.target.value),style:{maxWidth:"200px"}})]}),Et&&v.jsxs("div",{children:[v.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",flexWrap:"wrap"},children:[v.jsx("button",{className:`nav-btn ${R==="isannointi"?"active":""}`,onClick:()=>P("isannointi"),style:{flex:1,fontSize:"0.8rem"},children:" Isnn."}),v.jsx("button",{className:`nav-btn ${R==="b2b"?"active":""}`,onClick:()=>P("b2b"),style:{flex:1,fontSize:"0.8rem"},children:" Yritys"}),v.jsx("button",{className:`nav-btn ${R==="b2c"?"active":""}`,onClick:()=>P("b2c"),style:{flex:1,fontSize:"0.8rem"},children:" Yksity."}),v.jsx("button",{className:`nav-btn ${R==="all"?"active":""}`,onClick:()=>P("all"),style:{flex:1,fontSize:"0.8rem"},children:"Kaikki"})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[Array.from(new Set(g.filter(lt=>R==="all"||lt.customerType===R).map(lt=>`${lt.customerName}::${lt.group}`))).map(lt=>{const[B,nt]=lt.split("::"),L=g.filter(tt=>tt.customerName===B&&tt.group===nt);return v.jsxs("div",{className:"card-box",style:{padding:"10px"},children:[v.jsx("h4",{style:{margin:"0 0 5px 0",color:"#fff"},children:B}),v.jsx("div",{style:{fontSize:"0.9em",color:"#2196f3",marginBottom:"10px",fontWeight:"bold"},children:nt}),L.map(tt=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #333",alignItems:"center"},children:[v.jsx("span",{children:tt.name}),r.type==="kg"?v.jsx("input",{type:"number",placeholder:"kg",value:b[tt.id]||"",onChange:st=>w({...b,[tt.id]:st.target.value}),style:{width:"80px",padding:"5px"}}):v.jsx("input",{type:"checkbox",className:"big-checkbox",checked:!!b[tt.id],onChange:st=>w({...b,[tt.id]:st.target.checked})})]},tt.id))]},lt)}),g.length===0&&v.jsx("p",{children:"Ei kohteita."})]}),v.jsx("button",{onClick:C,className:"save-btn",style:{width:"100%",marginTop:"20px",padding:"15px"},children:"Tallenna Valinnat "})]}),!Et&&v.jsxs("div",{className:"card-box",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Asiakas:"}),v.jsxs("select",{value:Y,onChange:lt=>{rt(lt.target.value),vt("")},children:[v.jsx("option",{value:"",children:"-- Valitse --"}),W.map(lt=>v.jsx("option",{value:lt.id,children:lt.name},lt.id))]})]}),(Mt.length>0||Y&&W.find(lt=>lt.id===Y)?.type!=="b2c")&&v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Kohde:"}),v.jsxs("select",{value:ft,onChange:lt=>vt(lt.target.value),children:[v.jsx("option",{value:"",children:"-- Valitse --"}),Mt.map(lt=>v.jsx("option",{value:lt.id,children:lt.address},lt.id))]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Selite:"}),v.jsx("input",{value:St,onChange:lt=>N(lt.target.value),placeholder:"Mit tehtiin..."})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{children:[v.jsx("label",{children:"Ty ()"}),v.jsx("input",{type:"number",value:S,onChange:lt=>I(lt.target.value)})]}),r.type==="material"&&v.jsxs("div",{children:[v.jsx("label",{children:"Tarvike ()"}),v.jsx("input",{type:"number",value:V,onChange:lt=>k(lt.target.value)})]})]}),v.jsx("button",{onClick:x,className:"save-btn",style:{width:"100%",marginTop:"20px"},children:"Tallenna Kirjaus "})]})]})},w2=({onBack:s,showNotification:t,requestConfirm:i})=>{const[r,l]=ht.useState({nimi:"",y_tunnus:"",alv_pros:"25.5",katu:"",postinro:"",toimipaikka:"",email:"",puhelin:"",iban:"",invoice_start_number:"1000",tasks:[]}),[u,f]=ht.useState(!1),[m,g]=ht.useState(null),[y,b]=ht.useState(""),[w,R]=ht.useState("checkbox"),[P,W]=ht.useState("#2196f3"),[$,Y]=ht.useState(!0);ht.useEffect(()=>{const at=Fi(pe(It,"settings","company_profile"),St=>{St.exists()&&l({...St.data(),tasks:St.data().tasks||[]})});return()=>at()},[]);const rt=async()=>{if(!y)return t("Nimi puuttuu!","error");if(r.tasks.some(N=>N.color===P&&N.id!==m))return t("Vri kytss!","error");let at=[...r.tasks];const St={label:y,type:w,color:P,showInWorkView:$};m?at=at.map(N=>N.id===m?{...N,...St}:N):at.push({id:y.toLowerCase().replace(/[^a-z0-9]/g,"_")+"_"+Date.now(),...St}),await cm(pe(It,"settings","company_profile"),{...r,tasks:at}),f(!1),t("Tehtv tallennettu!","success")},ft=at=>i("Poistetaanko tehtv?",async()=>await cm(pe(It,"settings","company_profile"),{...r,tasks:r.tasks.filter(St=>St.id!==at)})),vt=async()=>{await cm(pe(It,"settings","company_profile"),r),t("Tiedot tallennettu!","success")},Mt=at=>{g(at.id),b(at.label),R(at.type||"checkbox"),W(at.color||"#2196f3"),Y(at.showInWorkView!==!1),f(!0)};return v.jsxs("div",{className:"admin-section",children:[v.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),v.jsx("h2",{children:"Yrityksen Asetukset"}),v.jsxs("div",{className:"card-box",children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[v.jsx("h3",{children:"1. Tytehtvt"}),v.jsx("button",{onClick:()=>{g(null),b(""),W("#2196f3"),f(!0)},className:"save-btn",children:"+ Lis"})]}),v.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:r.tasks.map(at=>v.jsxs("div",{className:"task-pill",style:{borderLeft:`5px solid ${at.color}`,opacity:at.showInWorkView===!1?.6:1},children:[v.jsxs("span",{style:{flex:1},children:[v.jsx("strong",{children:at.label})," ",v.jsxs("small",{children:["(",at.type==="fixed_monthly"?"KK-sopimus":at.type,")"]})]}),v.jsxs("div",{style:{display:"flex",gap:"5px"},children:[v.jsx("button",{onClick:()=>Mt(at),className:"icon-btn edit-btn",title:"Muokkaa",children:""}),v.jsx("button",{onClick:()=>ft(at.id),className:"icon-btn delete-btn",title:"Poista",children:""})]})]},at.id))})]}),v.jsxs("div",{className:"card-box",children:[v.jsx("h3",{children:"2. Yrityksen tiedot"}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Nimi"}),v.jsx("input",{value:r.nimi,onChange:at=>l({...r,nimi:at.target.value})})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{children:[v.jsx("label",{children:"Y-tunnus"}),v.jsx("input",{value:r.y_tunnus,onChange:at=>l({...r,y_tunnus:at.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{children:"ALV %"}),v.jsx("input",{value:r.alv_pros,onChange:at=>l({...r,alv_pros:at.target.value})})]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Katuosoite"}),v.jsx("input",{value:r.katu,onChange:at=>l({...r,katu:at.target.value})})]}),v.jsxs("div",{className:"form-row three-col",children:[v.jsxs("div",{children:[v.jsx("label",{children:"Postinro"}),v.jsx("input",{value:r.postinro,onChange:at=>l({...r,postinro:at.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{children:"Ptp"}),v.jsx("input",{value:r.toimipaikka,onChange:at=>l({...r,toimipaikka:at.target.value})})]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Puhelin"}),v.jsx("input",{value:r.puhelin,onChange:at=>l({...r,puhelin:at.target.value})})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Email"}),v.jsx("input",{value:r.email,onChange:at=>l({...r,email:at.target.value})})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{children:[v.jsx("label",{children:"IBAN"}),v.jsx("input",{value:r.iban,onChange:at=>l({...r,iban:at.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{style:{color:"#ff9800"},children:"Seuraavan laskun nro"}),v.jsx("input",{type:"number",value:r.invoice_start_number||"",onChange:at=>l({...r,invoice_start_number:at.target.value}),style:{textAlign:"center",fontWeight:"bold"}})]})]}),v.jsx("button",{className:"save-btn",onClick:vt,children:"Tallenna"})]}),u&&v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content",children:[v.jsx("h3",{children:m?"Muokkaa":"Lis"}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Nimi"}),v.jsx("input",{value:y,onChange:at=>b(at.target.value)})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{children:[v.jsx("label",{children:"Tyyppi"}),v.jsxs("select",{value:w,onChange:at=>R(at.target.value),children:[v.jsx("option",{value:"checkbox",children:"Perus (Tehty/Ei)"}),v.jsx("option",{value:"fixed",children:"Kntt (Kertakorvaus)"}),v.jsx("option",{value:"fixed_monthly",children:"Kiinte KK-sopimus"}),v.jsx("option",{value:"kg",children:"Mr (kg)"}),v.jsx("option",{value:"hourly",children:"Tuntity"}),v.jsx("option",{value:"extra",children:"Listy"}),v.jsx("option",{value:"material",children:"Liitety"})]})]}),v.jsxs("div",{children:[v.jsx("label",{children:"Vri"}),v.jsx("input",{type:"color",value:P,onChange:at=>W(at.target.value),style:{height:"45px",width:"100%"}})]})]}),v.jsx("div",{className:"form-group",children:v.jsxs("label",{style:{display:"flex",alignItems:"center"},children:[v.jsx("input",{type:"checkbox",className:"big-checkbox",checked:$,onChange:at=>Y(at.target.checked),style:{marginRight:"10px"}}),"Nyt etusivulla"]})}),v.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[v.jsx("button",{onClick:rt,className:"save-btn",children:"Tallenna"}),v.jsx("button",{onClick:()=>f(!1),className:"back-btn",children:"Peruuta"})]})]})})]})},x2=({asiakas:s,onBack:t,onDeleted:i,availableTasks:r,showNotification:l,requestConfirm:u})=>{const[f,m]=ht.useState({...s,contracts:s.contracts||{},group_names:s.group_names||[],street:s.street||"",zip:s.zip||"",city:s.city||"",phone:s.phone||"",email:s.email||"",payment_term_type:s.payment_term_type||"14pv",fixed_due_day:s.fixed_due_day||""}),[g,y]=ht.useState([]),[b,w]=ht.useState(""),[R,P]=ht.useState(null),[W,$]=ht.useState({isOpen:!1,mode:"add",group:null,id:null,address:"",cost_center:""});ht.useEffect(()=>{const S=yi(ve(It,"properties"),Bn("customer_id","==",s.id));return Fi(S,I=>{y(I.docs.map(V=>({id:V.id,...V.data()})))})},[s.id]);const Y=async()=>{await _s(pe(It,"customers",s.id),f),l("Tiedot tallennettu!","success")},rt=()=>u("Poistetaanko asiakas?",async()=>{await jm(pe(It,"customers",s.id)),i()}),ft=(S,I,V)=>{m(k=>({...k,contracts:{...k.contracts,[S]:{...k.contracts[S],[I]:V}}}))},vt=async()=>{b&&(await _s(pe(It,"customers",s.id),{group_names:JR(b)}),m({...f,group_names:[...f.group_names,b]}),w(""))},Mt=async()=>{const{mode:S,group:I,id:V,address:k,cost_center:C}=W;if(!k)return l("Osoite vaaditaan!","error");S==="add"?await So(ve(It,"properties"),{customer_id:s.id,group:I,address:k,cost_center:C,contracts:{}}):await _s(pe(It,"properties",V),{address:k,cost_center:C}),$({...W,isOpen:!1})},at=S=>u("Poistetaanko kohde?",async()=>await jm(pe(It,"properties",S.id))),St=async()=>{R&&(await _s(pe(It,"properties",R.id),{contracts:R.contracts}),P(null),l("Hinnat tallennettu!","success"))},N=()=>{const S=new Date;if(f.payment_term_type==="fixed"){const I=parseInt(f.fixed_due_day);if(!I)return"??.??.????";let V=new Date(S.getFullYear(),S.getMonth(),I);return S.getDate()>I&&V.setMonth(V.getMonth()+1),V.toLocaleDateString("fi-FI")}else{const I=parseInt(f.payment_term_type)||14,V=new Date(S);return V.setDate(V.getDate()+I),V.toLocaleDateString("fi-FI")}};return v.jsxs("div",{className:"admin-section",children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[v.jsx("button",{onClick:t,className:"back-btn",children:" Takaisin"}),v.jsx("button",{onClick:rt,className:"save-btn",style:{background:"#d32f2f"},children:"Poista Asiakas"})]}),v.jsx("h2",{children:f.name}),v.jsxs("div",{className:"card-box",children:[v.jsx("h3",{children:"Perustiedot"}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Nimi"}),v.jsx("input",{value:f.name,onChange:S=>m({...f,name:S.target.value})})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{children:[v.jsx("label",{children:"Y-tunnus"}),v.jsx("input",{value:f.y_tunnus||"",onChange:S=>m({...f,y_tunnus:S.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{children:"Tyyppi"}),v.jsxs("select",{value:f.type||"b2b",onChange:S=>m({...f,type:S.target.value}),children:[v.jsx("option",{value:"isannointi",children:"Isnninti"}),v.jsx("option",{value:"b2b",children:"Yritys"}),v.jsx("option",{value:"b2c",children:"Yksityinen"})]})]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Katuosoite (Laskutus)"}),v.jsx("input",{value:f.street||"",onChange:S=>m({...f,street:S.target.value})})]}),v.jsxs("div",{className:"form-row three-col",children:[v.jsxs("div",{children:[v.jsx("label",{children:"Postinro"}),v.jsx("input",{value:f.zip||"",onChange:S=>m({...f,zip:S.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{children:"Ptp"}),v.jsx("input",{value:f.city||"",onChange:S=>m({...f,city:S.target.value})})]})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{children:[v.jsx("label",{children:"Puhelin"}),v.jsx("input",{value:f.phone||"",onChange:S=>m({...f,phone:S.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{children:"Email"}),v.jsx("input",{value:f.email||"",onChange:S=>m({...f,email:S.target.value})})]})]}),v.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#2c2c2c",borderRadius:"8px",border:"1px solid #444"},children:[v.jsx("label",{style:{color:"#ff9800",marginBottom:"10px"},children:"Maksuehto / Erpiv"}),v.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[v.jsxs("select",{value:f.payment_term_type||"14pv",onChange:S=>m({...f,payment_term_type:S.target.value}),style:{flex:1},children:[v.jsx("option",{value:"14pv",children:"14 pv netto (Yleinen)"}),v.jsx("option",{value:"7pv",children:"7 pv netto (Nopea)"}),v.jsx("option",{value:"30pv",children:"30 pv netto (Yritys)"}),v.jsx("option",{value:"fixed",children:"Kiinte erpiv"})]}),f.payment_term_type==="fixed"&&v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[v.jsx("span",{style:{fontSize:"0.9rem"},children:"Piv:"}),v.jsx("input",{type:"number",placeholder:"PP",value:f.fixed_due_day||"",onChange:S=>m({...f,fixed_due_day:S.target.value}),style:{width:"60px",textAlign:"center"},min:"1",max:"31"})]})]}),v.jsxs("p",{style:{fontSize:"0.8em",color:"#aaa",marginTop:"8px",fontStyle:"italic"},children:["Jos lasku tehdn tnn, erpivksi tulee: ",v.jsx("strong",{style:{color:"#4caf50"},children:N()})]})]}),v.jsx("button",{onClick:Y,className:"save-btn",style:{marginTop:"20px",width:"100%"},children:"Tallenna muutokset"})]}),v.jsxs("div",{className:"card-box",children:[v.jsx("h3",{children:"Oletushinnasto"}),r.map(S=>v.jsx(YE,{task:S,contractData:f.contracts?.[S.id],onToggle:I=>ft(S.id,"active",I.target.checked),onPriceChange:I=>ft(S.id,"price",I.target.value)},S.id)),v.jsx("button",{onClick:Y,className:"save-btn",style:{marginTop:"15px"},children:"Tallenna muutokset"})]}),v.jsxs("div",{style:{marginTop:"30px"},children:[v.jsx("h3",{children:"Kohteet ja Ryhmittely"}),v.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[v.jsx("input",{placeholder:"Uusi Ryhm...",value:b,onChange:S=>w(S.target.value),style:{flex:1}}),v.jsx("button",{onClick:vt,className:"save-btn",children:"+ Luo Ryhm"})]}),f.group_names.map((S,I)=>{const V=g.filter(k=>k.group===S);return v.jsxs("div",{style:{border:"1px solid #444",borderRadius:"8px",marginBottom:"15px",background:"#252525"},children:[v.jsxs("div",{style:{background:"#333",padding:"10px",display:"flex",justifyContent:"space-between",borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},children:[v.jsxs("strong",{children:[" ",S]}),v.jsx("button",{onClick:()=>$({isOpen:!0,mode:"add",group:S,id:null,address:"",cost_center:""}),style:{fontSize:"0.9em",cursor:"pointer",background:"none",color:"#2196f3"},children:"+ Lis kohde"})]}),V.map(k=>v.jsxs("div",{style:{padding:"10px",borderBottom:"1px solid #333"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:"bold"},children:k.address}),v.jsx("div",{style:{fontSize:"0.9em",color:"#aaa"},children:k.cost_center?`KP: ${k.cost_center}`:""})]}),v.jsxs("div",{style:{display:"flex",gap:"5px"},children:[v.jsx("button",{onClick:()=>$({isOpen:!0,mode:"edit",group:S,id:k.id,address:k.address,cost_center:k.cost_center}),className:"icon-btn edit-btn",children:""}),v.jsx("button",{onClick:()=>P(k),className:"icon-btn",style:{color:"#f57c00"},children:""}),v.jsx("button",{onClick:()=>at(k),className:"icon-btn delete-btn",children:""})]})]}),v.jsx("div",{style:{marginTop:"8px",display:"flex",gap:"5px",flexWrap:"wrap"},children:k.contracts&&r.map(C=>{const x=k.contracts[C.id];return x&&x.active?v.jsxs("span",{style:{fontSize:"0.75em",background:"#2e2e10",padding:"3px 8px",borderRadius:"4px",border:"1px solid #ffb74d",color:"#ffb74d"},children:[C.label,": ",x.price,""]},C.id):null})})]},k.id))]},I)})]}),W.isOpen&&v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content",children:[v.jsx("h3",{children:W.mode==="add"?"Lis kohde":"Muokkaa"}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Osoite"}),v.jsx("input",{value:W.address,onChange:S=>$({...W,address:S.target.value}),autoFocus:!0})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Kustannuspaikka (KP)"}),v.jsx("input",{value:W.cost_center,onChange:S=>$({...W,cost_center:S.target.value})})]}),v.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[v.jsx("button",{onClick:Mt,className:"save-btn",children:"Tallenna"}),v.jsx("button",{onClick:()=>$({...W,isOpen:!1}),className:"back-btn",children:"Peruuta"})]})]})}),R&&v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content",children:[v.jsxs("h3",{children:["Hinnasto: ",R.address]}),v.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto"},children:r.map(S=>S.type==="extra"||S.type==="material"?null:v.jsx("div",{style:{marginBottom:"10px"},children:v.jsx(YE,{task:S,isOverridden:!0,contractData:R.contracts?.[S.id],onToggle:I=>{const V={...R.contracts};V[S.id]||(V[S.id]={}),V[S.id].active=I.target.checked,P({...R,contracts:V})},onPriceChange:I=>{const V={...R.contracts};V[S.id].price=I.target.value,P({...R,contracts:V})}})},S.id))}),v.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[v.jsx("button",{onClick:St,className:"save-btn",children:"Tallenna"}),v.jsx("button",{onClick:()=>P(null),className:"back-btn",children:"Peruuta"})]})]})})]})},R2=({onBack:s,availableTasks:t,showNotification:i,requestConfirm:r})=>{const[l,u]=ht.useState([]),[f,m]=ht.useState(null);ht.useEffect(()=>{const P=yi(ve(It,"customers"),Yh("name"));return Fi(P,W=>u(W.docs.map($=>({id:$.id,...$.data()}))))},[]);const g=async()=>{const P=await So(ve(It,"customers"),{name:"Uusi Asiakas",type:"b2b",created_at:new Date,contracts:{},group_names:[]});m({id:P.id,name:"",type:"b2b",contracts:{},group_names:[]})};if(f)return v.jsx(x2,{asiakas:f,onBack:()=>m(null),onDeleted:()=>m(null),availableTasks:t,showNotification:i,requestConfirm:r});const y=l.filter(P=>P.type==="isannointi"),b=l.filter(P=>P.type==="b2b"),w=l.filter(P=>P.type==="b2c"),R=(P,W,$)=>v.jsxs("div",{style:{marginBottom:"20px"},children:[v.jsxs("h3",{style:{color:"#aaa",fontSize:"1rem",borderBottom:"1px solid #333",paddingBottom:"5px",marginBottom:"10px"},children:[$," ",P," (",W.length,")"]}),W.length===0&&v.jsx("p",{style:{color:"#666",fontStyle:"italic"},children:"Ei asiakkaita."}),W.map(Y=>v.jsxs("div",{className:"card-box",onClick:()=>m(Y),style:{cursor:"pointer",display:"flex",justifyContent:"space-between",padding:"15px",marginBottom:"8px",borderLeft:`4px solid ${P==="Isnninti"?"#2196f3":P==="Yritykset"?"#ff9800":"#4caf50"}`},children:[v.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:Y.name}),v.jsx("span",{style:{color:"#2196f3"},children:"Avaa "})]},Y.id))]});return v.jsxs("div",{className:"admin-section",children:[v.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"20px 0"},children:[v.jsx("h2",{children:"Asiakasrekisteri"}),v.jsx("button",{onClick:g,className:"save-btn",children:"+ Uusi Asiakas"})]}),R("Isnninti",y,""),R("Yritykset",b,""),R("Yksityiset",w,"")]})};function C2(){const[s,t]=ht.useState(null),[i,r]=ht.useState(!0),[l,u]=ht.useState("tyot"),[f,m]=ht.useState([]),[g,y]=ht.useState(null),[b,w]=ht.useState({isOpen:!1,message:"",onConfirm:null});ht.useEffect(()=>{const Y=eI(xh,rt=>{t(rt),r(!1)});return()=>Y()},[]);const R=(Y,rt="success")=>{y({msg:Y,type:rt}),setTimeout(()=>y(null),3e3)},P=(Y,rt)=>{w({isOpen:!0,message:Y,onConfirm:()=>{rt(),w({isOpen:!1,message:"",onConfirm:null})}})};ht.useEffect(()=>{if(!s)return;const Y=Fi(pe(It,"settings","company_profile"),rt=>{rt.exists()&&rt.data().tasks?m(rt.data().tasks):m([])});return()=>Y()},[s]);const W=async()=>{await nI(xh),u("tyot")},$=()=>v.jsxs("div",{className:"admin-section",style:{textAlign:"center"},children:[v.jsx("h2",{children:"Toimiston Ohjauspaneeli"}),v.jsxs("div",{className:"button-grid",style:{marginTop:"30px"},children:[v.jsx("div",{className:"work-button",style:{backgroundColor:"#455a64"},onClick:()=>u("settings"),children:v.jsx("h3",{children:" Omat Tiedot & Tyt"})}),v.jsx("div",{className:"work-button",style:{backgroundColor:"#00695c"},onClick:()=>u("customers"),children:v.jsx("h3",{children:" Asiakasrekisteri"})}),v.jsx("div",{className:"work-button",style:{backgroundColor:"#795548"},onClick:()=>u("invoicing"),children:v.jsx("h3",{children:" Laskutus"})}),v.jsx("div",{className:"work-button",style:{backgroundColor:"#37474f"},onClick:()=>u("archive"),children:v.jsx("h3",{children:" Laskuarkisto"})})]}),v.jsxs("button",{onClick:W,className:"back-btn",style:{marginTop:"40px",borderColor:"#d32f2f",color:"#d32f2f"},children:["Kirjaudu ulos (",s.email,")"]})]});return i?v.jsx("div",{style:{color:"white",textAlign:"center",marginTop:"50px"},children:"Ladataan..."}):s?v.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"10px"},children:[v.jsx("div",{className:"logo-container",children:v.jsx("img",{src:v2,alt:"Krkln Notar Oy",className:"app-logo"})}),v.jsx(E2,{msg:g?.msg,type:g?.type}),v.jsx(T2,{isOpen:b.isOpen,message:b.message,onConfirm:b.onConfirm,onCancel:()=>w({...b,isOpen:!1})}),v.jsx(b2,{currentView:l,setCurrentView:u}),l==="tyot"&&v.jsx(A2,{availableTasks:f,onOpenLog:()=>u("log"),showNotification:R}),l==="log"&&v.jsx(S2,{onBack:()=>u("tyot"),showNotification:R,requestConfirm:P}),l==="admin"&&v.jsx($,{}),l==="settings"&&v.jsx(w2,{onBack:()=>u("admin"),showNotification:R,requestConfirm:P}),l==="customers"&&v.jsx(R2,{onBack:()=>u("admin"),availableTasks:f,showNotification:R,requestConfirm:P}),l==="invoicing"&&v.jsx(g2,{onBack:()=>u("admin"),showNotification:R}),l==="archive"&&v.jsx(y2,{onBack:()=>u("admin"),showNotification:R,requestConfirm:P})]}):v.jsx(_2,{})}sA.createRoot(document.getElementById("root")).render(v.jsx(ht.StrictMode,{children:v.jsx(C2,{})}));
