(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=i(l);fetch(l.href,u)}})();var Kd={exports:{}},wl={};var av;function XS(){if(av)return wl;av=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var m in l)m!=="key"&&(u[m]=l[m])}else u=l;return l=u.ref,{$$typeof:s,type:r,key:f,ref:l!==void 0?l:null,props:u}}return wl.Fragment=t,wl.jsx=i,wl.jsxs=i,wl}var ov;function $S(){return ov||(ov=1,Kd.exports=XS()),Kd.exports}var E=$S(),Yd={exports:{}},Dt={};var lv;function ZS(){if(lv)return Dt;lv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),I=Symbol.iterator;function L(V){return V===null||typeof V!="object"?null:(V=I&&V[I]||V["@@iterator"],typeof V=="function"?V:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,K={};function ct(V,H,nt){this.props=V,this.context=H,this.refs=K,this.updater=nt||X}ct.prototype.isReactComponent={},ct.prototype.setState=function(V,H){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,H,"setState")},ct.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Tt(){}Tt.prototype=ct.prototype;function it(V,H,nt){this.props=V,this.context=H,this.refs=K,this.updater=nt||X}var pt=it.prototype=new Tt;pt.constructor=it,Q(pt,ct.prototype),pt.isPureReactComponent=!0;var W=Array.isArray;function ft(){}var D={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function x(V,H,nt){var ut=nt.ref;return{$$typeof:s,type:V,key:H,ref:ut!==void 0?ut:null,props:nt}}function O(V,H){return x(V.type,H,V.props)}function N(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function w(V){var H={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(nt){return H[nt]})}var R=/\/+/g;function yt(V,H){return typeof V=="object"&&V!==null&&V.key!=null?w(""+V.key):H.toString(36)}function rt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ft,ft):(V.status="pending",V.then(function(H){V.status==="pending"&&(V.status="fulfilled",V.value=H)},function(H){V.status==="pending"&&(V.status="rejected",V.reason=H)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function P(V,H,nt,ut,st){var at=typeof V;(at==="undefined"||at==="boolean")&&(V=null);var vt=!1;if(V===null)vt=!0;else switch(at){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(V.$$typeof){case s:case t:vt=!0;break;case b:return vt=V._init,P(vt(V._payload),H,nt,ut,st)}}if(vt)return st=st(V),vt=ut===""?"."+yt(V,0):ut,W(st)?(nt="",vt!=null&&(nt=vt.replace(R,"$&/")+"/"),P(st,H,nt,"",function(we){return we})):st!=null&&(N(st)&&(st=O(st,nt+(st.key==null||V&&V.key===st.key?"":(""+st.key).replace(R,"$&/")+"/")+vt)),H.push(st)),1;vt=0;var Gt=ut===""?".":ut+":";if(W(V))for(var Mt=0;Mt<V.length;Mt++)ut=V[Mt],at=Gt+yt(ut,Mt),vt+=P(ut,H,nt,at,st);else if(Mt=L(V),typeof Mt=="function")for(V=Mt.call(V),Mt=0;!(ut=V.next()).done;)ut=ut.value,at=Gt+yt(ut,Mt++),vt+=P(ut,H,nt,at,st);else if(at==="object"){if(typeof V.then=="function")return P(rt(V),H,nt,ut,st);throw H=String(V),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return vt}function J(V,H,nt){if(V==null)return V;var ut=[],st=0;return P(V,ut,"","",function(at){return H.call(nt,at,st++)}),ut}function ot(V){if(V._status===-1){var H=V._result;H=H(),H.then(function(nt){(V._status===0||V._status===-1)&&(V._status=1,V._result=nt)},function(nt){(V._status===0||V._status===-1)&&(V._status=2,V._result=nt)}),V._status===-1&&(V._status=0,V._result=H)}if(V._status===1)return V._result.default;throw V._result}var _t=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Ct={map:J,forEach:function(V,H,nt){J(V,function(){H.apply(this,arguments)},nt)},count:function(V){var H=0;return J(V,function(){H++}),H},toArray:function(V){return J(V,function(H){return H})||[]},only:function(V){if(!N(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Dt.Activity=C,Dt.Children=Ct,Dt.Component=ct,Dt.Fragment=i,Dt.Profiler=l,Dt.PureComponent=it,Dt.StrictMode=r,Dt.Suspense=g,Dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Dt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return D.H.useMemoCache(V)}},Dt.cache=function(V){return function(){return V.apply(null,arguments)}},Dt.cacheSignal=function(){return null},Dt.cloneElement=function(V,H,nt){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ut=Q({},V.props),st=V.key;if(H!=null)for(at in H.key!==void 0&&(st=""+H.key),H)!S.call(H,at)||at==="key"||at==="__self"||at==="__source"||at==="ref"&&H.ref===void 0||(ut[at]=H[at]);var at=arguments.length-2;if(at===1)ut.children=nt;else if(1<at){for(var vt=Array(at),Gt=0;Gt<at;Gt++)vt[Gt]=arguments[Gt+2];ut.children=vt}return x(V.type,st,ut)},Dt.createContext=function(V){return V={$$typeof:f,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Dt.createElement=function(V,H,nt){var ut,st={},at=null;if(H!=null)for(ut in H.key!==void 0&&(at=""+H.key),H)S.call(H,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(st[ut]=H[ut]);var vt=arguments.length-2;if(vt===1)st.children=nt;else if(1<vt){for(var Gt=Array(vt),Mt=0;Mt<vt;Mt++)Gt[Mt]=arguments[Mt+2];st.children=Gt}if(V&&V.defaultProps)for(ut in vt=V.defaultProps,vt)st[ut]===void 0&&(st[ut]=vt[ut]);return x(V,at,st)},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(V){return{$$typeof:m,render:V}},Dt.isValidElement=N,Dt.lazy=function(V){return{$$typeof:b,_payload:{_status:-1,_result:V},_init:ot}},Dt.memo=function(V,H){return{$$typeof:y,type:V,compare:H===void 0?null:H}},Dt.startTransition=function(V){var H=D.T,nt={};D.T=nt;try{var ut=V(),st=D.S;st!==null&&st(nt,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(ft,_t)}catch(at){_t(at)}finally{H!==null&&nt.types!==null&&(H.types=nt.types),D.T=H}},Dt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Dt.use=function(V){return D.H.use(V)},Dt.useActionState=function(V,H,nt){return D.H.useActionState(V,H,nt)},Dt.useCallback=function(V,H){return D.H.useCallback(V,H)},Dt.useContext=function(V){return D.H.useContext(V)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(V,H){return D.H.useDeferredValue(V,H)},Dt.useEffect=function(V,H){return D.H.useEffect(V,H)},Dt.useEffectEvent=function(V){return D.H.useEffectEvent(V)},Dt.useId=function(){return D.H.useId()},Dt.useImperativeHandle=function(V,H,nt){return D.H.useImperativeHandle(V,H,nt)},Dt.useInsertionEffect=function(V,H){return D.H.useInsertionEffect(V,H)},Dt.useLayoutEffect=function(V,H){return D.H.useLayoutEffect(V,H)},Dt.useMemo=function(V,H){return D.H.useMemo(V,H)},Dt.useOptimistic=function(V,H){return D.H.useOptimistic(V,H)},Dt.useReducer=function(V,H,nt){return D.H.useReducer(V,H,nt)},Dt.useRef=function(V){return D.H.useRef(V)},Dt.useState=function(V){return D.H.useState(V)},Dt.useSyncExternalStore=function(V,H,nt){return D.H.useSyncExternalStore(V,H,nt)},Dt.useTransition=function(){return D.H.useTransition()},Dt.version="19.2.3",Dt}var uv;function Bm(){return uv||(uv=1,Yd.exports=ZS()),Yd.exports}var dt=Bm(),Qd={exports:{}},Rl={},Xd={exports:{}},$d={};var cv;function WS(){return cv||(cv=1,(function(s){function t(P,J){var ot=P.length;P.push(J);t:for(;0<ot;){var _t=ot-1>>>1,Ct=P[_t];if(0<l(Ct,J))P[_t]=J,P[ot]=Ct,ot=_t;else break t}}function i(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var J=P[0],ot=P.pop();if(ot!==J){P[0]=ot;t:for(var _t=0,Ct=P.length,V=Ct>>>1;_t<V;){var H=2*(_t+1)-1,nt=P[H],ut=H+1,st=P[ut];if(0>l(nt,ot))ut<Ct&&0>l(st,nt)?(P[_t]=st,P[ut]=ot,_t=ut):(P[_t]=nt,P[H]=ot,_t=H);else if(ut<Ct&&0>l(st,ot))P[_t]=st,P[ut]=ot,_t=ut;else break t}}return J}function l(P,J){var ot=P.sortIndex-J.sortIndex;return ot!==0?ot:P.id-J.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var g=[],y=[],b=1,C=null,I=3,L=!1,X=!1,Q=!1,K=!1,ct=typeof setTimeout=="function"?setTimeout:null,Tt=typeof clearTimeout=="function"?clearTimeout:null,it=typeof setImmediate<"u"?setImmediate:null;function pt(P){for(var J=i(y);J!==null;){if(J.callback===null)r(y);else if(J.startTime<=P)r(y),J.sortIndex=J.expirationTime,t(g,J);else break;J=i(y)}}function W(P){if(Q=!1,pt(P),!X)if(i(g)!==null)X=!0,ft||(ft=!0,w());else{var J=i(y);J!==null&&rt(W,J.startTime-P)}}var ft=!1,D=-1,S=5,x=-1;function O(){return K?!0:!(s.unstable_now()-x<S)}function N(){if(K=!1,ft){var P=s.unstable_now();x=P;var J=!0;try{t:{X=!1,Q&&(Q=!1,Tt(D),D=-1),L=!0;var ot=I;try{e:{for(pt(P),C=i(g);C!==null&&!(C.expirationTime>P&&O());){var _t=C.callback;if(typeof _t=="function"){C.callback=null,I=C.priorityLevel;var Ct=_t(C.expirationTime<=P);if(P=s.unstable_now(),typeof Ct=="function"){C.callback=Ct,pt(P),J=!0;break e}C===i(g)&&r(g),pt(P)}else r(g);C=i(g)}if(C!==null)J=!0;else{var V=i(y);V!==null&&rt(W,V.startTime-P),J=!1}}break t}finally{C=null,I=ot,L=!1}J=void 0}}finally{J?w():ft=!1}}}var w;if(typeof it=="function")w=function(){it(N)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,yt=R.port2;R.port1.onmessage=N,w=function(){yt.postMessage(null)}}else w=function(){ct(N,0)};function rt(P,J){D=ct(function(){P(s.unstable_now())},J)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(P){P.callback=null},s.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<P?Math.floor(1e3/P):5},s.unstable_getCurrentPriorityLevel=function(){return I},s.unstable_next=function(P){switch(I){case 1:case 2:case 3:var J=3;break;default:J=I}var ot=I;I=J;try{return P()}finally{I=ot}},s.unstable_requestPaint=function(){K=!0},s.unstable_runWithPriority=function(P,J){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ot=I;I=P;try{return J()}finally{I=ot}},s.unstable_scheduleCallback=function(P,J,ot){var _t=s.unstable_now();switch(typeof ot=="object"&&ot!==null?(ot=ot.delay,ot=typeof ot=="number"&&0<ot?_t+ot:_t):ot=_t,P){case 1:var Ct=-1;break;case 2:Ct=250;break;case 5:Ct=1073741823;break;case 4:Ct=1e4;break;default:Ct=5e3}return Ct=ot+Ct,P={id:b++,callback:J,priorityLevel:P,startTime:ot,expirationTime:Ct,sortIndex:-1},ot>_t?(P.sortIndex=ot,t(y,P),i(g)===null&&P===i(y)&&(Q?(Tt(D),D=-1):Q=!0,rt(W,ot-_t))):(P.sortIndex=Ct,t(g,P),X||L||(X=!0,ft||(ft=!0,w()))),P},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(P){var J=I;return function(){var ot=I;I=J;try{return P.apply(this,arguments)}finally{I=ot}}}})($d)),$d}var hv;function JS(){return hv||(hv=1,Xd.exports=WS()),Xd.exports}var Zd={exports:{}},rn={};var fv;function tA(){if(fv)return rn;fv=1;var s=Bm();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,b){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:C==null?null:""+C,children:g,containerInfo:y,implementation:b}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,rn.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return u(g,y,null,b)},rn.flushSync=function(g){var y=f.T,b=r.p;try{if(f.T=null,r.p=2,g)return g()}finally{f.T=y,r.p=b,r.d.f()}},rn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},rn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},rn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,C=m(b,y.crossOrigin),I=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:C,integrity:I,fetchPriority:L}):b==="script"&&r.d.X(g,{crossOrigin:C,integrity:I,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},rn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=m(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},rn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,C=m(b,y.crossOrigin);r.d.L(g,b,{crossOrigin:C,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},rn.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=m(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},rn.requestFormReset=function(g){r.d.r(g)},rn.unstable_batchedUpdates=function(g,y){return g(y)},rn.useFormState=function(g,y,b){return f.H.useFormState(g,y,b)},rn.useFormStatus=function(){return f.H.useHostTransitionStatus()},rn.version="19.2.3",rn}var dv;function eA(){if(dv)return Zd.exports;dv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Zd.exports=tA(),Zd.exports}var mv;function nA(){if(mv)return Rl;mv=1;var s=JS(),t=Bm(),i=eA();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(r(188))}function y(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,o=n;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),e;if(d===o)return g(h),n;d=d.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=d;else{for(var _=!1,T=h.child;T;){if(T===a){_=!0,a=h,o=d;break}if(T===o){_=!0,o=h,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,o=h;break}if(T===o){_=!0,o=d,a=h;break}T=T.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function b(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=b(e),n!==null)return n;e=e.sibling}return null}var C=Object.assign,I=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),ct=Symbol.for("react.profiler"),Tt=Symbol.for("react.consumer"),it=Symbol.for("react.context"),pt=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),ft=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function w(e){return e===null||typeof e!="object"?null:(e=N&&e[N]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function yt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q:return"Fragment";case ct:return"Profiler";case K:return"StrictMode";case W:return"Suspense";case ft:return"SuspenseList";case x:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case X:return"Portal";case it:return e.displayName||"Context";case Tt:return(e._context.displayName||"Context")+".Consumer";case pt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return n=e.displayName||null,n!==null?n:yt(e.type)||"Memo";case S:n=e._payload,e=e._init;try{return yt(e(n))}catch{}}return null}var rt=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},_t=[],Ct=-1;function V(e){return{current:e}}function H(e){0>Ct||(e.current=_t[Ct],_t[Ct]=null,Ct--)}function nt(e,n){Ct++,_t[Ct]=e.current,e.current=n}var ut=V(null),st=V(null),at=V(null),vt=V(null);function Gt(e,n){switch(nt(at,n),nt(st,e),nt(ut,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?x_(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=x_(n),e=D_(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(ut),nt(ut,e)}function Mt(){H(ut),H(st),H(at)}function we(e){e.memoizedState!==null&&nt(vt,e);var n=ut.current,a=D_(n,e.type);n!==a&&(nt(st,e),nt(ut,a))}function Re(e){st.current===e&&(H(ut),H(st)),vt.current===e&&(H(vt),Tl._currentValue=ot)}var nn,Ge;function An(e){if(nn===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);nn=n&&n[1]||"",Ge=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nn+e+Ge}var jt=!1;function sn(e,n){if(!e||jt)return"";jt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(G){var q=G}Reflect.construct(e,[],tt)}else{try{tt.call()}catch(G){q=G}e.call(tt.prototype)}}else{try{throw Error()}catch(G){q=G}(tt=e())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(G){if(G&&q&&typeof G.stack=="string")return[G.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var k=_.split(`
`),B=T.split(`
`);for(h=o=0;o<k.length&&!k[o].includes("DetermineComponentFrameRoot");)o++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(o===k.length||h===B.length)for(o=k.length-1,h=B.length-1;1<=o&&0<=h&&k[o]!==B[h];)h--;for(;1<=o&&0<=h;o--,h--)if(k[o]!==B[h]){if(o!==1||h!==1)do if(o--,h--,0>h||k[o]!==B[h]){var Y=`
`+k[o].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=o&&0<=h);break}}}finally{jt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?An(a):""}function Ke(e,n){switch(e.tag){case 26:case 27:case 5:return An(e.type);case 16:return An("Lazy");case 13:return e.child!==n&&n!==null?An("Suspense Fallback"):An("Suspense");case 19:return An("SuspenseList");case 0:case 15:return sn(e.type,!1);case 11:return sn(e.type.render,!1);case 1:return sn(e.type,!0);case 31:return An("Activity");default:return""}}function wn(e){try{var n="",a=null;do n+=Ke(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var de=Object.prototype.hasOwnProperty,Pe=s.unstable_scheduleCallback,Es=s.unstable_cancelCallback,Yh=s.unstable_shouldYield,fu=s.unstable_requestPaint,cn=s.unstable_now,br=s.unstable_getCurrentPriorityLevel,Ao=s.unstable_ImmediatePriority,wo=s.unstable_UserBlockingPriority,Ts=s.unstable_NormalPriority,Qh=s.unstable_LowPriority,du=s.unstable_IdlePriority,mu=s.log,pu=s.unstable_setDisableYieldValue,Wn=null,Ye=null;function Ln(e){if(typeof mu=="function"&&pu(e),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Wn,e)}catch{}}var _e=Math.clz32?Math.clz32:yu,gu=Math.log,ua=Math.LN2;function yu(e){return e>>>=0,e===0?32:31-(gu(e)/ua|0)|0}var di=256,Sr=262144,Ce=4194304;function mi(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function pi(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,d=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var T=o&134217727;return T!==0?(o=T&~d,o!==0?h=mi(o):(_&=T,_!==0?h=mi(_):a||(a=T&~e,a!==0&&(h=mi(a))))):(T=o&~d,T!==0?h=mi(T):_!==0?h=mi(_):a||(a=o&~e,a!==0&&(h=mi(a)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:h}function Jn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Xh(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _u(){var e=Ce;return Ce<<=1,(Ce&62914560)===0&&(Ce=4194304),e}function gi(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Ar(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function $h(e,n,a,o,h,d){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var T=e.entanglements,k=e.expirationTimes,B=e.hiddenUpdates;for(a=_&~a;0<a;){var Y=31-_e(a),tt=1<<Y;T[Y]=0,k[Y]=-1;var q=B[Y];if(q!==null)for(B[Y]=null,Y=0;Y<q.length;Y++){var G=q[Y];G!==null&&(G.lane&=-536870913)}a&=~tt}o!==0&&wr(e,o,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(_&~n))}function wr(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-_e(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function Ro(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-_e(a),h=1<<o;h&n|e[o]&n&&(e[o]|=n),a&=~h}}function Co(e,n){var a=n&-n;return a=(a&42)!==0?1:Rr(a),(a&(e.suspendedLanes|n))!==0?0:a}function Rr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Gi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function vu(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:J_(e.type))}function ti(e,n){var a=J.p;try{return J.p=e,n()}finally{J.p=a}}var ei=Math.random().toString(36).slice(2),Ie="__reactFiber$"+ei,Be="__reactProps$"+ei,yi="__reactContainer$"+ei,ca="__reactEvents$"+ei,Zh="__reactListeners$"+ei,Eu="__reactHandles$"+ei,Tu="__reactResources$"+ei,_i="__reactMarker$"+ei;function ha(e){delete e[Ie],delete e[Be],delete e[ca],delete e[Zh],delete e[Eu]}function vi(e){var n=e[Ie];if(n)return n;for(var a=e.parentNode;a;){if(n=a[yi]||a[Ie]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=L_(e);e!==null;){if(a=e[Ie])return a;e=L_(e)}return n}e=a,a=e.parentNode}return null}function Pn(e){if(e=e[Ie]||e[yi]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Rn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function Ei(e){var n=e[Tu];return n||(n=e[Tu]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function xe(e){e[_i]=!0}var Io=new Set,xo={};function Ti(e,n){bi(e,n),bi(e+"Capture",n)}function bi(e,n){for(xo[e]=n,e=0;e<n.length;e++)Io.add(n[e])}var Do=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),No={},Oo={};function bu(e){return de.call(Oo,e)?!0:de.call(No,e)?!1:Do.test(e)?Oo[e]=!0:(No[e]=!0,!1)}function fa(e,n,a){if(bu(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Cn(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function De(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function qe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bs(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ko(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Wt(e){if(!e._valueTracker){var n=bs(e)?"checked":"value";e._valueTracker=ko(e,n,""+e[n])}}function Cr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=bs(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function Si(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ir=/[\n"\\]/g;function pn(e){return e.replace(Ir,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function da(e,n,a,o,h,d,_,T){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),n!=null?_==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+qe(n)):e.value!==""+qe(n)&&(e.value=""+qe(n)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),n!=null?Vo(e,_,qe(n)):a!=null?Vo(e,_,qe(a)):o!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+qe(T):e.removeAttribute("name")}function Su(e,n,a,o,h,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){Wt(e);return}a=a!=null?""+qe(a):"",n=n!=null?""+qe(n):a,T||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=T?e.checked:!!o,e.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),Wt(e)}function Vo(e,n,a){n==="number"&&Si(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ss(e,n,a,o){if(e=e.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=n.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+qe(a),n=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function Au(e,n,a){if(n!=null&&(n=""+qe(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+qe(a):""}function As(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(r(92));if(rt(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=qe(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),Wt(e)}function gn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var wu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mo(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||wu.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function jo(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&Mo(e,h,o)}else for(var d in n)n.hasOwnProperty(d)&&Mo(e,d,n[d])}function ma(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ru=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ws=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pa(e){return ws.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ni(){}var Lo=null;function Un(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rs=null,Ai=null;function xr(e){var n=Pn(e);if(n&&(e=n.stateNode)){var a=e[Be]||null;t:switch(e=n.stateNode,n.type){case"input":if(da(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var h=o[Be]||null;if(!h)throw Error(r(90));da(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&Cr(o)}break t;case"textarea":Au(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Ss(e,!!a.multiple,n,!1)}}}var ga=!1;function Cs(e,n,a){if(ga)return e(n,a);ga=!0;try{var o=e(n);return o}finally{if(ga=!1,(Rs!==null||Ai!==null)&&(vc(),Rs&&(n=Rs,e=Ai,Ai=Rs=null,xr(n),e)))for(n=0;n<e.length;n++)xr(e[n])}}function ii(e,n){var a=e.stateNode;if(a===null)return null;var o=a[Be]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dr=!1;if(zn)try{var ee={};Object.defineProperty(ee,"passive",{get:function(){Dr=!0}}),window.addEventListener("test",ee,ee),window.removeEventListener("test",ee,ee)}catch{Dr=!1}var wi=null,Po=null,Nr=null;function Uo(){if(Nr)return Nr;var e,n=Po,a=n.length,o,h="value"in wi?wi.value:wi.textContent,d=h.length;for(e=0;e<a&&n[e]===h[e];e++);var _=a-e;for(o=1;o<=_&&n[a-o]===h[d-o];o++);return Nr=h.slice(e,1<o?1-o:void 0)}function Or(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ki(){return!0}function si(){return!1}function Qe(e){function n(a,o,h,d,_){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(a=e[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ki:si,this.isPropagationStopped=si,this}return C(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),n}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ri=Qe(Yi),Is=C({},Yi,{view:0,detail:0}),zo=Qe(Is),xs,ya,Ci,_a=C({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ci&&(Ci&&e.type==="mousemove"?(xs=e.screenX-Ci.screenX,ya=e.screenY-Ci.screenY):ya=xs=0,Ci=e),xs)},movementY:function(e){return"movementY"in e?e.movementY:ya}}),Bo=Qe(_a),kr=C({},_a,{dataTransfer:0}),Cu=Qe(kr),Iu=C({},Is,{relatedTarget:0}),Vr=Qe(Iu),qo=C({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),xu=Qe(qo),va=C({},Yi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Du=Qe(va),Nu=C({},Yi,{data:0}),Ii=Qe(Nu),Ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ku={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mu(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Vu[e])?!!n[e]:!1}function Ds(){return Mu}var hn=C({},Is,{key:function(e){if(e.key){var n=Ou[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Or(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ku[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(e){return e.type==="keypress"?Or(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Or(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ju=Qe(hn),Lu=C({},_a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qi=Qe(Lu),c=C({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),p=Qe(c),v=C({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Qe(v),U=C({},_a,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),F=Qe(U),lt=C({},Yi,{newState:0,oldState:0}),Ot=Qe(lt),ve=[9,13,27,32],Xt=zn&&"CompositionEvent"in window,ce=null;zn&&"documentMode"in document&&(ce=document.documentMode);var Bn=zn&&"TextEvent"in window&&!ce,xi=zn&&(!Xt||ce&&8<ce&&11>=ce),ri=" ",ai=!1;function Mr(e,n){switch(e){case"keyup":return ve.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ea(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ta=!1;function vb(e,n){switch(e){case"compositionend":return Ea(n);case"keypress":return n.which!==32?null:(ai=!0,ri);case"textInput":return e=n.data,e===ri&&ai?null:e;default:return null}}function Eb(e,n){if(Ta)return e==="compositionend"||!Xt&&Mr(e,n)?(e=Uo(),Nr=Po=wi=null,Ta=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return xi&&n.locale!=="ko"?null:n.data;default:return null}}var Tb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zp(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Tb[e.type]:n==="textarea"}function Bp(e,n,a,o){Rs?Ai?Ai.push(o):Ai=[o]:Rs=o,n=Rc(n,"onChange"),0<n.length&&(a=new Ri("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var Ho=null,Fo=null;function bb(e){S_(e,0)}function Pu(e){var n=Rn(e);if(Cr(n))return e}function qp(e,n){if(e==="change")return n}var Hp=!1;if(zn){var Wh;if(zn){var Jh="oninput"in document;if(!Jh){var Fp=document.createElement("div");Fp.setAttribute("oninput","return;"),Jh=typeof Fp.oninput=="function"}Wh=Jh}else Wh=!1;Hp=Wh&&(!document.documentMode||9<document.documentMode)}function Gp(){Ho&&(Ho.detachEvent("onpropertychange",Kp),Fo=Ho=null)}function Kp(e){if(e.propertyName==="value"&&Pu(Fo)){var n=[];Bp(n,Fo,e,Un(e)),Cs(bb,n)}}function Sb(e,n,a){e==="focusin"?(Gp(),Ho=n,Fo=a,Ho.attachEvent("onpropertychange",Kp)):e==="focusout"&&Gp()}function Ab(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pu(Fo)}function wb(e,n){if(e==="click")return Pu(n)}function Rb(e,n){if(e==="input"||e==="change")return Pu(n)}function Cb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var In=typeof Object.is=="function"?Object.is:Cb;function Go(e,n){if(In(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!de.call(n,h)||!In(e[h],n[h]))return!1}return!0}function Yp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qp(e,n){var a=Yp(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Yp(a)}}function Xp(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Xp(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function $p(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Si(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Si(e.document)}return n}function tf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Ib=zn&&"documentMode"in document&&11>=document.documentMode,ba=null,ef=null,Ko=null,nf=!1;function Zp(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nf||ba==null||ba!==Si(o)||(o=ba,"selectionStart"in o&&tf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ko&&Go(Ko,o)||(Ko=o,o=Rc(ef,"onSelect"),0<o.length&&(n=new Ri("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=ba)))}function jr(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Sa={animationend:jr("Animation","AnimationEnd"),animationiteration:jr("Animation","AnimationIteration"),animationstart:jr("Animation","AnimationStart"),transitionrun:jr("Transition","TransitionRun"),transitionstart:jr("Transition","TransitionStart"),transitioncancel:jr("Transition","TransitionCancel"),transitionend:jr("Transition","TransitionEnd")},sf={},Wp={};zn&&(Wp=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function Lr(e){if(sf[e])return sf[e];if(!Sa[e])return e;var n=Sa[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Wp)return sf[e]=n[a];return e}var Jp=Lr("animationend"),tg=Lr("animationiteration"),eg=Lr("animationstart"),xb=Lr("transitionrun"),Db=Lr("transitionstart"),Nb=Lr("transitioncancel"),ng=Lr("transitionend"),ig=new Map,rf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rf.push("scrollEnd");function oi(e,n){ig.set(e,n),Ti(n,[e])}var Uu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},qn=[],Aa=0,af=0;function zu(){for(var e=Aa,n=af=Aa=0;n<e;){var a=qn[n];qn[n++]=null;var o=qn[n];qn[n++]=null;var h=qn[n];qn[n++]=null;var d=qn[n];if(qn[n++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}d!==0&&sg(a,h,d)}}function Bu(e,n,a,o){qn[Aa++]=e,qn[Aa++]=n,qn[Aa++]=a,qn[Aa++]=o,af|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function of(e,n,a,o){return Bu(e,n,a,o),qu(e)}function Pr(e,n){return Bu(e,null,null,n),qu(e)}function sg(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&n!==null&&(h=31-_e(a),e=d.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=a|536870912),d):null}function qu(e){if(50<ml)throw ml=0,gd=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var wa={};function Ob(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(e,n,a,o){return new Ob(e,n,a,o)}function lf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xi(e,n){var a=e.alternate;return a===null?(a=xn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function rg(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Hu(e,n,a,o,h,d){var _=0;if(o=e,typeof e=="function")lf(e)&&(_=1);else if(typeof e=="string")_=LS(e,a,ut.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case x:return e=xn(31,a,n,h),e.elementType=x,e.lanes=d,e;case Q:return Ur(a.children,h,d,n);case K:_=8,h|=24;break;case ct:return e=xn(12,a,n,h|2),e.elementType=ct,e.lanes=d,e;case W:return e=xn(13,a,n,h),e.elementType=W,e.lanes=d,e;case ft:return e=xn(19,a,n,h),e.elementType=ft,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case it:_=10;break t;case Tt:_=9;break t;case pt:_=11;break t;case D:_=14;break t;case S:_=16,o=null;break t}_=29,a=Error(r(130,e===null?"null":typeof e,"")),o=null}return n=xn(_,a,n,h),n.elementType=e,n.type=o,n.lanes=d,n}function Ur(e,n,a,o){return e=xn(7,e,o,n),e.lanes=a,e}function uf(e,n,a){return e=xn(6,e,null,n),e.lanes=a,e}function ag(e){var n=xn(18,null,null,0);return n.stateNode=e,n}function cf(e,n,a){return n=xn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var og=new WeakMap;function Hn(e,n){if(typeof e=="object"&&e!==null){var a=og.get(e);return a!==void 0?a:(n={value:e,source:n,stack:wn(n)},og.set(e,n),n)}return{value:e,source:n,stack:wn(n)}}var Ra=[],Ca=0,Fu=null,Yo=0,Fn=[],Gn=0,Ns=null,Di=1,Ni="";function $i(e,n){Ra[Ca++]=Yo,Ra[Ca++]=Fu,Fu=e,Yo=n}function lg(e,n,a){Fn[Gn++]=Di,Fn[Gn++]=Ni,Fn[Gn++]=Ns,Ns=e;var o=Di;e=Ni;var h=32-_e(o)-1;o&=~(1<<h),a+=1;var d=32-_e(n)+h;if(30<d){var _=h-h%5;d=(o&(1<<_)-1).toString(32),o>>=_,h-=_,Di=1<<32-_e(n)+h|a<<h|o,Ni=d+e}else Di=1<<d|a<<h|o,Ni=e}function hf(e){e.return!==null&&($i(e,1),lg(e,1,0))}function ff(e){for(;e===Fu;)Fu=Ra[--Ca],Ra[Ca]=null,Yo=Ra[--Ca],Ra[Ca]=null;for(;e===Ns;)Ns=Fn[--Gn],Fn[Gn]=null,Ni=Fn[--Gn],Fn[Gn]=null,Di=Fn[--Gn],Fn[Gn]=null}function ug(e,n){Fn[Gn++]=Di,Fn[Gn++]=Ni,Fn[Gn++]=Ns,Di=n.id,Ni=n.overflow,Ns=e}var Xe=null,oe=null,Ft=!1,Os=null,Kn=!1,df=Error(r(519));function ks(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qo(Hn(n,e)),df}function cg(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[Ie]=e,n[Be]=o,a){case"dialog":Pt("cancel",n),Pt("close",n);break;case"iframe":case"object":case"embed":Pt("load",n);break;case"video":case"audio":for(a=0;a<gl.length;a++)Pt(gl[a],n);break;case"source":Pt("error",n);break;case"img":case"image":case"link":Pt("error",n),Pt("load",n);break;case"details":Pt("toggle",n);break;case"input":Pt("invalid",n),Su(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Pt("invalid",n);break;case"textarea":Pt("invalid",n),As(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||C_(n.textContent,a)?(o.popover!=null&&(Pt("beforetoggle",n),Pt("toggle",n)),o.onScroll!=null&&Pt("scroll",n),o.onScrollEnd!=null&&Pt("scrollend",n),o.onClick!=null&&(n.onclick=ni),n=!0):n=!1,n||ks(e,!0)}function hg(e){for(Xe=e.return;Xe;)switch(Xe.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:Xe=Xe.return}}function Ia(e){if(e!==Xe)return!1;if(!Ft)return hg(e),Ft=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Nd(e.type,e.memoizedProps)),a=!a),a&&oe&&ks(e),hg(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));oe=j_(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));oe=j_(e)}else n===27?(n=oe,Ys(e.type)?(e=jd,jd=null,oe=e):oe=n):oe=Xe?Qn(e.stateNode.nextSibling):null;return!0}function zr(){oe=Xe=null,Ft=!1}function mf(){var e=Os;return e!==null&&(En===null?En=e:En.push.apply(En,e),Os=null),e}function Qo(e){Os===null?Os=[e]:Os.push(e)}var pf=V(null),Br=null,Zi=null;function Vs(e,n,a){nt(pf,n._currentValue),n._currentValue=a}function Wi(e){e._currentValue=pf.current,H(pf)}function gf(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function yf(e,n,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=h;for(var k=0;k<n.length;k++)if(T.context===n[k]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),gf(d.return,a,e),o||(_=null);break t}d=T.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),gf(_,a,e),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===e){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function xa(e,n,a,o){e=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=h.type;In(h.pendingProps.value,_.value)||(e!==null?e.push(T):e=[T])}}else if(h===vt.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Tl):e=[Tl])}h=h.return}e!==null&&yf(n,e,a,o),n.flags|=262144}function Gu(e){for(e=e.firstContext;e!==null;){if(!In(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function qr(e){Br=e,Zi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $e(e){return fg(Br,e)}function Ku(e,n){return Br===null&&qr(e),fg(e,n)}function fg(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Zi===null){if(e===null)throw Error(r(308));Zi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Zi=Zi.next=n;return a}var kb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Vb=s.unstable_scheduleCallback,Mb=s.unstable_NormalPriority,Ne={$$typeof:it,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _f(){return{controller:new kb,data:new Map,refCount:0}}function Xo(e){e.refCount--,e.refCount===0&&Vb(Mb,function(){e.controller.abort()})}var $o=null,vf=0,Da=0,Na=null;function jb(e,n){if($o===null){var a=$o=[];vf=0,Da=bd(),Na={status:"pending",value:void 0,then:function(o){a.push(o)}}}return vf++,n.then(dg,dg),n}function dg(){if(--vf===0&&$o!==null){Na!==null&&(Na.status="fulfilled");var e=$o;$o=null,Da=0,Na=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Lb(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var mg=P.S;P.S=function(e,n){Zy=cn(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&jb(e,n),mg!==null&&mg(e,n)};var Hr=V(null);function Ef(){var e=Hr.current;return e!==null?e:re.pooledCache}function Yu(e,n){n===null?nt(Hr,Hr.current):nt(Hr,n.pool)}function pg(){var e=Ef();return e===null?null:{parent:Ne._currentValue,pool:e}}var Oa=Error(r(460)),Tf=Error(r(474)),Qu=Error(r(542)),Xu={then:function(){}};function gg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function yg(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(ni,ni),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,vg(e),e;default:if(typeof n.status=="string")n.then(ni,ni);else{if(e=re,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,vg(e),e}throw Gr=n,Oa}}function Fr(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Gr=a,Oa):a}}var Gr=null;function _g(){if(Gr===null)throw Error(r(459));var e=Gr;return Gr=null,e}function vg(e){if(e===Oa||e===Qu)throw Error(r(483))}var ka=null,Zo=0;function $u(e){var n=Zo;return Zo+=1,ka===null&&(ka=[]),yg(ka,e,n)}function Wo(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Zu(e,n){throw n.$$typeof===I?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Eg(e){function n(j,M){if(e){var z=j.deletions;z===null?(j.deletions=[M],j.flags|=16):z.push(M)}}function a(j,M){if(!e)return null;for(;M!==null;)n(j,M),M=M.sibling;return null}function o(j){for(var M=new Map;j!==null;)j.key!==null?M.set(j.key,j):M.set(j.index,j),j=j.sibling;return M}function h(j,M){return j=Xi(j,M),j.index=0,j.sibling=null,j}function d(j,M,z){return j.index=z,e?(z=j.alternate,z!==null?(z=z.index,z<M?(j.flags|=67108866,M):z):(j.flags|=67108866,M)):(j.flags|=1048576,M)}function _(j){return e&&j.alternate===null&&(j.flags|=67108866),j}function T(j,M,z,$){return M===null||M.tag!==6?(M=uf(z,j.mode,$),M.return=j,M):(M=h(M,z),M.return=j,M)}function k(j,M,z,$){var bt=z.type;return bt===Q?Y(j,M,z.props.children,$,z.key):M!==null&&(M.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===S&&Fr(bt)===M.type)?(M=h(M,z.props),Wo(M,z),M.return=j,M):(M=Hu(z.type,z.key,z.props,null,j.mode,$),Wo(M,z),M.return=j,M)}function B(j,M,z,$){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=cf(z,j.mode,$),M.return=j,M):(M=h(M,z.children||[]),M.return=j,M)}function Y(j,M,z,$,bt){return M===null||M.tag!==7?(M=Ur(z,j.mode,$,bt),M.return=j,M):(M=h(M,z),M.return=j,M)}function tt(j,M,z){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=uf(""+M,j.mode,z),M.return=j,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case L:return z=Hu(M.type,M.key,M.props,null,j.mode,z),Wo(z,M),z.return=j,z;case X:return M=cf(M,j.mode,z),M.return=j,M;case S:return M=Fr(M),tt(j,M,z)}if(rt(M)||w(M))return M=Ur(M,j.mode,z,null),M.return=j,M;if(typeof M.then=="function")return tt(j,$u(M),z);if(M.$$typeof===it)return tt(j,Ku(j,M),z);Zu(j,M)}return null}function q(j,M,z,$){var bt=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return bt!==null?null:T(j,M,""+z,$);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case L:return z.key===bt?k(j,M,z,$):null;case X:return z.key===bt?B(j,M,z,$):null;case S:return z=Fr(z),q(j,M,z,$)}if(rt(z)||w(z))return bt!==null?null:Y(j,M,z,$,null);if(typeof z.then=="function")return q(j,M,$u(z),$);if(z.$$typeof===it)return q(j,M,Ku(j,z),$);Zu(j,z)}return null}function G(j,M,z,$,bt){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return j=j.get(z)||null,T(M,j,""+$,bt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case L:return j=j.get($.key===null?z:$.key)||null,k(M,j,$,bt);case X:return j=j.get($.key===null?z:$.key)||null,B(M,j,$,bt);case S:return $=Fr($),G(j,M,z,$,bt)}if(rt($)||w($))return j=j.get(z)||null,Y(M,j,$,bt,null);if(typeof $.then=="function")return G(j,M,z,$u($),bt);if($.$$typeof===it)return G(j,M,z,Ku(M,$),bt);Zu(M,$)}return null}function gt(j,M,z,$){for(var bt=null,Yt=null,Et=M,Vt=M=0,zt=null;Et!==null&&Vt<z.length;Vt++){Et.index>Vt?(zt=Et,Et=null):zt=Et.sibling;var Qt=q(j,Et,z[Vt],$);if(Qt===null){Et===null&&(Et=zt);break}e&&Et&&Qt.alternate===null&&n(j,Et),M=d(Qt,M,Vt),Yt===null?bt=Qt:Yt.sibling=Qt,Yt=Qt,Et=zt}if(Vt===z.length)return a(j,Et),Ft&&$i(j,Vt),bt;if(Et===null){for(;Vt<z.length;Vt++)Et=tt(j,z[Vt],$),Et!==null&&(M=d(Et,M,Vt),Yt===null?bt=Et:Yt.sibling=Et,Yt=Et);return Ft&&$i(j,Vt),bt}for(Et=o(Et);Vt<z.length;Vt++)zt=G(Et,j,Vt,z[Vt],$),zt!==null&&(e&&zt.alternate!==null&&Et.delete(zt.key===null?Vt:zt.key),M=d(zt,M,Vt),Yt===null?bt=zt:Yt.sibling=zt,Yt=zt);return e&&Et.forEach(function(Ws){return n(j,Ws)}),Ft&&$i(j,Vt),bt}function At(j,M,z,$){if(z==null)throw Error(r(151));for(var bt=null,Yt=null,Et=M,Vt=M=0,zt=null,Qt=z.next();Et!==null&&!Qt.done;Vt++,Qt=z.next()){Et.index>Vt?(zt=Et,Et=null):zt=Et.sibling;var Ws=q(j,Et,Qt.value,$);if(Ws===null){Et===null&&(Et=zt);break}e&&Et&&Ws.alternate===null&&n(j,Et),M=d(Ws,M,Vt),Yt===null?bt=Ws:Yt.sibling=Ws,Yt=Ws,Et=zt}if(Qt.done)return a(j,Et),Ft&&$i(j,Vt),bt;if(Et===null){for(;!Qt.done;Vt++,Qt=z.next())Qt=tt(j,Qt.value,$),Qt!==null&&(M=d(Qt,M,Vt),Yt===null?bt=Qt:Yt.sibling=Qt,Yt=Qt);return Ft&&$i(j,Vt),bt}for(Et=o(Et);!Qt.done;Vt++,Qt=z.next())Qt=G(Et,j,Vt,Qt.value,$),Qt!==null&&(e&&Qt.alternate!==null&&Et.delete(Qt.key===null?Vt:Qt.key),M=d(Qt,M,Vt),Yt===null?bt=Qt:Yt.sibling=Qt,Yt=Qt);return e&&Et.forEach(function(QS){return n(j,QS)}),Ft&&$i(j,Vt),bt}function se(j,M,z,$){if(typeof z=="object"&&z!==null&&z.type===Q&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case L:t:{for(var bt=z.key;M!==null;){if(M.key===bt){if(bt=z.type,bt===Q){if(M.tag===7){a(j,M.sibling),$=h(M,z.props.children),$.return=j,j=$;break t}}else if(M.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===S&&Fr(bt)===M.type){a(j,M.sibling),$=h(M,z.props),Wo($,z),$.return=j,j=$;break t}a(j,M);break}else n(j,M);M=M.sibling}z.type===Q?($=Ur(z.props.children,j.mode,$,z.key),$.return=j,j=$):($=Hu(z.type,z.key,z.props,null,j.mode,$),Wo($,z),$.return=j,j=$)}return _(j);case X:t:{for(bt=z.key;M!==null;){if(M.key===bt)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){a(j,M.sibling),$=h(M,z.children||[]),$.return=j,j=$;break t}else{a(j,M);break}else n(j,M);M=M.sibling}$=cf(z,j.mode,$),$.return=j,j=$}return _(j);case S:return z=Fr(z),se(j,M,z,$)}if(rt(z))return gt(j,M,z,$);if(w(z)){if(bt=w(z),typeof bt!="function")throw Error(r(150));return z=bt.call(z),At(j,M,z,$)}if(typeof z.then=="function")return se(j,M,$u(z),$);if(z.$$typeof===it)return se(j,M,Ku(j,z),$);Zu(j,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,M!==null&&M.tag===6?(a(j,M.sibling),$=h(M,z),$.return=j,j=$):(a(j,M),$=uf(z,j.mode,$),$.return=j,j=$),_(j)):a(j,M)}return function(j,M,z,$){try{Zo=0;var bt=se(j,M,z,$);return ka=null,bt}catch(Et){if(Et===Oa||Et===Qu)throw Et;var Yt=xn(29,Et,null,j.mode);return Yt.lanes=$,Yt.return=j,Yt}}}var Kr=Eg(!0),Tg=Eg(!1),Ms=!1;function bf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function js(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ls(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,($t&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=qu(e),sg(e,null,a),n}return Bu(e,o,n,a),qu(e)}function Jo(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Ro(e,a)}}function Af(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=n:d=d.next=n}else h=d=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var wf=!1;function tl(){if(wf){var e=Na;if(e!==null)throw e}}function el(e,n,a,o){wf=!1;var h=e.updateQueue;Ms=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var k=T,B=k.next;k.next=null,_===null?d=B:_.next=B,_=k;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,T=Y.lastBaseUpdate,T!==_&&(T===null?Y.firstBaseUpdate=B:T.next=B,Y.lastBaseUpdate=k))}if(d!==null){var tt=h.baseState;_=0,Y=B=k=null,T=d;do{var q=T.lane&-536870913,G=q!==T.lane;if(G?(Ut&q)===q:(o&q)===q){q!==0&&q===Da&&(wf=!0),Y!==null&&(Y=Y.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var gt=e,At=T;q=n;var se=a;switch(At.tag){case 1:if(gt=At.payload,typeof gt=="function"){tt=gt.call(se,tt,q);break t}tt=gt;break t;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=At.payload,q=typeof gt=="function"?gt.call(se,tt,q):gt,q==null)break t;tt=C({},tt,q);break t;case 2:Ms=!0}}q=T.callback,q!==null&&(e.flags|=64,G&&(e.flags|=8192),G=h.callbacks,G===null?h.callbacks=[q]:G.push(q))}else G={lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Y===null?(B=Y=G,k=tt):Y=Y.next=G,_|=q;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;G=T,T=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);Y===null&&(k=tt),h.baseState=k,h.firstBaseUpdate=B,h.lastBaseUpdate=Y,d===null&&(h.shared.lanes=0),qs|=_,e.lanes=_,e.memoizedState=tt}}function bg(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function Sg(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)bg(a[e],n)}var Va=V(null),Wu=V(0);function Ag(e,n){e=os,nt(Wu,e),nt(Va,n),os=e|n.baseLanes}function Rf(){nt(Wu,os),nt(Va,Va.current)}function Cf(){os=Wu.current,H(Va),H(Wu)}var Dn=V(null),Yn=null;function Ps(e){var n=e.alternate;nt(Ee,Ee.current&1),nt(Dn,e),Yn===null&&(n===null||Va.current!==null||n.memoizedState!==null)&&(Yn=e)}function If(e){nt(Ee,Ee.current),nt(Dn,e),Yn===null&&(Yn=e)}function wg(e){e.tag===22?(nt(Ee,Ee.current),nt(Dn,e),Yn===null&&(Yn=e)):Us()}function Us(){nt(Ee,Ee.current),nt(Dn,Dn.current)}function Nn(e){H(Dn),Yn===e&&(Yn=null),H(Ee)}var Ee=V(0);function Ju(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Vd(a)||Md(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ji=0,kt=null,ne=null,Oe=null,tc=!1,Ma=!1,Yr=!1,ec=0,nl=0,ja=null,Pb=0;function pe(){throw Error(r(321))}function xf(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!In(e[a],n[a]))return!1;return!0}function Df(e,n,a,o,h,d){return Ji=d,kt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,P.H=e===null||e.memoizedState===null?ly:Gf,Yr=!1,d=a(o,h),Yr=!1,Ma&&(d=Cg(n,a,o,h)),Rg(e),d}function Rg(e){P.H=rl;var n=ne!==null&&ne.next!==null;if(Ji=0,Oe=ne=kt=null,tc=!1,nl=0,ja=null,n)throw Error(r(300));e===null||ke||(e=e.dependencies,e!==null&&Gu(e)&&(ke=!0))}function Cg(e,n,a,o){kt=e;var h=0;do{if(Ma&&(ja=null),nl=0,Ma=!1,25<=h)throw Error(r(301));if(h+=1,Oe=ne=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}P.H=uy,d=n(a,o)}while(Ma);return d}function Ub(){var e=P.H,n=e.useState()[0];return n=typeof n.then=="function"?il(n):n,e=e.useState()[0],(ne!==null?ne.memoizedState:null)!==e&&(kt.flags|=1024),n}function Nf(){var e=ec!==0;return ec=0,e}function Of(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function kf(e){if(tc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}tc=!1}Ji=0,Oe=ne=kt=null,Ma=!1,nl=ec=0,ja=null}function fn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?kt.memoizedState=Oe=e:Oe=Oe.next=e,Oe}function Te(){if(ne===null){var e=kt.alternate;e=e!==null?e.memoizedState:null}else e=ne.next;var n=Oe===null?kt.memoizedState:Oe.next;if(n!==null)Oe=n,ne=e;else{if(e===null)throw kt.alternate===null?Error(r(467)):Error(r(310));ne=e,e={memoizedState:ne.memoizedState,baseState:ne.baseState,baseQueue:ne.baseQueue,queue:ne.queue,next:null},Oe===null?kt.memoizedState=Oe=e:Oe=Oe.next=e}return Oe}function nc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function il(e){var n=nl;return nl+=1,ja===null&&(ja=[]),e=yg(ja,e,n),n=kt,(Oe===null?n.memoizedState:Oe.next)===null&&(n=n.alternate,P.H=n===null||n.memoizedState===null?ly:Gf),e}function ic(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return il(e);if(e.$$typeof===it)return $e(e)}throw Error(r(438,String(e)))}function Vf(e){var n=null,a=kt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=kt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=nc(),kt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=O;return n.index++,a}function ts(e,n){return typeof n=="function"?n(e):n}function sc(e){var n=Te();return Mf(n,ne,e)}function Mf(e,n,a){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=e.baseQueue,d=o.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}n.baseQueue=h=d,o.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{n=h.next;var T=_=null,k=null,B=n,Y=!1;do{var tt=B.lane&-536870913;if(tt!==B.lane?(Ut&tt)===tt:(Ji&tt)===tt){var q=B.revertLane;if(q===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),tt===Da&&(Y=!0);else if((Ji&q)===q){B=B.next,q===Da&&(Y=!0);continue}else tt={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},k===null?(T=k=tt,_=d):k=k.next=tt,kt.lanes|=q,qs|=q;tt=B.action,Yr&&a(d,tt),d=B.hasEagerState?B.eagerState:a(d,tt)}else q={lane:tt,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},k===null?(T=k=q,_=d):k=k.next=q,kt.lanes|=tt,qs|=tt;B=B.next}while(B!==null&&B!==n);if(k===null?_=d:k.next=T,!In(d,e.memoizedState)&&(ke=!0,Y&&(a=Na,a!==null)))throw a;e.memoizedState=d,e.baseState=_,e.baseQueue=k,o.lastRenderedState=d}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function jf(e){var n=Te(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,d=n.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=e(d,_.action),_=_.next;while(_!==h);In(d,n.memoizedState)||(ke=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,o]}function Ig(e,n,a){var o=kt,h=Te(),d=Ft;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=n();var _=!In((ne||h).memoizedState,a);if(_&&(h.memoizedState=a,ke=!0),h=h.queue,Uf(Ng.bind(null,o,h,e),[e]),h.getSnapshot!==n||_||Oe!==null&&Oe.memoizedState.tag&1){if(o.flags|=2048,La(9,{destroy:void 0},Dg.bind(null,o,h,a,n),null),re===null)throw Error(r(349));d||(Ji&127)!==0||xg(o,n,a)}return a}function xg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=kt.updateQueue,n===null?(n=nc(),kt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Dg(e,n,a,o){n.value=a,n.getSnapshot=o,Og(n)&&kg(e)}function Ng(e,n,a){return a(function(){Og(n)&&kg(e)})}function Og(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!In(e,a)}catch{return!0}}function kg(e){var n=Pr(e,2);n!==null&&Tn(n,e,2)}function Lf(e){var n=fn();if(typeof e=="function"){var a=e;if(e=a(),Yr){Ln(!0);try{a()}finally{Ln(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:e},n}function Vg(e,n,a,o){return e.baseState=a,Mf(e,ne,typeof o=="function"?o:ts)}function zb(e,n,a,o,h){if(oc(e))throw Error(r(485));if(e=n.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};P.T!==null?a(!0):d.isTransition=!1,o(d),a=n.pending,a===null?(d.next=n.pending=d,Mg(n,d)):(d.next=a.next,n.pending=a.next=d)}}function Mg(e,n){var a=n.action,o=n.payload,h=e.state;if(n.isTransition){var d=P.T,_={};P.T=_;try{var T=a(h,o),k=P.S;k!==null&&k(_,T),jg(e,n,T)}catch(B){Pf(e,n,B)}finally{d!==null&&_.types!==null&&(d.types=_.types),P.T=d}}else try{d=a(h,o),jg(e,n,d)}catch(B){Pf(e,n,B)}}function jg(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Lg(e,n,o)},function(o){return Pf(e,n,o)}):Lg(e,n,a)}function Lg(e,n,a){n.status="fulfilled",n.value=a,Pg(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Mg(e,a)))}function Pf(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Pg(n),n=n.next;while(n!==o)}e.action=null}function Pg(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Ug(e,n){return n}function zg(e,n){if(Ft){var a=re.formState;if(a!==null){t:{var o=kt;if(Ft){if(oe){e:{for(var h=oe,d=Kn;h.nodeType!==8;){if(!d){h=null;break e}if(h=Qn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){oe=Qn(h.nextSibling),o=h.data==="F!";break t}}ks(o)}o=!1}o&&(n=a[0])}}return a=fn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ug,lastRenderedState:n},a.queue=o,a=ry.bind(null,kt,o),o.dispatch=a,o=Lf(!1),d=Ff.bind(null,kt,!1,o.queue),o=fn(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,a=zb.bind(null,kt,h,d,a),h.dispatch=a,o.memoizedState=e,[n,a,!1]}function Bg(e){var n=Te();return qg(n,ne,e)}function qg(e,n,a){if(n=Mf(e,n,Ug)[0],e=sc(ts)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=il(n)}catch(_){throw _===Oa?Qu:_}else o=n;n=Te();var h=n.queue,d=h.dispatch;return a!==n.memoizedState&&(kt.flags|=2048,La(9,{destroy:void 0},Bb.bind(null,h,a),null)),[o,d,e]}function Bb(e,n){e.action=n}function Hg(e){var n=Te(),a=ne;if(a!==null)return qg(n,a,e);Te(),n=n.memoizedState,a=Te();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function La(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=kt.updateQueue,n===null&&(n=nc(),kt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Fg(){return Te().memoizedState}function rc(e,n,a,o){var h=fn();kt.flags|=e,h.memoizedState=La(1|n,{destroy:void 0},a,o===void 0?null:o)}function ac(e,n,a,o){var h=Te();o=o===void 0?null:o;var d=h.memoizedState.inst;ne!==null&&o!==null&&xf(o,ne.memoizedState.deps)?h.memoizedState=La(n,d,a,o):(kt.flags|=e,h.memoizedState=La(1|n,d,a,o))}function Gg(e,n){rc(8390656,8,e,n)}function Uf(e,n){ac(2048,8,e,n)}function qb(e){kt.flags|=4;var n=kt.updateQueue;if(n===null)n=nc(),kt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Kg(e){var n=Te().memoizedState;return qb({ref:n,nextImpl:e}),function(){if(($t&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function Yg(e,n){return ac(4,2,e,n)}function Qg(e,n){return ac(4,4,e,n)}function Xg(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function $g(e,n,a){a=a!=null?a.concat([e]):null,ac(4,4,Xg.bind(null,n,e),a)}function zf(){}function Zg(e,n){var a=Te();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&xf(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Wg(e,n){var a=Te();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&xf(n,o[1]))return o[0];if(o=e(),Yr){Ln(!0);try{e()}finally{Ln(!1)}}return a.memoizedState=[o,n],o}function Bf(e,n,a){return a===void 0||(Ji&1073741824)!==0&&(Ut&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Jy(),kt.lanes|=e,qs|=e,a)}function Jg(e,n,a,o){return In(a,n)?a:Va.current!==null?(e=Bf(e,a,o),In(e,n)||(ke=!0),e):(Ji&42)===0||(Ji&1073741824)!==0&&(Ut&261930)===0?(ke=!0,e.memoizedState=a):(e=Jy(),kt.lanes|=e,qs|=e,n)}function ty(e,n,a,o,h){var d=J.p;J.p=d!==0&&8>d?d:8;var _=P.T,T={};P.T=T,Ff(e,!1,n,a);try{var k=h(),B=P.S;if(B!==null&&B(T,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Y=Lb(k,o);sl(e,n,Y,Vn(e))}else sl(e,n,o,Vn(e))}catch(tt){sl(e,n,{then:function(){},status:"rejected",reason:tt},Vn())}finally{J.p=d,_!==null&&T.types!==null&&(_.types=T.types),P.T=_}}function Hb(){}function qf(e,n,a,o){if(e.tag!==5)throw Error(r(476));var h=ey(e).queue;ty(e,h,n,ot,a===null?Hb:function(){return ny(e),a(o)})}function ey(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:ot},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function ny(e){var n=ey(e);n.next===null&&(n=e.alternate.memoizedState),sl(e,n.next.queue,{},Vn())}function Hf(){return $e(Tl)}function iy(){return Te().memoizedState}function sy(){return Te().memoizedState}function Fb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Vn();e=js(a);var o=Ls(n,e,a);o!==null&&(Tn(o,n,a),Jo(o,n,a)),n={cache:_f()},e.payload=n;return}n=n.return}}function Gb(e,n,a){var o=Vn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},oc(e)?ay(n,a):(a=of(e,n,a,o),a!==null&&(Tn(a,e,o),oy(a,n,o)))}function ry(e,n,a){var o=Vn();sl(e,n,a,o)}function sl(e,n,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(oc(e))ay(n,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var _=n.lastRenderedState,T=d(_,a);if(h.hasEagerState=!0,h.eagerState=T,In(T,_))return Bu(e,n,h,0),re===null&&zu(),!1}catch{}if(a=of(e,n,h,o),a!==null)return Tn(a,e,o),oy(a,n,o),!0}return!1}function Ff(e,n,a,o){if(o={lane:2,revertLane:bd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},oc(e)){if(n)throw Error(r(479))}else n=of(e,a,o,2),n!==null&&Tn(n,e,2)}function oc(e){var n=e.alternate;return e===kt||n!==null&&n===kt}function ay(e,n){Ma=tc=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function oy(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Ro(e,a)}}var rl={readContext:$e,use:ic,useCallback:pe,useContext:pe,useEffect:pe,useImperativeHandle:pe,useLayoutEffect:pe,useInsertionEffect:pe,useMemo:pe,useReducer:pe,useRef:pe,useState:pe,useDebugValue:pe,useDeferredValue:pe,useTransition:pe,useSyncExternalStore:pe,useId:pe,useHostTransitionStatus:pe,useFormState:pe,useActionState:pe,useOptimistic:pe,useMemoCache:pe,useCacheRefresh:pe};rl.useEffectEvent=pe;var ly={readContext:$e,use:ic,useCallback:function(e,n){return fn().memoizedState=[e,n===void 0?null:n],e},useContext:$e,useEffect:Gg,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,rc(4194308,4,Xg.bind(null,n,e),a)},useLayoutEffect:function(e,n){return rc(4194308,4,e,n)},useInsertionEffect:function(e,n){rc(4,2,e,n)},useMemo:function(e,n){var a=fn();n=n===void 0?null:n;var o=e();if(Yr){Ln(!0);try{e()}finally{Ln(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=fn();if(a!==void 0){var h=a(n);if(Yr){Ln(!0);try{a(n)}finally{Ln(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=Gb.bind(null,kt,e),[o.memoizedState,e]},useRef:function(e){var n=fn();return e={current:e},n.memoizedState=e},useState:function(e){e=Lf(e);var n=e.queue,a=ry.bind(null,kt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:zf,useDeferredValue:function(e,n){var a=fn();return Bf(a,e,n)},useTransition:function(){var e=Lf(!1);return e=ty.bind(null,kt,e.queue,!0,!1),fn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=kt,h=fn();if(Ft){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),re===null)throw Error(r(349));(Ut&127)!==0||xg(o,n,a)}h.memoizedState=a;var d={value:a,getSnapshot:n};return h.queue=d,Gg(Ng.bind(null,o,d,e),[e]),o.flags|=2048,La(9,{destroy:void 0},Dg.bind(null,o,d,a,n),null),a},useId:function(){var e=fn(),n=re.identifierPrefix;if(Ft){var a=Ni,o=Di;a=(o&~(1<<32-_e(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=ec++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Pb++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Hf,useFormState:zg,useActionState:zg,useOptimistic:function(e){var n=fn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Ff.bind(null,kt,!0,a),a.dispatch=n,[e,n]},useMemoCache:Vf,useCacheRefresh:function(){return fn().memoizedState=Fb.bind(null,kt)},useEffectEvent:function(e){var n=fn(),a={impl:e};return n.memoizedState=a,function(){if(($t&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Gf={readContext:$e,use:ic,useCallback:Zg,useContext:$e,useEffect:Uf,useImperativeHandle:$g,useInsertionEffect:Yg,useLayoutEffect:Qg,useMemo:Wg,useReducer:sc,useRef:Fg,useState:function(){return sc(ts)},useDebugValue:zf,useDeferredValue:function(e,n){var a=Te();return Jg(a,ne.memoizedState,e,n)},useTransition:function(){var e=sc(ts)[0],n=Te().memoizedState;return[typeof e=="boolean"?e:il(e),n]},useSyncExternalStore:Ig,useId:iy,useHostTransitionStatus:Hf,useFormState:Bg,useActionState:Bg,useOptimistic:function(e,n){var a=Te();return Vg(a,ne,e,n)},useMemoCache:Vf,useCacheRefresh:sy};Gf.useEffectEvent=Kg;var uy={readContext:$e,use:ic,useCallback:Zg,useContext:$e,useEffect:Uf,useImperativeHandle:$g,useInsertionEffect:Yg,useLayoutEffect:Qg,useMemo:Wg,useReducer:jf,useRef:Fg,useState:function(){return jf(ts)},useDebugValue:zf,useDeferredValue:function(e,n){var a=Te();return ne===null?Bf(a,e,n):Jg(a,ne.memoizedState,e,n)},useTransition:function(){var e=jf(ts)[0],n=Te().memoizedState;return[typeof e=="boolean"?e:il(e),n]},useSyncExternalStore:Ig,useId:iy,useHostTransitionStatus:Hf,useFormState:Hg,useActionState:Hg,useOptimistic:function(e,n){var a=Te();return ne!==null?Vg(a,ne,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Vf,useCacheRefresh:sy};uy.useEffectEvent=Kg;function Kf(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:C({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Yf={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=Vn(),h=js(o);h.payload=n,a!=null&&(h.callback=a),n=Ls(e,h,o),n!==null&&(Tn(n,e,o),Jo(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=Vn(),h=js(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Ls(e,h,o),n!==null&&(Tn(n,e,o),Jo(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Vn(),o=js(a);o.tag=2,n!=null&&(o.callback=n),n=Ls(e,o,a),n!==null&&(Tn(n,e,a),Jo(n,e,a))}};function cy(e,n,a,o,h,d,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,_):n.prototype&&n.prototype.isPureReactComponent?!Go(a,o)||!Go(h,d):!0}function hy(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&Yf.enqueueReplaceState(n,n.state,null)}function Qr(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=C({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function fy(e){Uu(e)}function dy(e){console.error(e)}function my(e){Uu(e)}function lc(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function py(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Qf(e,n,a){return a=js(a),a.tag=3,a.payload={element:null},a.callback=function(){lc(e,n)},a}function gy(e){return e=js(e),e.tag=3,e}function yy(e,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;e.payload=function(){return h(d)},e.callback=function(){py(n,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){py(n,a,o),typeof h!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function Kb(e,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&xa(n,a,h,!0),a=Dn.current,a!==null){switch(a.tag){case 31:case 13:return Yn===null?Ec():a.alternate===null&&ge===0&&(ge=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Xu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),vd(e,o,h)),!1;case 22:return a.flags|=65536,o===Xu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),vd(e,o,h)),!1}throw Error(r(435,a.tag))}return vd(e,o,h),Ec(),!1}if(Ft)return n=Dn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==df&&(e=Error(r(422),{cause:o}),Qo(Hn(e,a)))):(o!==df&&(n=Error(r(423),{cause:o}),Qo(Hn(n,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Hn(o,a),h=Qf(e.stateNode,o,h),Af(e,h),ge!==4&&(ge=2)),!1;var d=Error(r(520),{cause:o});if(d=Hn(d,a),dl===null?dl=[d]:dl.push(d),ge!==4&&(ge=2),n===null)return!0;o=Hn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Qf(a.stateNode,o,e),Af(a,e),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Hs===null||!Hs.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=gy(h),yy(h,e,a,o),Af(a,h),!1}a=a.return}while(a!==null);return!1}var Xf=Error(r(461)),ke=!1;function Ze(e,n,a,o){n.child=e===null?Tg(n,null,a,o):Kr(n,e.child,a,o)}function _y(e,n,a,o,h){a=a.render;var d=n.ref;if("ref"in o){var _={};for(var T in o)T!=="ref"&&(_[T]=o[T])}else _=o;return qr(n),o=Df(e,n,a,_,d,h),T=Nf(),e!==null&&!ke?(Of(e,n,h),es(e,n,h)):(Ft&&T&&hf(n),n.flags|=1,Ze(e,n,o,h),n.child)}function vy(e,n,a,o,h){if(e===null){var d=a.type;return typeof d=="function"&&!lf(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,Ey(e,n,d,o,h)):(e=Hu(a.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!id(e,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Go,a(_,o)&&e.ref===n.ref)return es(e,n,h)}return n.flags|=1,e=Xi(d,o),e.ref=n.ref,e.return=n,n.child=e}function Ey(e,n,a,o,h){if(e!==null){var d=e.memoizedProps;if(Go(d,o)&&e.ref===n.ref)if(ke=!1,n.pendingProps=o=d,id(e,h))(e.flags&131072)!==0&&(ke=!0);else return n.lanes=e.lanes,es(e,n,h)}return $f(e,n,a,o,h)}function Ty(e,n,a,o){var h=o.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(o=n.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,n.child=null;return by(e,n,d,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Yu(n,d!==null?d.cachePool:null),d!==null?Ag(n,d):Rf(),wg(n);else return o=n.lanes=536870912,by(e,n,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(Yu(n,d.cachePool),Ag(n,d),Us(),n.memoizedState=null):(e!==null&&Yu(n,null),Rf(),Us());return Ze(e,n,h,a),n.child}function al(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function by(e,n,a,o,h){var d=Ef();return d=d===null?null:{parent:Ne._currentValue,pool:d},n.memoizedState={baseLanes:a,cachePool:d},e!==null&&Yu(n,null),Rf(),wg(n),e!==null&&xa(e,n,o,!0),n.childLanes=h,null}function uc(e,n){return n=hc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Sy(e,n,a){return Kr(n,e.child,null,a),e=uc(n,n.pendingProps),e.flags|=2,Nn(n),n.memoizedState=null,e}function Yb(e,n,a){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Ft){if(o.mode==="hidden")return e=uc(n,o),n.lanes=536870912,al(null,e);if(If(n),(e=oe)?(e=M_(e,Kn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Ns!==null?{id:Di,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=ag(e),a.return=n,n.child=a,Xe=n,oe=null)):e=null,e===null)throw ks(n);return n.lanes=536870912,null}return uc(n,o)}var d=e.memoizedState;if(d!==null){var _=d.dehydrated;if(If(n),h)if(n.flags&256)n.flags&=-257,n=Sy(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(ke||xa(e,n,a,!1),h=(a&e.childLanes)!==0,ke||h){if(o=re,o!==null&&(_=Co(o,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Pr(e,_),Tn(o,e,_),Xf;Ec(),n=Sy(e,n,a)}else e=d.treeContext,oe=Qn(_.nextSibling),Xe=n,Ft=!0,Os=null,Kn=!1,e!==null&&ug(n,e),n=uc(n,o),n.flags|=4096;return n}return e=Xi(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function cc(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function $f(e,n,a,o,h){return qr(n),a=Df(e,n,a,o,void 0,h),o=Nf(),e!==null&&!ke?(Of(e,n,h),es(e,n,h)):(Ft&&o&&hf(n),n.flags|=1,Ze(e,n,a,h),n.child)}function Ay(e,n,a,o,h,d){return qr(n),n.updateQueue=null,a=Cg(n,o,a,h),Rg(e),o=Nf(),e!==null&&!ke?(Of(e,n,d),es(e,n,d)):(Ft&&o&&hf(n),n.flags|=1,Ze(e,n,a,d),n.child)}function wy(e,n,a,o,h){if(qr(n),n.stateNode===null){var d=wa,_=a.contextType;typeof _=="object"&&_!==null&&(d=$e(_)),d=new a(o,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Yf,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=o,d.state=n.memoizedState,d.refs={},bf(n),_=a.contextType,d.context=typeof _=="object"&&_!==null?$e(_):wa,d.state=n.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Kf(n,a,_,o),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Yf.enqueueReplaceState(d,d.state,null),el(n,o,d,h),tl(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){d=n.stateNode;var T=n.memoizedProps,k=Qr(a,T);d.props=k;var B=d.context,Y=a.contextType;_=wa,typeof Y=="object"&&Y!==null&&(_=$e(Y));var tt=a.getDerivedStateFromProps;Y=typeof tt=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||B!==_)&&hy(n,d,o,_),Ms=!1;var q=n.memoizedState;d.state=q,el(n,o,d,h),tl(),B=n.memoizedState,T||q!==B||Ms?(typeof tt=="function"&&(Kf(n,a,tt,o),B=n.memoizedState),(k=Ms||cy(n,a,k,o,q,B,_))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=B),d.props=o,d.state=B,d.context=_,o=k):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{d=n.stateNode,Sf(e,n),_=n.memoizedProps,Y=Qr(a,_),d.props=Y,tt=n.pendingProps,q=d.context,B=a.contextType,k=wa,typeof B=="object"&&B!==null&&(k=$e(B)),T=a.getDerivedStateFromProps,(B=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==tt||q!==k)&&hy(n,d,o,k),Ms=!1,q=n.memoizedState,d.state=q,el(n,o,d,h),tl();var G=n.memoizedState;_!==tt||q!==G||Ms||e!==null&&e.dependencies!==null&&Gu(e.dependencies)?(typeof T=="function"&&(Kf(n,a,T,o),G=n.memoizedState),(Y=Ms||cy(n,a,Y,o,q,G,k)||e!==null&&e.dependencies!==null&&Gu(e.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,G,k),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,G,k)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=G),d.props=o,d.state=G,d.context=k,o=Y):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(n.flags|=1024),o=!1)}return d=o,cc(e,n),o=(n.flags&128)!==0,d||o?(d=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&o?(n.child=Kr(n,e.child,null,h),n.child=Kr(n,null,a,h)):Ze(e,n,a,h),n.memoizedState=d.state,e=n.child):e=es(e,n,h),e}function Ry(e,n,a,o){return zr(),n.flags|=256,Ze(e,n,a,o),n.child}var Zf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wf(e){return{baseLanes:e,cachePool:pg()}}function Jf(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=kn),e}function Cy(e,n,a){var o=n.pendingProps,h=!1,d=(n.flags&128)!==0,_;if((_=d)||(_=e!==null&&e.memoizedState===null?!1:(Ee.current&2)!==0),_&&(h=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ft){if(h?Ps(n):Us(),(e=oe)?(e=M_(e,Kn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Ns!==null?{id:Di,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=ag(e),a.return=n,n.child=a,Xe=n,oe=null)):e=null,e===null)throw ks(n);return Md(e)?n.lanes=32:n.lanes=536870912,null}var T=o.children;return o=o.fallback,h?(Us(),h=n.mode,T=hc({mode:"hidden",children:T},h),o=Ur(o,h,a,null),T.return=n,o.return=n,T.sibling=o,n.child=T,o=n.child,o.memoizedState=Wf(a),o.childLanes=Jf(e,_,a),n.memoizedState=Zf,al(null,o)):(Ps(n),td(n,T))}var k=e.memoizedState;if(k!==null&&(T=k.dehydrated,T!==null)){if(d)n.flags&256?(Ps(n),n.flags&=-257,n=ed(e,n,a)):n.memoizedState!==null?(Us(),n.child=e.child,n.flags|=128,n=null):(Us(),T=o.fallback,h=n.mode,o=hc({mode:"visible",children:o.children},h),T=Ur(T,h,a,null),T.flags|=2,o.return=n,T.return=n,o.sibling=T,n.child=o,Kr(n,e.child,null,a),o=n.child,o.memoizedState=Wf(a),o.childLanes=Jf(e,_,a),n.memoizedState=Zf,n=al(null,o));else if(Ps(n),Md(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var B=_.dgst;_=B,o=Error(r(419)),o.stack="",o.digest=_,Qo({value:o,source:null,stack:null}),n=ed(e,n,a)}else if(ke||xa(e,n,a,!1),_=(a&e.childLanes)!==0,ke||_){if(_=re,_!==null&&(o=Co(_,a),o!==0&&o!==k.retryLane))throw k.retryLane=o,Pr(e,o),Tn(_,e,o),Xf;Vd(T)||Ec(),n=ed(e,n,a)}else Vd(T)?(n.flags|=192,n.child=e.child,n=null):(e=k.treeContext,oe=Qn(T.nextSibling),Xe=n,Ft=!0,Os=null,Kn=!1,e!==null&&ug(n,e),n=td(n,o.children),n.flags|=4096);return n}return h?(Us(),T=o.fallback,h=n.mode,k=e.child,B=k.sibling,o=Xi(k,{mode:"hidden",children:o.children}),o.subtreeFlags=k.subtreeFlags&65011712,B!==null?T=Xi(B,T):(T=Ur(T,h,a,null),T.flags|=2),T.return=n,o.return=n,o.sibling=T,n.child=o,al(null,o),o=n.child,T=e.child.memoizedState,T===null?T=Wf(a):(h=T.cachePool,h!==null?(k=Ne._currentValue,h=h.parent!==k?{parent:k,pool:k}:h):h=pg(),T={baseLanes:T.baseLanes|a,cachePool:h}),o.memoizedState=T,o.childLanes=Jf(e,_,a),n.memoizedState=Zf,al(e.child,o)):(Ps(n),a=e.child,e=a.sibling,a=Xi(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(_=n.deletions,_===null?(n.deletions=[e],n.flags|=16):_.push(e)),n.child=a,n.memoizedState=null,a)}function td(e,n){return n=hc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function hc(e,n){return e=xn(22,e,null,n),e.lanes=0,e}function ed(e,n,a){return Kr(n,e.child,null,a),e=td(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Iy(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),gf(e.return,n,a)}function nd(e,n,a,o,h,d){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:d}:(_.isBackwards=n,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=a,_.tailMode=h,_.treeForkCount=d)}function xy(e,n,a){var o=n.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var _=Ee.current,T=(_&2)!==0;if(T?(_=_&1|2,n.flags|=128):_&=1,nt(Ee,_),Ze(e,n,o,a),o=Ft?Yo:0,!T&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Iy(e,a,n);else if(e.tag===19)Iy(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)e=a.alternate,e!==null&&Ju(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),nd(n,!1,h,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&Ju(e)===null){n.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}nd(n,!0,a,null,d,o);break;case"together":nd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function es(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),qs|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(xa(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=Xi(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Xi(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function id(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Gu(e)))}function Qb(e,n,a){switch(n.tag){case 3:Gt(n,n.stateNode.containerInfo),Vs(n,Ne,e.memoizedState.cache),zr();break;case 27:case 5:we(n);break;case 4:Gt(n,n.stateNode.containerInfo);break;case 10:Vs(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,If(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ps(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Cy(e,n,a):(Ps(n),e=es(e,n,a),e!==null?e.sibling:null);Ps(n);break;case 19:var h=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(xa(e,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return xy(e,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),nt(Ee,Ee.current),o)break;return null;case 22:return n.lanes=0,Ty(e,n,a,n.pendingProps);case 24:Vs(n,Ne,e.memoizedState.cache)}return es(e,n,a)}function Dy(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)ke=!0;else{if(!id(e,a)&&(n.flags&128)===0)return ke=!1,Qb(e,n,a);ke=(e.flags&131072)!==0}else ke=!1,Ft&&(n.flags&1048576)!==0&&lg(n,Yo,n.index);switch(n.lanes=0,n.tag){case 16:t:{var o=n.pendingProps;if(e=Fr(n.elementType),n.type=e,typeof e=="function")lf(e)?(o=Qr(e,o),n.tag=1,n=wy(null,n,e,o,a)):(n.tag=0,n=$f(null,n,e,o,a));else{if(e!=null){var h=e.$$typeof;if(h===pt){n.tag=11,n=_y(null,n,e,o,a);break t}else if(h===D){n.tag=14,n=vy(null,n,e,o,a);break t}}throw n=yt(e)||e,Error(r(306,n,""))}}return n;case 0:return $f(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=Qr(o,n.pendingProps),wy(e,n,o,h,a);case 3:t:{if(Gt(n,n.stateNode.containerInfo),e===null)throw Error(r(387));o=n.pendingProps;var d=n.memoizedState;h=d.element,Sf(e,n),el(n,o,null,a);var _=n.memoizedState;if(o=_.cache,Vs(n,Ne,o),o!==d.cache&&yf(n,[Ne],a,!0),tl(),o=_.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=Ry(e,n,o,a);break t}else if(o!==h){h=Hn(Error(r(424)),n),Qo(h),n=Ry(e,n,o,a);break t}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,oe=Qn(e.firstChild),Xe=n,Ft=!0,Os=null,Kn=!0,a=Tg(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(zr(),o===h){n=es(e,n,a);break t}Ze(e,n,o,a)}n=n.child}return n;case 26:return cc(e,n),e===null?(a=B_(n.type,null,n.pendingProps,null))?n.memoizedState=a:Ft||(a=n.type,e=n.pendingProps,o=Cc(at.current).createElement(a),o[Ie]=n,o[Be]=e,We(o,a,e),xe(o),n.stateNode=o):n.memoizedState=B_(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return we(n),e===null&&Ft&&(o=n.stateNode=P_(n.type,n.pendingProps,at.current),Xe=n,Kn=!0,h=oe,Ys(n.type)?(jd=h,oe=Qn(o.firstChild)):oe=h),Ze(e,n,n.pendingProps.children,a),cc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ft&&((h=o=oe)&&(o=AS(o,n.type,n.pendingProps,Kn),o!==null?(n.stateNode=o,Xe=n,oe=Qn(o.firstChild),Kn=!1,h=!0):h=!1),h||ks(n)),we(n),h=n.type,d=n.pendingProps,_=e!==null?e.memoizedProps:null,o=d.children,Nd(h,d)?o=null:_!==null&&Nd(h,_)&&(n.flags|=32),n.memoizedState!==null&&(h=Df(e,n,Ub,null,null,a),Tl._currentValue=h),cc(e,n),Ze(e,n,o,a),n.child;case 6:return e===null&&Ft&&((e=a=oe)&&(a=wS(a,n.pendingProps,Kn),a!==null?(n.stateNode=a,Xe=n,oe=null,e=!0):e=!1),e||ks(n)),null;case 13:return Cy(e,n,a);case 4:return Gt(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Kr(n,null,o,a):Ze(e,n,o,a),n.child;case 11:return _y(e,n,n.type,n.pendingProps,a);case 7:return Ze(e,n,n.pendingProps,a),n.child;case 8:return Ze(e,n,n.pendingProps.children,a),n.child;case 12:return Ze(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,Vs(n,n.type,o.value),Ze(e,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,qr(n),h=$e(h),o=o(h),n.flags|=1,Ze(e,n,o,a),n.child;case 14:return vy(e,n,n.type,n.pendingProps,a);case 15:return Ey(e,n,n.type,n.pendingProps,a);case 19:return xy(e,n,a);case 31:return Yb(e,n,a);case 22:return Ty(e,n,a,n.pendingProps);case 24:return qr(n),o=$e(Ne),e===null?(h=Ef(),h===null&&(h=re,d=_f(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),n.memoizedState={parent:o,cache:h},bf(n),Vs(n,Ne,h)):((e.lanes&a)!==0&&(Sf(e,n),el(n,null,null,a),tl()),h=e.memoizedState,d=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Vs(n,Ne,o)):(o=d.cache,Vs(n,Ne,o),o!==h.cache&&yf(n,[Ne],a,!0))),Ze(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function ns(e){e.flags|=4}function sd(e,n,a,o,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(i_())e.flags|=8192;else throw Gr=Xu,Tf}else e.flags&=-16777217}function Ny(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!K_(n))if(i_())e.flags|=8192;else throw Gr=Xu,Tf}function fc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?_u():536870912,e.lanes|=n,Ba|=n)}function ol(e,n){if(!Ft)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function le(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function Xb(e,n,a){var o=n.pendingProps;switch(ff(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return le(n),null;case 1:return le(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Wi(Ne),Mt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ia(n)?ns(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,mf())),le(n),null;case 26:var h=n.type,d=n.memoizedState;return e===null?(ns(n),d!==null?(le(n),Ny(n,d)):(le(n),sd(n,h,null,o,a))):d?d!==e.memoizedState?(ns(n),le(n),Ny(n,d)):(le(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&ns(n),le(n),sd(n,h,e,o,a)),null;case 27:if(Re(n),a=at.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&ns(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return le(n),null}e=ut.current,Ia(n)?cg(n):(e=P_(h,o,a),n.stateNode=e,ns(n))}return le(n),null;case 5:if(Re(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&ns(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return le(n),null}if(d=ut.current,Ia(n))cg(n);else{var _=Cc(at.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?_.createElement(h,{is:o.is}):_.createElement(h)}}d[Ie]=n,d[Be]=o;t:for(_=n.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===n)break t;for(;_.sibling===null;){if(_.return===null||_.return===n)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}n.stateNode=d;t:switch(We(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&ns(n)}}return le(n),sd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&ns(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(r(166));if(e=at.current,Ia(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,h=Xe,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Ie]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||C_(e.nodeValue,a)),e||ks(n,!0)}else e=Cc(e).createTextNode(o),e[Ie]=n,n.stateNode=e}return le(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=Ia(n),a!==null){if(e===null){if(!o)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Ie]=n}else zr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;le(n),e=!1}else a=mf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Nn(n),n):(Nn(n),null);if((n.flags&128)!==0)throw Error(r(558))}return le(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Ia(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Ie]=n}else zr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;le(n),h=!1}else h=mf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Nn(n),n):(Nn(n),null)}return Nn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),fc(n,n.updateQueue),le(n),null);case 4:return Mt(),e===null&&Rd(n.stateNode.containerInfo),le(n),null;case 10:return Wi(n.type),le(n),null;case 19:if(H(Ee),o=n.memoizedState,o===null)return le(n),null;if(h=(n.flags&128)!==0,d=o.rendering,d===null)if(h)ol(o,!1);else{if(ge!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=Ju(e),d!==null){for(n.flags|=128,ol(o,!1),e=d.updateQueue,n.updateQueue=e,fc(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)rg(a,e),a=a.sibling;return nt(Ee,Ee.current&1|2),Ft&&$i(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&cn()>yc&&(n.flags|=128,h=!0,ol(o,!1),n.lanes=4194304)}else{if(!h)if(e=Ju(d),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,fc(n,e),ol(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Ft)return le(n),null}else 2*cn()-o.renderingStartTime>yc&&a!==536870912&&(n.flags|=128,h=!0,ol(o,!1),n.lanes=4194304);o.isBackwards?(d.sibling=n.child,n.child=d):(e=o.last,e!==null?e.sibling=d:n.child=d,o.last=d)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=cn(),e.sibling=null,a=Ee.current,nt(Ee,h?a&1|2:a&1),Ft&&$i(n,o.treeForkCount),e):(le(n),null);case 22:case 23:return Nn(n),Cf(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(le(n),n.subtreeFlags&6&&(n.flags|=8192)):le(n),a=n.updateQueue,a!==null&&fc(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&H(Hr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Wi(Ne),le(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function $b(e,n){switch(ff(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Wi(Ne),Mt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Re(n),null;case 31:if(n.memoizedState!==null){if(Nn(n),n.alternate===null)throw Error(r(340));zr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Nn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));zr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return H(Ee),null;case 4:return Mt(),null;case 10:return Wi(n.type),null;case 22:case 23:return Nn(n),Cf(),e!==null&&H(Hr),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Wi(Ne),null;case 25:return null;default:return null}}function Oy(e,n){switch(ff(n),n.tag){case 3:Wi(Ne),Mt();break;case 26:case 27:case 5:Re(n);break;case 4:Mt();break;case 31:n.memoizedState!==null&&Nn(n);break;case 13:Nn(n);break;case 19:H(Ee);break;case 10:Wi(n.type);break;case 22:case 23:Nn(n),Cf(),e!==null&&H(Hr);break;case 24:Wi(Ne)}}function ll(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var d=a.create,_=a.inst;o=d(),_.destroy=o}a=a.next}while(a!==h)}}catch(T){te(n,n.return,T)}}function zs(e,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&e)===e){var _=o.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,h=n;var k=a,B=T;try{B()}catch(Y){te(h,k,Y)}}}o=o.next}while(o!==d)}}catch(Y){te(n,n.return,Y)}}function ky(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Sg(n,a)}catch(o){te(e,e.return,o)}}}function Vy(e,n,a){a.props=Qr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){te(e,n,o)}}function ul(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){te(e,n,h)}}function Oi(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){te(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){te(e,n,h)}else a.current=null}function My(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){te(e,e.return,h)}}function rd(e,n,a){try{var o=e.stateNode;_S(o,e.type,a,n),o[Be]=n}catch(h){te(e,e.return,h)}}function jy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ys(e.type)||e.tag===4}function ad(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||jy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ys(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function od(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ni));else if(o!==4&&(o===27&&Ys(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(od(e,n,a),e=e.sibling;e!==null;)od(e,n,a),e=e.sibling}function dc(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&Ys(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(dc(e,n,a),e=e.sibling;e!==null;)dc(e,n,a),e=e.sibling}function Ly(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);We(n,o,a),n[Ie]=e,n[Be]=a}catch(d){te(e,e.return,d)}}var is=!1,Ve=!1,ld=!1,Py=typeof WeakSet=="function"?WeakSet:Set,He=null;function Zb(e,n){if(e=e.containerInfo,xd=Vc,e=$p(e),tf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,T=-1,k=-1,B=0,Y=0,tt=e,q=null;e:for(;;){for(var G;tt!==a||h!==0&&tt.nodeType!==3||(T=_+h),tt!==d||o!==0&&tt.nodeType!==3||(k=_+o),tt.nodeType===3&&(_+=tt.nodeValue.length),(G=tt.firstChild)!==null;)q=tt,tt=G;for(;;){if(tt===e)break e;if(q===a&&++B===h&&(T=_),q===d&&++Y===o&&(k=_),(G=tt.nextSibling)!==null)break;tt=q,q=tt.parentNode}tt=G}a=T===-1||k===-1?null:{start:T,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dd={focusedElem:e,selectionRange:a},Vc=!1,He=n;He!==null;)if(n=He,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,He=e;else for(;He!==null;){switch(n=He,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=n,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var gt=Qr(a.type,h);e=o.getSnapshotBeforeUpdate(gt,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(At){te(a,a.return,At)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)kd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":kd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,He=e;break}He=n.return}}function Uy(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:rs(e,a),o&4&&ll(5,a);break;case 1:if(rs(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(_){te(a,a.return,_)}else{var h=Qr(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(_){te(a,a.return,_)}}o&64&&ky(a),o&512&&ul(a,a.return);break;case 3:if(rs(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Sg(e,n)}catch(_){te(a,a.return,_)}}break;case 27:n===null&&o&4&&Ly(a);case 26:case 5:rs(e,a),n===null&&o&4&&My(a),o&512&&ul(a,a.return);break;case 12:rs(e,a);break;case 31:rs(e,a),o&4&&qy(e,a);break;case 13:rs(e,a),o&4&&Hy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=aS.bind(null,a),RS(e,a))));break;case 22:if(o=a.memoizedState!==null||is,!o){n=n!==null&&n.memoizedState!==null||Ve,h=is;var d=Ve;is=o,(Ve=n)&&!d?as(e,a,(a.subtreeFlags&8772)!==0):rs(e,a),is=h,Ve=d}break;case 30:break;default:rs(e,a)}}function zy(e){var n=e.alternate;n!==null&&(e.alternate=null,zy(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&ha(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var he=null,yn=!1;function ss(e,n,a){for(a=a.child;a!==null;)By(e,n,a),a=a.sibling}function By(e,n,a){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Wn,a)}catch{}switch(a.tag){case 26:Ve||Oi(a,n),ss(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ve||Oi(a,n);var o=he,h=yn;Ys(a.type)&&(he=a.stateNode,yn=!1),ss(e,n,a),_l(a.stateNode),he=o,yn=h;break;case 5:Ve||Oi(a,n);case 6:if(o=he,h=yn,he=null,ss(e,n,a),he=o,yn=h,he!==null)if(yn)try{(he.nodeType===9?he.body:he.nodeName==="HTML"?he.ownerDocument.body:he).removeChild(a.stateNode)}catch(d){te(a,n,d)}else try{he.removeChild(a.stateNode)}catch(d){te(a,n,d)}break;case 18:he!==null&&(yn?(e=he,k_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Xa(e)):k_(he,a.stateNode));break;case 4:o=he,h=yn,he=a.stateNode.containerInfo,yn=!0,ss(e,n,a),he=o,yn=h;break;case 0:case 11:case 14:case 15:zs(2,a,n),Ve||zs(4,a,n),ss(e,n,a);break;case 1:Ve||(Oi(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Vy(a,n,o)),ss(e,n,a);break;case 21:ss(e,n,a);break;case 22:Ve=(o=Ve)||a.memoizedState!==null,ss(e,n,a),Ve=o;break;default:ss(e,n,a)}}function qy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Xa(e)}catch(a){te(n,n.return,a)}}}function Hy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Xa(e)}catch(a){te(n,n.return,a)}}function Wb(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Py),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Py),n;default:throw Error(r(435,e.tag))}}function mc(e,n){var a=Wb(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var h=oS.bind(null,e,o);o.then(h,h)}})}function _n(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=e,_=n,T=_;t:for(;T!==null;){switch(T.tag){case 27:if(Ys(T.type)){he=T.stateNode,yn=!1;break t}break;case 5:he=T.stateNode,yn=!1;break t;case 3:case 4:he=T.stateNode.containerInfo,yn=!0;break t}T=T.return}if(he===null)throw Error(r(160));By(d,_,h),he=null,yn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Fy(n,e),n=n.sibling}var li=null;function Fy(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_n(n,e),vn(e),o&4&&(zs(3,e,e.return),ll(3,e),zs(5,e,e.return));break;case 1:_n(n,e),vn(e),o&512&&(Ve||a===null||Oi(a,a.return)),o&64&&is&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=li;if(_n(n,e),vn(e),o&512&&(Ve||a===null||Oi(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[_i]||d[Ie]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),We(d,o,a),d[Ie]=e,xe(d),o=d;break t;case"link":var _=F_("link","href",h).get(o+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break e}}d=h.createElement(o),We(d,o,a),h.head.appendChild(d);break;case"meta":if(_=F_("meta","content",h).get(o+(a.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break e}}d=h.createElement(o),We(d,o,a),h.head.appendChild(d);break;default:throw Error(r(468,o))}d[Ie]=e,xe(d),o=d}e.stateNode=o}else G_(h,e.type,e.stateNode);else e.stateNode=H_(h,o,e.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?G_(h,e.type,e.stateNode):H_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&rd(e,e.memoizedProps,a.memoizedProps)}break;case 27:_n(n,e),vn(e),o&512&&(Ve||a===null||Oi(a,a.return)),a!==null&&o&4&&rd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(_n(n,e),vn(e),o&512&&(Ve||a===null||Oi(a,a.return)),e.flags&32){h=e.stateNode;try{gn(h,"")}catch(gt){te(e,e.return,gt)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,rd(e,h,a!==null?a.memoizedProps:h)),o&1024&&(ld=!0);break;case 6:if(_n(n,e),vn(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(gt){te(e,e.return,gt)}}break;case 3:if(Dc=null,h=li,li=Ic(n.containerInfo),_n(n,e),li=h,vn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Xa(n.containerInfo)}catch(gt){te(e,e.return,gt)}ld&&(ld=!1,Gy(e));break;case 4:o=li,li=Ic(e.stateNode.containerInfo),_n(n,e),vn(e),li=o;break;case 12:_n(n,e),vn(e);break;case 31:_n(n,e),vn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,mc(e,o)));break;case 13:_n(n,e),vn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(gc=cn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,mc(e,o)));break;case 22:h=e.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,B=is,Y=Ve;if(is=B||h,Ve=Y||k,_n(n,e),Ve=Y,is=B,vn(e),o&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||k||is||Ve||Xr(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){k=a=n;try{if(d=k.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=k.stateNode;var tt=k.memoizedProps.style,q=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;T.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(gt){te(k,k.return,gt)}}}else if(n.tag===6){if(a===null){k=n;try{k.stateNode.nodeValue=h?"":k.memoizedProps}catch(gt){te(k,k.return,gt)}}}else if(n.tag===18){if(a===null){k=n;try{var G=k.stateNode;h?V_(G,!0):V_(k.stateNode,!1)}catch(gt){te(k,k.return,gt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,mc(e,a))));break;case 19:_n(n,e),vn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,mc(e,o)));break;case 30:break;case 21:break;default:_n(n,e),vn(e)}}function vn(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(jy(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=ad(e);dc(e,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(gn(_,""),a.flags&=-33);var T=ad(e);dc(e,T,_);break;case 3:case 4:var k=a.stateNode.containerInfo,B=ad(e);od(e,B,k);break;default:throw Error(r(161))}}catch(Y){te(e,e.return,Y)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Gy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Gy(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function rs(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Uy(e,n.alternate,n),n=n.sibling}function Xr(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:zs(4,n,n.return),Xr(n);break;case 1:Oi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Vy(n,n.return,a),Xr(n);break;case 27:_l(n.stateNode);case 26:case 5:Oi(n,n.return),Xr(n);break;case 22:n.memoizedState===null&&Xr(n);break;case 30:Xr(n);break;default:Xr(n)}e=e.sibling}}function as(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,d=n,_=d.flags;switch(d.tag){case 0:case 11:case 15:as(h,d,a),ll(4,d);break;case 1:if(as(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){te(o,o.return,B)}if(o=d,h=o.updateQueue,h!==null){var T=o.stateNode;try{var k=h.shared.hiddenCallbacks;if(k!==null)for(h.shared.hiddenCallbacks=null,h=0;h<k.length;h++)bg(k[h],T)}catch(B){te(o,o.return,B)}}a&&_&64&&ky(d),ul(d,d.return);break;case 27:Ly(d);case 26:case 5:as(h,d,a),a&&o===null&&_&4&&My(d),ul(d,d.return);break;case 12:as(h,d,a);break;case 31:as(h,d,a),a&&_&4&&qy(h,d);break;case 13:as(h,d,a),a&&_&4&&Hy(h,d);break;case 22:d.memoizedState===null&&as(h,d,a),ul(d,d.return);break;case 30:break;default:as(h,d,a)}n=n.sibling}}function ud(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Xo(a))}function cd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Xo(e))}function ui(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ky(e,n,a,o),n=n.sibling}function Ky(e,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:ui(e,n,a,o),h&2048&&ll(9,n);break;case 1:ui(e,n,a,o);break;case 3:ui(e,n,a,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Xo(e)));break;case 12:if(h&2048){ui(e,n,a,o),e=n.stateNode;try{var d=n.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){te(n,n.return,k)}}else ui(e,n,a,o);break;case 31:ui(e,n,a,o);break;case 13:ui(e,n,a,o);break;case 23:break;case 22:d=n.stateNode,_=n.alternate,n.memoizedState!==null?d._visibility&2?ui(e,n,a,o):cl(e,n):d._visibility&2?ui(e,n,a,o):(d._visibility|=2,Pa(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&ud(_,n);break;case 24:ui(e,n,a,o),h&2048&&cd(n.alternate,n);break;default:ui(e,n,a,o)}}function Pa(e,n,a,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,_=n,T=a,k=o,B=_.flags;switch(_.tag){case 0:case 11:case 15:Pa(d,_,T,k,h),ll(8,_);break;case 23:break;case 22:var Y=_.stateNode;_.memoizedState!==null?Y._visibility&2?Pa(d,_,T,k,h):cl(d,_):(Y._visibility|=2,Pa(d,_,T,k,h)),h&&B&2048&&ud(_.alternate,_);break;case 24:Pa(d,_,T,k,h),h&&B&2048&&cd(_.alternate,_);break;default:Pa(d,_,T,k,h)}n=n.sibling}}function cl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,h=o.flags;switch(o.tag){case 22:cl(a,o),h&2048&&ud(o.alternate,o);break;case 24:cl(a,o),h&2048&&cd(o.alternate,o);break;default:cl(a,o)}n=n.sibling}}var hl=8192;function Ua(e,n,a){if(e.subtreeFlags&hl)for(e=e.child;e!==null;)Yy(e,n,a),e=e.sibling}function Yy(e,n,a){switch(e.tag){case 26:Ua(e,n,a),e.flags&hl&&e.memoizedState!==null&&PS(a,li,e.memoizedState,e.memoizedProps);break;case 5:Ua(e,n,a);break;case 3:case 4:var o=li;li=Ic(e.stateNode.containerInfo),Ua(e,n,a),li=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=hl,hl=16777216,Ua(e,n,a),hl=o):Ua(e,n,a));break;default:Ua(e,n,a)}}function Qy(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function fl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];He=o,$y(o,e)}Qy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xy(e),e=e.sibling}function Xy(e){switch(e.tag){case 0:case 11:case 15:fl(e),e.flags&2048&&zs(9,e,e.return);break;case 3:fl(e);break;case 12:fl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,pc(e)):fl(e);break;default:fl(e)}}function pc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];He=o,$y(o,e)}Qy(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:zs(8,n,n.return),pc(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,pc(n));break;default:pc(n)}e=e.sibling}}function $y(e,n){for(;He!==null;){var a=He;switch(a.tag){case 0:case 11:case 15:zs(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Xo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,He=o;else t:for(a=e;He!==null;){o=He;var h=o.sibling,d=o.return;if(zy(o),o===a){He=null;break t}if(h!==null){h.return=d,He=h;break t}He=d}}}var Jb={getCacheForType:function(e){var n=$e(Ne),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return $e(Ne).controller.signal}},tS=typeof WeakMap=="function"?WeakMap:Map,$t=0,re=null,Lt=null,Ut=0,Jt=0,On=null,Bs=!1,za=!1,hd=!1,os=0,ge=0,qs=0,$r=0,fd=0,kn=0,Ba=0,dl=null,En=null,dd=!1,gc=0,Zy=0,yc=1/0,_c=null,Hs=null,Ue=0,Fs=null,qa=null,ls=0,md=0,pd=null,Wy=null,ml=0,gd=null;function Vn(){return($t&2)!==0&&Ut!==0?Ut&-Ut:P.T!==null?bd():vu()}function Jy(){if(kn===0)if((Ut&536870912)===0||Ft){var e=Sr;Sr<<=1,(Sr&3932160)===0&&(Sr=262144),kn=e}else kn=536870912;return e=Dn.current,e!==null&&(e.flags|=32),kn}function Tn(e,n,a){(e===re&&(Jt===2||Jt===9)||e.cancelPendingCommit!==null)&&(Ha(e,0),Gs(e,Ut,kn,!1)),Ar(e,a),(($t&2)===0||e!==re)&&(e===re&&(($t&2)===0&&($r|=a),ge===4&&Gs(e,Ut,kn,!1)),ki(e))}function t_(e,n,a){if(($t&6)!==0)throw Error(r(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||Jn(e,n),h=o?iS(e,n):_d(e,n,!0),d=o;do{if(h===0){za&&!o&&Gs(e,n,0,!1);break}else{if(a=e.current.alternate,d&&!eS(a)){h=_d(e,n,!1),d=!1;continue}if(h===2){if(d=n,e.errorRecoveryDisabledLanes&d)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;t:{var T=e;h=dl;var k=T.current.memoizedState.isDehydrated;if(k&&(Ha(T,_).flags|=256),_=_d(T,_,!1),_!==2){if(hd&&!k){T.errorRecoveryDisabledLanes|=d,$r|=d,h=4;break t}d=En,En=h,d!==null&&(En===null?En=d:En.push.apply(En,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){Ha(e,0),Gs(e,n,0,!0);break}t:{switch(o=e,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Gs(o,n,kn,!Bs);break t;case 2:En=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=gc+300-cn(),10<h)){if(Gs(o,n,kn,!Bs),pi(o,0,!0)!==0)break t;ls=n,o.timeoutHandle=N_(e_.bind(null,o,a,En,_c,dd,n,kn,$r,Ba,Bs,d,"Throttled",-0,0),h);break t}e_(o,a,En,_c,dd,n,kn,$r,Ba,Bs,d,null,-0,0)}}break}while(!0);ki(e)}function e_(e,n,a,o,h,d,_,T,k,B,Y,tt,q,G){if(e.timeoutHandle=-1,tt=n.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ni},Yy(n,d,tt);var gt=(d&62914560)===d?gc-cn():(d&4194048)===d?Zy-cn():0;if(gt=US(tt,gt),gt!==null){ls=d,e.cancelPendingCommit=gt(u_.bind(null,e,n,d,a,o,h,_,T,k,Y,tt,null,q,G)),Gs(e,d,_,!B);return}}u_(e,n,d,a,o,h,_,T,k)}function eS(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!In(d(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Gs(e,n,a,o){n&=~fd,n&=~$r,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var d=31-_e(h),_=1<<d;o[d]=-1,h&=~_}a!==0&&wr(e,a,n)}function vc(){return($t&6)===0?(pl(0),!1):!0}function yd(){if(Lt!==null){if(Jt===0)var e=Lt.return;else e=Lt,Zi=Br=null,kf(e),ka=null,Zo=0,e=Lt;for(;e!==null;)Oy(e.alternate,e),e=e.return;Lt=null}}function Ha(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,TS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ls=0,yd(),re=e,Lt=a=Xi(e.current,null),Ut=n,Jt=0,On=null,Bs=!1,za=Jn(e,n),hd=!1,Ba=kn=fd=$r=qs=ge=0,En=dl=null,dd=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-_e(o),d=1<<h;n|=e[h],o&=~d}return os=n,zu(),a}function n_(e,n){kt=null,P.H=rl,n===Oa||n===Qu?(n=_g(),Jt=3):n===Tf?(n=_g(),Jt=4):Jt=n===Xf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,On=n,Lt===null&&(ge=1,lc(e,Hn(n,e.current)))}function i_(){var e=Dn.current;return e===null?!0:(Ut&4194048)===Ut?Yn===null:(Ut&62914560)===Ut||(Ut&536870912)!==0?e===Yn:!1}function s_(){var e=P.H;return P.H=rl,e===null?rl:e}function r_(){var e=P.A;return P.A=Jb,e}function Ec(){ge=4,Bs||(Ut&4194048)!==Ut&&Dn.current!==null||(za=!0),(qs&134217727)===0&&($r&134217727)===0||re===null||Gs(re,Ut,kn,!1)}function _d(e,n,a){var o=$t;$t|=2;var h=s_(),d=r_();(re!==e||Ut!==n)&&(_c=null,Ha(e,n)),n=!1;var _=ge;t:do try{if(Jt!==0&&Lt!==null){var T=Lt,k=On;switch(Jt){case 8:yd(),_=6;break t;case 3:case 2:case 9:case 6:Dn.current===null&&(n=!0);var B=Jt;if(Jt=0,On=null,Fa(e,T,k,B),a&&za){_=0;break t}break;default:B=Jt,Jt=0,On=null,Fa(e,T,k,B)}}nS(),_=ge;break}catch(Y){n_(e,Y)}while(!0);return n&&e.shellSuspendCounter++,Zi=Br=null,$t=o,P.H=h,P.A=d,Lt===null&&(re=null,Ut=0,zu()),_}function nS(){for(;Lt!==null;)a_(Lt)}function iS(e,n){var a=$t;$t|=2;var o=s_(),h=r_();re!==e||Ut!==n?(_c=null,yc=cn()+500,Ha(e,n)):za=Jn(e,n);t:do try{if(Jt!==0&&Lt!==null){n=Lt;var d=On;e:switch(Jt){case 1:Jt=0,On=null,Fa(e,n,d,1);break;case 2:case 9:if(gg(d)){Jt=0,On=null,o_(n);break}n=function(){Jt!==2&&Jt!==9||re!==e||(Jt=7),ki(e)},d.then(n,n);break t;case 3:Jt=7;break t;case 4:Jt=5;break t;case 7:gg(d)?(Jt=0,On=null,o_(n)):(Jt=0,On=null,Fa(e,n,d,7));break;case 5:var _=null;switch(Lt.tag){case 26:_=Lt.memoizedState;case 5:case 27:var T=Lt;if(_?K_(_):T.stateNode.complete){Jt=0,On=null;var k=T.sibling;if(k!==null)Lt=k;else{var B=T.return;B!==null?(Lt=B,Tc(B)):Lt=null}break e}}Jt=0,On=null,Fa(e,n,d,5);break;case 6:Jt=0,On=null,Fa(e,n,d,6);break;case 8:yd(),ge=6;break t;default:throw Error(r(462))}}sS();break}catch(Y){n_(e,Y)}while(!0);return Zi=Br=null,P.H=o,P.A=h,$t=a,Lt!==null?0:(re=null,Ut=0,zu(),ge)}function sS(){for(;Lt!==null&&!Yh();)a_(Lt)}function a_(e){var n=Dy(e.alternate,e,os);e.memoizedProps=e.pendingProps,n===null?Tc(e):Lt=n}function o_(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=Ay(a,n,n.pendingProps,n.type,void 0,Ut);break;case 11:n=Ay(a,n,n.pendingProps,n.type.render,n.ref,Ut);break;case 5:kf(n);default:Oy(a,n),n=Lt=rg(n,os),n=Dy(a,n,os)}e.memoizedProps=e.pendingProps,n===null?Tc(e):Lt=n}function Fa(e,n,a,o){Zi=Br=null,kf(n),ka=null,Zo=0;var h=n.return;try{if(Kb(e,h,n,a,Ut)){ge=1,lc(e,Hn(a,e.current)),Lt=null;return}}catch(d){if(h!==null)throw Lt=h,d;ge=1,lc(e,Hn(a,e.current)),Lt=null;return}n.flags&32768?(Ft||o===1?e=!0:za||(Ut&536870912)!==0?e=!1:(Bs=e=!0,(o===2||o===9||o===3||o===6)&&(o=Dn.current,o!==null&&o.tag===13&&(o.flags|=16384))),l_(n,e)):Tc(n)}function Tc(e){var n=e;do{if((n.flags&32768)!==0){l_(n,Bs);return}e=n.return;var a=Xb(n.alternate,n,os);if(a!==null){Lt=a;return}if(n=n.sibling,n!==null){Lt=n;return}Lt=n=e}while(n!==null);ge===0&&(ge=5)}function l_(e,n){do{var a=$b(e.alternate,e);if(a!==null){a.flags&=32767,Lt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Lt=e;return}Lt=e=a}while(e!==null);ge=6,Lt=null}function u_(e,n,a,o,h,d,_,T,k){e.cancelPendingCommit=null;do bc();while(Ue!==0);if(($t&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(d=n.lanes|n.childLanes,d|=af,$h(e,a,d,_,T,k),e===re&&(Lt=re=null,Ut=0),qa=n,Fs=e,ls=a,md=d,pd=h,Wy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,lS(Ts,function(){return m_(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=P.T,P.T=null,h=J.p,J.p=2,_=$t,$t|=4;try{Zb(e,n,a)}finally{$t=_,J.p=h,P.T=o}}Ue=1,c_(),h_(),f_()}}function c_(){if(Ue===1){Ue=0;var e=Fs,n=qa,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=P.T,P.T=null;var o=J.p;J.p=2;var h=$t;$t|=4;try{Fy(n,e);var d=Dd,_=$p(e.containerInfo),T=d.focusedElem,k=d.selectionRange;if(_!==T&&T&&T.ownerDocument&&Xp(T.ownerDocument.documentElement,T)){if(k!==null&&tf(T)){var B=k.start,Y=k.end;if(Y===void 0&&(Y=B),"selectionStart"in T)T.selectionStart=B,T.selectionEnd=Math.min(Y,T.value.length);else{var tt=T.ownerDocument||document,q=tt&&tt.defaultView||window;if(q.getSelection){var G=q.getSelection(),gt=T.textContent.length,At=Math.min(k.start,gt),se=k.end===void 0?At:Math.min(k.end,gt);!G.extend&&At>se&&(_=se,se=At,At=_);var j=Qp(T,At),M=Qp(T,se);if(j&&M&&(G.rangeCount!==1||G.anchorNode!==j.node||G.anchorOffset!==j.offset||G.focusNode!==M.node||G.focusOffset!==M.offset)){var z=tt.createRange();z.setStart(j.node,j.offset),G.removeAllRanges(),At>se?(G.addRange(z),G.extend(M.node,M.offset)):(z.setEnd(M.node,M.offset),G.addRange(z))}}}}for(tt=[],G=T;G=G.parentNode;)G.nodeType===1&&tt.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<tt.length;T++){var $=tt[T];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Vc=!!xd,Dd=xd=null}finally{$t=h,J.p=o,P.T=a}}e.current=n,Ue=2}}function h_(){if(Ue===2){Ue=0;var e=Fs,n=qa,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=P.T,P.T=null;var o=J.p;J.p=2;var h=$t;$t|=4;try{Uy(e,n.alternate,n)}finally{$t=h,J.p=o,P.T=a}}Ue=3}}function f_(){if(Ue===4||Ue===3){Ue=0,fu();var e=Fs,n=qa,a=ls,o=Wy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ue=5:(Ue=0,qa=Fs=null,d_(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Hs=null),Gi(a),n=n.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Wn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=P.T,h=J.p,J.p=2,P.T=null;try{for(var d=e.onRecoverableError,_=0;_<o.length;_++){var T=o[_];d(T.value,{componentStack:T.stack})}}finally{P.T=n,J.p=h}}(ls&3)!==0&&bc(),ki(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===gd?ml++:(ml=0,gd=e):ml=0,pl(0)}}function d_(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Xo(n)))}function bc(){return c_(),h_(),f_(),m_()}function m_(){if(Ue!==5)return!1;var e=Fs,n=md;md=0;var a=Gi(ls),o=P.T,h=J.p;try{J.p=32>a?32:a,P.T=null,a=pd,pd=null;var d=Fs,_=ls;if(Ue=0,qa=Fs=null,ls=0,($t&6)!==0)throw Error(r(331));var T=$t;if($t|=4,Xy(d.current),Ky(d,d.current,_,a),$t=T,pl(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Wn,d)}catch{}return!0}finally{J.p=h,P.T=o,d_(e,n)}}function p_(e,n,a){n=Hn(a,n),n=Qf(e.stateNode,n,2),e=Ls(e,n,2),e!==null&&(Ar(e,2),ki(e))}function te(e,n,a){if(e.tag===3)p_(e,e,a);else for(;n!==null;){if(n.tag===3){p_(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Hs===null||!Hs.has(o))){e=Hn(a,e),a=gy(2),o=Ls(n,a,2),o!==null&&(yy(a,o,n,e),Ar(o,2),ki(o));break}}n=n.return}}function vd(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new tS;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(hd=!0,h.add(a),e=rS.bind(null,e,n,a),n.then(e,e))}function rS(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,re===e&&(Ut&a)===a&&(ge===4||ge===3&&(Ut&62914560)===Ut&&300>cn()-gc?($t&2)===0&&Ha(e,0):fd|=a,Ba===Ut&&(Ba=0)),ki(e)}function g_(e,n){n===0&&(n=_u()),e=Pr(e,n),e!==null&&(Ar(e,n),ki(e))}function aS(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),g_(e,a)}function oS(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(n),g_(e,a)}function lS(e,n){return Pe(e,n)}var Sc=null,Ga=null,Ed=!1,Ac=!1,Td=!1,Ks=0;function ki(e){e!==Ga&&e.next===null&&(Ga===null?Sc=Ga=e:Ga=Ga.next=e),Ac=!0,Ed||(Ed=!0,cS())}function pl(e,n){if(!Td&&Ac){Td=!0;do for(var a=!1,o=Sc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var _=o.suspendedLanes,T=o.pingedLanes;d=(1<<31-_e(42|e)+1)-1,d&=h&~(_&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,E_(o,d))}else d=Ut,d=pi(o,o===re?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Jn(o,d)||(a=!0,E_(o,d));o=o.next}while(a);Td=!1}}function uS(){y_()}function y_(){Ac=Ed=!1;var e=0;Ks!==0&&ES()&&(e=Ks);for(var n=cn(),a=null,o=Sc;o!==null;){var h=o.next,d=__(o,n);d===0?(o.next=null,a===null?Sc=h:a.next=h,h===null&&(Ga=a)):(a=o,(e!==0||(d&3)!==0)&&(Ac=!0)),o=h}Ue!==0&&Ue!==5||pl(e),Ks!==0&&(Ks=0)}function __(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var _=31-_e(d),T=1<<_,k=h[_];k===-1?((T&a)===0||(T&o)!==0)&&(h[_]=Xh(T,n)):k<=n&&(e.expiredLanes|=T),d&=~T}if(n=re,a=Ut,a=pi(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(Jt===2||Jt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Es(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Jn(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&Es(o),Gi(a)){case 2:case 8:a=wo;break;case 32:a=Ts;break;case 268435456:a=du;break;default:a=Ts}return o=v_.bind(null,e),a=Pe(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&Es(o),e.callbackPriority=2,e.callbackNode=null,2}function v_(e,n){if(Ue!==0&&Ue!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(bc()&&e.callbackNode!==a)return null;var o=Ut;return o=pi(e,e===re?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(t_(e,o,n),__(e,cn()),e.callbackNode!=null&&e.callbackNode===a?v_.bind(null,e):null)}function E_(e,n){if(bc())return null;t_(e,n,!0)}function cS(){bS(function(){($t&6)!==0?Pe(Ao,uS):y_()})}function bd(){if(Ks===0){var e=Da;e===0&&(e=di,di<<=1,(di&261888)===0&&(di=256)),Ks=e}return Ks}function T_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:pa(""+e)}function b_(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function hS(e,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var d=T_((h[Be]||null).action),_=o.submitter;_&&(n=(n=_[Be]||null)?T_(n.formAction):_.getAttribute("formAction"),n!==null&&(d=n,_=null));var T=new Ri("action","action",null,o,h);e.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ks!==0){var k=_?b_(h,_):new FormData(h);qf(a,{pending:!0,data:k,method:h.method,action:d},null,k)}}else typeof d=="function"&&(T.preventDefault(),k=_?b_(h,_):new FormData(h),qf(a,{pending:!0,data:k,method:h.method,action:d},d,k))},currentTarget:h}]})}}for(var Sd=0;Sd<rf.length;Sd++){var Ad=rf[Sd],fS=Ad.toLowerCase(),dS=Ad[0].toUpperCase()+Ad.slice(1);oi(fS,"on"+dS)}oi(Jp,"onAnimationEnd"),oi(tg,"onAnimationIteration"),oi(eg,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(xb,"onTransitionRun"),oi(Db,"onTransitionStart"),oi(Nb,"onTransitionCancel"),oi(ng,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gl));function S_(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var d=void 0;if(n)for(var _=o.length-1;0<=_;_--){var T=o[_],k=T.instance,B=T.currentTarget;if(T=T.listener,k!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=B;try{d(h)}catch(Y){Uu(Y)}h.currentTarget=null,d=k}else for(_=0;_<o.length;_++){if(T=o[_],k=T.instance,B=T.currentTarget,T=T.listener,k!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=B;try{d(h)}catch(Y){Uu(Y)}h.currentTarget=null,d=k}}}}function Pt(e,n){var a=n[ca];a===void 0&&(a=n[ca]=new Set);var o=e+"__bubble";a.has(o)||(A_(n,e,2,!1),a.add(o))}function wd(e,n,a){var o=0;n&&(o|=4),A_(a,e,o,n)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Rd(e){if(!e[wc]){e[wc]=!0,Io.forEach(function(a){a!=="selectionchange"&&(mS.has(a)||wd(a,!1,e),wd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[wc]||(n[wc]=!0,wd("selectionchange",!1,n))}}function A_(e,n,a,o){switch(J_(n)){case 2:var h=qS;break;case 8:h=HS;break;default:h=Bd}a=h.bind(null,n,a,e),h=void 0,!Dr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,a,{capture:!0,passive:h}):e.addEventListener(n,a,!0):h!==void 0?e.addEventListener(n,a,{passive:h}):e.addEventListener(n,a,!1)}function Cd(e,n,a,o,h){var d=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var T=o.stateNode.containerInfo;if(T===h)break;if(_===4)for(_=o.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;T!==null;){if(_=vi(T),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){o=d=_;continue t}T=T.parentNode}}o=o.return}Cs(function(){var B=d,Y=Un(a),tt=[];t:{var q=ig.get(e);if(q!==void 0){var G=Ri,gt=e;switch(e){case"keypress":if(Or(a)===0)break t;case"keydown":case"keyup":G=ju;break;case"focusin":gt="focus",G=Vr;break;case"focusout":gt="blur",G=Vr;break;case"beforeblur":case"afterblur":G=Vr;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Bo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Cu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=p;break;case Jp:case tg:case eg:G=xu;break;case ng:G=A;break;case"scroll":case"scrollend":G=zo;break;case"wheel":G=F;break;case"copy":case"cut":case"paste":G=Du;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Qi;break;case"toggle":case"beforetoggle":G=Ot}var At=(n&4)!==0,se=!At&&(e==="scroll"||e==="scrollend"),j=At?q!==null?q+"Capture":null:q;At=[];for(var M=B,z;M!==null;){var $=M;if(z=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||z===null||j===null||($=ii(M,j),$!=null&&At.push(yl(M,$,z))),se)break;M=M.return}0<At.length&&(q=new G(q,gt,null,a,Y),tt.push({event:q,listeners:At}))}}if((n&7)===0){t:{if(q=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",q&&a!==Lo&&(gt=a.relatedTarget||a.fromElement)&&(vi(gt)||gt[yi]))break t;if((G||q)&&(q=Y.window===Y?Y:(q=Y.ownerDocument)?q.defaultView||q.parentWindow:window,G?(gt=a.relatedTarget||a.toElement,G=B,gt=gt?vi(gt):null,gt!==null&&(se=u(gt),At=gt.tag,gt!==se||At!==5&&At!==27&&At!==6)&&(gt=null)):(G=null,gt=B),G!==gt)){if(At=Bo,$="onMouseLeave",j="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(At=Qi,$="onPointerLeave",j="onPointerEnter",M="pointer"),se=G==null?q:Rn(G),z=gt==null?q:Rn(gt),q=new At($,M+"leave",G,a,Y),q.target=se,q.relatedTarget=z,$=null,vi(Y)===B&&(At=new At(j,M+"enter",gt,a,Y),At.target=z,At.relatedTarget=se,$=At),se=$,G&&gt)e:{for(At=pS,j=G,M=gt,z=0,$=j;$;$=At($))z++;$=0;for(var bt=M;bt;bt=At(bt))$++;for(;0<z-$;)j=At(j),z--;for(;0<$-z;)M=At(M),$--;for(;z--;){if(j===M||M!==null&&j===M.alternate){At=j;break e}j=At(j),M=At(M)}At=null}else At=null;G!==null&&w_(tt,q,G,At,!1),gt!==null&&se!==null&&w_(tt,se,gt,At,!0)}}t:{if(q=B?Rn(B):window,G=q.nodeName&&q.nodeName.toLowerCase(),G==="select"||G==="input"&&q.type==="file")var Yt=qp;else if(zp(q))if(Hp)Yt=Rb;else{Yt=Ab;var Et=Sb}else G=q.nodeName,!G||G.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&ma(B.elementType)&&(Yt=qp):Yt=wb;if(Yt&&(Yt=Yt(e,B))){Bp(tt,Yt,a,Y);break t}Et&&Et(e,q,B),e==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&Vo(q,"number",q.value)}switch(Et=B?Rn(B):window,e){case"focusin":(zp(Et)||Et.contentEditable==="true")&&(ba=Et,ef=B,Ko=null);break;case"focusout":Ko=ef=ba=null;break;case"mousedown":nf=!0;break;case"contextmenu":case"mouseup":case"dragend":nf=!1,Zp(tt,a,Y);break;case"selectionchange":if(Ib)break;case"keydown":case"keyup":Zp(tt,a,Y)}var Vt;if(Xt)t:{switch(e){case"compositionstart":var zt="onCompositionStart";break t;case"compositionend":zt="onCompositionEnd";break t;case"compositionupdate":zt="onCompositionUpdate";break t}zt=void 0}else Ta?Mr(e,a)&&(zt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(zt="onCompositionStart");zt&&(xi&&a.locale!=="ko"&&(Ta||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&Ta&&(Vt=Uo()):(wi=Y,Po="value"in wi?wi.value:wi.textContent,Ta=!0)),Et=Rc(B,zt),0<Et.length&&(zt=new Ii(zt,e,null,a,Y),tt.push({event:zt,listeners:Et}),Vt?zt.data=Vt:(Vt=Ea(a),Vt!==null&&(zt.data=Vt)))),(Vt=Bn?vb(e,a):Eb(e,a))&&(zt=Rc(B,"onBeforeInput"),0<zt.length&&(Et=new Ii("onBeforeInput","beforeinput",null,a,Y),tt.push({event:Et,listeners:zt}),Et.data=Vt)),hS(tt,e,B,a,Y)}S_(tt,n)})}function yl(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Rc(e,n){for(var a=n+"Capture",o=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ii(e,a),h!=null&&o.unshift(yl(e,h,d)),h=ii(e,n),h!=null&&o.push(yl(e,h,d))),e.tag===3)return o;e=e.return}return[]}function pS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function w_(e,n,a,o,h){for(var d=n._reactName,_=[];a!==null&&a!==o;){var T=a,k=T.alternate,B=T.stateNode;if(T=T.tag,k!==null&&k===o)break;T!==5&&T!==26&&T!==27||B===null||(k=B,h?(B=ii(a,d),B!=null&&_.unshift(yl(a,B,k))):h||(B=ii(a,d),B!=null&&_.push(yl(a,B,k)))),a=a.return}_.length!==0&&e.push({event:n,listeners:_})}var gS=/\r\n?/g,yS=/\u0000|\uFFFD/g;function R_(e){return(typeof e=="string"?e:""+e).replace(gS,`
`).replace(yS,"")}function C_(e,n){return n=R_(n),R_(e)===n}function ie(e,n,a,o,h,d){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||gn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&gn(e,""+o);break;case"className":Cn(e,"class",o);break;case"tabIndex":Cn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(e,a,o);break;case"style":jo(e,o,d);break;case"data":if(n!=="object"){Cn(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=pa(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&ie(e,n,"name",h.name,h,null),ie(e,n,"formEncType",h.formEncType,h,null),ie(e,n,"formMethod",h.formMethod,h,null),ie(e,n,"formTarget",h.formTarget,h,null)):(ie(e,n,"encType",h.encType,h,null),ie(e,n,"method",h.method,h,null),ie(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=pa(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=ni);break;case"onScroll":o!=null&&Pt("scroll",e);break;case"onScrollEnd":o!=null&&Pt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=pa(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Pt("beforetoggle",e),Pt("toggle",e),fa(e,"popover",o);break;case"xlinkActuate":De(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":De(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":De(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":De(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":De(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":De(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":De(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":De(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":De(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":fa(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ru.get(a)||a,fa(e,a,o))}}function Id(e,n,a,o,h,d){switch(a){case"style":jo(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof o=="string"?gn(e,o):(typeof o=="number"||typeof o=="bigint")&&gn(e,""+o);break;case"onScroll":o!=null&&Pt("scroll",e);break;case"onScrollEnd":o!=null&&Pt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xo.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),d=e[Be]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(n,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):fa(e,a,o)}}}function We(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",e),Pt("load",e);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:ie(e,n,d,_,a,null)}}h&&ie(e,n,"srcSet",a.srcSet,a,null),o&&ie(e,n,"src",a.src,a,null);return;case"input":Pt("invalid",e);var T=d=_=h=null,k=null,B=null;for(o in a)if(a.hasOwnProperty(o)){var Y=a[o];if(Y!=null)switch(o){case"name":h=Y;break;case"type":_=Y;break;case"checked":k=Y;break;case"defaultChecked":B=Y;break;case"value":d=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,n));break;default:ie(e,n,o,Y,a,null)}}Su(e,d,T,k,B,_,h,!1);return;case"select":Pt("invalid",e),o=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":o=T;default:ie(e,n,h,T,a,null)}n=d,a=_,e.multiple=!!o,n!=null?Ss(e,!!o,n,!1):a!=null&&Ss(e,!!o,a,!0);return;case"textarea":Pt("invalid",e),d=h=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":o=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:ie(e,n,_,T,a,null)}As(e,o,h,d);return;case"option":for(k in a)a.hasOwnProperty(k)&&(o=a[k],o!=null)&&(k==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":ie(e,n,k,o,a,null));return;case"dialog":Pt("beforetoggle",e),Pt("toggle",e),Pt("cancel",e),Pt("close",e);break;case"iframe":case"object":Pt("load",e);break;case"video":case"audio":for(o=0;o<gl.length;o++)Pt(gl[o],e);break;case"image":Pt("error",e),Pt("load",e);break;case"details":Pt("toggle",e);break;case"embed":case"source":case"link":Pt("error",e),Pt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(o=a[B],o!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:ie(e,n,B,o,a,null)}return;default:if(ma(n)){for(Y in a)a.hasOwnProperty(Y)&&(o=a[Y],o!==void 0&&Id(e,n,Y,o,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(o=a[T],o!=null&&ie(e,n,T,o,a,null))}function _S(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,T=null,k=null,B=null,Y=null;for(G in a){var tt=a[G];if(a.hasOwnProperty(G)&&tt!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":k=tt;default:o.hasOwnProperty(G)||ie(e,n,G,null,o,tt)}}for(var q in o){var G=o[q];if(tt=a[q],o.hasOwnProperty(q)&&(G!=null||tt!=null))switch(q){case"type":d=G;break;case"name":h=G;break;case"checked":B=G;break;case"defaultChecked":Y=G;break;case"value":_=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,n));break;default:G!==tt&&ie(e,n,q,G,o,tt)}}da(e,_,T,k,B,Y,d,h);return;case"select":G=_=T=q=null;for(d in a)if(k=a[d],a.hasOwnProperty(d)&&k!=null)switch(d){case"value":break;case"multiple":G=k;default:o.hasOwnProperty(d)||ie(e,n,d,null,o,k)}for(h in o)if(d=o[h],k=a[h],o.hasOwnProperty(h)&&(d!=null||k!=null))switch(h){case"value":q=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==k&&ie(e,n,h,d,o,k)}n=T,a=_,o=G,q!=null?Ss(e,!!a,q,!1):!!o!=!!a&&(n!=null?Ss(e,!!a,n,!0):Ss(e,!!a,a?[]:"",!1));return;case"textarea":G=q=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ie(e,n,T,null,o,h)}for(_ in o)if(h=o[_],d=a[_],o.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":q=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&ie(e,n,_,h,o,d)}Au(e,q,G);return;case"option":for(var gt in a)q=a[gt],a.hasOwnProperty(gt)&&q!=null&&!o.hasOwnProperty(gt)&&(gt==="selected"?e.selected=!1:ie(e,n,gt,null,o,q));for(k in o)q=o[k],G=a[k],o.hasOwnProperty(k)&&q!==G&&(q!=null||G!=null)&&(k==="selected"?e.selected=q&&typeof q!="function"&&typeof q!="symbol":ie(e,n,k,q,o,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in a)q=a[At],a.hasOwnProperty(At)&&q!=null&&!o.hasOwnProperty(At)&&ie(e,n,At,null,o,q);for(B in o)if(q=o[B],G=a[B],o.hasOwnProperty(B)&&q!==G&&(q!=null||G!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,n));break;default:ie(e,n,B,q,o,G)}return;default:if(ma(n)){for(var se in a)q=a[se],a.hasOwnProperty(se)&&q!==void 0&&!o.hasOwnProperty(se)&&Id(e,n,se,void 0,o,q);for(Y in o)q=o[Y],G=a[Y],!o.hasOwnProperty(Y)||q===G||q===void 0&&G===void 0||Id(e,n,Y,q,o,G);return}}for(var j in a)q=a[j],a.hasOwnProperty(j)&&q!=null&&!o.hasOwnProperty(j)&&ie(e,n,j,null,o,q);for(tt in o)q=o[tt],G=a[tt],!o.hasOwnProperty(tt)||q===G||q==null&&G==null||ie(e,n,tt,q,o,G)}function I_(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],d=h.transferSize,_=h.initiatorType,T=h.duration;if(d&&T&&I_(_)){for(_=0,T=h.responseEnd,o+=1;o<a.length;o++){var k=a[o],B=k.startTime;if(B>T)break;var Y=k.transferSize,tt=k.initiatorType;Y&&I_(tt)&&(k=k.responseEnd,_+=Y*(k<T?1:(T-B)/(k-B)))}if(--o,n+=8*(d+_)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var xd=null,Dd=null;function Cc(e){return e.nodeType===9?e:e.ownerDocument}function x_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function D_(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Nd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Od=null;function ES(){var e=window.event;return e&&e.type==="popstate"?e===Od?!1:(Od=e,!0):(Od=null,!1)}var N_=typeof setTimeout=="function"?setTimeout:void 0,TS=typeof clearTimeout=="function"?clearTimeout:void 0,O_=typeof Promise=="function"?Promise:void 0,bS=typeof queueMicrotask=="function"?queueMicrotask:typeof O_<"u"?function(e){return O_.resolve(null).then(e).catch(SS)}:N_;function SS(e){setTimeout(function(){throw e})}function Ys(e){return e==="head"}function k_(e,n){var a=n,o=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(h),Xa(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")_l(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,_l(a);for(var d=a.firstChild;d;){var _=d.nextSibling,T=d.nodeName;d[_i]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&_l(e.ownerDocument.body);a=h}while(a);Xa(n)}function V_(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function kd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":kd(a),ha(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function AS(e,n,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[_i])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Qn(e.nextSibling),e===null)break}return null}function wS(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Qn(e.nextSibling),e===null))return null;return e}function M_(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Qn(e.nextSibling),e===null))return null;return e}function Vd(e){return e.data==="$?"||e.data==="$~"}function Md(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function RS(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Qn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var jd=null;function j_(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return Qn(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function L_(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function P_(e,n,a){switch(n=Cc(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function _l(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);ha(e)}var Xn=new Map,U_=new Set;function Ic(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var us=J.d;J.d={f:CS,r:IS,D:xS,C:DS,L:NS,m:OS,X:VS,S:kS,M:MS};function CS(){var e=us.f(),n=vc();return e||n}function IS(e){var n=Pn(e);n!==null&&n.tag===5&&n.type==="form"?ny(n):us.r(e)}var Ka=typeof document>"u"?null:document;function z_(e,n,a){var o=Ka;if(o&&typeof n=="string"&&n){var h=pn(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),U_.has(h)||(U_.add(h),e={rel:e,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),We(n,"link",e),xe(n),o.head.appendChild(n)))}}function xS(e){us.D(e),z_("dns-prefetch",e,null)}function DS(e,n){us.C(e,n),z_("preconnect",e,n)}function NS(e,n,a){us.L(e,n,a);var o=Ka;if(o&&e&&n){var h='link[rel="preload"][as="'+pn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+pn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+pn(a.imageSizes)+'"]')):h+='[href="'+pn(e)+'"]';var d=h;switch(n){case"style":d=Ya(e);break;case"script":d=Qa(e)}Xn.has(d)||(e=C({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Xn.set(d,e),o.querySelector(h)!==null||n==="style"&&o.querySelector(vl(d))||n==="script"&&o.querySelector(El(d))||(n=o.createElement("link"),We(n,"link",e),xe(n),o.head.appendChild(n)))}}function OS(e,n){us.m(e,n);var a=Ka;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+pn(o)+'"][href="'+pn(e)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Qa(e)}if(!Xn.has(d)&&(e=C({rel:"modulepreload",href:e},n),Xn.set(d,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(El(d)))return}o=a.createElement("link"),We(o,"link",e),xe(o),a.head.appendChild(o)}}}function kS(e,n,a){us.S(e,n,a);var o=Ka;if(o&&e){var h=Ei(o).hoistableStyles,d=Ya(e);n=n||"default";var _=h.get(d);if(!_){var T={loading:0,preload:null};if(_=o.querySelector(vl(d)))T.loading=5;else{e=C({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Xn.get(d))&&Ld(e,a);var k=_=o.createElement("link");xe(k),We(k,"link",e),k._p=new Promise(function(B,Y){k.onload=B,k.onerror=Y}),k.addEventListener("load",function(){T.loading|=1}),k.addEventListener("error",function(){T.loading|=2}),T.loading|=4,xc(_,n,o)}_={type:"stylesheet",instance:_,count:1,state:T},h.set(d,_)}}}function VS(e,n){us.X(e,n);var a=Ka;if(a&&e){var o=Ei(a).hoistableScripts,h=Qa(e),d=o.get(h);d||(d=a.querySelector(El(h)),d||(e=C({src:e,async:!0},n),(n=Xn.get(h))&&Pd(e,n),d=a.createElement("script"),xe(d),We(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function MS(e,n){us.M(e,n);var a=Ka;if(a&&e){var o=Ei(a).hoistableScripts,h=Qa(e),d=o.get(h);d||(d=a.querySelector(El(h)),d||(e=C({src:e,async:!0,type:"module"},n),(n=Xn.get(h))&&Pd(e,n),d=a.createElement("script"),xe(d),We(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function B_(e,n,a,o){var h=(h=at.current)?Ic(h):null;if(!h)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Ya(a.href),a=Ei(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ya(a.href);var d=Ei(h).hoistableStyles,_=d.get(e);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,_),(d=h.querySelector(vl(e)))&&!d._p&&(_.instance=d,_.state.loading=5),Xn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xn.set(e,a),d||jS(h,e,a,_.state))),n&&o===null)throw Error(r(528,""));return _}if(n&&o!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Qa(a),a=Ei(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Ya(e){return'href="'+pn(e)+'"'}function vl(e){return'link[rel="stylesheet"]['+e+"]"}function q_(e){return C({},e,{"data-precedence":e.precedence,precedence:null})}function jS(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),We(n,"link",a),xe(n),e.head.appendChild(n))}function Qa(e){return'[src="'+pn(e)+'"]'}function El(e){return"script[async]"+e}function H_(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+pn(a.href)+'"]');if(o)return n.instance=o,xe(o),o;var h=C({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),xe(o),We(o,"style",h),xc(o,a.precedence,e),n.instance=o;case"stylesheet":h=Ya(a.href);var d=e.querySelector(vl(h));if(d)return n.state.loading|=4,n.instance=d,xe(d),d;o=q_(a),(h=Xn.get(h))&&Ld(o,h),d=(e.ownerDocument||e).createElement("link"),xe(d);var _=d;return _._p=new Promise(function(T,k){_.onload=T,_.onerror=k}),We(d,"link",o),n.state.loading|=4,xc(d,a.precedence,e),n.instance=d;case"script":return d=Qa(a.src),(h=e.querySelector(El(d)))?(n.instance=h,xe(h),h):(o=a,(h=Xn.get(d))&&(o=C({},a),Pd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),xe(h),We(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,xc(o,a.precedence,e));return n.instance}function xc(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,_=0;_<o.length;_++){var T=o[_];if(T.dataset.precedence===n)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Ld(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Pd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Dc=null;function F_(e,n,a){if(Dc===null){var o=new Map,h=Dc=new Map;h.set(a,o)}else h=Dc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[_i]||d[Ie]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(n)||"";_=e+_;var T=o.get(_);T?T.push(d):o.set(_,[d])}}return o}function G_(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function LS(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function K_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function PS(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Ya(o.href),d=n.querySelector(vl(h));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Nc.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=d,xe(d);return}d=n.ownerDocument||n,o=q_(o),(h=Xn.get(h))&&Ld(o,h),d=d.createElement("link"),xe(d);var _=d;_._p=new Promise(function(T,k){_.onload=T,_.onerror=k}),We(d,"link",o),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Nc.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Ud=0;function US(e,n){return e.stylesheets&&e.count===0&&kc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&kc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&Ud===0&&(Ud=62500*vS());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&kc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Ud?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Nc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Oc=null;function kc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Oc=new Map,n.forEach(zS,e),Oc=null,Nc.call(e))}function zS(e,n){if(!(n.state.loading&4)){var a=Oc.get(e);if(a)var o=a.get(null);else{a=new Map,Oc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}h=n.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||o,d===o&&a.set(null,h),a.set(_,h),this.count++,o=Nc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var Tl={$$typeof:it,Provider:null,Consumer:null,_currentValue:ot,_currentValue2:ot,_threadCount:0};function BS(e,n,a,o,h,d,_,T,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Y_(e,n,a,o,h,d,_,T,k,B,Y,tt){return e=new BS(e,n,a,_,k,B,Y,tt,T),n=1,d===!0&&(n|=24),d=xn(3,null,null,n),e.current=d,d.stateNode=e,n=_f(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:n},bf(d),e}function Q_(e){return e?(e=wa,e):wa}function X_(e,n,a,o,h,d){h=Q_(h),o.context===null?o.context=h:o.pendingContext=h,o=js(n),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=Ls(e,o,n),a!==null&&(Tn(a,e,n),Jo(a,e,n))}function $_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function zd(e,n){$_(e,n),(e=e.alternate)&&$_(e,n)}function Z_(e){if(e.tag===13||e.tag===31){var n=Pr(e,67108864);n!==null&&Tn(n,e,67108864),zd(e,67108864)}}function W_(e){if(e.tag===13||e.tag===31){var n=Vn();n=Rr(n);var a=Pr(e,n);a!==null&&Tn(a,e,n),zd(e,n)}}var Vc=!0;function qS(e,n,a,o){var h=P.T;P.T=null;var d=J.p;try{J.p=2,Bd(e,n,a,o)}finally{J.p=d,P.T=h}}function HS(e,n,a,o){var h=P.T;P.T=null;var d=J.p;try{J.p=8,Bd(e,n,a,o)}finally{J.p=d,P.T=h}}function Bd(e,n,a,o){if(Vc){var h=qd(o);if(h===null)Cd(e,n,o,Mc,a),tv(e,o);else if(GS(h,e,n,a,o))o.stopPropagation();else if(tv(e,o),n&4&&-1<FS.indexOf(e)){for(;h!==null;){var d=Pn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=mi(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var k=1<<31-_e(_);T.entanglements[1]|=k,_&=~k}ki(d),($t&6)===0&&(yc=cn()+500,pl(0))}}break;case 31:case 13:T=Pr(d,2),T!==null&&Tn(T,d,2),vc(),zd(d,2)}if(d=qd(o),d===null&&Cd(e,n,o,Mc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else Cd(e,n,o,null,a)}}function qd(e){return e=Un(e),Hd(e)}var Mc=null;function Hd(e){if(Mc=null,e=vi(e),e!==null){var n=u(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=f(n),e!==null)return e;e=null}else if(a===31){if(e=m(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Mc=e,null}function J_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(br()){case Ao:return 2;case wo:return 8;case Ts:case Qh:return 32;case du:return 268435456;default:return 32}default:return 32}}var Fd=!1,Qs=null,Xs=null,$s=null,bl=new Map,Sl=new Map,Zs=[],FS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tv(e,n){switch(e){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":bl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(n.pointerId)}}function Al(e,n,a,o,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},n!==null&&(n=Pn(n),n!==null&&Z_(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function GS(e,n,a,o,h){switch(n){case"focusin":return Qs=Al(Qs,e,n,a,o,h),!0;case"dragenter":return Xs=Al(Xs,e,n,a,o,h),!0;case"mouseover":return $s=Al($s,e,n,a,o,h),!0;case"pointerover":var d=h.pointerId;return bl.set(d,Al(bl.get(d)||null,e,n,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,Sl.set(d,Al(Sl.get(d)||null,e,n,a,o,h)),!0}return!1}function ev(e){var n=vi(e.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){e.blockedOn=n,ti(e.priority,function(){W_(a)});return}}else if(n===31){if(n=m(a),n!==null){e.blockedOn=n,ti(e.priority,function(){W_(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=qd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Lo=o,a.target.dispatchEvent(o),Lo=null}else return n=Pn(a),n!==null&&Z_(n),e.blockedOn=a,!1;n.shift()}return!0}function nv(e,n,a){jc(e)&&a.delete(n)}function KS(){Fd=!1,Qs!==null&&jc(Qs)&&(Qs=null),Xs!==null&&jc(Xs)&&(Xs=null),$s!==null&&jc($s)&&($s=null),bl.forEach(nv),Sl.forEach(nv)}function Lc(e,n){e.blockedOn===n&&(e.blockedOn=null,Fd||(Fd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,KS)))}var Pc=null;function iv(e){Pc!==e&&(Pc=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Pc===e&&(Pc=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(Hd(o||a)===null)continue;break}var d=Pn(a);d!==null&&(e.splice(n,3),n-=3,qf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function Xa(e){function n(k){return Lc(k,e)}Qs!==null&&Lc(Qs,e),Xs!==null&&Lc(Xs,e),$s!==null&&Lc($s,e),bl.forEach(n),Sl.forEach(n);for(var a=0;a<Zs.length;a++){var o=Zs[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Zs.length&&(a=Zs[0],a.blockedOn===null);)ev(a),a.blockedOn===null&&Zs.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],_=h[Be]||null;if(typeof d=="function")_||iv(a);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[Be]||null)T=_.formAction;else if(Hd(h)!==null)continue}else T=_.action;typeof T=="function"?a[o+1]=T:(a.splice(o,3),o-=3),iv(a)}}}function sv(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Gd(e){this._internalRoot=e}Uc.prototype.render=Gd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,o=Vn();X_(a,o,e,n,null,null)},Uc.prototype.unmount=Gd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;X_(e.current,2,null,e,null,null),vc(),n[yi]=null}};function Uc(e){this._internalRoot=e}Uc.prototype.unstable_scheduleHydration=function(e){if(e){var n=vu();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Zs.length&&n!==0&&n<Zs[a].priority;a++);Zs.splice(a,0,e),a===0&&ev(e)}};var rv=t.version;if(rv!=="19.2.3")throw Error(r(527,rv,"19.2.3"));J.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(n),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var YS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{Wn=zc.inject(YS),Ye=zc}catch{}}return Rl.createRoot=function(e,n){if(!l(e))throw Error(r(299));var a=!1,o="",h=fy,d=dy,_=my;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError)),n=Y_(e,1,!1,null,null,a,o,null,h,d,_,sv),e[yi]=n.current,Rd(e),new Gd(n)},Rl.hydrateRoot=function(e,n,a){if(!l(e))throw Error(r(299));var o=!1,h="",d=fy,_=dy,T=my,k=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),n=Y_(e,1,!0,n,a??null,o,h,k,d,_,T,sv),n.context=Q_(null),a=n.current,o=Vn(),o=Rr(o),h=js(o),h.callback=null,Ls(a,h,o),a=o,n.current.lanes=a,Ar(n,a),ki(n),e[yi]=n.current,Rd(e),new Uc(n)},Rl.version="19.2.3",Rl}var pv;function iA(){if(pv)return Qd.exports;pv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Qd.exports=nA(),Qd.exports}var sA=iA();const rA=()=>{};var gv={};const YE=function(s){const t=[];let i=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},aA=function(s){const t=[];let i=0,r=0;for(;i<s.length;){const l=s[i++];if(l<128)t[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[i++];t[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[i++],f=s[i++],m=s[i++],g=((l&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[i++],f=s[i++];t[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return t.join("")},QE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const u=s[l],f=l+1<s.length,m=f?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,b=u>>2,C=(u&3)<<4|m>>4;let I=(m&15)<<2|y>>6,L=y&63;g||(L=64,f||(I=64)),r.push(i[b],i[C],i[I],i[L])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(YE(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):aA(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const u=i[s.charAt(l++)],m=l<s.length?i[s.charAt(l)]:0;++l;const y=l<s.length?i[s.charAt(l)]:64;++l;const C=l<s.length?i[s.charAt(l)]:64;if(++l,u==null||m==null||y==null||C==null)throw new oA;const I=u<<2|m>>4;if(r.push(I),y!==64){const L=m<<4&240|y>>2;if(r.push(L),C!==64){const X=y<<6&192|C;r.push(X)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class oA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lA=function(s){const t=YE(s);return QE.encodeByteArray(t,!0)},ih=function(s){return lA(s).replace(/\./g,"")},XE=function(s){try{return QE.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function uA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const cA=()=>uA().__FIREBASE_DEFAULTS__,hA=()=>{if(typeof process>"u"||typeof gv>"u")return;const s=gv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},fA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&XE(s[1]);return t&&JSON.parse(t)},Ah=()=>{try{return rA()||cA()||hA()||fA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},$E=s=>Ah()?.emulatorHosts?.[s],dA=s=>{const t=$E(s);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},ZE=()=>Ah()?.config,WE=s=>Ah()?.[`_${s}`];class mA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}function po(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function JE(s){return(await fetch(s,{credentials:"include"})).ok}function pA(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ih(JSON.stringify(i)),ih(JSON.stringify(f)),""].join(".")}const kl={};function gA(){const s={prod:[],emulator:[]};for(const t of Object.keys(kl))kl[t]?s.emulator.push(t):s.prod.push(t);return s}function yA(s){let t=document.getElementById(s),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),i=!0),{created:i,element:t}}let yv=!1;function tT(s,t){if(typeof window>"u"||typeof document>"u"||!po(window.location.host)||kl[s]===t||kl[s]||yv)return;kl[s]=t;function i(I){return`__firebase__banner__${I}`}const r="__firebase__banner",u=gA().prod.length>0;function f(){const I=document.getElementById(r);I&&I.remove()}function m(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,L){I.setAttribute("width","24"),I.setAttribute("id",L),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{yv=!0,f()},I}function b(I,L){I.setAttribute("id",L),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function C(){const I=yA(r),L=i("text"),X=document.getElementById(L)||document.createElement("span"),Q=i("learnmore"),K=document.getElementById(Q)||document.createElement("a"),ct=i("preprendIcon"),Tt=document.getElementById(ct)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const it=I.element;m(it),b(K,Q);const pt=y();g(Tt,ct),it.append(Tt,X,K,pt),document.body.appendChild(it)}u?(X.innerText="Preview backend disconnected.",Tt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Tt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _A(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function vA(){const s=Ah()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function bA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SA(){const s=un();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function AA(){return!vA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wA(){try{return typeof indexedDB=="object"}catch{return!1}}function RA(){return new Promise((s,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(i){t(i)}})}const CA="FirebaseError";class _s extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=CA,Object.setPrototypeOf(this,_s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$l.prototype.create)}}class $l{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},l=`${this.service}/${t}`,u=this.errors[t],f=u?IA(u,r):"Error",m=`${this.serviceName}: ${f} (${l}).`;return new _s(l,m,r)}}function IA(s,t){return s.replace(xA,(i,r)=>{const l=t[r];return l!=null?String(l):`<${r}?>`})}const xA=/\{\$([^}]+)}/g;function DA(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function hr(s,t){if(s===t)return!0;const i=Object.keys(s),r=Object.keys(t);for(const l of i){if(!r.includes(l))return!1;const u=s[l],f=t[l];if(_v(u)&&_v(f)){if(!hr(u,f))return!1}else if(u!==f)return!1}for(const l of r)if(!i.includes(l))return!1;return!0}function _v(s){return s!==null&&typeof s=="object"}function Zl(s){const t=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Cl(s){const t={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");t[decodeURIComponent(l)]=decodeURIComponent(u)}}),t}function Il(s){const t=s.indexOf("?");if(!t)return"";const i=s.indexOf("#",t);return s.substring(t,i>0?i:void 0)}function NA(s,t){const i=new OA(s,t);return i.subscribe.bind(i)}class OA{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,r){let l;if(t===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");kA(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:r},l.next===void 0&&(l.next=Wd),l.error===void 0&&(l.error=Wd),l.complete===void 0&&(l.complete=Wd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kA(s,t){if(typeof s!="object"||s===null)return!1;for(const i of t)if(i in s&&typeof s[i]=="function")return!0;return!1}function Wd(){}function Ae(s){return s&&s._delegate?s._delegate:s}class ea{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Zr="[DEFAULT]";class VA{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new mA;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jA(t))try{this.getOrInitializeService({instanceIdentifier:Zr})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(t=Zr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Zr){return this.instances.has(t)}getOptions(t=Zr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&f.resolve(l)}return l}onInit(t,i){const r=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(r)??new Set;l.add(t),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&t(u,r),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const l of r)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MA(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Zr){return this.component?this.component.multipleInstances?t:Zr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MA(s){return s===Zr?void 0:s}function jA(s){return s.instantiationMode==="EAGER"}class LA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new VA(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}var Bt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Bt||(Bt={}));const PA={debug:Bt.DEBUG,verbose:Bt.VERBOSE,info:Bt.INFO,warn:Bt.WARN,error:Bt.ERROR,silent:Bt.SILENT},UA=Bt.INFO,zA={[Bt.DEBUG]:"log",[Bt.VERBOSE]:"log",[Bt.INFO]:"info",[Bt.WARN]:"warn",[Bt.ERROR]:"error"},BA=(s,t,...i)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),l=zA[t];if(l)console[l](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class qm{constructor(t){this.name=t,this._logLevel=UA,this._logHandler=BA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Bt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?PA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Bt.DEBUG,...t),this._logHandler(this,Bt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Bt.VERBOSE,...t),this._logHandler(this,Bt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Bt.INFO,...t),this._logHandler(this,Bt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Bt.WARN,...t),this._logHandler(this,Bt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Bt.ERROR,...t),this._logHandler(this,Bt.ERROR,...t)}}const qA=(s,t)=>t.some(i=>s instanceof i);let vv,Ev;function HA(){return vv||(vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FA(){return Ev||(Ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eT=new WeakMap,fm=new WeakMap,nT=new WeakMap,Jd=new WeakMap,Hm=new WeakMap;function GA(s){const t=new Promise((i,r)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{i(ar(s.result)),l()},f=()=>{r(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",f)});return t.then(i=>{i instanceof IDBCursor&&eT.set(i,s)}).catch(()=>{}),Hm.set(t,s),t}function KA(s){if(fm.has(s))return;const t=new Promise((i,r)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{i(),l()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});fm.set(s,t)}let dm={get(s,t,i){if(s instanceof IDBTransaction){if(t==="done")return fm.get(s);if(t==="objectStoreNames")return s.objectStoreNames||nT.get(s);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ar(s[t])},set(s,t,i){return s[t]=i,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function YA(s){dm=s(dm)}function QA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=s.call(tm(this),t,...i);return nT.set(r,t.sort?t.sort():[t]),ar(r)}:FA().includes(s)?function(...t){return s.apply(tm(this),t),ar(eT.get(this))}:function(...t){return ar(s.apply(tm(this),t))}}function XA(s){return typeof s=="function"?QA(s):(s instanceof IDBTransaction&&KA(s),qA(s,HA())?new Proxy(s,dm):s)}function ar(s){if(s instanceof IDBRequest)return GA(s);if(Jd.has(s))return Jd.get(s);const t=XA(s);return t!==s&&(Jd.set(s,t),Hm.set(t,s)),t}const tm=s=>Hm.get(s);function $A(s,t,{blocked:i,upgrade:r,blocking:l,terminated:u}={}){const f=indexedDB.open(s,t),m=ar(f);return r&&f.addEventListener("upgradeneeded",g=>{r(ar(f.result),g.oldVersion,g.newVersion,ar(f.transaction),g)}),i&&f.addEventListener("blocked",g=>i(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const ZA=["get","getKey","getAll","getAllKeys","count"],WA=["put","add","delete","clear"],em=new Map;function Tv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(em.get(t))return em.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,l=WA.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(l||ZA.includes(i)))return;const u=async function(f,...m){const g=this.transaction(f,l?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[i](...m),l&&g.done]))[0]};return em.set(t,u),u}YA(s=>({...s,get:(t,i,r)=>Tv(t,i)||s.get(t,i,r),has:(t,i)=>!!Tv(t,i)||s.has(t,i)}));class JA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(t1(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function t1(s){return s.getComponent()?.type==="VERSION"}const mm="@firebase/app",bv="0.14.6";const ms=new qm("@firebase/app"),e1="@firebase/app-compat",n1="@firebase/analytics-compat",i1="@firebase/analytics",s1="@firebase/app-check-compat",r1="@firebase/app-check",a1="@firebase/auth",o1="@firebase/auth-compat",l1="@firebase/database",u1="@firebase/data-connect",c1="@firebase/database-compat",h1="@firebase/functions",f1="@firebase/functions-compat",d1="@firebase/installations",m1="@firebase/installations-compat",p1="@firebase/messaging",g1="@firebase/messaging-compat",y1="@firebase/performance",_1="@firebase/performance-compat",v1="@firebase/remote-config",E1="@firebase/remote-config-compat",T1="@firebase/storage",b1="@firebase/storage-compat",S1="@firebase/firestore",A1="@firebase/ai",w1="@firebase/firestore-compat",R1="firebase",C1="12.6.0";const pm="[DEFAULT]",I1={[mm]:"fire-core",[e1]:"fire-core-compat",[i1]:"fire-analytics",[n1]:"fire-analytics-compat",[r1]:"fire-app-check",[s1]:"fire-app-check-compat",[a1]:"fire-auth",[o1]:"fire-auth-compat",[l1]:"fire-rtdb",[u1]:"fire-data-connect",[c1]:"fire-rtdb-compat",[h1]:"fire-fn",[f1]:"fire-fn-compat",[d1]:"fire-iid",[m1]:"fire-iid-compat",[p1]:"fire-fcm",[g1]:"fire-fcm-compat",[y1]:"fire-perf",[_1]:"fire-perf-compat",[v1]:"fire-rc",[E1]:"fire-rc-compat",[T1]:"fire-gcs",[b1]:"fire-gcs-compat",[S1]:"fire-fst",[w1]:"fire-fst-compat",[A1]:"fire-vertex","fire-js":"fire-js",[R1]:"fire-js-all"};const sh=new Map,x1=new Map,gm=new Map;function Sv(s,t){try{s.container.addComponent(t)}catch(i){ms.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,i)}}function ao(s){const t=s.name;if(gm.has(t))return ms.debug(`There were multiple attempts to register component ${t}.`),!1;gm.set(t,s);for(const i of sh.values())Sv(i,s);for(const i of x1.values())Sv(i,s);return!0}function Fm(s,t){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(t)}function $n(s){return s==null?!1:s.settings!==void 0}const D1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},or=new $l("app","Firebase",D1);class N1{constructor(t,i,r){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}const go=C1;function iT(s,t={}){let i=s;typeof t!="object"&&(t={name:t});const r={name:pm,automaticDataCollectionEnabled:!0,...t},l=r.name;if(typeof l!="string"||!l)throw or.create("bad-app-name",{appName:String(l)});if(i||(i=ZE()),!i)throw or.create("no-options");const u=sh.get(l);if(u){if(hr(i,u.options)&&hr(r,u.config))return u;throw or.create("duplicate-app",{appName:l})}const f=new LA(l);for(const g of gm.values())f.addComponent(g);const m=new N1(i,r,f);return sh.set(l,m),m}function sT(s=pm){const t=sh.get(s);if(!t&&s===pm&&ZE())return iT();if(!t)throw or.create("no-app",{appName:s});return t}function lr(s,t,i){let r=I1[s]??s;i&&(r+=`-${i}`);const l=r.match(/\s|\//),u=t.match(/\s|\//);if(l||u){const f=[`Unable to register library "${r}" with version "${t}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ms.warn(f.join(" "));return}ao(new ea(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const O1="firebase-heartbeat-database",k1=1,Ul="firebase-heartbeat-store";let nm=null;function rT(){return nm||(nm=$A(O1,k1,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Ul)}catch(i){console.warn(i)}}}}).catch(s=>{throw or.create("idb-open",{originalErrorMessage:s.message})})),nm}async function V1(s){try{const i=(await rT()).transaction(Ul),r=await i.objectStore(Ul).get(aT(s));return await i.done,r}catch(t){if(t instanceof _s)ms.warn(t.message);else{const i=or.create("idb-get",{originalErrorMessage:t?.message});ms.warn(i.message)}}}async function Av(s,t){try{const r=(await rT()).transaction(Ul,"readwrite");await r.objectStore(Ul).put(t,aT(s)),await r.done}catch(i){if(i instanceof _s)ms.warn(i.message);else{const r=or.create("idb-set",{originalErrorMessage:i?.message});ms.warn(r.message)}}}function aT(s){return`${s.name}!${s.options.appId}`}const M1=1024,j1=30;class L1{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new U1(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=wv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>j1){const l=z1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ms.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=wv(),{heartbeatsToSend:i,unsentEntries:r}=P1(this._heartbeatsCache.heartbeats),l=ih(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ms.warn(t),""}}}function wv(){return new Date().toISOString().substring(0,10)}function P1(s,t=M1){const i=[];let r=s.slice();for(const l of s){const u=i.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),Rv(i)>t){u.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),Rv(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class U1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wA()?RA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await V1(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Av(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Av(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Rv(s){return ih(JSON.stringify({version:2,heartbeats:s})).length}function z1(s){if(s.length===0)return-1;let t=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,t=r);return t}function B1(s){ao(new ea("platform-logger",t=>new JA(t),"PRIVATE")),ao(new ea("heartbeat",t=>new L1(t),"PRIVATE")),lr(mm,bv,s),lr(mm,bv,"esm2020"),lr("fire-js","")}B1("");var q1="firebase",H1="12.7.0";lr(q1,H1,"app");var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ur,oT;(function(){var s;function t(D,S){function x(){}x.prototype=S.prototype,D.F=S.prototype,D.prototype=new x,D.prototype.constructor=D,D.D=function(O,N,w){for(var R=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)R[yt-2]=arguments[yt];return S.prototype[N].apply(O,R)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,i),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(D,S,x){x||(x=0);const O=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)O[N]=S.charCodeAt(x++)|S.charCodeAt(x++)<<8|S.charCodeAt(x++)<<16|S.charCodeAt(x++)<<24;else for(N=0;N<16;++N)O[N]=S[x++]|S[x++]<<8|S[x++]<<16|S[x++]<<24;S=D.g[0],x=D.g[1],N=D.g[2];let w=D.g[3],R;R=S+(w^x&(N^w))+O[0]+3614090360&4294967295,S=x+(R<<7&4294967295|R>>>25),R=w+(N^S&(x^N))+O[1]+3905402710&4294967295,w=S+(R<<12&4294967295|R>>>20),R=N+(x^w&(S^x))+O[2]+606105819&4294967295,N=w+(R<<17&4294967295|R>>>15),R=x+(S^N&(w^S))+O[3]+3250441966&4294967295,x=N+(R<<22&4294967295|R>>>10),R=S+(w^x&(N^w))+O[4]+4118548399&4294967295,S=x+(R<<7&4294967295|R>>>25),R=w+(N^S&(x^N))+O[5]+1200080426&4294967295,w=S+(R<<12&4294967295|R>>>20),R=N+(x^w&(S^x))+O[6]+2821735955&4294967295,N=w+(R<<17&4294967295|R>>>15),R=x+(S^N&(w^S))+O[7]+4249261313&4294967295,x=N+(R<<22&4294967295|R>>>10),R=S+(w^x&(N^w))+O[8]+1770035416&4294967295,S=x+(R<<7&4294967295|R>>>25),R=w+(N^S&(x^N))+O[9]+2336552879&4294967295,w=S+(R<<12&4294967295|R>>>20),R=N+(x^w&(S^x))+O[10]+4294925233&4294967295,N=w+(R<<17&4294967295|R>>>15),R=x+(S^N&(w^S))+O[11]+2304563134&4294967295,x=N+(R<<22&4294967295|R>>>10),R=S+(w^x&(N^w))+O[12]+1804603682&4294967295,S=x+(R<<7&4294967295|R>>>25),R=w+(N^S&(x^N))+O[13]+4254626195&4294967295,w=S+(R<<12&4294967295|R>>>20),R=N+(x^w&(S^x))+O[14]+2792965006&4294967295,N=w+(R<<17&4294967295|R>>>15),R=x+(S^N&(w^S))+O[15]+1236535329&4294967295,x=N+(R<<22&4294967295|R>>>10),R=S+(N^w&(x^N))+O[1]+4129170786&4294967295,S=x+(R<<5&4294967295|R>>>27),R=w+(x^N&(S^x))+O[6]+3225465664&4294967295,w=S+(R<<9&4294967295|R>>>23),R=N+(S^x&(w^S))+O[11]+643717713&4294967295,N=w+(R<<14&4294967295|R>>>18),R=x+(w^S&(N^w))+O[0]+3921069994&4294967295,x=N+(R<<20&4294967295|R>>>12),R=S+(N^w&(x^N))+O[5]+3593408605&4294967295,S=x+(R<<5&4294967295|R>>>27),R=w+(x^N&(S^x))+O[10]+38016083&4294967295,w=S+(R<<9&4294967295|R>>>23),R=N+(S^x&(w^S))+O[15]+3634488961&4294967295,N=w+(R<<14&4294967295|R>>>18),R=x+(w^S&(N^w))+O[4]+3889429448&4294967295,x=N+(R<<20&4294967295|R>>>12),R=S+(N^w&(x^N))+O[9]+568446438&4294967295,S=x+(R<<5&4294967295|R>>>27),R=w+(x^N&(S^x))+O[14]+3275163606&4294967295,w=S+(R<<9&4294967295|R>>>23),R=N+(S^x&(w^S))+O[3]+4107603335&4294967295,N=w+(R<<14&4294967295|R>>>18),R=x+(w^S&(N^w))+O[8]+1163531501&4294967295,x=N+(R<<20&4294967295|R>>>12),R=S+(N^w&(x^N))+O[13]+2850285829&4294967295,S=x+(R<<5&4294967295|R>>>27),R=w+(x^N&(S^x))+O[2]+4243563512&4294967295,w=S+(R<<9&4294967295|R>>>23),R=N+(S^x&(w^S))+O[7]+1735328473&4294967295,N=w+(R<<14&4294967295|R>>>18),R=x+(w^S&(N^w))+O[12]+2368359562&4294967295,x=N+(R<<20&4294967295|R>>>12),R=S+(x^N^w)+O[5]+4294588738&4294967295,S=x+(R<<4&4294967295|R>>>28),R=w+(S^x^N)+O[8]+2272392833&4294967295,w=S+(R<<11&4294967295|R>>>21),R=N+(w^S^x)+O[11]+1839030562&4294967295,N=w+(R<<16&4294967295|R>>>16),R=x+(N^w^S)+O[14]+4259657740&4294967295,x=N+(R<<23&4294967295|R>>>9),R=S+(x^N^w)+O[1]+2763975236&4294967295,S=x+(R<<4&4294967295|R>>>28),R=w+(S^x^N)+O[4]+1272893353&4294967295,w=S+(R<<11&4294967295|R>>>21),R=N+(w^S^x)+O[7]+4139469664&4294967295,N=w+(R<<16&4294967295|R>>>16),R=x+(N^w^S)+O[10]+3200236656&4294967295,x=N+(R<<23&4294967295|R>>>9),R=S+(x^N^w)+O[13]+681279174&4294967295,S=x+(R<<4&4294967295|R>>>28),R=w+(S^x^N)+O[0]+3936430074&4294967295,w=S+(R<<11&4294967295|R>>>21),R=N+(w^S^x)+O[3]+3572445317&4294967295,N=w+(R<<16&4294967295|R>>>16),R=x+(N^w^S)+O[6]+76029189&4294967295,x=N+(R<<23&4294967295|R>>>9),R=S+(x^N^w)+O[9]+3654602809&4294967295,S=x+(R<<4&4294967295|R>>>28),R=w+(S^x^N)+O[12]+3873151461&4294967295,w=S+(R<<11&4294967295|R>>>21),R=N+(w^S^x)+O[15]+530742520&4294967295,N=w+(R<<16&4294967295|R>>>16),R=x+(N^w^S)+O[2]+3299628645&4294967295,x=N+(R<<23&4294967295|R>>>9),R=S+(N^(x|~w))+O[0]+4096336452&4294967295,S=x+(R<<6&4294967295|R>>>26),R=w+(x^(S|~N))+O[7]+1126891415&4294967295,w=S+(R<<10&4294967295|R>>>22),R=N+(S^(w|~x))+O[14]+2878612391&4294967295,N=w+(R<<15&4294967295|R>>>17),R=x+(w^(N|~S))+O[5]+4237533241&4294967295,x=N+(R<<21&4294967295|R>>>11),R=S+(N^(x|~w))+O[12]+1700485571&4294967295,S=x+(R<<6&4294967295|R>>>26),R=w+(x^(S|~N))+O[3]+2399980690&4294967295,w=S+(R<<10&4294967295|R>>>22),R=N+(S^(w|~x))+O[10]+4293915773&4294967295,N=w+(R<<15&4294967295|R>>>17),R=x+(w^(N|~S))+O[1]+2240044497&4294967295,x=N+(R<<21&4294967295|R>>>11),R=S+(N^(x|~w))+O[8]+1873313359&4294967295,S=x+(R<<6&4294967295|R>>>26),R=w+(x^(S|~N))+O[15]+4264355552&4294967295,w=S+(R<<10&4294967295|R>>>22),R=N+(S^(w|~x))+O[6]+2734768916&4294967295,N=w+(R<<15&4294967295|R>>>17),R=x+(w^(N|~S))+O[13]+1309151649&4294967295,x=N+(R<<21&4294967295|R>>>11),R=S+(N^(x|~w))+O[4]+4149444226&4294967295,S=x+(R<<6&4294967295|R>>>26),R=w+(x^(S|~N))+O[11]+3174756917&4294967295,w=S+(R<<10&4294967295|R>>>22),R=N+(S^(w|~x))+O[2]+718787259&4294967295,N=w+(R<<15&4294967295|R>>>17),R=x+(w^(N|~S))+O[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,D.g[2]=D.g[2]+N&4294967295,D.g[3]=D.g[3]+w&4294967295}r.prototype.v=function(D,S){S===void 0&&(S=D.length);const x=S-this.blockSize,O=this.C;let N=this.h,w=0;for(;w<S;){if(N==0)for(;w<=x;)l(this,D,w),w+=this.blockSize;if(typeof D=="string"){for(;w<S;)if(O[N++]=D.charCodeAt(w++),N==this.blockSize){l(this,O),N=0;break}}else for(;w<S;)if(O[N++]=D[w++],N==this.blockSize){l(this,O),N=0;break}}this.h=N,this.o+=S},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;S=this.o*8;for(var x=D.length-8;x<D.length;++x)D[x]=S&255,S/=256;for(this.v(D),D=Array(16),S=0,x=0;x<4;++x)for(let O=0;O<32;O+=8)D[S++]=this.g[x]>>>O&255;return D};function u(D,S){var x=m;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=S(D)}function f(D,S){this.h=S;const x=[];let O=!0;for(let N=D.length-1;N>=0;N--){const w=D[N]|0;O&&w==S||(x[N]=w,O=!1)}this.g=x}var m={};function g(D){return-128<=D&&D<128?u(D,function(S){return new f([S|0],S<0?-1:0)}):new f([D|0],D<0?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return C;if(D<0)return K(y(-D));const S=[];let x=1;for(let O=0;D>=x;O++)S[O]=D/x|0,x*=4294967296;return new f(S,0)}function b(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return K(b(D.substring(1),S));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=y(Math.pow(S,8));let O=C;for(let w=0;w<D.length;w+=8){var N=Math.min(8,D.length-w);const R=parseInt(D.substring(w,w+N),S);N<8?(N=y(Math.pow(S,N)),O=O.j(N).add(y(R))):(O=O.j(x),O=O.add(y(R)))}return O}var C=g(0),I=g(1),L=g(16777216);s=f.prototype,s.m=function(){if(Q(this))return-K(this).m();let D=0,S=1;for(let x=0;x<this.g.length;x++){const O=this.i(x);D+=(O>=0?O:4294967296+O)*S,S*=4294967296}return D},s.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(X(this))return"0";if(Q(this))return"-"+K(this).toString(D);const S=y(Math.pow(D,6));var x=this;let O="";for(;;){const N=pt(x,S).g;x=ct(x,N.j(S));let w=((x.g.length>0?x.g[0]:x.h)>>>0).toString(D);if(x=N,X(x))return w+O;for(;w.length<6;)w="0"+w;O=w+O}},s.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function X(D){if(D.h!=0)return!1;for(let S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function Q(D){return D.h==-1}s.l=function(D){return D=ct(this,D),Q(D)?-1:X(D)?0:1};function K(D){const S=D.g.length,x=[];for(let O=0;O<S;O++)x[O]=~D.g[O];return new f(x,~D.h).add(I)}s.abs=function(){return Q(this)?K(this):this},s.add=function(D){const S=Math.max(this.g.length,D.g.length),x=[];let O=0;for(let N=0;N<=S;N++){let w=O+(this.i(N)&65535)+(D.i(N)&65535),R=(w>>>16)+(this.i(N)>>>16)+(D.i(N)>>>16);O=R>>>16,w&=65535,R&=65535,x[N]=R<<16|w}return new f(x,x[x.length-1]&-2147483648?-1:0)};function ct(D,S){return D.add(K(S))}s.j=function(D){if(X(this)||X(D))return C;if(Q(this))return Q(D)?K(this).j(K(D)):K(K(this).j(D));if(Q(D))return K(this.j(K(D)));if(this.l(L)<0&&D.l(L)<0)return y(this.m()*D.m());const S=this.g.length+D.g.length,x=[];for(var O=0;O<2*S;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(let N=0;N<D.g.length;N++){const w=this.i(O)>>>16,R=this.i(O)&65535,yt=D.i(N)>>>16,rt=D.i(N)&65535;x[2*O+2*N]+=R*rt,Tt(x,2*O+2*N),x[2*O+2*N+1]+=w*rt,Tt(x,2*O+2*N+1),x[2*O+2*N+1]+=R*yt,Tt(x,2*O+2*N+1),x[2*O+2*N+2]+=w*yt,Tt(x,2*O+2*N+2)}for(D=0;D<S;D++)x[D]=x[2*D+1]<<16|x[2*D];for(D=S;D<2*S;D++)x[D]=0;return new f(x,0)};function Tt(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function it(D,S){this.g=D,this.h=S}function pt(D,S){if(X(S))throw Error("division by zero");if(X(D))return new it(C,C);if(Q(D))return S=pt(K(D),S),new it(K(S.g),K(S.h));if(Q(S))return S=pt(D,K(S)),new it(K(S.g),S.h);if(D.g.length>30){if(Q(D)||Q(S))throw Error("slowDivide_ only works with positive integers.");for(var x=I,O=S;O.l(D)<=0;)x=W(x),O=W(O);var N=ft(x,1),w=ft(O,1);for(O=ft(O,2),x=ft(x,2);!X(O);){var R=w.add(O);R.l(D)<=0&&(N=N.add(x),w=R),O=ft(O,1),x=ft(x,1)}return S=ct(D,N.j(S)),new it(N,S)}for(N=C;D.l(S)>=0;){for(x=Math.max(1,Math.floor(D.m()/S.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),w=y(x),R=w.j(S);Q(R)||R.l(D)>0;)x-=O,w=y(x),R=w.j(S);X(w)&&(w=I),N=N.add(w),D=ct(D,R)}return new it(N,D)}s.B=function(D){return pt(this,D).h},s.and=function(D){const S=Math.max(this.g.length,D.g.length),x=[];for(let O=0;O<S;O++)x[O]=this.i(O)&D.i(O);return new f(x,this.h&D.h)},s.or=function(D){const S=Math.max(this.g.length,D.g.length),x=[];for(let O=0;O<S;O++)x[O]=this.i(O)|D.i(O);return new f(x,this.h|D.h)},s.xor=function(D){const S=Math.max(this.g.length,D.g.length),x=[];for(let O=0;O<S;O++)x[O]=this.i(O)^D.i(O);return new f(x,this.h^D.h)};function W(D){const S=D.g.length+1,x=[];for(let O=0;O<S;O++)x[O]=D.i(O)<<1|D.i(O-1)>>>31;return new f(x,D.h)}function ft(D,S){const x=S>>5;S%=32;const O=D.g.length-x,N=[];for(let w=0;w<O;w++)N[w]=S>0?D.i(w+x)>>>S|D.i(w+x+1)<<32-S:D.i(w+x);return new f(N,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,oT=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=b,ur=f}).apply(typeof Cv<"u"?Cv:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var lT,xl,uT,Yc,ym,cT,hT,fT;(function(){var s,t=Object.defineProperty;function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var p=0;p<c.length;++p){var v=c[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=i(this);function l(c,p){if(p)t:{var v=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var U=c[A];if(!(U in v))break t;v=v[U]}c=c[c.length-1],A=v[c],p=p(A),p!=A&&p!=null&&t(v,c,{configurable:!0,writable:!0,value:p})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(p){var v=[],A;for(A in p)Object.prototype.hasOwnProperty.call(p,A)&&v.push([A,p[A]]);return v}});var u=u||{},f=this||self;function m(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function g(c,p,v){return c.call.apply(c.bind,arguments)}function y(c,p,v){return y=g,y.apply(null,arguments)}function b(c,p){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function C(c,p){function v(){}v.prototype=p.prototype,c.Z=p.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(A,U,F){for(var lt=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)lt[Ot-2]=arguments[Ot];return p.prototype[U].apply(A,lt)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function L(c){const p=c.length;if(p>0){const v=Array(p);for(let A=0;A<p;A++)v[A]=c[A];return v}return[]}function X(c,p){for(let A=1;A<arguments.length;A++){const U=arguments[A];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=c.length||0;const F=U.length||0;c.length=v+F;for(let lt=0;lt<F;lt++)c[v+lt]=U[lt]}else c.push(U)}}class Q{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function K(c){f.setTimeout(()=>{throw c},0)}function ct(){var c=D;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class Tt{constructor(){this.h=this.g=null}add(p,v){const A=it.get();A.set(p,v),this.h?this.h.next=A:this.g=A,this.h=A}}var it=new Q(()=>new pt,c=>c.reset());class pt{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let W,ft=!1,D=new Tt,S=()=>{const c=Promise.resolve(void 0);W=()=>{c.then(x)}};function x(){for(var c;c=ct();){try{c.h.call(c.g)}catch(v){K(v)}var p=it;p.j(c),p.h<100&&(p.h++,c.next=p.g,p.g=c)}ft=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var w=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};f.addEventListener("test",v,p),f.removeEventListener("test",v,p)}catch{}return c})();function R(c){return/^[\s\xa0]*$/.test(c)}function yt(c,p){N.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,p)}C(yt,N),yt.prototype.init=function(c,p){const v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget,p||(v=="mouseover"?p=c.fromElement:v=="mouseout"&&(p=c.toElement)),this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&yt.Z.h.call(this)},yt.prototype.h=function(){yt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var rt="closure_listenable_"+(Math.random()*1e6|0),P=0;function J(c,p,v,A,U){this.listener=c,this.proxy=null,this.src=p,this.type=v,this.capture=!!A,this.ha=U,this.key=++P,this.da=this.fa=!1}function ot(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function _t(c,p,v){for(const A in c)p.call(v,c[A],A,c)}function Ct(c,p){for(const v in c)p.call(void 0,c[v],v,c)}function V(c){const p={};for(const v in c)p[v]=c[v];return p}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nt(c,p){let v,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(v in A)c[v]=A[v];for(let F=0;F<H.length;F++)v=H[F],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function ut(c){this.src=c,this.g={},this.h=0}ut.prototype.add=function(c,p,v,A,U){const F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);const lt=at(c,p,A,U);return lt>-1?(p=c[lt],v||(p.fa=!1)):(p=new J(p,this.src,F,!!A,U),p.fa=v,c.push(p)),p};function st(c,p){const v=p.type;if(v in c.g){var A=c.g[v],U=Array.prototype.indexOf.call(A,p,void 0),F;(F=U>=0)&&Array.prototype.splice.call(A,U,1),F&&(ot(p),c.g[v].length==0&&(delete c.g[v],c.h--))}}function at(c,p,v,A){for(let U=0;U<c.length;++U){const F=c[U];if(!F.da&&F.listener==p&&F.capture==!!v&&F.ha==A)return U}return-1}var vt="closure_lm_"+(Math.random()*1e6|0),Gt={};function Mt(c,p,v,A,U){if(Array.isArray(p)){for(let F=0;F<p.length;F++)Mt(c,p[F],v,A,U);return null}return v=wn(v),c&&c[rt]?c.J(p,v,m(A)?!!A.capture:!1,U):we(c,p,v,!1,A,U)}function we(c,p,v,A,U,F){if(!p)throw Error("Invalid event type");const lt=m(U)?!!U.capture:!!U;let Ot=sn(c);if(Ot||(c[vt]=Ot=new ut(c)),v=Ot.add(p,v,A,lt,F),v.proxy)return v;if(A=Re(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)w||(U=lt),U===void 0&&(U=!1),c.addEventListener(p.toString(),A,U);else if(c.attachEvent)c.attachEvent(An(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Re(){function c(v){return p.call(c.src,c.listener,v)}const p=jt;return c}function nn(c,p,v,A,U){if(Array.isArray(p))for(var F=0;F<p.length;F++)nn(c,p[F],v,A,U);else A=m(A)?!!A.capture:!!A,v=wn(v),c&&c[rt]?(c=c.i,F=String(p).toString(),F in c.g&&(p=c.g[F],v=at(p,v,A,U),v>-1&&(ot(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete c.g[F],c.h--)))):c&&(c=sn(c))&&(p=c.g[p.toString()],c=-1,p&&(c=at(p,v,A,U)),(v=c>-1?p[c]:null)&&Ge(v))}function Ge(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[rt])st(p.i,c);else{var v=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(v,A,c.capture):p.detachEvent?p.detachEvent(An(v),A):p.addListener&&p.removeListener&&p.removeListener(A),(v=sn(p))?(st(v,c),v.h==0&&(v.src=null,p[vt]=null)):ot(c)}}}function An(c){return c in Gt?Gt[c]:Gt[c]="on"+c}function jt(c,p){if(c.da)c=!0;else{p=new yt(p,this);const v=c.listener,A=c.ha||c.src;c.fa&&Ge(c),c=v.call(A,p)}return c}function sn(c){return c=c[vt],c instanceof ut?c:null}var Ke="__closure_events_fn_"+(Math.random()*1e9>>>0);function wn(c){return typeof c=="function"?c:(c[Ke]||(c[Ke]=function(p){return c.handleEvent(p)}),c[Ke])}function de(){O.call(this),this.i=new ut(this),this.M=this,this.G=null}C(de,O),de.prototype[rt]=!0,de.prototype.removeEventListener=function(c,p,v,A){nn(this,c,p,v,A)};function Pe(c,p){var v,A=c.G;if(A)for(v=[];A;A=A.G)v.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new N(p,c);else if(p instanceof N)p.target=p.target||c;else{var U=p;p=new N(A,c),nt(p,U)}U=!0;let F,lt;if(v)for(lt=v.length-1;lt>=0;lt--)F=p.g=v[lt],U=Es(F,A,!0,p)&&U;if(F=p.g=c,U=Es(F,A,!0,p)&&U,U=Es(F,A,!1,p)&&U,v)for(lt=0;lt<v.length;lt++)F=p.g=v[lt],U=Es(F,A,!1,p)&&U}de.prototype.N=function(){if(de.Z.N.call(this),this.i){var c=this.i;for(const p in c.g){const v=c.g[p];for(let A=0;A<v.length;A++)ot(v[A]);delete c.g[p],c.h--}}this.G=null},de.prototype.J=function(c,p,v,A){return this.i.add(String(c),p,!1,v,A)},de.prototype.K=function(c,p,v,A){return this.i.add(String(c),p,!0,v,A)};function Es(c,p,v,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();let U=!0;for(let F=0;F<p.length;++F){const lt=p[F];if(lt&&!lt.da&&lt.capture==v){const Ot=lt.listener,ve=lt.ha||lt.src;lt.fa&&st(c.i,lt),U=Ot.call(ve,A)!==!1&&U}}return U&&!A.defaultPrevented}function Yh(c,p){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:f.setTimeout(c,p||0)}function fu(c){c.g=Yh(()=>{c.g=null,c.i&&(c.i=!1,fu(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class cn extends O{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:fu(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(c){O.call(this),this.h=c,this.g={}}C(br,O);var Ao=[];function wo(c){_t(c.g,function(p,v){this.g.hasOwnProperty(v)&&Ge(p)},c),c.g={}}br.prototype.N=function(){br.Z.N.call(this),wo(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ts=f.JSON.stringify,Qh=f.JSON.parse,du=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function mu(){}function pu(){}var Wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ye(){N.call(this,"d")}C(Ye,N);function Ln(){N.call(this,"c")}C(Ln,N);var _e={},gu=null;function ua(){return gu=gu||new de}_e.Ia="serverreachability";function yu(c){N.call(this,_e.Ia,c)}C(yu,N);function di(c){const p=ua();Pe(p,new yu(p))}_e.STAT_EVENT="statevent";function Sr(c,p){N.call(this,_e.STAT_EVENT,c),this.stat=p}C(Sr,N);function Ce(c){const p=ua();Pe(p,new Sr(p,c))}_e.Ja="timingevent";function mi(c,p){N.call(this,_e.Ja,c),this.size=p}C(mi,N);function pi(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},p)}function Jn(){this.g=!0}Jn.prototype.ua=function(){this.g=!1};function Xh(c,p,v,A,U,F){c.info(function(){if(c.g)if(F){var lt="",Ot=F.split("&");for(let Xt=0;Xt<Ot.length;Xt++){var ve=Ot[Xt].split("=");if(ve.length>1){const ce=ve[0];ve=ve[1];const Bn=ce.split("_");lt=Bn.length>=2&&Bn[1]=="type"?lt+(ce+"="+ve+"&"):lt+(ce+"=redacted&")}}}else lt=null;else lt=F;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+p+`
`+v+`
`+lt})}function _u(c,p,v,A,U,F,lt){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+p+`
`+v+`
`+F+" "+lt})}function gi(c,p,v,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+$h(c,v)+(A?" "+A:"")})}function Ar(c,p){c.info(function(){return"TIMEOUT: "+p})}Jn.prototype.info=function(){};function $h(c,p){if(!c.g)return p;if(!p)return null;try{const F=JSON.parse(p);if(F){for(c=0;c<F.length;c++)if(Array.isArray(F[c])){var v=F[c];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var U=A[0];if(U!="noop"&&U!="stop"&&U!="close")for(let lt=1;lt<A.length;lt++)A[lt]=""}}}}return Ts(F)}catch{return p}}var wr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ro={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Co;function Rr(){}C(Rr,mu),Rr.prototype.g=function(){return new XMLHttpRequest},Co=new Rr;function Gi(c){return encodeURIComponent(String(c))}function vu(c){var p=1;c=c.split(":");const v=[];for(;p>0&&c.length;)v.push(c.shift()),p--;return c.length&&v.push(c.join(":")),v}function ti(c,p,v,A){this.j=c,this.i=p,this.l=v,this.S=A||1,this.V=new br(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}var Ie={},Be={};function yi(c,p,v){c.M=1,c.A=Cr(De(p)),c.u=v,c.R=!0,ca(c,null)}function ca(c,p){c.F=Date.now(),_i(c),c.B=De(c.A);var v=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),ma(v.i,"t",A),c.C=0,v=c.j.L,c.h=new ei,c.g=Vu(c.j,v?p:null,!c.u),c.P>0&&(c.O=new cn(y(c.Y,c,c.g),c.P)),p=c.V,v=c.g,A=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(Ao[0]=U.toString()),U=Ao);for(let F=0;F<U.length;F++){const lt=Mt(v,U[F],A||p.handleEvent,!1,p.h||p);if(!lt)break;p.g[lt.key]=lt}p=c.J?V(c.J):{},c.u?(c.v||(c.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,p)):(c.v="GET",c.g.ea(c.B,c.v,null,p)),di(),Xh(c.i,c.v,c.B,c.l,c.S,c.u)}ti.prototype.ba=function(c){c=c.target;const p=this.O;p&&si(c)==3?p.j():this.Y(c)},ti.prototype.Y=function(c){try{if(c==this.g)t:{const Ot=si(this.g),ve=this.g.ya(),Xt=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||Qe(this.g)))){this.K||Ot!=4||ve==7||(ve==8||Xt<=0?di(3):di(2)),vi(this);var p=this.g.ca();this.X=p;var v=Zh(this);if(this.o=p==200,_u(this.i,this.v,this.B,this.l,this.S,Ot,p),this.o){if(this.U&&!this.L){e:{if(this.g){var A,U=this.g;if((A=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(A)){var F=A;break e}}F=null}if(c=F)gi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ei(this,c);else{this.o=!1,this.m=3,Ce(12),Rn(this),Pn(this);break t}}if(this.R){c=!0;let ce;for(;!this.K&&this.C<v.length;)if(ce=Tu(this,v),ce==Be){Ot==4&&(this.m=4,Ce(14),c=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if(ce==Ie){this.m=4,Ce(15),gi(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else gi(this.i,this.l,ce,null),Ei(this,ce);if(Eu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||v.length!=0||this.h.h||(this.m=1,Ce(16),c=!1),this.o=this.o&&c,!c)gi(this.i,this.l,v,"[Invalid Chunked Response]"),Rn(this),Pn(this);else if(v.length>0&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.aa&&!lt.P&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),qo(lt),lt.P=!0,Ce(11))}}else gi(this.i,this.l,v,null),Ei(this,v);Ot==4&&Rn(this),this.o&&!this.K&&(Ot==4?Du(this.j,this):(this.o=!1,_i(this)))}else Yi(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,Ce(12)):(this.m=0,Ce(13)),Rn(this),Pn(this)}}}catch{}};function Zh(c){if(!Eu(c))return c.g.la();const p=Qe(c.g);if(p==="")return"";let v="";const A=p.length,U=si(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Rn(c),Pn(c),"";c.h.i=new f.TextDecoder}for(let F=0;F<A;F++)c.h.h=!0,v+=c.h.i.decode(p[F],{stream:!(U&&F==A-1)});return p.length=0,c.h.g+=v,c.C=0,c.h.g}function Eu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Tu(c,p){var v=c.C,A=p.indexOf(`
`,v);return A==-1?Be:(v=Number(p.substring(v,A)),isNaN(v)?Ie:(A+=1,A+v>p.length?Be:(p=p.slice(A,A+v),c.C=A+v,p)))}ti.prototype.cancel=function(){this.K=!0,Rn(this)};function _i(c){c.T=Date.now()+c.H,ha(c,c.H)}function ha(c,p){if(c.D!=null)throw Error("WatchDog timer not null");c.D=pi(y(c.aa,c),p)}function vi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}ti.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ar(this.i,this.B),this.M!=2&&(di(),Ce(17)),Rn(this),this.m=2,Pn(this)):ha(this,this.T-c)};function Pn(c){c.j.I==0||c.K||Du(c.j,c)}function Rn(c){vi(c);var p=c.O;p&&typeof p.dispose=="function"&&p.dispose(),c.O=null,wo(c.V),c.g&&(p=c.g,c.g=null,p.abort(),p.dispose())}function Ei(c,p){try{var v=c.j;if(v.I!=0&&(v.g==c||bi(v.h,c))){if(!c.L&&bi(v.h,c)&&v.I==3){try{var A=v.Ba.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)va(v),xs(v);else break t;Vr(v),Ce(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=pi(y(v.Va,v),6e3));Ti(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ii(v,11)}else if((c.L||v.g==c)&&va(v),!R(p))for(U=v.Ba.g.parse(p),p=0;p<U.length;p++){let Xt=U[p];const ce=Xt[0];if(!(ce<=v.K))if(v.K=ce,Xt=Xt[1],v.I==2)if(Xt[0]=="c"){v.M=Xt[1],v.ba=Xt[2];const Bn=Xt[3];Bn!=null&&(v.ka=Bn,v.j.info("VER="+v.ka));const xi=Xt[4];xi!=null&&(v.za=xi,v.j.info("SVER="+v.za));const ri=Xt[5];ri!=null&&typeof ri=="number"&&ri>0&&(A=1.5*ri,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const ai=c.g;if(ai){const Mr=ai.g?ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mr){var F=A.h;F.g||Mr.indexOf("spdy")==-1&&Mr.indexOf("quic")==-1&&Mr.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Do(F,F.h),F.h=null))}if(A.G){const Ea=ai.g?ai.g.getResponseHeader("X-HTTP-Session-Id"):null;Ea&&(A.wa=Ea,Wt(A.J,A.G,Ea))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var lt=c;if(A.na=ku(A,A.L?A.ba:null,A.W),lt.L){No(A.h,lt);var Ot=lt,ve=A.O;ve&&(Ot.H=ve),Ot.D&&(vi(Ot),_i(Ot)),A.g=lt}else Iu(A);v.i.length>0&&Ci(v)}else Xt[0]!="stop"&&Xt[0]!="close"||Ii(v,7);else v.I==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?Ii(v,7):zo(v):Xt[0]!="noop"&&v.l&&v.l.qa(Xt),v.A=0)}}di(4)}catch{}}var xe=class{constructor(c,p){this.g=c,this.map=p}};function Io(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ti(c){return c.h?1:c.g?c.g.size:0}function bi(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Do(c,p){c.g?c.g.add(p):c.h=p}function No(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Io.prototype.cancel=function(){if(this.i=Oo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Oo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const v of c.g.values())p=p.concat(v.G);return p}return L(c.i)}var bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fa(c,p){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const A=c[v].indexOf("=");let U,F=null;A>=0?(U=c[v].substring(0,A),F=c[v].substring(A+1)):U=c[v],p(U,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Cn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;c instanceof Cn?(this.l=c.l,qe(this,c.j),this.o=c.o,this.g=c.g,bs(this,c.u),this.h=c.h,ko(this,Ru(c.i)),this.m=c.m):c&&(p=String(c).match(bu))?(this.l=!1,qe(this,p[1]||"",!0),this.o=Si(p[2]||""),this.g=Si(p[3]||"",!0),bs(this,p[4]),this.h=Si(p[5]||"",!0),ko(this,p[6]||"",!0),this.m=Si(p[7]||"")):(this.l=!1,this.i=new As(null,this.l))}Cn.prototype.toString=function(){const c=[];var p=this.j;p&&c.push(Ir(p,da,!0),":");var v=this.g;return(v||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Ir(p,da,!0),"@"),c.push(Gi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Ir(v,v.charAt(0)=="/"?Vo:Su,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Ir(v,Au)),c.join("")},Cn.prototype.resolve=function(c){const p=De(this);let v=!!c.j;v?qe(p,c.j):v=!!c.o,v?p.o=c.o:v=!!c.g,v?p.g=c.g:v=c.u!=null;var A=c.h;if(v)bs(p,c.u);else if(v=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var U=p.h.lastIndexOf("/");U!=-1&&(A=p.h.slice(0,U+1)+A)}if(U=A,U==".."||U==".")A="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){A=U.lastIndexOf("/",0)==0,U=U.split("/");const F=[];for(let lt=0;lt<U.length;){const Ot=U[lt++];Ot=="."?A&&lt==U.length&&F.push(""):Ot==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),A&&lt==U.length&&F.push("")):(F.push(Ot),A=!0)}A=F.join("/")}else A=U}return v?p.h=A:v=c.i.toString()!=="",v?ko(p,Ru(c.i)):v=!!c.m,v&&(p.m=c.m),p};function De(c){return new Cn(c)}function qe(c,p,v){c.j=v?Si(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function bs(c,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);c.u=p}else c.u=null}function ko(c,p,v){p instanceof As?(c.i=p,pa(c.i,c.l)):(v||(p=Ir(p,Ss)),c.i=new As(p,c.l))}function Wt(c,p,v){c.i.set(p,v)}function Cr(c){return Wt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Si(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ir(c,p,v){return typeof c=="string"?(c=encodeURI(c).replace(p,pn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function pn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var da=/[#\/\?@]/g,Su=/[#\?:]/g,Vo=/[#\?]/g,Ss=/[#\?@]/g,Au=/#/g;function As(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function gn(c){c.g||(c.g=new Map,c.h=0,c.i&&fa(c.i,function(p,v){c.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}s=As.prototype,s.add=function(c,p){gn(this),this.i=null,c=ws(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(p),this.h+=1,this};function wu(c,p){gn(c),p=ws(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Mo(c,p){return gn(c),p=ws(c,p),c.g.has(p)}s.forEach=function(c,p){gn(this),this.g.forEach(function(v,A){v.forEach(function(U){c.call(p,U,A,this)},this)},this)};function jo(c,p){gn(c);let v=[];if(typeof p=="string")Mo(c,p)&&(v=v.concat(c.g.get(ws(c,p))));else for(c=Array.from(c.g.values()),p=0;p<c.length;p++)v=v.concat(c[p]);return v}s.set=function(c,p){return gn(this),this.i=null,c=ws(this,c),Mo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},s.get=function(c,p){return c?(c=jo(this,c),c.length>0?String(c[0]):p):p};function ma(c,p,v){wu(c,p),v.length>0&&(c.i=null,c.g.set(ws(c,p),L(v)),c.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(let A=0;A<p.length;A++){var v=p[A];const U=Gi(v);v=jo(this,v);for(let F=0;F<v.length;F++){let lt=U;v[F]!==""&&(lt+="="+Gi(v[F])),c.push(lt)}}return this.i=c.join("&")};function Ru(c){const p=new As;return p.i=c.i,c.g&&(p.g=new Map(c.g),p.h=c.h),p}function ws(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function pa(c,p){p&&!c.j&&(gn(c),c.i=null,c.g.forEach(function(v,A){const U=A.toLowerCase();A!=U&&(wu(this,A),ma(this,U,v))},c)),c.j=p}function ni(c,p){const v=new Jn;if(f.Image){const A=new Image;A.onload=b(Un,v,"TestLoadImage: loaded",!0,p,A),A.onerror=b(Un,v,"TestLoadImage: error",!1,p,A),A.onabort=b(Un,v,"TestLoadImage: abort",!1,p,A),A.ontimeout=b(Un,v,"TestLoadImage: timeout",!1,p,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function Lo(c,p){const v=new Jn,A=new AbortController,U=setTimeout(()=>{A.abort(),Un(v,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(F=>{clearTimeout(U),F.ok?Un(v,"TestPingServer: ok",!0,p):Un(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(U),Un(v,"TestPingServer: error",!1,p)})}function Un(c,p,v,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(v)}catch{}}function Rs(){this.g=new du}function Ai(c){this.i=c.Sb||null,this.h=c.ab||!1}C(Ai,mu),Ai.prototype.g=function(){return new xr(this.i,this.h)};function xr(c,p){de.call(this),this.H=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(xr,de),s=xr.prototype,s.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=p,this.readyState=1,ii(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(p.body=c),(this.H||f).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cs(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ga(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ga(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Cs(this):ii(this),this.readyState==3&&ga(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,Cs(this))},s.Na=function(c){this.g&&(this.response=c,Cs(this))},s.ga=function(){this.g&&Cs(this)};function Cs(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ii(c)}s.setRequestHeader=function(c,p){this.A.append(c,p)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=p.next();return c.join(`\r
`)};function ii(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(xr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function zn(c){let p="";return _t(c,function(v,A){p+=A,p+=":",p+=v,p+=`\r
`}),p}function Dr(c,p,v){t:{for(A in v){var A=!1;break t}A=!0}A||(v=zn(v),typeof c=="string"?v!=null&&Gi(v):Wt(c,p,v))}function ee(c){de.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(ee,de);var wi=/^https?$/i,Po=["POST","PUT"];s=ee.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,p,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Co.g(),this.g.onreadystatechange=I(y(this.Ca,this));try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(F){Nr(this,F);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)v.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const F of A.keys())v.set(F,A.get(F));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),U=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Po,p,void 0)>=0)||A||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,lt]of v)this.g.setRequestHeader(F,lt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(F){Nr(this,F)}};function Nr(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.o=5,Uo(c),Ki(c)}function Uo(c){c.A||(c.A=!0,Pe(c,"complete"),Pe(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Pe(this,"complete"),Pe(this,"abort"),Ki(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ki(this,!0)),ee.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Or(this):this.Xa())},s.Xa=function(){Or(this)};function Or(c){if(c.h&&typeof u<"u"){if(c.v&&si(c)==4)setTimeout(c.Ca.bind(c),0);else if(Pe(c,"readystatechange"),si(c)==4){c.h=!1;try{const F=c.ca();t:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var v;if(!(v=p)){var A;if(A=F===0){let lt=String(c.D).match(bu)[1]||null;!lt&&f.self&&f.self.location&&(lt=f.self.location.protocol.slice(0,-1)),A=!wi.test(lt?lt.toLowerCase():"")}v=A}if(v)Pe(c,"complete"),Pe(c,"success");else{c.o=6;try{var U=si(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",Uo(c)}}finally{Ki(c)}}}}function Ki(c,p){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,p||Pe(c,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function si(c){return c.g?c.g.readyState:0}s.ca=function(){try{return si(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Qh(p)}};function Qe(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Yi(c){const p={};c=(c.g&&si(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(R(c[A]))continue;var v=vu(c[A]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=p[U]||[];p[U]=F,F.push(v)}Ct(p,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ri(c,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||p}function Is(c){this.za=0,this.i=[],this.j=new Jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ri("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ri("baseRetryDelayMs",5e3,c),this.Za=Ri("retryDelaySeedMs",1e4,c),this.Ta=Ri("forwardChannelMaxRetries",2,c),this.va=Ri("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Io(c&&c.concurrentRequestLimit),this.Ba=new Rs,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Is.prototype,s.ka=8,s.I=1,s.connect=function(c,p,v,A){Ce(0),this.W=c,this.H=p||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=ku(this,null,this.W),Ci(this)};function zo(c){if(ya(c),c.I==3){var p=c.V++,v=De(c.J);if(Wt(v,"SID",c.M),Wt(v,"RID",p),Wt(v,"TYPE","terminate"),kr(c,v),p=new ti(c,c.j,p),p.M=2,p.A=Cr(De(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=p.A,v=!0),v||(p.g=Vu(p.j,null),p.g.ea(p.A)),p.F=Date.now(),_i(p)}Ou(c)}function xs(c){c.g&&(qo(c),c.g.cancel(),c.g=null)}function ya(c){xs(c),c.v&&(f.clearTimeout(c.v),c.v=null),va(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function Ci(c){if(!xo(c.h)&&!c.m){c.m=!0;var p=c.Ea;W||S(),ft||(W(),ft=!0),D.add(p,c),c.D=0}}function _a(c,p){return Ti(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=p.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=pi(y(c.Ea,c,p),Nu(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new ti(this,this.j,c);let F=this.o;if(this.U&&(F?(F=V(F),nt(F,this.U)):F=this.U),this.u!==null||this.R||(U.J=F,F=null),this.S)t:{for(var p=0,v=0;v<this.i.length;v++){e:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,p>4096){p=v;break t}if(p===4096||v===this.i.length-1){p=v+1;break t}}p=1e3}else p=1e3;p=Cu(this,U,p),v=De(this.J),Wt(v,"RID",c),Wt(v,"CVER",22),this.G&&Wt(v,"X-HTTP-Session-Id",this.G),kr(this,v),F&&(this.R?p="headers="+Gi(zn(F))+"&"+p:this.u&&Dr(v,this.u,F)),Do(this.h,U),this.Ra&&Wt(v,"TYPE","init"),this.S?(Wt(v,"$req",p),Wt(v,"SID","null"),U.U=!0,yi(U,v,null)):yi(U,v,p),this.I=2}}else this.I==3&&(c?Bo(this,c):this.i.length==0||xo(this.h)||Bo(this))};function Bo(c,p){var v;p?v=p.l:v=c.V++;const A=De(c.J);Wt(A,"SID",c.M),Wt(A,"RID",v),Wt(A,"AID",c.K),kr(c,A),c.u&&c.o&&Dr(A,c.u,c.o),v=new ti(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),p&&(c.i=p.G.concat(c.i)),p=Cu(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Do(c.h,v),yi(v,A,p)}function kr(c,p){c.H&&_t(c.H,function(v,A){Wt(p,A,v)}),c.l&&_t({},function(v,A){Wt(p,A,v)})}function Cu(c,p,v){v=Math.min(c.i.length,v);const A=c.l?y(c.l.Ka,c.l,c):null;t:{var U=c.i;let Ot=-1;for(;;){const ve=["count="+v];Ot==-1?v>0?(Ot=U[0].g,ve.push("ofs="+Ot)):Ot=0:ve.push("ofs="+Ot);let Xt=!0;for(let ce=0;ce<v;ce++){var F=U[ce].g;const Bn=U[ce].map;if(F-=Ot,F<0)Ot=Math.max(0,U[ce].g-100),Xt=!1;else try{F="req"+F+"_"||"";try{var lt=Bn instanceof Map?Bn:Object.entries(Bn);for(const[xi,ri]of lt){let ai=ri;m(ri)&&(ai=Ts(ri)),ve.push(F+xi+"="+encodeURIComponent(ai))}}catch(xi){throw ve.push(F+"type="+encodeURIComponent("_badmap")),xi}}catch{A&&A(Bn)}}if(Xt){lt=ve.join("&");break t}}lt=void 0}return c=c.i.splice(0,v),p.G=c,lt}function Iu(c){if(!c.g&&!c.v){c.Y=1;var p=c.Da;W||S(),ft||(W(),ft=!0),D.add(p,c),c.A=0}}function Vr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=pi(y(c.Da,c),Nu(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,xu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=pi(y(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ce(10),xs(this),xu(this))};function qo(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function xu(c){c.g=new ti(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var p=De(c.na);Wt(p,"RID","rpc"),Wt(p,"SID",c.M),Wt(p,"AID",c.K),Wt(p,"CI",c.F?"0":"1"),!c.F&&c.ia&&Wt(p,"TO",c.ia),Wt(p,"TYPE","xmlhttp"),kr(c,p),c.u&&c.o&&Dr(p,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=Cr(De(p)),v.u=null,v.R=!0,ca(v,c)}s.Va=function(){this.C!=null&&(this.C=null,xs(this),Vr(this),Ce(19))};function va(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Du(c,p){var v=null;if(c.g==p){va(c),qo(c),c.g=null;var A=2}else if(bi(c.h,p))v=p.G,No(c.h,p),A=1;else return;if(c.I!=0){if(p.o)if(A==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var U=c.D;A=ua(),Pe(A,new mi(A,v)),Ci(c)}else Iu(c);else if(U=p.m,U==3||U==0&&p.X>0||!(A==1&&_a(c,p)||A==2&&Vr(c)))switch(v&&v.length>0&&(p=c.h,p.i=p.i.concat(v)),U){case 1:Ii(c,5);break;case 4:Ii(c,10);break;case 3:Ii(c,6);break;default:Ii(c,2)}}}function Nu(c,p){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*p}function Ii(c,p){if(c.j.info("Error code "+p),p==2){var v=y(c.bb,c),A=c.Ua;const U=!A;A=new Cn(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||qe(A,"https"),Cr(A),U?ni(A.toString(),v):Lo(A.toString(),v)}else Ce(2);c.I=0,c.l&&c.l.pa(p),Ou(c),ya(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))};function Ou(c){if(c.I=0,c.ja=[],c.l){const p=Oo(c.h);(p.length!=0||c.i.length!=0)&&(X(c.ja,p),X(c.ja,c.i),c.h.i.length=0,L(c.i),c.i.length=0),c.l.oa()}}function ku(c,p,v){var A=v instanceof Cn?De(v):new Cn(v);if(A.g!="")p&&(A.g=p+"."+A.g),bs(A,A.u);else{var U=f.location;A=U.protocol,p=p?p+"."+U.hostname:U.hostname,U=+U.port;const F=new Cn(null);A&&qe(F,A),p&&(F.g=p),U&&bs(F,U),v&&(F.h=v),A=F}return v=c.G,p=c.wa,v&&p&&Wt(A,v,p),Wt(A,"VER",c.ka),kr(c,A),A}function Vu(c,p,v){if(p&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Aa&&!c.ma?new ee(new Ai({ab:v})):new ee(c.ma),p.Fa(c.L),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mu(){}s=Mu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ds(){}Ds.prototype.g=function(c,p){return new hn(c,p)};function hn(c,p){de.call(this),this.g=new Is(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(c?c["X-WebChannel-Client-Profile"]=p.sa:c={"X-WebChannel-Client-Profile":p.sa}),this.g.U=c,(c=p&&p.Qb)&&!R(c)&&(this.g.u=c),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!R(p)&&(this.g.G=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Qi(this)}C(hn,de),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){zo(this.g)},hn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=Ts(c),c=v);p.i.push(new xe(p.Ya++,c)),p.I==3&&Ci(p)},hn.prototype.N=function(){this.g.l=null,delete this.j,zo(this.g),delete this.g,hn.Z.N.call(this)};function ju(c){Ye.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const v in p){c=v;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}C(ju,Ye);function Lu(){Ln.call(this),this.status=1}C(Lu,Ln);function Qi(c){this.g=c}C(Qi,Mu),Qi.prototype.ra=function(){Pe(this.g,"a")},Qi.prototype.qa=function(c){Pe(this.g,new ju(c))},Qi.prototype.pa=function(c){Pe(this.g,new Lu)},Qi.prototype.oa=function(){Pe(this.g,"b")},Ds.prototype.createWebChannel=Ds.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,fT=function(){return new Ds},hT=function(){return ua()},cT=_e,ym={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wr.NO_ERROR=0,wr.TIMEOUT=8,wr.HTTP_ERROR=6,Yc=wr,Ro.COMPLETE="complete",uT=Ro,pu.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",de.prototype.listen=de.prototype.J,xl=pu,ee.prototype.listenOnce=ee.prototype.K,ee.prototype.getLastError=ee.prototype.Ha,ee.prototype.getLastErrorCode=ee.prototype.ya,ee.prototype.getStatus=ee.prototype.ca,ee.prototype.getResponseJson=ee.prototype.La,ee.prototype.getResponseText=ee.prototype.la,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Fa,lT=ee}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});const Iv="@firebase/firestore",xv="4.9.3";class on{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let yo="12.7.0";const na=new qm("@firebase/firestore");function $a(){return na.logLevel}function mt(s,...t){if(na.logLevel<=Bt.DEBUG){const i=t.map(Gm);na.debug(`Firestore (${yo}): ${s}`,...i)}}function ps(s,...t){if(na.logLevel<=Bt.ERROR){const i=t.map(Gm);na.error(`Firestore (${yo}): ${s}`,...i)}}function oo(s,...t){if(na.logLevel<=Bt.WARN){const i=t.map(Gm);na.warn(`Firestore (${yo}): ${s}`,...i)}}function Gm(s){if(typeof s=="string")return s;try{return(function(i){return JSON.stringify(i)})(s)}catch{return s}}function Rt(s,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,dT(s,r,i)}function dT(s,t,i){let r=`FIRESTORE (${yo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw ps(r),new Error(r)}function Zt(s,t,i,r){let l="Unexpected state";typeof i=="string"?l=i:r=i,s||dT(t,l,r)}function Nt(s,t){return s}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends _s{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fs{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}}class mT{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class F1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable((()=>i(on.UNAUTHENTICATED)))}shutdown(){}}class G1{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class K1{constructor(t){this.t=t,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Zt(this.o===void 0,42304);let r=this.i;const l=g=>this.i!==r?(r=this.i,i(g)):Promise.resolve();let u=new fs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new fs,t.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},m=g=>{mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new fs)}}),0),f()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((r=>this.i!==t?(mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zt(typeof r.accessToken=="string",31837,{l:r}),new mT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Zt(t===null||typeof t=="string",2055,{h:t}),new on(t)}}class Y1{constructor(t,i,r){this.P=t,this.T=i,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Q1{constructor(t,i,r){this.P=t,this.T=i,this.I=r}getToken(){return Promise.resolve(new Y1(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable((()=>i(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Dv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X1{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$n(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Zt(this.o===void 0,3512);const r=u=>{u.error!=null&&mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,mt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const l=u=>{mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Dv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((i=>i?(Zt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new Dv(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function $1(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<s;r++)i[r]=Math.floor(256*Math.random());return i}class Km{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=$1(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<i&&(r+=t.charAt(l[u]%62))}return r}}function qt(s,t){return s<t?-1:s>t?1:0}function _m(s,t){const i=Math.min(s.length,t.length);for(let r=0;r<i;r++){const l=s.charAt(r),u=t.charAt(r);if(l!==u)return im(l)===im(u)?qt(l,u):im(l)?1:-1}return qt(s.length,t.length)}const Z1=55296,W1=57343;function im(s){const t=s.charCodeAt(0);return t>=Z1&&t<=W1}function lo(s,t,i){return s.length===t.length&&s.every(((r,l)=>i(r,t[l])))}const Nv="__name__";class Vi{constructor(t,i,r){i===void 0?i=0:i>t.length&&Rt(637,{offset:i,range:t.length}),r===void 0?r=t.length-i:r>t.length-i&&Rt(1746,{length:r,range:t.length-i}),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return Vi.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Vi?t.forEach((r=>{i.push(r)})):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let l=0;l<r;l++){const u=Vi.compareSegments(t.get(l),i.get(l));if(u!==0)return u}return qt(t.length,i.length)}static compareSegments(t,i){const r=Vi.isNumericId(t),l=Vi.isNumericId(i);return r&&!l?-1:!r&&l?1:r&&l?Vi.extractNumericId(t).compare(Vi.extractNumericId(i)):_m(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ur.fromString(t.substring(4,t.length-2))}}class ae extends Vi{construct(t,i,r){return new ae(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new ht(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter((l=>l.length>0)))}return new ae(i)}static emptyPath(){return new ae([])}}const J1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Vi{construct(t,i,r){return new tn(t,i,r)}static isValidIdentifier(t){return J1.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nv}static keyField(){return new tn([Nv])}static fromServerFormat(t){const i=[];let r="",l=0;const u=()=>{if(r.length===0)throw new ht(Z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let f=!1;for(;l<t.length;){const m=t[l];if(m==="\\"){if(l+1===t.length)throw new ht(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ht(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,l+=2}else m==="`"?(f=!f,l++):m!=="."||f?(r+=m,l++):(u(),l++)}if(u(),f)throw new ht(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new tn(i)}static emptyPath(){return new tn([])}}class St{constructor(t){this.path=t}static fromPath(t){return new St(ae.fromString(t))}static fromName(t){return new St(ae.fromString(t).popFirst(5))}static empty(){return new St(ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ae.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return ae.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new St(new ae(t.slice()))}}function pT(s,t,i){if(!i)throw new ht(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function tw(s,t,i,r){if(t===!0&&r===!0)throw new ht(Z.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function Ov(s){if(!St.isDocumentKey(s))throw new ht(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function kv(s){if(St.isDocumentKey(s))throw new ht(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function gT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function wh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":Rt(12329,{type:typeof s})}function dn(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new ht(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=wh(s);throw new ht(Z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return s}function Le(s,t){const i={typeString:s};return t&&(i.value=t),i}function Wl(s,t){if(!gT(s))throw new ht(Z.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in t)if(t[r]){const l=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){i=`JSON missing required field: '${r}'`;break}const f=s[r];if(l&&typeof f!==l){i=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){i=`Expected '${r}' field to equal '${u.value}'`;break}}if(i)throw new ht(Z.INVALID_ARGUMENT,i);return!0}const Vv=-62135596800,Mv=1e6;class ue{static now(){return ue.fromMillis(Date.now())}static fromDate(t){return ue.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor((t-1e3*i)*Mv);return new ue(i,r)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new ht(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ht(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<Vv)throw new ht(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ht(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mv}_compareTo(t){return this.seconds===t.seconds?qt(this.nanoseconds,t.nanoseconds):qt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Wl(t,ue._jsonSchema))return new ue(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Vv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ue._jsonSchemaVersion="firestore/timestamp/1.0",ue._jsonSchema={type:Le("string",ue._jsonSchemaVersion),seconds:Le("number"),nanoseconds:Le("number")};class xt{static fromTimestamp(t){return new xt(t)}static min(){return new xt(new ue(0,0))}static max(){return new xt(new ue(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const zl=-1;function ew(s,t){const i=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=xt.fromTimestamp(r===1e9?new ue(i+1,0):new ue(i,r));return new fr(l,St.empty(),t)}function nw(s){return new fr(s.readTime,s.key,zl)}class fr{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new fr(xt.min(),St.empty(),zl)}static max(){return new fr(xt.max(),St.empty(),zl)}}function iw(s,t){let i=s.readTime.compareTo(t.readTime);return i!==0?i:(i=St.comparator(s.documentKey,t.documentKey),i!==0?i:qt(s.largestBatchId,t.largestBatchId))}const sw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function _o(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==sw)throw s;mt("LocalStore","Unexpectedly lost primary lease")}class et{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&Rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new et(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(i,u).next(r,l)}}))}toPromise(){return new Promise(((t,i)=>{this.next(t,i)}))}wrapUserFunction(t){try{const i=t();return i instanceof et?i:et.resolve(i)}catch(i){return et.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction((()=>t(i))):et.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction((()=>t(i))):et.reject(i)}static resolve(t){return new et(((i,r)=>{i(t)}))}static reject(t){return new et(((i,r)=>{r(t)}))}static waitFor(t){return new et(((i,r)=>{let l=0,u=0,f=!1;t.forEach((m=>{++l,m.next((()=>{++u,f&&u===l&&i()}),(g=>r(g)))})),f=!0,u===l&&i()}))}static or(t){let i=et.resolve(!1);for(const r of t)i=i.next((l=>l?et.resolve(l):r()));return i}static forEach(t,i){const r=[];return t.forEach(((l,u)=>{r.push(i.call(this,l,u))})),this.waitFor(r)}static mapArray(t,i){return new et(((r,l)=>{const u=t.length,f=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;i(t[y]).next((b=>{f[y]=b,++m,m===u&&r(f)}),(b=>l(b)))}}))}static doWhile(t,i){return new et(((r,l)=>{const u=()=>{t()===!0?i().next((()=>{u()}),l):r()};u()}))}}function aw(s){const t=s.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function vo(s){return s.name==="IndexedDbTransactionError"}class Rh{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Rh.ce=-1;const Ym=-1;function Ch(s){return s==null}function rh(s){return s===0&&1/s==-1/0}function ow(s){return typeof s=="number"&&Number.isInteger(s)&&!rh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const yT="";function lw(s){let t="";for(let i=0;i<s.length;i++)t.length>0&&(t=jv(t)),t=uw(s.get(i),t);return jv(t)}function uw(s,t){let i=t;const r=s.length;for(let l=0;l<r;l++){const u=s.charAt(l);switch(u){case"\0":i+="";break;case yT:i+="";break;default:i+=u}}return i}function jv(s){return s+yT+""}function Lv(s){let t=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t++;return t}function _r(s,t){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t(i,s[i])}function _T(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}class me{constructor(t,i){this.comparator=t,this.root=i||Je.EMPTY}insert(t,i){return new me(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(t){return new me(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Je.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(t,r.key);if(l===0)return i+r.left.size;l<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((i,r)=>(t(i,r),!1)))}toString(){const t=[];return this.inorderTraversal(((i,r)=>(t.push(`${i}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new qc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new qc(this.root,t,this.comparator,!1)}getReverseIterator(){return new qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new qc(this.root,t,this.comparator,!0)}}class qc{constructor(t,i,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=i?r(t.key,i):1,i&&l&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Je{constructor(t,i,r,l,u){this.key=t,this.value=i,this.color=r??Je.RED,this.left=l??Je.EMPTY,this.right=u??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,l,u){return new Je(t??this.key,i??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let l=this;const u=r(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,i,r),null):u===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return Je.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Rt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Rt(27949);return t+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw Rt(57766)}get value(){throw Rt(16141)}get color(){throw Rt(16727)}get left(){throw Rt(29726)}get right(){throw Rt(36894)}copy(t,i,r,l,u){return this}insert(t,i,r){return new Je(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ze{constructor(t){this.comparator=t,this.data=new me(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((i,r)=>(t(i),!1)))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new Pv(this.data.getIterator())}getIteratorFrom(t){return new Pv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach((r=>{i=i.add(r)})),i}isEqual(t){if(!(t instanceof ze)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((i=>{t.push(i)})),t}toString(){const t=[];return this.forEach((i=>t.push(i))),"SortedSet("+t.toString()+")"}copy(t){const i=new ze(this.comparator);return i.data=t,i}}class Pv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class jn{constructor(t){this.fields=t,t.sort(tn.comparator)}static empty(){return new jn([])}unionWith(t){let i=new ze(tn.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new jn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return lo(this.fields,t.fields,((i,r)=>i.isEqual(r)))}}class vT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class en{constructor(t){this.binaryString=t}static fromBase64String(t){const i=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new vT("Invalid base64 string: "+u):u}})(t);return new en(i)}static fromUint8Array(t){const i=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(t);return new en(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const r=new Uint8Array(i.length);for(let l=0;l<i.length;l++)r[l]=i.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return qt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}en.EMPTY_BYTE_STRING=new en("");const cw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(s){if(Zt(!!s,39018),typeof s=="string"){let t=0;const i=cw.exec(s);if(Zt(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:be(s.seconds),nanos:be(s.nanos)}}function be(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function mr(s){return typeof s=="string"?en.fromBase64String(s):en.fromUint8Array(s)}const ET="server_timestamp",TT="__type__",bT="__previous_value__",ST="__local_write_time__";function Qm(s){return(s?.mapValue?.fields||{})[TT]?.stringValue===ET}function Ih(s){const t=s.mapValue.fields[bT];return Qm(t)?Ih(t):t}function Bl(s){const t=dr(s.mapValue.fields[ST].timestampValue);return new ue(t.seconds,t.nanos)}class hw{constructor(t,i,r,l,u,f,m,g,y,b){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b}}const ah="(default)";class ql{constructor(t,i){this.projectId=t,this.database=i||ah}static empty(){return new ql("","")}get isDefaultDatabase(){return this.database===ah}isEqual(t){return t instanceof ql&&t.projectId===this.projectId&&t.database===this.database}}const AT="__type__",fw="__max__",Hc={mapValue:{}},wT="__vector__",oh="value";function pr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Qm(s)?4:mw(s)?9007199254740991:dw(s)?10:11:Rt(28295,{value:s})}function Hi(s,t){if(s===t)return!0;const i=pr(s);if(i!==pr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Bl(s).isEqual(Bl(t));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=dr(l.timestampValue),m=dr(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(l,u){return mr(l.bytesValue).isEqual(mr(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(l,u){return be(l.geoPointValue.latitude)===be(u.geoPointValue.latitude)&&be(l.geoPointValue.longitude)===be(u.geoPointValue.longitude)})(s,t);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return be(l.integerValue)===be(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=be(l.doubleValue),m=be(u.doubleValue);return f===m?rh(f)===rh(m):isNaN(f)&&isNaN(m)}return!1})(s,t);case 9:return lo(s.arrayValue.values||[],t.arrayValue.values||[],Hi);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},m=u.mapValue.fields||{};if(Lv(f)!==Lv(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!Hi(f[g],m[g])))return!1;return!0})(s,t);default:return Rt(52216,{left:s})}}function Hl(s,t){return(s.values||[]).find((i=>Hi(i,t)))!==void 0}function uo(s,t){if(s===t)return 0;const i=pr(s),r=pr(t);if(i!==r)return qt(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return qt(s.booleanValue,t.booleanValue);case 2:return(function(u,f){const m=be(u.integerValue||u.doubleValue),g=be(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,t);case 3:return Uv(s.timestampValue,t.timestampValue);case 4:return Uv(Bl(s),Bl(t));case 5:return _m(s.stringValue,t.stringValue);case 6:return(function(u,f){const m=mr(u),g=mr(f);return m.compareTo(g)})(s.bytesValue,t.bytesValue);case 7:return(function(u,f){const m=u.split("/"),g=f.split("/");for(let y=0;y<m.length&&y<g.length;y++){const b=qt(m[y],g[y]);if(b!==0)return b}return qt(m.length,g.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,f){const m=qt(be(u.latitude),be(f.latitude));return m!==0?m:qt(be(u.longitude),be(f.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return zv(s.arrayValue,t.arrayValue);case 10:return(function(u,f){const m=u.fields||{},g=f.fields||{},y=m[oh]?.arrayValue,b=g[oh]?.arrayValue,C=qt(y?.values?.length||0,b?.values?.length||0);return C!==0?C:zv(y,b)})(s.mapValue,t.mapValue);case 11:return(function(u,f){if(u===Hc.mapValue&&f===Hc.mapValue)return 0;if(u===Hc.mapValue)return 1;if(f===Hc.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=f.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let C=0;C<g.length&&C<b.length;++C){const I=_m(g[C],b[C]);if(I!==0)return I;const L=uo(m[g[C]],y[b[C]]);if(L!==0)return L}return qt(g.length,b.length)})(s.mapValue,t.mapValue);default:throw Rt(23264,{he:i})}}function Uv(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return qt(s,t);const i=dr(s),r=dr(t),l=qt(i.seconds,r.seconds);return l!==0?l:qt(i.nanos,r.nanos)}function zv(s,t){const i=s.values||[],r=t.values||[];for(let l=0;l<i.length&&l<r.length;++l){const u=uo(i[l],r[l]);if(u)return u}return qt(i.length,r.length)}function co(s){return vm(s)}function vm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const r=dr(i);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return mr(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return St.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let r="[",l=!0;for(const u of i.values||[])l?l=!1:r+=",",r+=vm(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(i){const r=Object.keys(i.fields||{}).sort();let l="{",u=!0;for(const f of r)u?u=!1:l+=",",l+=`${f}:${vm(i.fields[f])}`;return l+"}"})(s.mapValue):Rt(61005,{value:s})}function Qc(s){switch(pr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ih(s);return t?16+Qc(t):16;case 5:return 2*s.stringValue.length;case 6:return mr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+Qc(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return _r(r.fields,((u,f)=>{l+=u.length+Qc(f)})),l})(s.mapValue);default:throw Rt(13486,{value:s})}}function Bv(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Em(s){return!!s&&"integerValue"in s}function Xm(s){return!!s&&"arrayValue"in s}function qv(s){return!!s&&"nullValue"in s}function Hv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Xc(s){return!!s&&"mapValue"in s}function dw(s){return(s?.mapValue?.fields||{})[AT]?.stringValue===wT}function Vl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return _r(s.mapValue.fields,((i,r)=>t.mapValue.fields[i]=Vl(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Vl(s.arrayValue.values[i]);return t}return{...s}}function mw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===fw}class Sn{constructor(t){this.value=t}static empty(){return new Sn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!Xc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Vl(i)}setAll(t){let i=tn.emptyPath(),r={},l=[];t.forEach(((f,m)=>{if(!i.isImmediateParentOf(m)){const g=this.getFieldsMap(i);this.applyChanges(g,r,l),r={},l=[],i=m.popLast()}f?r[m.lastSegment()]=Vl(f):l.push(m.lastSegment())}));const u=this.getFieldsMap(i);this.applyChanges(u,r,l)}delete(t){const i=this.field(t.popLast());Xc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Hi(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let l=i.mapValue.fields[t.get(r)];Xc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,r){_r(i,((l,u)=>t[l]=u));for(const l of r)delete t[l]}clone(){return new Sn(Vl(this.value))}}function RT(s){const t=[];return _r(s.fields,((i,r)=>{const l=new tn([i]);if(Xc(r)){const u=RT(r.mapValue).fields;if(u.length===0)t.push(l);else for(const f of u)t.push(l.child(f))}else t.push(l)})),new jn(t)}class ln{constructor(t,i,r,l,u,f,m){this.key=t,this.documentType=i,this.version=r,this.readTime=l,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(t){return new ln(t,0,xt.min(),xt.min(),xt.min(),Sn.empty(),0)}static newFoundDocument(t,i,r,l){return new ln(t,1,i,xt.min(),r,l,0)}static newNoDocument(t,i){return new ln(t,2,i,xt.min(),xt.min(),Sn.empty(),0)}static newUnknownDocument(t,i){return new ln(t,3,i,xt.min(),xt.min(),Sn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ln&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class lh{constructor(t,i){this.position=t,this.inclusive=i}}function Fv(s,t,i){let r=0;for(let l=0;l<s.position.length;l++){const u=t[l],f=s.position[l];if(u.field.isKeyField()?r=St.comparator(St.fromName(f.referenceValue),i.key):r=uo(f,i.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gv(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Hi(s.position[i],t.position[i]))return!1;return!0}class Fl{constructor(t,i="asc"){this.field=t,this.dir=i}}function pw(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}class CT{}class je extends CT{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new yw(t,i,r):i==="array-contains"?new Ew(t,r):i==="in"?new Tw(t,r):i==="not-in"?new bw(t,r):i==="array-contains-any"?new Sw(t,r):new je(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new _w(t,r):new vw(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(uo(i,this.value)):i!==null&&pr(this.value)===pr(i)&&this.matchesComparison(uo(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends CT{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new hi(t,i)}matches(t){return IT(this)?this.filters.find((i=>!i.matches(t)))===void 0:this.filters.find((i=>i.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,i)=>t.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function IT(s){return s.op==="and"}function xT(s){return gw(s)&&IT(s)}function gw(s){for(const t of s.filters)if(t instanceof hi)return!1;return!0}function Tm(s){if(s instanceof je)return s.field.canonicalString()+s.op.toString()+co(s.value);if(xT(s))return s.filters.map((t=>Tm(t))).join(",");{const t=s.filters.map((i=>Tm(i))).join(",");return`${s.op}(${t})`}}function DT(s,t){return s instanceof je?(function(r,l){return l instanceof je&&r.op===l.op&&r.field.isEqual(l.field)&&Hi(r.value,l.value)})(s,t):s instanceof hi?(function(r,l){return l instanceof hi&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,f,m)=>u&&DT(f,l.filters[m])),!0):!1})(s,t):void Rt(19439)}function NT(s){return s instanceof je?(function(i){return`${i.field.canonicalString()} ${i.op} ${co(i.value)}`})(s):s instanceof hi?(function(i){return i.op.toString()+" {"+i.getFilters().map(NT).join(" ,")+"}"})(s):"Filter"}class yw extends je{constructor(t,i,r){super(t,i,r),this.key=St.fromName(r.referenceValue)}matches(t){const i=St.comparator(t.key,this.key);return this.matchesComparison(i)}}class _w extends je{constructor(t,i){super(t,"in",i),this.keys=OT("in",i)}matches(t){return this.keys.some((i=>i.isEqual(t.key)))}}class vw extends je{constructor(t,i){super(t,"not-in",i),this.keys=OT("not-in",i)}matches(t){return!this.keys.some((i=>i.isEqual(t.key)))}}function OT(s,t){return(t.arrayValue?.values||[]).map((i=>St.fromName(i.referenceValue)))}class Ew extends je{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Xm(i)&&Hl(i.arrayValue,this.value)}}class Tw extends je{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Hl(this.value.arrayValue,i)}}class bw extends je{constructor(t,i){super(t,"not-in",i)}matches(t){if(Hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Hl(this.value.arrayValue,i)}}class Sw extends je{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Xm(i)||!i.arrayValue.values)&&i.arrayValue.values.some((r=>Hl(this.value.arrayValue,r)))}}class Aw{constructor(t,i=null,r=[],l=[],u=null,f=null,m=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function Kv(s,t=null,i=[],r=[],l=null,u=null,f=null){return new Aw(s,t,i,r,l,u,f)}function $m(s){const t=Nt(s);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map((r=>Tm(r))).join(","),i+="|ob:",i+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Ch(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>co(r))).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>co(r))).join(",")),t.Te=i}return t.Te}function Zm(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!pw(s.orderBy[i],t.orderBy[i]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!DT(s.filters[i],t.filters[i]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!Gv(s.startAt,t.startAt)&&Gv(s.endAt,t.endAt)}function bm(s){return St.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Eo{constructor(t,i=null,r=[],l=[],u=null,f="F",m=null,g=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ww(s,t,i,r,l,u,f,m){return new Eo(s,t,i,r,l,u,f,m)}function xh(s){return new Eo(s)}function Yv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function kT(s){return s.collectionGroup!==null}function Ml(s){const t=Nt(s);if(t.Ie===null){t.Ie=[];const i=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),i.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new ze(tn.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(t).forEach((u=>{i.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Fl(u,r))})),i.has(tn.keyField().canonicalString())||t.Ie.push(new Fl(tn.keyField(),r))}return t.Ie}function ji(s){const t=Nt(s);return t.Ee||(t.Ee=Rw(t,Ml(s))),t.Ee}function Rw(s,t){if(s.limitType==="F")return Kv(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Fl(l.field,u)}));const i=s.endAt?new lh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new lh(s.startAt.position,s.startAt.inclusive):null;return Kv(s.path,s.collectionGroup,t,s.filters,s.limit,i,r)}}function Sm(s,t){const i=s.filters.concat([t]);return new Eo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),i,s.limit,s.limitType,s.startAt,s.endAt)}function uh(s,t,i){return new Eo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,i,s.startAt,s.endAt)}function Dh(s,t){return Zm(ji(s),ji(t))&&s.limitType===t.limitType}function VT(s){return`${$m(ji(s))}|lt:${s.limitType}`}function Za(s){return`Query(target=${(function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map((l=>NT(l))).join(", ")}]`),Ch(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map((l=>co(l))).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map((l=>co(l))).join(",")),`Target(${r})`})(ji(s))}; limitType=${s.limitType})`}function Nh(s,t){return t.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):St.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,l){for(const u of Ml(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(s,t)&&(function(r,l){return!(r.startAt&&!(function(f,m,g){const y=Fv(f,m,g);return f.inclusive?y<=0:y<0})(r.startAt,Ml(r),l)||r.endAt&&!(function(f,m,g){const y=Fv(f,m,g);return f.inclusive?y>=0:y>0})(r.endAt,Ml(r),l))})(s,t)}function Cw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function MT(s){return(t,i)=>{let r=!1;for(const l of Ml(s)){const u=Iw(l,t,i);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function Iw(s,t,i){const r=s.field.isKeyField()?St.comparator(t.key,i.key):(function(u,f,m){const g=f.data.field(u),y=m.data.field(u);return g!==null&&y!==null?uo(g,y):Rt(42886)})(s.field,t,i);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Rt(19790,{direction:s.dir})}}class aa{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,t))return u}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),l=this.inner[r];if(l===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],t))return void(l[u]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return r.length===1?delete this.inner[i]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(t){_r(this.inner,((i,r)=>{for(const[l,u]of r)t(l,u)}))}isEmpty(){return _T(this.inner)}size(){return this.innerSize}}const xw=new me(St.comparator);function gs(){return xw}const jT=new me(St.comparator);function Dl(...s){let t=jT;for(const i of s)t=t.insert(i.key,i);return t}function LT(s){let t=jT;return s.forEach(((i,r)=>t=t.insert(i,r.overlayedDocument))),t}function Wr(){return jl()}function PT(){return jl()}function jl(){return new aa((s=>s.toString()),((s,t)=>s.isEqual(t)))}const Dw=new me(St.comparator),Nw=new ze(St.comparator);function Ht(...s){let t=Nw;for(const i of s)t=t.add(i);return t}const Ow=new ze(qt);function kw(){return Ow}function Wm(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rh(t)?"-0":t}}function UT(s){return{integerValue:""+s}}function Vw(s,t){return ow(t)?UT(t):Wm(s,t)}class Oh{constructor(){this._=void 0}}function Mw(s,t,i){return s instanceof Gl?(function(l,u){const f={fields:{[TT]:{stringValue:ET},[ST]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Qm(u)&&(u=Ih(u)),u&&(f.fields[bT]=u),{mapValue:f}})(i,t):s instanceof ho?BT(s,t):s instanceof Kl?qT(s,t):(function(l,u){const f=zT(l,u),m=Qv(f)+Qv(l.Ae);return Em(f)&&Em(l.Ae)?UT(m):Wm(l.serializer,m)})(s,t)}function jw(s,t,i){return s instanceof ho?BT(s,t):s instanceof Kl?qT(s,t):i}function zT(s,t){return s instanceof ch?(function(r){return Em(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class Gl extends Oh{}class ho extends Oh{constructor(t){super(),this.elements=t}}function BT(s,t){const i=HT(t);for(const r of s.elements)i.some((l=>Hi(l,r)))||i.push(r);return{arrayValue:{values:i}}}class Kl extends Oh{constructor(t){super(),this.elements=t}}function qT(s,t){let i=HT(t);for(const r of s.elements)i=i.filter((l=>!Hi(l,r)));return{arrayValue:{values:i}}}class ch extends Oh{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function Qv(s){return be(s.integerValue||s.doubleValue)}function HT(s){return Xm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class FT{constructor(t,i){this.field=t,this.transform=i}}function Lw(s,t){return s.field.isEqual(t.field)&&(function(r,l){return r instanceof ho&&l instanceof ho||r instanceof Kl&&l instanceof Kl?lo(r.elements,l.elements,Hi):r instanceof ch&&l instanceof ch?Hi(r.Ae,l.Ae):r instanceof Gl&&l instanceof Gl})(s.transform,t.transform)}class Pw{constructor(t,i){this.version=t,this.transformResults=i}}class mn{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new mn}static exists(t){return new mn(void 0,t)}static updateTime(t){return new mn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function $c(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class kh{}function GT(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Vh(s.key,mn.none()):new Jl(s.key,s.data,mn.none());{const i=s.data,r=Sn.empty();let l=new ze(tn.comparator);for(let u of t.fields)if(!l.has(u)){let f=i.field(u);f===null&&u.length>1&&(u=u.popLast(),f=i.field(u)),f===null?r.delete(u):r.set(u,f),l=l.add(u)}return new vr(s.key,r,new jn(l.toArray()),mn.none())}}function Uw(s,t,i){s instanceof Jl?(function(l,u,f){const m=l.value.clone(),g=$v(l.fieldTransforms,u,f.transformResults);m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(s,t,i):s instanceof vr?(function(l,u,f){if(!$c(l.precondition,u))return void u.convertToUnknownDocument(f.version);const m=$v(l.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(KT(l)),g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(s,t,i):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,i)}function Ll(s,t,i,r){return s instanceof Jl?(function(u,f,m,g){if(!$c(u.precondition,f))return m;const y=u.value.clone(),b=Zv(u.fieldTransforms,g,f);return y.setAll(b),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(s,t,i,r):s instanceof vr?(function(u,f,m,g){if(!$c(u.precondition,f))return m;const y=Zv(u.fieldTransforms,g,f),b=f.data;return b.setAll(KT(u)),b.setAll(y),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((C=>C.field)))})(s,t,i,r):(function(u,f,m){return $c(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(s,t,i)}function zw(s,t){let i=null;for(const r of s.fieldTransforms){const l=t.data.field(r.field),u=zT(r.transform,l||null);u!=null&&(i===null&&(i=Sn.empty()),i.set(r.field,u))}return i||null}function Xv(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&lo(r,l,((u,f)=>Lw(u,f)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Jl extends kh{constructor(t,i,r,l=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class vr extends kh{constructor(t,i,r,l,u=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function KT(s){const t=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const r=s.data.field(i);t.set(i,r)}})),t}function $v(s,t,i){const r=new Map;Zt(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let l=0;l<i.length;l++){const u=s[l],f=u.transform,m=t.data.field(u.field);r.set(u.field,jw(f,m,i[l]))}return r}function Zv(s,t,i){const r=new Map;for(const l of s){const u=l.transform,f=i.data.field(l.field);r.set(l.field,Mw(u,f,t))}return r}class Vh extends kh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bw extends kh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qw{constructor(t,i,r,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(t.key)&&Uw(u,t,r[l])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=Ll(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=Ll(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=PT();return this.mutations.forEach((l=>{const u=t.get(l.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=i.has(l.key)?null:m;const g=GT(f,m);g!==null&&r.set(l.key,g),f.isValidDocument()||f.convertToNoDocument(xt.min())})),r}keys(){return this.mutations.reduce(((t,i)=>t.add(i.key)),Ht())}isEqual(t){return this.batchId===t.batchId&&lo(this.mutations,t.mutations,((i,r)=>Xv(i,r)))&&lo(this.baseMutations,t.baseMutations,((i,r)=>Xv(i,r)))}}class Jm{constructor(t,i,r,l){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=l}static from(t,i,r){Zt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let l=(function(){return Dw})();const u=t.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,r[f].version);return new Jm(t,i,r,l)}}class Hw{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Fw{constructor(t,i){this.count=t,this.unchangedNames=i}}var Me,Kt;function Gw(s){switch(s){case Z.OK:return Rt(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Rt(15467,{code:s})}}function YT(s){if(s===void 0)return ps("GRPC error has no .code"),Z.UNKNOWN;switch(s){case Me.OK:return Z.OK;case Me.CANCELLED:return Z.CANCELLED;case Me.UNKNOWN:return Z.UNKNOWN;case Me.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Me.INTERNAL:return Z.INTERNAL;case Me.UNAVAILABLE:return Z.UNAVAILABLE;case Me.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Me.NOT_FOUND:return Z.NOT_FOUND;case Me.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Me.ABORTED:return Z.ABORTED;case Me.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Me.DATA_LOSS:return Z.DATA_LOSS;default:return Rt(39323,{code:s})}}(Kt=Me||(Me={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";function Kw(){return new TextEncoder}const Yw=new ur([4294967295,4294967295],0);function Wv(s){const t=Kw().encode(s),i=new oT;return i.update(t),new Uint8Array(i.digest())}function Jv(s){const t=new DataView(s.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),l=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new ur([i,r],0),new ur([l,u],0)]}class tp{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new Nl(`Invalid padding: ${i}`);if(r<0)throw new Nl(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Nl(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new Nl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=ur.fromNumber(this.ge)}ye(t,i,r){let l=t.add(i.multiply(ur.fromNumber(r)));return l.compare(Yw)===1&&(l=new ur([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=Wv(t),[r,l]=Jv(i);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);if(!this.we(f))return!1}return!0}static create(t,i,r){const l=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new tp(u,l,i);return r.forEach((m=>f.insert(m))),f}insert(t){if(this.ge===0)return;const i=Wv(t),[r,l]=Jv(i);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);this.Se(f)}}Se(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class Nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Mh{constructor(t,i,r,l,u){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const l=new Map;return l.set(t,tu.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new Mh(xt.min(),l,new me(qt),gs(),Ht())}}class tu{constructor(t,i,r,l,u){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new tu(r,i,Ht(),Ht(),Ht())}}class Zc{constructor(t,i,r,l){this.be=t,this.removedTargetIds=i,this.key=r,this.De=l}}class QT{constructor(t,i){this.targetId=t,this.Ce=i}}class XT{constructor(t,i,r=en.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=l}}class tE{constructor(){this.ve=0,this.Fe=eE(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ht(),i=Ht(),r=Ht();return this.Fe.forEach(((l,u)=>{switch(u){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:r=r.add(l);break;default:Rt(38017,{changeType:u})}})),new tu(this.Me,this.xe,t,i,r)}qe(){this.Oe=!1,this.Fe=eE()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Zt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Qw{constructor(t){this.Ge=t,this.ze=new Map,this.je=gs(),this.Je=Fc(),this.He=Fc(),this.Ye=new me(qt)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,(i=>{const r=this.nt(i);switch(t.state){case 0:this.rt(i)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),r.Le(t.resumeToken));break;default:Rt(56790,{state:t.state})}}))}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach(((r,l)=>{this.rt(l)&&i(l)}))}st(t){const i=t.targetId,r=t.Ce.count,l=this.ot(i);if(l){const u=l.target;if(bm(u))if(r===0){const f=new St(u.path);this.et(i,f,ln.newNoDocument(f,xt.min()))}else Zt(r===1,20013,{expectedCount:r});else{const f=this._t(i);if(f!==r){const m=this.ut(t),g=m?this.ct(m,t,f):1;if(g!==0){this.it(i);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,y)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=i;let f,m;try{f=mr(r).toUint8Array()}catch(g){if(g instanceof vT)return oo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new tp(f,l,u)}catch(g){return oo(g instanceof Nl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,i,r){return i.Ce.count===r-this.Pt(t,i.targetId)?0:2}Pt(t,i){const r=this.Ge.getRemoteKeysForTarget(i);let l=0;return r.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(i,u,null),l++)})),l}Tt(t){const i=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&bm(m.target)){const g=new St(m.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,ln.newNoDocument(g,t))}u.Be&&(i.set(f,u.ke()),u.qe())}}));let r=Ht();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(t)));const l=new Mh(t,i,this.Ye,this.je,r);return this.je=gs(),this.Je=Fc(),this.He=Fc(),this.Ye=new me(qt),l}Xe(t,i){if(!this.rt(t))return;const r=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,r),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,r){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),r&&(this.je=this.je.insert(i,r))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new tE,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new ze(qt),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new ze(qt),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||mt("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new tE),this.Ge.getRemoteKeysForTarget(t).forEach((i=>{this.et(t,i,null)}))}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function Fc(){return new me(St.comparator)}function eE(){return new me(St.comparator)}const Xw={asc:"ASCENDING",desc:"DESCENDING"},$w={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zw={and:"AND",or:"OR"};class Ww{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function Am(s,t){return s.useProto3Json||Ch(t)?t:{value:t}}function hh(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function $T(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function Jw(s,t){return hh(s,t.toTimestamp())}function Li(s){return Zt(!!s,49232),xt.fromTimestamp((function(i){const r=dr(i);return new ue(r.seconds,r.nanos)})(s))}function ep(s,t){return wm(s,t).canonicalString()}function wm(s,t){const i=(function(l){return new ae(["projects",l.projectId,"databases",l.database])})(s).child("documents");return t===void 0?i:i.child(t)}function ZT(s){const t=ae.fromString(s);return Zt(n0(t),10190,{key:t.toString()}),t}function Rm(s,t){return ep(s.databaseId,t.path)}function sm(s,t){const i=ZT(t);if(i.get(1)!==s.databaseId.projectId)throw new ht(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new ht(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new St(JT(i))}function WT(s,t){return ep(s.databaseId,t)}function tR(s){const t=ZT(s);return t.length===4?ae.emptyPath():JT(t)}function Cm(s){return new ae(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function JT(s){return Zt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function nE(s,t,i){return{name:Rm(s,t),fields:i.value.mapValue.fields}}function eR(s,t){let i;if("targetChange"in t){t.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Rt(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?(Zt(b===void 0||typeof b=="string",58123),en.fromBase64String(b||"")):(Zt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),en.fromUint8Array(b||new Uint8Array))})(s,t.targetChange.resumeToken),f=t.targetChange.cause,m=f&&(function(y){const b=y.code===void 0?Z.UNKNOWN:YT(y.code);return new ht(b,y.message||"")})(f);i=new XT(r,l,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const l=sm(s,r.document.name),u=Li(r.document.updateTime),f=r.document.createTime?Li(r.document.createTime):xt.min(),m=new Sn({mapValue:{fields:r.document.fields}}),g=ln.newFoundDocument(l,u,f,m),y=r.targetIds||[],b=r.removedTargetIds||[];i=new Zc(y,b,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const l=sm(s,r.document),u=r.readTime?Li(r.readTime):xt.min(),f=ln.newNoDocument(l,u),m=r.removedTargetIds||[];i=new Zc([],m,f.key,f)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const l=sm(s,r.document),u=r.removedTargetIds||[];i=new Zc([],u,l,null)}else{if(!("filter"in t))return Rt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,f=new Fw(l,u),m=r.targetId;i=new QT(m,f)}}return i}function nR(s,t){let i;if(t instanceof Jl)i={update:nE(s,t.key,t.value)};else if(t instanceof Vh)i={delete:Rm(s,t.key)};else if(t instanceof vr)i={update:nE(s,t.key,t.data),updateMask:hR(t.fieldMask)};else{if(!(t instanceof Bw))return Rt(16599,{Vt:t.type});i={verify:Rm(s,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map((r=>(function(u,f){const m=f.transform;if(m instanceof Gl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ho)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Kl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ch)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Rt(20930,{transform:f.transform})})(0,r)))),t.precondition.isNone||(i.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:Jw(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Rt(27497)})(s,t.precondition)),i}function iR(s,t){return s&&s.length>0?(Zt(t!==void 0,14353),s.map((i=>(function(l,u){let f=l.updateTime?Li(l.updateTime):Li(u);return f.isEqual(xt.min())&&(f=Li(u)),new Pw(f,l.transformResults||[])})(i,t)))):[]}function sR(s,t){return{documents:[WT(s,t.path)]}}function rR(s,t){const i={structuredQuery:{}},r=t.path;let l;t.collectionGroup!==null?(l=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=WT(s,l);const u=(function(y){if(y.length!==0)return e0(hi.create(y,"and"))})(t.filters);u&&(i.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((b=>(function(I){return{field:Wa(I.field),direction:lR(I.dir)}})(b)))})(t.orderBy);f&&(i.structuredQuery.orderBy=f);const m=Am(s,t.limit);return m!==null&&(i.structuredQuery.limit=m),t.startAt&&(i.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(i.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:i,parent:l}}function aR(s){let t=tR(s.parent);const i=s.structuredQuery,r=i.from?i.from.length:0;let l=null;if(r>0){Zt(r===1,65062);const b=i.from[0];b.allDescendants?l=b.collectionId:t=t.child(b.collectionId)}let u=[];i.where&&(u=(function(C){const I=t0(C);return I instanceof hi&&xT(I)?I.getFilters():[I]})(i.where));let f=[];i.orderBy&&(f=(function(C){return C.map((I=>(function(X){return new Fl(Ja(X.field),(function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(X.direction))})(I)))})(i.orderBy));let m=null;i.limit&&(m=(function(C){let I;return I=typeof C=="object"?C.value:C,Ch(I)?null:I})(i.limit));let g=null;i.startAt&&(g=(function(C){const I=!!C.before,L=C.values||[];return new lh(L,I)})(i.startAt));let y=null;return i.endAt&&(y=(function(C){const I=!C.before,L=C.values||[];return new lh(L,I)})(i.endAt)),ww(t,l,f,u,m,"F",g,y)}function oR(s,t){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rt(28987,{purpose:l})}})(t.purpose);return i==null?null:{"goog-listen-tags":i}}function t0(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=Ja(i.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Ja(i.unaryFilter.field);return je.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ja(i.unaryFilter.field);return je.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ja(i.unaryFilter.field);return je.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Rt(61313);default:return Rt(60726)}})(s):s.fieldFilter!==void 0?(function(i){return je.create(Ja(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Rt(58110);default:return Rt(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return hi.create(i.compositeFilter.filters.map((r=>t0(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Rt(1026)}})(i.compositeFilter.op))})(s):Rt(30097,{filter:s})}function lR(s){return Xw[s]}function uR(s){return $w[s]}function cR(s){return Zw[s]}function Wa(s){return{fieldPath:s.canonicalString()}}function Ja(s){return tn.fromServerFormat(s.fieldPath)}function e0(s){return s instanceof je?(function(i){if(i.op==="=="){if(Hv(i.value))return{unaryFilter:{field:Wa(i.field),op:"IS_NAN"}};if(qv(i.value))return{unaryFilter:{field:Wa(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Hv(i.value))return{unaryFilter:{field:Wa(i.field),op:"IS_NOT_NAN"}};if(qv(i.value))return{unaryFilter:{field:Wa(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(i.field),op:uR(i.op),value:i.value}}})(s):s instanceof hi?(function(i){const r=i.getFilters().map((l=>e0(l)));return r.length===1?r[0]:{compositeFilter:{op:cR(i.op),filters:r}}})(s):Rt(54877,{filter:s})}function hR(s){const t=[];return s.fields.forEach((i=>t.push(i.canonicalString()))),{fieldPaths:t}}function n0(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class sr{constructor(t,i,r,l,u=xt.min(),f=xt.min(),m=en.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new sr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class fR{constructor(t){this.yt=t}}function dR(s){const t=aR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?uh(t,t.limit,"L"):t}class mR{constructor(){this.Cn=new pR}addToCollectionParentIndex(t,i){return this.Cn.add(i),et.resolve()}getCollectionParents(t,i){return et.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return et.resolve()}deleteFieldIndex(t,i){return et.resolve()}deleteAllFieldIndexes(t){return et.resolve()}createTargetIndexes(t,i){return et.resolve()}getDocumentsMatchingTarget(t,i){return et.resolve(null)}getIndexType(t,i){return et.resolve(0)}getFieldIndexes(t,i){return et.resolve([])}getNextCollectionGroupToUpdate(t){return et.resolve(null)}getMinOffset(t,i){return et.resolve(fr.min())}getMinOffsetFromCollectionGroup(t,i){return et.resolve(fr.min())}updateCollectionGroup(t,i,r){return et.resolve()}updateIndexEntries(t,i){return et.resolve()}}class pR{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),l=this.index[i]||new ze(ae.comparator),u=!l.has(r);return this.index[i]=l.add(r),u}has(t){const i=t.lastSegment(),r=t.popLast(),l=this.index[i];return l&&l.has(r)}getEntries(t){return(this.index[t]||new ze(ae.comparator)).toArray()}}const iE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},i0=41943040;class bn{static withCacheSize(t){return new bn(t,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(i0,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);class fo{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new fo(0)}static cr(){return new fo(-1)}}const sE="LruGarbageCollector",gR=1048576;function rE([s,t],[i,r]){const l=qt(s,i);return l===0?qt(t,r):l}class yR{constructor(t){this.Ir=t,this.buffer=new ze(rE),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();rE(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class _R{constructor(t,i,r){this.garbageCollector=t,this.asyncQueue=i,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){mt(sE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){vo(i)?mt(sE,"Ignoring IndexedDB error during garbage collection: ",i):await _o(i)}await this.Vr(3e5)}))}}class vR{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next((r=>Math.floor(i/100*r)))}nthSequenceNumber(t,i){if(i===0)return et.resolve(Rh.ce);const r=new yR(i);return this.mr.forEachTarget(t,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(t,i,r){return this.mr.removeTargets(t,i,r)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(mt("LruGarbageCollector","Garbage collection skipped; disabled"),et.resolve(iE)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(mt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iE):this.yr(t,i)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let r,l,u,f,m,g,y;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(mt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),l=this.params.maximumSequenceNumbersToCollect):l=C,f=Date.now(),this.nthSequenceNumber(t,l)))).next((C=>(r=C,m=Date.now(),this.removeTargets(t,r,i)))).next((C=>(u=C,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((C=>(y=Date.now(),$a()<=Bt.DEBUG&&mt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${l} in `+(m-f)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${C} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),et.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:C}))))}}function ER(s,t){return new vR(s,t)}class TR{constructor(){this.changes=new aa((t=>t.toString()),((t,i)=>t.isEqual(i))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,ln.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?et.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class bR{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}class SR{constructor(t,i,r,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=l}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next((l=>(r=l,this.remoteDocumentCache.getEntry(t,i)))).next((l=>(r!==null&&Ll(r.mutation,l,jn.empty(),ue.now()),l)))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next((r=>this.getLocalViewOfDocuments(t,r,Ht()).next((()=>r))))}getLocalViewOfDocuments(t,i,r=Ht()){const l=Wr();return this.populateOverlays(t,l,i).next((()=>this.computeViews(t,i,l,r).next((u=>{let f=Dl();return u.forEach(((m,g)=>{f=f.insert(m,g.overlayedDocument)})),f}))))}getOverlayedDocuments(t,i){const r=Wr();return this.populateOverlays(t,r,i).next((()=>this.computeViews(t,i,r,Ht())))}populateOverlays(t,i,r){const l=[];return r.forEach((u=>{i.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(t,l).next((u=>{u.forEach(((f,m)=>{i.set(f,m)}))}))}computeViews(t,i,r,l){let u=gs();const f=jl(),m=(function(){return jl()})();return i.forEach(((g,y)=>{const b=r.get(y.key);l.has(y.key)&&(b===void 0||b.mutation instanceof vr)?u=u.insert(y.key,y):b!==void 0?(f.set(y.key,b.mutation.getFieldMask()),Ll(b.mutation,y,b.mutation.getFieldMask(),ue.now())):f.set(y.key,jn.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((y,b)=>f.set(y,b))),i.forEach(((y,b)=>m.set(y,new bR(b,f.get(y)??null)))),m)))}recalculateAndSaveOverlays(t,i){const r=jl();let l=new me(((f,m)=>f-m)),u=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next((f=>{for(const m of f)m.keys().forEach((g=>{const y=i.get(g);if(y===null)return;let b=r.get(g)||jn.empty();b=m.applyToLocalView(y,b),r.set(g,b);const C=(l.get(m.batchId)||Ht()).add(g);l=l.insert(m.batchId,C)}))})).next((()=>{const f=[],m=l.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,b=g.value,C=PT();b.forEach((I=>{if(!u.has(I)){const L=GT(i.get(I),r.get(I));L!==null&&C.set(I,L),u=u.add(I)}})),f.push(this.documentOverlayCache.saveOverlays(t,y,C))}return et.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,i,r,l){return(function(f){return St.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):kT(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,l):this.getDocumentsMatchingCollectionQuery(t,i,r,l)}getNextDocuments(t,i,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,l-u.size):et.resolve(Wr());let m=zl,g=u;return f.next((y=>et.forEach(y,((b,C)=>(m<C.largestBatchId&&(m=C.largestBatchId),u.get(b)?et.resolve():this.remoteDocumentCache.getEntry(t,b).next((I=>{g=g.insert(b,I)}))))).next((()=>this.populateOverlays(t,y,u))).next((()=>this.computeViews(t,g,y,Ht()))).next((b=>({batchId:m,changes:LT(b)})))))}))}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new St(i)).next((r=>{let l=Dl();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(t,i,r,l){const u=i.collectionGroup;let f=Dl();return this.indexManager.getCollectionParents(t,u).next((m=>et.forEach(m,(g=>{const y=(function(C,I){return new Eo(I,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(i,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,y,r,l).next((b=>{b.forEach(((C,I)=>{f=f.insert(C,I)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,i,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,u,l)))).next((f=>{u.forEach(((g,y)=>{const b=y.getKey();f.get(b)===null&&(f=f.insert(b,ln.newInvalidDocument(b)))}));let m=Dl();return f.forEach(((g,y)=>{const b=u.get(g);b!==void 0&&Ll(b.mutation,y,jn.empty(),ue.now()),Nh(i,y)&&(m=m.insert(g,y))})),m}))}}class AR{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return et.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Li(l.createTime)}})(i)),et.resolve()}getNamedQuery(t,i){return et.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:dR(l.bundledQuery),readTime:Li(l.readTime)}})(i)),et.resolve()}}class wR{constructor(){this.overlays=new me(St.comparator),this.qr=new Map}getOverlay(t,i){return et.resolve(this.overlays.get(i))}getOverlays(t,i){const r=Wr();return et.forEach(i,(l=>this.getOverlay(t,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(t,i,r){return r.forEach(((l,u)=>{this.St(t,i,u)})),et.resolve()}removeOverlaysForBatchId(t,i,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),et.resolve()}getOverlaysForCollection(t,i,r){const l=Wr(),u=i.length+1,f=new St(i.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!i.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>r&&l.set(g.getKey(),g)}return et.resolve(l)}getOverlaysForCollectionGroup(t,i,r,l){let u=new me(((y,b)=>y-b));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===i&&y.largestBatchId>r){let b=u.get(y.largestBatchId);b===null&&(b=Wr(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const m=Wr(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>m.set(y,b))),!(m.size()>=l)););return et.resolve(m)}St(t,i,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new Hw(i,r));let u=this.qr.get(i);u===void 0&&(u=Ht(),this.qr.set(i,u)),this.qr.set(i,u.add(r.key))}}class RR{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(t){return et.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,et.resolve()}}class np{constructor(){this.Qr=new ze(Fe.$r),this.Ur=new ze(Fe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const r=new Fe(t,i);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,i){t.forEach((r=>this.addReference(r,i)))}removeReference(t,i){this.Gr(new Fe(t,i))}zr(t,i){t.forEach((r=>this.removeReference(r,i)))}jr(t){const i=new St(new ae([])),r=new Fe(i,t),l=new Fe(i,t+1),u=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new St(new ae([])),r=new Fe(i,t),l=new Fe(i,t+1);let u=Ht();return this.Ur.forEachInRange([r,l],(f=>{u=u.add(f.key)})),u}containsKey(t){const i=new Fe(t,0),r=this.Qr.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class Fe{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return St.comparator(t.key,i.key)||qt(t.Yr,i.Yr)}static Kr(t,i){return qt(t.Yr,i.Yr)||St.comparator(t.key,i.key)}}class CR{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new ze(Fe.$r)}checkEmpty(t){return et.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new qw(u,i,r,l);this.mutationQueue.push(f);for(const m of l)this.Zr=this.Zr.add(new Fe(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return et.resolve(f)}lookupMutationBatch(t,i){return et.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,l=this.ei(r),u=l<0?0:l;return et.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(this.mutationQueue.length===0?Ym:this.tr-1)}getAllMutationBatches(t){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new Fe(i,0),l=new Fe(i,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,l],(f=>{const m=this.Xr(f.Yr);u.push(m)})),et.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new ze(qt);return i.forEach((l=>{const u=new Fe(l,0),f=new Fe(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{r=r.add(m.Yr)}))})),et.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,l=r.length+1;let u=r;St.isDocumentKey(u)||(u=u.child(""));const f=new Fe(new St(u),0);let m=new ze(qt);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===l&&(m=m.add(g.Yr)),!0)}),f),et.resolve(this.ti(m))}ti(t){const i=[];return t.forEach((r=>{const l=this.Xr(r);l!==null&&i.push(l)})),i}removeMutationBatch(t,i){Zt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return et.forEach(i.mutations,(l=>{const u=new Fe(l.key,i.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,i){const r=new Fe(i,0),l=this.Zr.firstAfterOrEqual(r);return et.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,et.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class IR{constructor(t){this.ri=t,this.docs=(function(){return new me(St.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,l=this.docs.get(r),u=l?l.size:0,f=this.ri(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return et.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(i))}getEntries(t,i){let r=gs();return i.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():ln.newInvalidDocument(l))})),et.resolve(r)}getDocumentsMatchingQuery(t,i,r,l){let u=gs();const f=i.path,m=new St(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||iw(nw(b),r)<=0||(l.has(b.key)||Nh(i,b))&&(u=u.insert(b.key,b.mutableCopy()))}return et.resolve(u)}getAllFromCollectionGroup(t,i,r,l){Rt(9500)}ii(t,i){return et.forEach(this.docs,(r=>i(r)))}newChangeBuffer(t){return new xR(this)}getSize(t){return et.resolve(this.size)}}class xR extends TR{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(r)})),et.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}class DR{constructor(t){this.persistence=t,this.si=new aa((i=>$m(i)),Zm),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.oi=0,this._i=new np,this.targetCount=0,this.ai=fo.ur()}forEachTarget(t,i){return this.si.forEach(((r,l)=>i(l))),et.resolve()}getLastRemoteSnapshotVersion(t){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return et.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.oi&&(this.oi=i),et.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new fo(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,et.resolve()}updateTargetData(t,i){return this.Pr(i),et.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,et.resolve()}removeTargets(t,i,r){let l=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=i&&r.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),l++)})),et.waitFor(u).next((()=>l))}getTargetCount(t){return et.resolve(this.targetCount)}getTargetData(t,i){const r=this.si.get(i)||null;return et.resolve(r)}addMatchingKeys(t,i,r){return this._i.Wr(i,r),et.resolve()}removeMatchingKeys(t,i,r){this._i.zr(i,r);const l=this.persistence.referenceDelegate,u=[];return l&&i.forEach((f=>{u.push(l.markPotentiallyOrphaned(t,f))})),et.waitFor(u)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),et.resolve()}getMatchingKeysForTargetId(t,i){const r=this._i.Hr(i);return et.resolve(r)}containsKey(t,i){return et.resolve(this._i.containsKey(i))}}class s0{constructor(t,i){this.ui={},this.overlays={},this.ci=new Rh(0),this.li=!1,this.li=!0,this.hi=new RR,this.referenceDelegate=t(this),this.Pi=new DR(this),this.indexManager=new mR,this.remoteDocumentCache=(function(l){return new IR(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new fR(i),this.Ii=new AR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new wR,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.ui[t.toKey()];return r||(r=new CR(i,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,r){mt("MemoryPersistence","Starting transaction:",t);const l=new NR(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(t,i){return et.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,i))))}}class NR extends rw{constructor(t){super(),this.currentSequenceNumber=t}}class ip{constructor(t){this.persistence=t,this.Ri=new np,this.Vi=null}static mi(t){return new ip(t)}get fi(){if(this.Vi)return this.Vi;throw Rt(60996)}addReference(t,i,r){return this.Ri.addReference(r,i),this.fi.delete(r.toString()),et.resolve()}removeReference(t,i,r){return this.Ri.removeReference(r,i),this.fi.add(r.toString()),et.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),et.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,i)))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.fi,(r=>{const l=St.fromPath(r);return this.gi(t,l).next((u=>{u||i.removeEntry(l,xt.min())}))})).next((()=>(this.Vi=null,i.apply(t))))}updateLimboDocument(t,i){return this.gi(t,i).next((r=>{r?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(t){return 0}gi(t,i){return et.or([()=>et.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class fh{constructor(t,i){this.persistence=t,this.pi=new aa((r=>lw(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=ER(this,i)}static mi(t,i){return new fh(t,i)}Ei(){}di(t){return et.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>i.next((l=>r+l))))}wr(t){let i=0;return this.pr(t,(r=>{i++})).next((()=>i))}pr(t,i){return et.forEach(this.pi,((r,l)=>this.br(t,r,l).next((u=>u?et.resolve():i(l)))))}removeTargets(t,i,r){return this.persistence.getTargetCache().removeTargets(t,i,r)}removeOrphanedDocuments(t,i){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(t,(f=>this.br(t,f,i).next((m=>{m||(r++,u.removeEntry(f,xt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),et.resolve()}removeTarget(t,i){const r=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,i,r){return this.pi.set(r,t.currentSequenceNumber),et.resolve()}removeReference(t,i,r){return this.pi.set(r,t.currentSequenceNumber),et.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),et.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=Qc(t.data.value)),i}br(t,i,r){return et.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return et.resolve(l!==void 0&&l>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class sp{constructor(t,i,r,l){this.targetId=t,this.fromCache=i,this.Es=r,this.ds=l}static As(t,i){let r=Ht(),l=Ht();for(const u of i.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new sp(t,i.fromCache,r,l)}}class OR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class kR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return AA()?8:aw(un())>0?6:4})()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,r,l){const u={result:null};return this.ys(t,i).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(t,i,l,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new OR;return this.Ss(t,i,f).next((m=>{if(u.result=m,this.Vs)return this.bs(t,i,f,m.size)}))})).next((()=>u.result))}bs(t,i,r,l){return r.documentReadCount<this.fs?($a()<=Bt.DEBUG&&mt("QueryEngine","SDK will not create cache indexes for query:",Za(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),et.resolve()):($a()<=Bt.DEBUG&&mt("QueryEngine","Query:",Za(i),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?($a()<=Bt.DEBUG&&mt("QueryEngine","The SDK decides to create cache indexes for query:",Za(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ji(i))):et.resolve())}ys(t,i){if(Yv(i))return et.resolve(null);let r=ji(i);return this.indexManager.getIndexType(t,r).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=uh(i,null,"F"),r=ji(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const f=Ht(...u);return this.ps.getDocuments(t,f).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const y=this.Ds(i,m);return this.Cs(i,y,f,g.readTime)?this.ys(t,uh(i,null,"F")):this.vs(t,y,i,g)}))))})))))}ws(t,i,r,l){return Yv(i)||l.isEqual(xt.min())?et.resolve(null):this.ps.getDocuments(t,r).next((u=>{const f=this.Ds(i,u);return this.Cs(i,f,r,l)?et.resolve(null):($a()<=Bt.DEBUG&&mt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Za(i)),this.vs(t,f,i,ew(l,zl)).next((m=>m)))}))}Ds(t,i){let r=new ze(MT(t));return i.forEach(((l,u)=>{Nh(t,u)&&(r=r.add(u))})),r}Cs(t,i,r,l){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const u=t.limitType==="F"?i.last():i.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(t,i,r){return $a()<=Bt.DEBUG&&mt("QueryEngine","Using full collection scan to execute query:",Za(i)),this.ps.getDocumentsMatchingQuery(t,i,fr.min(),r)}vs(t,i,r,l){return this.ps.getDocumentsMatchingQuery(t,r,l).next((u=>(i.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const rp="LocalStore",VR=3e8;class MR{constructor(t,i,r,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new me(qt),this.xs=new aa((u=>$m(u)),Zm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new SR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>t.collect(i,this.Ms)))}}function jR(s,t,i,r){return new MR(s,t,i,r)}async function r0(s,t){const i=Nt(s);return await i.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return i.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,i.Bs(t),i.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],m=[];let g=Ht();for(const y of l){f.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of u){m.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return i.localDocuments.getDocuments(r,g).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:m})))}))}))}function LR(s,t){const i=Nt(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=t.batch.keys(),u=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,b){const C=y.batch,I=C.keys();let L=et.resolve();return I.forEach((X=>{L=L.next((()=>b.getEntry(g,X))).next((Q=>{const K=y.docVersions.get(X);Zt(K!==null,48541),Q.version.compareTo(K)<0&&(C.applyToRemoteDocument(Q,y),Q.isValidDocument()&&(Q.setReadTime(y.commitVersion),b.addEntry(Q)))}))})),L.next((()=>m.mutationQueue.removeMutationBatch(g,C)))})(i,r,t,u).next((()=>u.apply(r))).next((()=>i.mutationQueue.performConsistencyCheck(r))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(r,l,t.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Ht();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(t)))).next((()=>i.localDocuments.getDocuments(r,l)))}))}function a0(s){const t=Nt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>t.Pi.getLastRemoteSnapshotVersion(i)))}function PR(s,t){const i=Nt(s),r=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const m=[];t.targetChanges.forEach(((b,C)=>{const I=l.get(C);if(!I)return;m.push(i.Pi.removeMatchingKeys(u,b.removedDocuments,C).next((()=>i.Pi.addMatchingKeys(u,b.addedDocuments,C))));let L=I.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(C)!==null?L=L.withResumeToken(en.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):b.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(b.resumeToken,r)),l=l.insert(C,L),(function(Q,K,ct){return Q.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=VR?!0:ct.addedDocuments.size+ct.modifiedDocuments.size+ct.removedDocuments.size>0})(I,L,b)&&m.push(i.Pi.updateTargetData(u,L))}));let g=gs(),y=Ht();if(t.documentUpdates.forEach((b=>{t.resolvedLimboDocuments.has(b)&&m.push(i.persistence.referenceDelegate.updateLimboDocument(u,b))})),m.push(UR(u,f,t.documentUpdates).next((b=>{g=b.ks,y=b.qs}))),!r.isEqual(xt.min())){const b=i.Pi.getLastRemoteSnapshotVersion(u).next((C=>i.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(b)}return et.waitFor(m).next((()=>f.apply(u))).next((()=>i.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(i.Ms=l,u)))}function UR(s,t,i){let r=Ht(),l=Ht();return i.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let f=gs();return i.forEach(((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(m)),g.isNoDocument()&&g.version.isEqual(xt.min())?(t.removeEntry(m,g.readTime),f=f.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),f=f.insert(m,g)):mt(rp,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{ks:f,qs:l}}))}function zR(s,t){const i=Nt(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=Ym),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function BR(s,t){const i=Nt(s);return i.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return i.Pi.getTargetData(r,t).next((u=>u?(l=u,et.resolve(l)):i.Pi.allocateTargetId(r).next((f=>(l=new sr(t,f,"TargetPurposeListen",r.currentSequenceNumber),i.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=i.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(r.targetId,r),i.xs.set(t,r.targetId)),r}))}async function Im(s,t,i){const r=Nt(s),l=r.Ms.get(t),u=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!vo(f))throw f;mt(rp,`Failed to update sequence numbers for target ${t}: ${f}`)}r.Ms=r.Ms.remove(t),r.xs.delete(l.target)}function aE(s,t,i){const r=Nt(s);let l=xt.min(),u=Ht();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,y,b){const C=Nt(g),I=C.xs.get(b);return I!==void 0?et.resolve(C.Ms.get(I)):C.Pi.getTargetData(y,b)})(r,f,ji(t)).next((m=>{if(m)return l=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,t,i?l:xt.min(),i?u:Ht()))).next((m=>(qR(r,Cw(t),m),{documents:m,Qs:u})))))}function qR(s,t,i){let r=s.Os.get(t)||xt.min();i.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}class oE{constructor(){this.activeTargetIds=kw()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class HR{constructor(){this.Mo=new oE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,r){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new oE,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class FR{Oo(t){}shutdown(){}}const lE="ConnectivityMonitor";class uE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){mt(lE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){mt(lE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Gc=null;function xm(){return Gc===null?Gc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gc++,"0x"+Gc.toString(16)}const rm="RestConnection",GR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KR{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===ah?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(t,i,r,l,u){const f=xm(),m=this.zo(t,i.toUriEncodedString());mt(rm,`Sending RPC '${t}' ${f}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,u);const{host:y}=new URL(m),b=po(y);return this.Jo(t,m,g,r,b).then((C=>(mt(rm,`Received RPC '${t}' ${f}: `,C),C)),(C=>{throw oo(rm,`RPC '${t}' ${f} failed with error: `,C,"url: ",m,"request:",r),C}))}Ho(t,i,r,l,u,f){return this.Go(t,i,r,l,u)}jo(t,i,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,u)=>t[u]=l)),r&&r.headers.forEach(((l,u)=>t[u]=l))}zo(t,i){const r=GR[t];return`${this.Uo}/v1/${i}:${r}`}terminate(){}}class YR{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const an="WebChannelConnection";class QR extends KR{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,r,l,u){const f=xm();return new Promise(((m,g)=>{const y=new lT;y.setWithCredentials(!0),y.listenOnce(uT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Yc.NO_ERROR:const C=y.getResponseJson();mt(an,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(C)),m(C);break;case Yc.TIMEOUT:mt(an,`RPC '${t}' ${f} timed out`),g(new ht(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Yc.HTTP_ERROR:const I=y.getStatus();if(mt(an,`RPC '${t}' ${f} failed with status:`,I,"response text:",y.getResponseText()),I>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const X=L?.error;if(X&&X.status&&X.message){const Q=(function(ct){const Tt=ct.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(Tt)>=0?Tt:Z.UNKNOWN})(X.status);g(new ht(Q,X.message))}else g(new ht(Z.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ht(Z.UNAVAILABLE,"Connection failed."));break;default:Rt(9055,{l_:t,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{mt(an,`RPC '${t}' ${f} completed.`)}}));const b=JSON.stringify(l);mt(an,`RPC '${t}' ${f} sending request:`,l),y.send(i,"POST",b,r,15)}))}T_(t,i,r){const l=xm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=fT(),m=hT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,i,r),g.encodeInitMessageHeaders=!0;const b=u.join("");mt(an,`Creating RPC '${t}' stream ${l}: ${b}`,g);const C=f.createWebChannel(b,g);this.I_(C);let I=!1,L=!1;const X=new YR({Yo:K=>{L?mt(an,`Not sending because RPC '${t}' stream ${l} is closed:`,K):(I||(mt(an,`Opening RPC '${t}' stream ${l} transport.`),C.open(),I=!0),mt(an,`RPC '${t}' stream ${l} sending:`,K),C.send(K))},Zo:()=>C.close()}),Q=(K,ct,Tt)=>{K.listen(ct,(it=>{try{Tt(it)}catch(pt){setTimeout((()=>{throw pt}),0)}}))};return Q(C,xl.EventType.OPEN,(()=>{L||(mt(an,`RPC '${t}' stream ${l} transport opened.`),X.o_())})),Q(C,xl.EventType.CLOSE,(()=>{L||(L=!0,mt(an,`RPC '${t}' stream ${l} transport closed`),X.a_(),this.E_(C))})),Q(C,xl.EventType.ERROR,(K=>{L||(L=!0,oo(an,`RPC '${t}' stream ${l} transport errored. Name:`,K.name,"Message:",K.message),X.a_(new ht(Z.UNAVAILABLE,"The operation could not be completed")))})),Q(C,xl.EventType.MESSAGE,(K=>{if(!L){const ct=K.data[0];Zt(!!ct,16349);const Tt=ct,it=Tt?.error||Tt[0]?.error;if(it){mt(an,`RPC '${t}' stream ${l} received error:`,it);const pt=it.status;let W=(function(S){const x=Me[S];if(x!==void 0)return YT(x)})(pt),ft=it.message;W===void 0&&(W=Z.INTERNAL,ft="Unknown error status: "+pt+" with message "+it.message),L=!0,X.a_(new ht(W,ft)),C.close()}else mt(an,`RPC '${t}' stream ${l} received:`,ct),X.u_(ct)}})),Q(m,cT.STAT_EVENT,(K=>{K.stat===ym.PROXY?mt(an,`RPC '${t}' stream ${l} detected buffering proxy`):K.stat===ym.NOPROXY&&mt(an,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{X.__()}),0),X}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((i=>i===t))}}function am(){return typeof document<"u"?document:null}function jh(s){return new Ww(s,!0)}class o0{constructor(t,i,r=1e3,l=1.5,u=6e4){this.Mi=t,this.timerId=i,this.d_=r,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-r);l>0&&mt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const cE="PersistentStream";class l0{constructor(t,i,r,l,u,f,m,g){this.Mi=t,this.S_=r,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new o0(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===Z.RESOURCE_EXHAUSTED?(ps(i.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===i&&this.G_(r,l)}),(r=>{t((()=>{const l=new ht(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(t,i){const r=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return mt(cE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget((()=>this.D_===t?i():(mt(cE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class XR extends l0{constructor(t,i,r,l,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,l,f),this.serializer=u}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=eR(this.serializer,t),r=(function(u){if(!("targetChange"in u))return xt.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?xt.min():f.readTime?Li(f.readTime):xt.min()})(t);return this.listener.H_(i,r)}Y_(t){const i={};i.database=Cm(this.serializer),i.addTarget=(function(u,f){let m;const g=f.target;if(m=bm(g)?{documents:sR(u,g)}:{query:rR(u,g).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=$T(u,f.resumeToken);const y=Am(u,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(xt.min())>0){m.readTime=hh(u,f.snapshotVersion.toTimestamp());const y=Am(u,f.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,t);const r=oR(this.serializer,t);r&&(i.labels=r),this.q_(i)}Z_(t){const i={};i.database=Cm(this.serializer),i.removeTarget=t,this.q_(i)}}class $R extends l0{constructor(t,i,r,l,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return Zt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Zt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Zt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=iR(t.writeResults,t.commitTime),r=Li(t.commitTime);return this.listener.na(r,i)}ra(){const t={};t.database=Cm(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map((r=>nR(this.serializer,r)))};this.q_(i)}}class ZR{}class WR extends ZR{constructor(t,i,r,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ht(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(t,wm(i,r),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ht(Z.UNKNOWN,u.toString())}))}Ho(t,i,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(t,wm(i,r),l,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ht(Z.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class JR{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ps(i),this.aa=!1):mt("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ia="RemoteStore";class tC{constructor(t,i,r,l,u){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{oa(this)&&(mt(ia,"Restarting streams for network reachability change."),await(async function(g){const y=Nt(g);y.Ea.add(4),await eu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Lh(y)})(this))}))})),this.Ra=new JR(r,l)}}async function Lh(s){if(oa(s))for(const t of s.da)await t(!0)}async function eu(s){for(const t of s.da)await t(!1)}function u0(s,t){const i=Nt(s);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),up(i)?lp(i):To(i).O_()&&op(i,t))}function ap(s,t){const i=Nt(s),r=To(i);i.Ia.delete(t),r.O_()&&c0(i,t),i.Ia.size===0&&(r.O_()?r.L_():oa(i)&&i.Ra.set("Unknown"))}function op(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(xt.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}To(s).Y_(t)}function c0(s,t){s.Va.Ue(t),To(s).Z_(t)}function lp(s){s.Va=new Qw({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),To(s).start(),s.Ra.ua()}function up(s){return oa(s)&&!To(s).x_()&&s.Ia.size>0}function oa(s){return Nt(s).Ea.size===0}function h0(s){s.Va=void 0}async function eC(s){s.Ra.set("Online")}async function nC(s){s.Ia.forEach(((t,i)=>{op(s,t)}))}async function iC(s,t){h0(s),up(s)?(s.Ra.ha(t),lp(s)):s.Ra.set("Unknown")}async function sC(s,t,i){if(s.Ra.set("Online"),t instanceof XT&&t.state===2&&t.cause)try{await(async function(l,u){const f=u.cause;for(const m of u.targetIds)l.Ia.has(m)&&(await l.remoteSyncer.rejectListen(m,f),l.Ia.delete(m),l.Va.removeTarget(m))})(s,t)}catch(r){mt(ia,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await dh(s,r)}else if(t instanceof Zc?s.Va.Ze(t):t instanceof QT?s.Va.st(t):s.Va.tt(t),!i.isEqual(xt.min()))try{const r=await a0(s.localStore);i.compareTo(r)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(y);b&&u.Ia.set(y,b.withResumeToken(g.resumeToken,f))}})),m.targetMismatches.forEach(((g,y)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(en.EMPTY_BYTE_STRING,b.snapshotVersion)),c0(u,g);const C=new sr(b.target,g,y,b.sequenceNumber);op(u,C)})),u.remoteSyncer.applyRemoteEvent(m)})(s,i)}catch(r){mt(ia,"Failed to raise snapshot:",r),await dh(s,r)}}async function dh(s,t,i){if(!vo(t))throw t;s.Ea.add(1),await eu(s),s.Ra.set("Offline"),i||(i=()=>a0(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{mt(ia,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await Lh(s)}))}function f0(s,t){return t().catch((i=>dh(s,i,t)))}async function Ph(s){const t=Nt(s),i=gr(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ym;for(;rC(t);)try{const l=await zR(t.localStore,r);if(l===null){t.Ta.length===0&&i.L_();break}r=l.batchId,aC(t,l)}catch(l){await dh(t,l)}d0(t)&&m0(t)}function rC(s){return oa(s)&&s.Ta.length<10}function aC(s,t){s.Ta.push(t);const i=gr(s);i.O_()&&i.X_&&i.ea(t.mutations)}function d0(s){return oa(s)&&!gr(s).x_()&&s.Ta.length>0}function m0(s){gr(s).start()}async function oC(s){gr(s).ra()}async function lC(s){const t=gr(s);for(const i of s.Ta)t.ea(i.mutations)}async function uC(s,t,i){const r=s.Ta.shift(),l=Jm.from(r,t,i);await f0(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Ph(s)}async function cC(s,t){t&&gr(s).X_&&await(async function(r,l){if((function(f){return Gw(f)&&f!==Z.ABORTED})(l.code)){const u=r.Ta.shift();gr(r).B_(),await f0(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Ph(r)}})(s,t),d0(s)&&m0(s)}async function hE(s,t){const i=Nt(s);i.asyncQueue.verifyOperationInProgress(),mt(ia,"RemoteStore received new credentials");const r=oa(i);i.Ea.add(3),await eu(i),r&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await Lh(i)}async function hC(s,t){const i=Nt(s);t?(i.Ea.delete(2),await Lh(i)):t||(i.Ea.add(2),await eu(i),i.Ra.set("Unknown"))}function To(s){return s.ma||(s.ma=(function(i,r,l){const u=Nt(i);return u.sa(),new XR(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:eC.bind(null,s),t_:nC.bind(null,s),r_:iC.bind(null,s),H_:sC.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),up(s)?lp(s):s.Ra.set("Unknown")):(await s.ma.stop(),h0(s))}))),s.ma}function gr(s){return s.fa||(s.fa=(function(i,r,l){const u=Nt(i);return u.sa(),new $R(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:oC.bind(null,s),r_:cC.bind(null,s),ta:lC.bind(null,s),na:uC.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await Ph(s)):(await s.fa.stop(),s.Ta.length>0&&(mt(ia,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class cp{constructor(t,i,r,l,u){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,l,u){const f=Date.now()+r,m=new cp(t,i,f,l,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(Z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hp(s,t){if(ps("AsyncQueue",`${t}: ${s}`),vo(s))return new ht(Z.UNAVAILABLE,`${t}: ${s}`);throw s}class no{static emptySet(t){return new no(t.comparator)}constructor(t){this.comparator=t?(i,r)=>t(i,r)||St.comparator(i.key,r.key):(i,r)=>St.comparator(i.key,r.key),this.keyedMap=Dl(),this.sortedSet=new me(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((i,r)=>(t(i),!1)))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof no)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((i=>{t.push(i.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new no;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}class fE{constructor(){this.ga=new me(St.comparator)}track(t){const i=t.doc.key,r=this.ga.get(i);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(i,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(i):t.type===1&&r.type===2?this.ga=this.ga.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):Rt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal(((i,r)=>{t.push(r)})),t}}class mo{constructor(t,i,r,l,u,f,m,g,y){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,i,r,l,u){const f=[];return i.forEach((m=>{f.push({type:0,doc:m})})),new mo(t,i,no.emptySet(i),f,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Dh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==r[l].type||!i[l].doc.isEqual(r[l].doc))return!1;return!0}}class fC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class dC{constructor(){this.queries=dE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const l=Nt(i),u=l.queries;l.queries=dE(),u.forEach(((f,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new ht(Z.ABORTED,"Firestore shutting down"))}}function dE(){return new aa((s=>VT(s)),Dh)}async function fp(s,t){const i=Nt(s);let r=3;const l=t.query;let u=i.queries.get(l);u?!u.ba()&&t.Da()&&(r=2):(u=new fC,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await i.onListen(l,!0);break;case 1:u.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(f){const m=hp(f,`Initialization of query '${Za(t.query)}' failed`);return void t.onError(m)}i.queries.set(l,u),u.Sa.push(t),t.va(i.onlineState),u.wa&&t.Fa(u.wa)&&mp(i)}async function dp(s,t){const i=Nt(s),r=t.query;let l=3;const u=i.queries.get(r);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=t.Da()?0:1:!u.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function mC(s,t){const i=Nt(s);let r=!1;for(const l of t){const u=l.query,f=i.queries.get(u);if(f){for(const m of f.Sa)m.Fa(l)&&(r=!0);f.wa=l}}r&&mp(i)}function pC(s,t,i){const r=Nt(s),l=r.queries.get(t);if(l)for(const u of l.Sa)u.onError(i);r.queries.delete(t)}function mp(s){s.Ca.forEach((t=>{t.next()}))}var Dm,mE;(mE=Dm||(Dm={})).Ma="default",mE.Cache="cache";class pp{constructor(t,i,r){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const l of t.docChanges)l.type!==3&&r.push(l);t=new mo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const r=i!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=mo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Dm.Cache}}class p0{constructor(t){this.key=t}}class g0{constructor(t){this.key=t}}class gC{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ht(),this.mutatedKeys=Ht(),this.eu=MT(t),this.tu=new no(this.eu)}get nu(){return this.Ya}ru(t,i){const r=i?i.iu:new fE,l=i?i.tu:this.tu;let u=i?i.mutatedKeys:this.mutatedKeys,f=l,m=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((b,C)=>{const I=l.get(b),L=Nh(this.query,C)?C:null,X=!!I&&this.mutatedKeys.has(I.key),Q=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let K=!1;I&&L?I.data.isEqual(L.data)?X!==Q&&(r.track({type:3,doc:L}),K=!0):this.su(I,L)||(r.track({type:2,doc:L}),K=!0,(g&&this.eu(L,g)>0||y&&this.eu(L,y)<0)&&(m=!0)):!I&&L?(r.track({type:0,doc:L}),K=!0):I&&!L&&(r.track({type:1,doc:I}),K=!0,(g||y)&&(m=!0)),K&&(L?(f=f.add(L),u=Q?u.add(b):u.delete(b)):(f=f.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{tu:f,iu:r,Cs:m,mutatedKeys:u}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,l){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((b,C)=>(function(L,X){const Q=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rt(20277,{Rt:K})}};return Q(L)-Q(X)})(b.type,C.type)||this.eu(b.doc,C.doc))),this.ou(r),l=l??!1;const m=i&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,y=g!==this.Za;return this.Za=g,f.length!==0||y?{snapshot:new mo(this.query,t.tu,u,f,t.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),t.modifiedDocuments.forEach((i=>{})),t.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ht(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const i=[];return t.forEach((r=>{this.Xa.has(r)||i.push(new g0(r))})),this.Xa.forEach((r=>{t.has(r)||i.push(new p0(r))})),i}cu(t){this.Ya=t.Qs,this.Xa=Ht();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return mo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gp="SyncEngine";class yC{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class _C{constructor(t){this.key=t,this.hu=!1}}class vC{constructor(t,i,r,l,u,f){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new aa((m=>VT(m)),Dh),this.Iu=new Map,this.Eu=new Set,this.du=new me(St.comparator),this.Au=new Map,this.Ru=new np,this.Vu={},this.mu=new Map,this.fu=fo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function EC(s,t,i=!0){const r=b0(s);let l;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await y0(r,t,i,!0),l}async function TC(s,t){const i=b0(s);await y0(i,t,!0,!1)}async function y0(s,t,i,r){const l=await BR(s.localStore,ji(t)),u=l.targetId,f=s.sharedClientState.addLocalQueryTarget(u,i);let m;return r&&(m=await bC(s,t,u,f==="current",l.resumeToken)),s.isPrimaryClient&&i&&u0(s.remoteStore,l),m}async function bC(s,t,i,r,l){s.pu=(C,I,L)=>(async function(Q,K,ct,Tt){let it=K.view.ru(ct);it.Cs&&(it=await aE(Q.localStore,K.query,!1).then((({documents:D})=>K.view.ru(D,it))));const pt=Tt&&Tt.targetChanges.get(K.targetId),W=Tt&&Tt.targetMismatches.get(K.targetId)!=null,ft=K.view.applyChanges(it,Q.isPrimaryClient,pt,W);return gE(Q,K.targetId,ft.au),ft.snapshot})(s,C,I,L);const u=await aE(s.localStore,t,!0),f=new gC(t,u.Qs),m=f.ru(u.documents),g=tu.createSynthesizedTargetChangeForCurrentChange(i,r&&s.onlineState!=="Offline",l),y=f.applyChanges(m,s.isPrimaryClient,g);gE(s,i,y.au);const b=new yC(t,i,f);return s.Tu.set(t,b),s.Iu.has(i)?s.Iu.get(i).push(t):s.Iu.set(i,[t]),y.snapshot}async function SC(s,t,i){const r=Nt(s),l=r.Tu.get(t),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((f=>!Dh(f,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Im(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),i&&ap(r.remoteStore,l.targetId),Nm(r,l.targetId)})).catch(_o)):(Nm(r,l.targetId),await Im(r.localStore,l.targetId,!0))}async function AC(s,t){const i=Nt(s),r=i.Tu.get(t),l=i.Iu.get(r.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),ap(i.remoteStore,r.targetId))}async function wC(s,t,i){const r=OC(s);try{const l=await(function(f,m){const g=Nt(f),y=ue.now(),b=m.reduce(((L,X)=>L.add(X.key)),Ht());let C,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let X=gs(),Q=Ht();return g.Ns.getEntries(L,b).next((K=>{X=K,X.forEach(((ct,Tt)=>{Tt.isValidDocument()||(Q=Q.add(ct))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,X))).next((K=>{C=K;const ct=[];for(const Tt of m){const it=zw(Tt,C.get(Tt.key).overlayedDocument);it!=null&&ct.push(new vr(Tt.key,it,RT(it.value.mapValue),mn.exists(!0)))}return g.mutationQueue.addMutationBatch(L,y,ct,m)})).next((K=>{I=K;const ct=K.applyToLocalDocumentSet(C,Q);return g.documentOverlayCache.saveOverlays(L,K.batchId,ct)}))})).then((()=>({batchId:I.batchId,changes:LT(C)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(l.batchId),(function(f,m,g){let y=f.Vu[f.currentUser.toKey()];y||(y=new me(qt)),y=y.insert(m,g),f.Vu[f.currentUser.toKey()]=y})(r,l.batchId,i),await nu(r,l.changes),await Ph(r.remoteStore)}catch(l){const u=hp(l,"Failed to persist write");i.reject(u)}}async function _0(s,t){const i=Nt(s);try{const r=await PR(i.localStore,t);t.targetChanges.forEach(((l,u)=>{const f=i.Au.get(u);f&&(Zt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Zt(f.hu,14607):l.removedDocuments.size>0&&(Zt(f.hu,42227),f.hu=!1))})),await nu(i,r,t)}catch(r){await _o(r)}}function pE(s,t,i){const r=Nt(s);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const l=[];r.Tu.forEach(((u,f)=>{const m=f.view.va(t);m.snapshot&&l.push(m.snapshot)})),(function(f,m){const g=Nt(f);g.onlineState=m;let y=!1;g.queries.forEach(((b,C)=>{for(const I of C.Sa)I.va(m)&&(y=!0)})),y&&mp(g)})(r.eventManager,t),l.length&&r.Pu.H_(l),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function RC(s,t,i){const r=Nt(s);r.sharedClientState.updateQueryState(t,"rejected",i);const l=r.Au.get(t),u=l&&l.key;if(u){let f=new me(St.comparator);f=f.insert(u,ln.newNoDocument(u,xt.min()));const m=Ht().add(u),g=new Mh(xt.min(),new Map,new me(qt),f,m);await _0(r,g),r.du=r.du.remove(u),r.Au.delete(t),yp(r)}else await Im(r.localStore,t,!1).then((()=>Nm(r,t,i))).catch(_o)}async function CC(s,t){const i=Nt(s),r=t.batch.batchId;try{const l=await LR(i.localStore,t);E0(i,r,null),v0(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await nu(i,l)}catch(l){await _o(l)}}async function IC(s,t,i){const r=Nt(s);try{const l=await(function(f,m){const g=Nt(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,m).next((C=>(Zt(C!==null,37113),b=C.keys(),g.mutationQueue.removeMutationBatch(y,C)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(r.localStore,t);E0(r,t,i),v0(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await nu(r,l)}catch(l){await _o(l)}}function v0(s,t){(s.mu.get(t)||[]).forEach((i=>{i.resolve()})),s.mu.delete(t)}function E0(s,t,i){const r=Nt(s);let l=r.Vu[r.currentUser.toKey()];if(l){const u=l.get(t);u&&(i?u.reject(i):u.resolve(),l=l.remove(t)),r.Vu[r.currentUser.toKey()]=l}}function Nm(s,t,i=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),i&&s.Pu.yu(r,i);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||T0(s,r)}))}function T0(s,t){s.Eu.delete(t.path.canonicalString());const i=s.du.get(t);i!==null&&(ap(s.remoteStore,i),s.du=s.du.remove(t),s.Au.delete(i),yp(s))}function gE(s,t,i){for(const r of i)r instanceof p0?(s.Ru.addReference(r.key,t),xC(s,r)):r instanceof g0?(mt(gp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||T0(s,r.key)):Rt(19791,{wu:r})}function xC(s,t){const i=t.key,r=i.path.canonicalString();s.du.get(i)||s.Eu.has(r)||(mt(gp,"New document in limbo: "+i),s.Eu.add(r),yp(s))}function yp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const i=new St(ae.fromString(t)),r=s.fu.next();s.Au.set(r,new _C(i)),s.du=s.du.insert(i,r),u0(s.remoteStore,new sr(ji(xh(i.path)),r,"TargetPurposeLimboResolution",Rh.ce))}}async function nu(s,t,i){const r=Nt(s),l=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{f.push(r.pu(g,t,i).then((y=>{if((y||i)&&r.isPrimaryClient){const b=y?!y.fromCache:i?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){l.push(y);const b=sp.As(g.targetId,y);u.push(b)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(g,y){const b=Nt(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>et.forEach(y,(I=>et.forEach(I.Es,(L=>b.persistence.referenceDelegate.addReference(C,I.targetId,L))).next((()=>et.forEach(I.ds,(L=>b.persistence.referenceDelegate.removeReference(C,I.targetId,L)))))))))}catch(C){if(!vo(C))throw C;mt(rp,"Failed to update sequence numbers: "+C)}for(const C of y){const I=C.targetId;if(!C.fromCache){const L=b.Ms.get(I),X=L.snapshotVersion,Q=L.withLastLimboFreeSnapshotVersion(X);b.Ms=b.Ms.insert(I,Q)}}})(r.localStore,u))}async function DC(s,t){const i=Nt(s);if(!i.currentUser.isEqual(t)){mt(gp,"User change. New user:",t.toKey());const r=await r0(i.localStore,t);i.currentUser=t,(function(u,f){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new ht(Z.CANCELLED,f))}))})),u.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await nu(i,r.Ls)}}function NC(s,t){const i=Nt(s),r=i.Au.get(t);if(r&&r.hu)return Ht().add(r.key);{let l=Ht();const u=i.Iu.get(t);if(!u)return l;for(const f of u){const m=i.Tu.get(f);l=l.unionWith(m.view.nu)}return l}}function b0(s){const t=Nt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=_0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=NC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=RC.bind(null,t),t.Pu.H_=mC.bind(null,t.eventManager),t.Pu.yu=pC.bind(null,t.eventManager),t}function OC(s){const t=Nt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=CC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=IC.bind(null,t),t}class mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=jh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return jR(this.persistence,new kR,t.initialUser,this.serializer)}Cu(t){return new s0(ip.mi,this.serializer)}Du(t){return new HR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mh.provider={build:()=>new mh};class kC extends mh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){Zt(this.persistence.referenceDelegate instanceof fh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new _R(r,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new s0((r=>fh.mi(r,i)),this.serializer)}}class Om{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>pE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DC.bind(null,this.syncEngine),await hC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new dC})()}createDatastore(t){const i=jh(t.databaseInfo.databaseId),r=(function(u){return new QR(u)})(t.databaseInfo);return(function(u,f,m,g){return new WR(u,f,m,g)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,l,u,f,m){return new tC(r,l,u,f,m)})(this.localStore,this.datastore,t.asyncQueue,(i=>pE(this.syncEngine,i,0)),(function(){return uE.v()?new uE:new FR})())}createSyncEngine(t,i){return(function(l,u,f,m,g,y,b){const C=new vC(l,u,f,m,g,y);return b&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const r=Nt(i);mt(ia,"RemoteStore shutting down."),r.Ea.add(5),await eu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Om.provider={build:()=>new Om};class _p{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ps("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout((()=>{this.muted||t(i)}),0)}}const yr="FirestoreClient";class VC{constructor(t,i,r,l,u){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=l,this.user=on.UNAUTHENTICATED,this.clientId=Km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{mt(yr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(mt(yr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=hp(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function om(s,t){s.asyncQueue.verifyOperationInProgress(),mt(yr,"Initializing OfflineComponentProvider");const i=s.configuration;await t.initialize(i);let r=i.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await r0(t.localStore,l),r=l)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function yE(s,t){s.asyncQueue.verifyOperationInProgress();const i=await MC(s);mt(yr,"Initializing OnlineComponentProvider"),await t.initialize(i,s.configuration),s.setCredentialChangeListener((r=>hE(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>hE(t.remoteStore,l))),s._onlineComponents=t}async function MC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){mt(yr,"Using user provided OfflineComponentProvider");try{await om(s,s._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!(function(l){return l.name==="FirebaseError"?l.code===Z.FAILED_PRECONDITION||l.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;oo("Error using user provided cache. Falling back to memory cache: "+i),await om(s,new mh)}}else mt(yr,"Using default OfflineComponentProvider"),await om(s,new kC(void 0));return s._offlineComponents}async function S0(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(mt(yr,"Using user provided OnlineComponentProvider"),await yE(s,s._uninitializedComponentsProvider._online)):(mt(yr,"Using default OnlineComponentProvider"),await yE(s,new Om))),s._onlineComponents}function jC(s){return S0(s).then((t=>t.syncEngine))}async function ph(s){const t=await S0(s),i=t.eventManager;return i.onListen=EC.bind(null,t.syncEngine),i.onUnlisten=SC.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=TC.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=AC.bind(null,t.syncEngine),i}function LC(s,t,i={}){const r=new fs;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,g,y){const b=new _p({next:I=>{b.Nu(),f.enqueueAndForget((()=>dp(u,C)));const L=I.docs.has(m);!L&&I.fromCache?y.reject(new ht(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&I.fromCache&&g&&g.source==="server"?y.reject(new ht(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),C=new pp(xh(m.path),b,{includeMetadataChanges:!0,qa:!0});return fp(u,C)})(await ph(s),s.asyncQueue,t,i,r))),r.promise}function PC(s,t,i={}){const r=new fs;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,g,y){const b=new _p({next:I=>{b.Nu(),f.enqueueAndForget((()=>dp(u,C))),I.fromCache&&g.source==="server"?y.reject(new ht(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),C=new pp(m,b,{includeMetadataChanges:!0,qa:!0});return fp(u,C)})(await ph(s),s.asyncQueue,t,i,r))),r.promise}function A0(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}const _E=new Map;const w0="firestore.googleapis.com",vE=!0;class EE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ht(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=w0,this.ssl=vE}else this.host=t.host,this.ssl=t.ssl??vE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=i0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<gR)throw new ht(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}tw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=A0(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ht(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ht(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ht(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Uh{constructor(t,i,r,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ht(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new F1;switch(r.type){case"firstParty":return new Q1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ht(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const r=_E.get(i);r&&(mt("ComponentProvider","Removing Datastore"),_E.delete(i),r.terminate())})(this),Promise.resolve()}}function UC(s,t,i,r={}){s=dn(s,Uh);const l=po(t),u=s._getSettings(),f={...u,emulatorOptions:s._getEmulatorOptions()},m=`${t}:${i}`;l&&(JE(`https://${m}`),tT("Firestore",!0)),u.host!==w0&&u.host!==m&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:l,emulatorOptions:r};if(!hr(g,f)&&(s._setSettings(g),r.mockUserToken)){let y,b;if(typeof r.mockUserToken=="string")y=r.mockUserToken,b=on.MOCK_USER;else{y=pA(r.mockUserToken,s._app?.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new ht(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new on(C)}s._authCredentials=new G1(new mT(y,b))}}class vs{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new vs(this.firestore,t,this._query)}}class ye{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ye(this.firestore,t,this._key)}toJSON(){return{type:ye._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,r){if(Wl(i,ye._jsonSchema))return new ye(t,r||null,new St(ae.fromString(i.referencePath)))}}ye._jsonSchemaVersion="firestore/documentReference/1.0",ye._jsonSchema={type:Le("string",ye._jsonSchemaVersion),referencePath:Le("string")};class cr extends vs{constructor(t,i,r){super(t,i,xh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ye(this.firestore,null,new St(t))}withConverter(t){return new cr(this.firestore,t,this._path)}}function Se(s,t,...i){if(s=Ae(s),pT("collection","path",t),s instanceof Uh){const r=ae.fromString(t,...i);return kv(r),new cr(s,null,r)}{if(!(s instanceof ye||s instanceof cr))throw new ht(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ae.fromString(t,...i));return kv(r),new cr(s.firestore,null,r)}}function fe(s,t,...i){if(s=Ae(s),arguments.length===1&&(t=Km.newId()),pT("doc","path",t),s instanceof Uh){const r=ae.fromString(t,...i);return Ov(r),new ye(s,null,new St(r))}{if(!(s instanceof ye||s instanceof cr))throw new ht(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ae.fromString(t,...i));return Ov(r),new ye(s.firestore,s instanceof cr?s.converter:null,new St(r))}}const TE="AsyncQueue";class bE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new o0(this,"async_queue_retry"),this._c=()=>{const r=am();r&&mt(TE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const i=am();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=am();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new fs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!vo(t))throw t;mt(TE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const i=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,ps("INTERNAL UNHANDLED ERROR: ",SE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=i,i}enqueueAfterDelay(t,i,r){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=cp.createAndSchedule(this,t,i,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Rt(47125,{Pc:SE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((i,r)=>i.targetTimeMs-r.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function SE(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}function AE(s){return(function(i,r){if(typeof i!="object"||i===null)return!1;const l=i;for(const u of r)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class Fi extends Uh{constructor(t,i,r,l){super(t,i,r,l),this.type="firestore",this._queue=new bE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new bE(t),this._firestoreClient=void 0,await t}}}function zC(s,t){const i=typeof s=="object"?s:sT(),r=typeof s=="string"?s:ah,l=Fm(i,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=dA("firestore");u&&UC(l,...u)}return l}function iu(s){if(s._terminated)throw new ht(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||BC(s),s._firestoreClient}function BC(s){const t=s._freezeSettings(),i=(function(l,u,f,m){return new hw(l,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,A0(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new VC(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class Zn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Zn(en.fromBase64String(t))}catch(i){throw new ht(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new Zn(en.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Wl(t,Zn._jsonSchema))return Zn.fromBase64String(t.bytes)}}Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:Le("string",Zn._jsonSchemaVersion),bytes:Le("string")};class su{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new ht(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class ru{constructor(t){this._methodName=t}}class Pi{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new ht(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new ht(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return qt(this._lat,t._lat)||qt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pi._jsonSchemaVersion}}static fromJSON(t){if(Wl(t,Pi._jsonSchema))return new Pi(t.latitude,t.longitude)}}Pi._jsonSchemaVersion="firestore/geoPoint/1.0",Pi._jsonSchema={type:Le("string",Pi._jsonSchemaVersion),latitude:Le("number"),longitude:Le("number")};class Ui{constructor(t){this._values=(t||[]).map((i=>i))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Wl(t,Ui._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((i=>typeof i=="number")))return new Ui(t.vectorValues);throw new ht(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ui._jsonSchemaVersion="firestore/vectorValue/1.0",Ui._jsonSchema={type:Le("string",Ui._jsonSchemaVersion),vectorValues:Le("object")};const qC=/^__.*__$/;class HC{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new vr(t,this.data,this.fieldMask,i,this.fieldTransforms):new Jl(t,this.data,i,this.fieldTransforms)}}class R0{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return new vr(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function C0(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rt(40011,{Ac:s})}}class zh{constructor(t,i,r,l,u,f){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new zh({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),r=this.Vc({path:i,fc:!1});return r.gc(t),r}yc(t){const i=this.path?.child(t),r=this.Vc({path:i,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return gh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((i=>t.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>t.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(C0(this.Ac)&&qC.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class FC{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||jh(t)}Cc(t,i,r,l=!1){return new zh({Ac:t,methodName:i,Dc:r,path:tn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function au(s){const t=s._freezeSettings(),i=jh(s._databaseId);return new FC(s._databaseId,!!t.ignoreUndefinedProperties,i)}function vp(s,t,i,r,l,u={}){const f=s.Cc(u.merge||u.mergeFields?2:0,t,i,l);bp("Data must be an object, but it was:",f,r);const m=D0(r,f);let g,y;if(u.merge)g=new jn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const b=[];for(const C of u.mergeFields){const I=km(t,C,i);if(!f.contains(I))throw new ht(Z.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);O0(b,I)||b.push(I)}g=new jn(b),y=f.fieldTransforms.filter((C=>g.covers(C.field)))}else g=null,y=f.fieldTransforms;return new HC(new Sn(m),g,y)}class Bh extends ru{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Bh}}function GC(s,t,i){return new zh({Ac:3,Dc:t.settings.Dc,methodName:s._methodName,fc:i},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Ep extends ru{_toFieldTransform(t){return new FT(t.path,new Gl)}isEqual(t){return t instanceof Ep}}class Tp extends ru{constructor(t,i){super(t),this.vc=i}_toFieldTransform(t){const i=GC(this,t,!0),r=this.vc.map((u=>bo(u,i))),l=new ho(r);return new FT(t.path,l)}isEqual(t){return t instanceof Tp&&hr(this.vc,t.vc)}}function I0(s,t,i,r){const l=s.Cc(1,t,i);bp("Data must be an object, but it was:",l,r);const u=[],f=Sn.empty();_r(r,((g,y)=>{const b=Sp(t,g,i);y=Ae(y);const C=l.yc(b);if(y instanceof Bh)u.push(b);else{const I=bo(y,C);I!=null&&(u.push(b),f.set(b,I))}}));const m=new jn(u);return new R0(f,m,l.fieldTransforms)}function x0(s,t,i,r,l,u){const f=s.Cc(1,t,i),m=[km(t,r,i)],g=[l];if(u.length%2!=0)throw new ht(Z.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push(km(t,u[I])),g.push(u[I+1]);const y=[],b=Sn.empty();for(let I=m.length-1;I>=0;--I)if(!O0(y,m[I])){const L=m[I];let X=g[I];X=Ae(X);const Q=f.yc(L);if(X instanceof Bh)y.push(L);else{const K=bo(X,Q);K!=null&&(y.push(L),b.set(L,K))}}const C=new jn(y);return new R0(b,C,f.fieldTransforms)}function KC(s,t,i,r=!1){return bo(i,s.Cc(r?4:3,t))}function bo(s,t){if(N0(s=Ae(s)))return bp("Unsupported field value:",t,s),D0(s,t);if(s instanceof ru)return(function(r,l){if(!C0(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,l){const u=[];let f=0;for(const m of r){let g=bo(m,l.wc(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}})(s,t)}return(function(r,l){if((r=Ae(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Vw(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=ue.fromDate(r);return{timestampValue:hh(l.serializer,u)}}if(r instanceof ue){const u=new ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hh(l.serializer,u)}}if(r instanceof Pi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zn)return{bytesValue:$T(l.serializer,r._byteString)};if(r instanceof ye){const u=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ep(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Ui)return(function(f,m){return{mapValue:{fields:{[AT]:{stringValue:wT},[oh]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return Wm(m.serializer,y)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${wh(r)}`)})(s,t)}function D0(s,t){const i={};return _T(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):_r(s,((r,l)=>{const u=bo(l,t.mc(r));u!=null&&(i[r]=u)})),{mapValue:{fields:i}}}function N0(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ue||s instanceof Pi||s instanceof Zn||s instanceof ye||s instanceof ru||s instanceof Ui)}function bp(s,t,i){if(!N0(i)||!gT(i)){const r=wh(i);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function km(s,t,i){if((t=Ae(t))instanceof su)return t._internalPath;if(typeof t=="string")return Sp(s,t);throw gh("Field path arguments must be of type string or ",s,!1,void 0,i)}const YC=new RegExp("[~\\*/\\[\\]]");function Sp(s,t,i){if(t.search(YC)>=0)throw gh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new su(...t.split("."))._internalPath}catch{throw gh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function gh(s,t,i,r,l){const u=r&&!r.isEmpty(),f=l!==void 0;let m=`Function ${t}() called with invalid data`;i&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${r}`),f&&(g+=` in document ${l}`),g+=")"),new ht(Z.INVALID_ARGUMENT,m+s+g)}function O0(s,t){return s.some((i=>i.isEqual(t)))}class k0{constructor(t,i,r,l,u){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new QC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(qh("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class QC extends k0{data(){return super.data()}}function qh(s,t){return typeof t=="string"?Sp(s,t):t instanceof su?t._internalPath:t._delegate._internalPath}function V0(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ht(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ap{}class wp extends Ap{}function zi(s,t,...i){let r=[];t instanceof Ap&&r.push(t),r=r.concat(i),(function(u){const f=u.filter((g=>g instanceof Rp)).length,m=u.filter((g=>g instanceof Hh)).length;if(f>1||f>0&&m>0)throw new ht(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)s=l._apply(s);return s}class Hh extends wp{constructor(t,i,r){super(),this._field=t,this._op=i,this._value=r,this.type="where"}static _create(t,i,r){return new Hh(t,i,r)}_apply(t){const i=this._parse(t);return M0(t._query,i),new vs(t.firestore,t.converter,Sm(t._query,i))}_parse(t){const i=au(t.firestore);return(function(u,f,m,g,y,b,C){let I;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ht(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){RE(C,b);const X=[];for(const Q of C)X.push(wE(g,u,Q));I={arrayValue:{values:X}}}else I=wE(g,u,C)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||RE(C,b),I=KC(m,f,C,b==="in"||b==="not-in");return je.create(y,b,I)})(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}}function Mn(s,t,i){const r=t,l=qh("where",s);return Hh._create(l,r,i)}class Rp extends Ap{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new Rp(t,i)}_parse(t){const i=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return i.length===1?i[0]:hi.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return i.getFilters().length===0?t:((function(l,u){let f=l;const m=u.getFlattenedFilters();for(const g of m)M0(f,g),f=Sm(f,g)})(t._query,i),new vs(t.firestore,t.converter,Sm(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cp extends wp{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new Cp(t,i)}_apply(t){const i=(function(l,u,f){if(l.startAt!==null)throw new ht(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new ht(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fl(u,f)})(t._query,this._field,this._direction);return new vs(t.firestore,t.converter,(function(l,u){const f=l.explicitOrderBy.concat([u]);return new Eo(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,i))}}function Ip(s,t="asc"){const i=t,r=qh("orderBy",s);return Cp._create(r,i)}class xp extends wp{constructor(t,i,r){super(),this.type=t,this._limit=i,this._limitType=r}static _create(t,i,r){return new xp(t,i,r)}_apply(t){return new vs(t.firestore,t.converter,uh(t._query,this._limit,this._limitType))}}function XC(s){return xp._create("limit",s,"F")}function wE(s,t,i){if(typeof(i=Ae(i))=="string"){if(i==="")throw new ht(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kT(t)&&i.indexOf("/")!==-1)throw new ht(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const r=t.path.child(ae.fromString(i));if(!St.isDocumentKey(r))throw new ht(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bv(s,new St(r))}if(i instanceof ye)return Bv(s,i._key);throw new ht(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wh(i)}.`)}function RE(s,t){if(!Array.isArray(s)||s.length===0)throw new ht(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function M0(s,t){const i=(function(l,u){for(const f of l)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(i!==null)throw i===t.op?new ht(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ht(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}class $C{convertValue(t,i="none"){switch(pr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return be(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(mr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw Rt(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return _r(t,((l,u)=>{r[l]=this.convertValue(u,i)})),r}convertVectorValue(t){const i=t.fields?.[oh].arrayValue?.values?.map((r=>be(r.doubleValue)));return new Ui(i)}convertGeoPoint(t){return new Pi(be(t.latitude),be(t.longitude))}convertArray(t,i){return(t.values||[]).map((r=>this.convertValue(r,i)))}convertServerTimestamp(t,i){switch(i){case"previous":const r=Ih(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(Bl(t));default:return null}}convertTimestamp(t){const i=dr(t);return new ue(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=ae.fromString(t);Zt(n0(r),9688,{name:t});const l=new ql(r.get(1),r.get(3)),u=new St(r.popFirst(5));return l.isEqual(i)||ps(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),u}}function Dp(s,t,i){let r;return r=s?i&&(i.merge||i.mergeFields)?s.toFirestore(t,i):s.toFirestore(t):t,r}class Ol{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Jr extends k0{constructor(t,i,r,l,u,f){super(t,i,r,l,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(qh("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=Jr._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Jr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jr._jsonSchema={type:Le("string",Jr._jsonSchemaVersion),bundleSource:Le("string","DocumentSnapshot"),bundleName:Le("string"),bundle:Le("string")};class Wc extends Jr{data(t={}){return super.data(t)}}class ta{constructor(t,i,r,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new Ol(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const t=[];return this.forEach((i=>t.push(i))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach((r=>{t.call(i,new Wc(this._firestore,this._userDataWriter,r.key,r,new Ol(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ht(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((m=>{const g=new Wc(l._firestore,l._userDataWriter,m.doc.key,m.doc,new Ol(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Wc(l._firestore,l._userDataWriter,m.doc.key,m.doc,new Ol(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,b=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),b=f.indexOf(m.doc.key)),{type:ZC(m.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ta._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Km.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(i.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function ZC(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rt(61501,{type:s})}}function Vm(s){s=dn(s,ye);const t=dn(s.firestore,Fi);return LC(iu(t),s._key).then((i=>j0(t,s,i)))}ta._jsonSchemaVersion="firestore/querySnapshot/1.0",ta._jsonSchema={type:Le("string",ta._jsonSchemaVersion),bundleSource:Le("string","QuerySnapshot"),bundleName:Le("string"),bundle:Le("string")};class Np extends $C{constructor(t){super(),this.firestore=t}convertBytes(t){return new Zn(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new ye(this.firestore,null,i)}}function to(s){s=dn(s,vs);const t=dn(s.firestore,Fi),i=iu(t),r=new Np(t);return V0(s._query),PC(i,s._query).then((l=>new ta(t,r,s,l)))}function lm(s,t,i){s=dn(s,ye);const r=dn(s.firestore,Fi),l=Dp(s.converter,t,i);return ou(r,[vp(au(r),"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,mn.none())])}function rr(s,t,i,...r){s=dn(s,ye);const l=dn(s.firestore,Fi),u=au(l);let f;return f=typeof(t=Ae(t))=="string"||t instanceof su?x0(u,"updateDoc",s._key,t,i,r):I0(u,"updateDoc",s._key,t),ou(l,[f.toMutation(s._key,mn.exists(!0))])}function Mm(s){return ou(dn(s.firestore,Fi),[new Vh(s._key,mn.none())])}function Yl(s,t){const i=dn(s.firestore,Fi),r=fe(s),l=Dp(s.converter,t);return ou(i,[vp(au(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,mn.exists(!1))]).then((()=>r))}function Mi(s,...t){s=Ae(s);let i={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||AE(t[r])||(i=t[r++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(AE(t[r])){const g=t[r];t[r]=g.next?.bind(g),t[r+1]=g.error?.bind(g),t[r+2]=g.complete?.bind(g)}let u,f,m;if(s instanceof ye)f=dn(s.firestore,Fi),m=xh(s._key.path),u={next:g=>{t[r]&&t[r](j0(f,s,g))},error:t[r+1],complete:t[r+2]};else{const g=dn(s,vs);f=dn(g.firestore,Fi),m=g._query;const y=new Np(f);u={next:b=>{t[r]&&t[r](new ta(f,y,g,b))},error:t[r+1],complete:t[r+2]},V0(s._query)}return(function(y,b,C,I){const L=new _p(I),X=new pp(b,L,C);return y.asyncQueue.enqueueAndForget((async()=>fp(await ph(y),X))),()=>{L.Nu(),y.asyncQueue.enqueueAndForget((async()=>dp(await ph(y),X)))}})(iu(f),m,l,u)}function ou(s,t){return(function(r,l){const u=new fs;return r.asyncQueue.enqueueAndForget((async()=>wC(await jC(r),l,u))),u.promise})(iu(s),t)}function j0(s,t,i){const r=i.docs.get(t._key),l=new Np(s);return new Jr(s,l,t._key,r,new Ol(i.hasPendingWrites,i.fromCache),t.converter)}class WC{constructor(t,i){this._firestore=t,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=au(t)}set(t,i,r){this._verifyNotCommitted();const l=um(t,this._firestore),u=Dp(l.converter,i,r),f=vp(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,r);return this._mutations.push(f.toMutation(l._key,mn.none())),this}update(t,i,r,...l){this._verifyNotCommitted();const u=um(t,this._firestore);let f;return f=typeof(i=Ae(i))=="string"||i instanceof su?x0(this._dataReader,"WriteBatch.update",u._key,i,r,l):I0(this._dataReader,"WriteBatch.update",u._key,i),this._mutations.push(f.toMutation(u._key,mn.exists(!0))),this}delete(t){this._verifyNotCommitted();const i=um(t,this._firestore);return this._mutations=this._mutations.concat(new Vh(i._key,mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ht(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function um(s,t){if((s=Ae(s)).firestore!==t)throw new ht(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function L0(){return new Ep("serverTimestamp")}function JC(...s){return new Tp("arrayUnion",s)}function jm(s){return iu(s=dn(s,Fi)),new WC(s,(t=>ou(s,t)))}(function(t,i=!0){(function(l){yo=l})(go),ao(new ea("firestore",((r,{instanceIdentifier:l,options:u})=>{const f=r.getProvider("app").getImmediate(),m=new Fi(new K1(r.getProvider("auth-internal")),new X1(f,r.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ht(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ql(y.options.projectId,b)})(f,l),f);return u={useFetchStreams:i,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),lr(Iv,xv,t),lr(Iv,xv,"esm2020")})();function P0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tI=P0,U0=new $l("auth","Firebase",P0());const yh=new qm("@firebase/auth");function eI(s,...t){yh.logLevel<=Bt.WARN&&yh.warn(`Auth (${go}): ${s}`,...t)}function Jc(s,...t){yh.logLevel<=Bt.ERROR&&yh.error(`Auth (${go}): ${s}`,...t)}function fi(s,...t){throw Op(s,...t)}function Bi(s,...t){return Op(s,...t)}function z0(s,t,i){const r={...tI(),[t]:i};return new $l("auth","Firebase",r).create(t,{appName:s.name})}function ds(s){return z0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Op(s,...t){if(typeof s!="string"){const i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return U0.create(s,...t)}function wt(s,t,...i){if(!s)throw Op(t,...i)}function cs(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Jc(t),new Error(t)}function ys(s,t){s||cs(t)}function Lm(){return typeof self<"u"&&self.location?.href||""}function nI(){return CE()==="http:"||CE()==="https:"}function CE(){return typeof self<"u"&&self.location?.protocol||null}function iI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nI()||TA()||"connection"in navigator)?navigator.onLine:!0}function sI(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class lu{constructor(t,i){this.shortDelay=t,this.longDelay=i,ys(i>t,"Short delay should be less than long delay!"),this.isMobile=_A()||bA()}get(){return iI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kp(s,t){ys(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}class B0{static initialize(t,i,r){this.fetchImpl=t,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const aI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oI=new lu(3e4,6e4);function Er(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function Tr(s,t,i,r,l={}){return q0(s,l,async()=>{let u={},f={};r&&(t==="GET"?f=r:u={body:JSON.stringify(r)});const m=Zl({key:s.config.apiKey,...f}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:t,headers:g,...u};return EA()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&po(s.emulatorConfig.host)&&(y.credentials="include"),B0.fetch()(await H0(s,s.config.apiHost,i,m),y)})}async function q0(s,t,i){s._canInitEmulator=!1;const r={...rI,...t};try{const l=new uI(s),u=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Kc(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kc(s,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw Kc(s,"email-already-in-use",f);if(g==="USER_DISABLED")throw Kc(s,"user-disabled",f);const b=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw z0(s,b,y);fi(s,b)}}catch(l){if(l instanceof _s)throw l;fi(s,"network-request-failed",{message:String(l)})}}async function uu(s,t,i,r,l={}){const u=await Tr(s,t,i,r,l);return"mfaPendingCredential"in u&&fi(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function H0(s,t,i,r){const l=`${t}${i}?${r}`,u=s,f=u.config.emulator?kp(s.config,l):`${s.config.apiScheme}://${l}`;return aI.includes(i)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function lI(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(Bi(this.auth,"network-request-failed")),oI.get())})}}function Kc(s,t,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const l=Bi(s,t,r);return l.customData._tokenResponse=i,l}function IE(s){return s!==void 0&&s.enterprise!==void 0}class cI{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return lI(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hI(s,t){return Tr(s,"GET","/v2/recaptchaConfig",Er(s,t))}async function fI(s,t){return Tr(s,"POST","/v1/accounts:delete",t)}async function _h(s,t){return Tr(s,"POST","/v1/accounts:lookup",t)}function Pl(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function dI(s,t=!1){const i=Ae(s),r=await i.getIdToken(t),l=Vp(r);wt(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u?.sign_in_provider;return{claims:l,token:r,authTime:Pl(cm(l.auth_time)),issuedAtTime:Pl(cm(l.iat)),expirationTime:Pl(cm(l.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function cm(s){return Number(s)*1e3}function Vp(s){const[t,i,r]=s.split(".");if(t===void 0||i===void 0||r===void 0)return Jc("JWT malformed, contained fewer than 3 sections"),null;try{const l=XE(i);return l?JSON.parse(l):(Jc("Failed to decode base64 JWT payload"),null)}catch(l){return Jc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function xE(s){const t=Vp(s);return wt(t,"internal-error"),wt(typeof t.exp<"u","internal-error"),wt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Ql(s,t,i=!1){if(i)return t;try{return await t}catch(r){throw r instanceof _s&&mI(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function mI({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class pI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Pm{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pl(this.lastLoginAt),this.creationTime=Pl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vh(s){const t=s.auth,i=await s.getIdToken(),r=await Ql(s,_h(t,{idToken:i}));wt(r?.users.length,t,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?F0(l.providerUserInfo):[],f=yI(s.providerData,u),m=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!f?.length,y=m?g:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Pm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function gI(s){const t=Ae(s);await vh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function yI(s,t){return[...s.filter(r=>!t.some(l=>l.providerId===r.providerId)),...t]}function F0(s){return s.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}async function _I(s,t){const i=await q0(s,{},async()=>{const r=Zl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,f=await H0(s,l,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&po(s.emulatorConfig.host)&&(g.credentials="include"),B0.fetch()(f,g)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function vI(s,t){return Tr(s,"POST","/v2/accounts:revokeToken",Er(s,t))}class io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){wt(t.idToken,"internal-error"),wt(typeof t.idToken<"u","internal-error"),wt(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):xE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){wt(t.length!==0,"internal-error");const i=xE(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(wt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:r,refreshToken:l,expiresIn:u}=await _I(t,i);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(t,i,r){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,i){const{refreshToken:r,accessToken:l,expirationTime:u}=i,f=new io;return r&&(wt(typeof r=="string","internal-error",{appName:t}),f.refreshToken=r),l&&(wt(typeof l=="string","internal-error",{appName:t}),f.accessToken=l),u&&(wt(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new io,this.toJSON())}_performRefresh(){return cs("not implemented")}}function Js(s,t){wt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class ci{constructor({uid:t,auth:i,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new pI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Pm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await Ql(this,this.stsTokenManager.getToken(this.auth,t));return wt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return dI(this,t)}reload(){return gI(this)}_assign(t){this!==t&&(wt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new ci({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){wt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),i&&await vh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(ds(this.auth));const t=await this.getIdToken();return await Ql(this,fI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const r=i.displayName??void 0,l=i.email??void 0,u=i.phoneNumber??void 0,f=i.photoURL??void 0,m=i.tenantId??void 0,g=i._redirectEventId??void 0,y=i.createdAt??void 0,b=i.lastLoginAt??void 0,{uid:C,emailVerified:I,isAnonymous:L,providerData:X,stsTokenManager:Q}=i;wt(C&&Q,t,"internal-error");const K=io.fromJSON(this.name,Q);wt(typeof C=="string",t,"internal-error"),Js(r,t.name),Js(l,t.name),wt(typeof I=="boolean",t,"internal-error"),wt(typeof L=="boolean",t,"internal-error"),Js(u,t.name),Js(f,t.name),Js(m,t.name),Js(g,t.name),Js(y,t.name),Js(b,t.name);const ct=new ci({uid:C,auth:t,email:l,emailVerified:I,displayName:r,isAnonymous:L,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:K,createdAt:y,lastLoginAt:b});return X&&Array.isArray(X)&&(ct.providerData=X.map(Tt=>({...Tt}))),g&&(ct._redirectEventId=g),ct}static async _fromIdTokenResponse(t,i,r=!1){const l=new io;l.updateFromServerResponse(i);const u=new ci({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:r});return await vh(u),u}static async _fromGetAccountInfoResponse(t,i,r){const l=i.users[0];wt(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?F0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!u?.length,m=new io;m.updateFromIdToken(r);const g=new ci({uid:l.localId,auth:t,stsTokenManager:m,isAnonymous:f}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Pm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const DE=new Map;function hs(s){ys(s instanceof Function,"Expected a class definition");let t=DE.get(s);return t?(ys(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,DE.set(s,t),t)}class G0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}G0.type="NONE";const NE=G0;function th(s,t,i){return`firebase:${s}:${t}:${i}`}class so{constructor(t,i,r){this.persistence=t,this.auth=i,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=th(this.userKey,l.apiKey,u),this.fullPersistenceKey=th("persistence",l.apiKey,u),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await _h(this.auth,{idToken:t}).catch(()=>{});return i?ci._fromGetAccountInfoResponse(this.auth,i,t):null}return ci._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,r="authUser"){if(!i.length)return new so(hs(NE),t,r);const l=(await Promise.all(i.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||hs(NE);const f=th(r,t.config.apiKey,t.name);let m=null;for(const y of i)try{const b=await y._get(f);if(b){let C;if(typeof b=="string"){const I=await _h(t,{idToken:b}).catch(()=>{});if(!I)break;C=await ci._fromGetAccountInfoResponse(t,I,b)}else C=ci._fromJSON(t,b);y!==u&&(m=C),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new so(u,t,r):(u=g[0],m&&await u._set(f,m.toJSON()),await Promise.all(i.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new so(u,t,r))}}function OE(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(X0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(K0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Z0(t))return"Blackberry";if(W0(t))return"Webos";if(Y0(t))return"Safari";if((t.includes("chrome/")||Q0(t))&&!t.includes("edge/"))return"Chrome";if($0(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function K0(s=un()){return/firefox\//i.test(s)}function Y0(s=un()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Q0(s=un()){return/crios\//i.test(s)}function X0(s=un()){return/iemobile/i.test(s)}function $0(s=un()){return/android/i.test(s)}function Z0(s=un()){return/blackberry/i.test(s)}function W0(s=un()){return/webos/i.test(s)}function Mp(s=un()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function EI(s=un()){return Mp(s)&&!!window.navigator?.standalone}function TI(){return SA()&&document.documentMode===10}function J0(s=un()){return Mp(s)||$0(s)||W0(s)||Z0(s)||/windows phone/i.test(s)||X0(s)}function tb(s,t=[]){let i;switch(s){case"Browser":i=OE(un());break;case"Worker":i=`${OE(un())}-${s}`;break;default:i=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${go}/${r}`}class bI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const r=u=>new Promise((f,m)=>{try{const g=t(u);f(g)}catch(g){m(g)}});r.onAbort=i,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const r of this.queue)await r(t),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function SI(s,t={}){return Tr(s,"GET","/v2/passwordPolicy",Er(s,t))}const AI=6;class wI{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??AI,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=t.length>=r),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let l=0;l<t.length;l++)r=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,i,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class RI{constructor(t,i,r,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kE(this),this.idTokenSubscription=new kE(this),this.beforeStateQueue=new bI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=U0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=hs(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await so.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await _h(this,{idToken:t}),r=await ci._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if($n(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===f)&&m?.user&&(r=m.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return wt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await vh(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=sI()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if($n(this.app))return Promise.reject(ds(this));const i=t?Ae(t):null;return i&&wt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&wt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return $n(this.app)?Promise.reject(ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await SI(this),i=new wI(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new $l("auth","Firebase",t())}onAuthStateChanged(t,i,r){return this.registerStateListener(this.authStateSubscription,t,i,r)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,r){return this.registerStateListener(this.idTokenSubscription,t,i,r)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await vI(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const r=await this.getOrInitRedirectPersistenceManager(i);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&hs(t)||this._popupRedirectResolver;wt(i,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[hs(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,r,l){if(this._deleted)return()=>{};const u=typeof i=="function"?i:i.next.bind(i);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(wt(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof i=="function"){const g=t.addObserver(i,r,l);return()=>{f=!0,g()}}else{const g=t.addObserver(i);return()=>{f=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return wt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=tb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&eI(`Error while retrieving App Check token: ${t.error}`),t?.token}}function la(s){return Ae(s)}class kE{constructor(t){this.auth=t,this.observer=null,this.addObserver=NA(i=>this.observer=i)}get next(){return wt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Fh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CI(s){Fh=s}function eb(s){return Fh.loadJS(s)}function II(){return Fh.recaptchaEnterpriseScript}function xI(){return Fh.gapiScript}function DI(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class NI{constructor(){this.enterprise=new OI}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class OI{ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const kI="recaptcha-enterprise",nb="NO_RECAPTCHA";class VI{constructor(t){this.type=kI,this.auth=la(t)}async verify(t="verify",i=!1){async function r(u){if(!i){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{hI(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new cI(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,f(y.siteKey)}}).catch(g=>{m(g)})})}function l(u,f,m){const g=window.grecaptcha;IE(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:t}).then(y=>{f(y)}).catch(()=>{f(nb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NI().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(m=>{if(!i&&IE(window.grecaptcha))l(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=II();g.length!==0&&(g+=m),eb(g).then(()=>{l(m,u,f)}).catch(y=>{f(y)})}}).catch(m=>{f(m)})})}}async function VE(s,t,i,r=!1,l=!1){const u=new VI(s);let f;if(l)f=nb;else try{f=await u.verify(i)}catch{f=await u.verify(i,!0)}const m={...t};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Um(s,t,i,r,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await VE(s,t,i,i==="getOobCode");return r(s,u)}else return r(s,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await VE(s,t,i,i==="getOobCode");return r(s,f)}else return Promise.reject(u)})}function MI(s,t){const i=Fm(s,"auth");if(i.isInitialized()){const l=i.getImmediate(),u=i.getOptions();if(hr(u,t??{}))return l;fi(l,"already-initialized")}return i.initialize({options:t})}function jI(s,t){const i=t?.persistence||[],r=(Array.isArray(i)?i:[i]).map(hs);t?.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t?.popupRedirectResolver)}function LI(s,t,i){const r=la(s);wt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const l=!1,u=ib(t),{host:f,port:m}=PI(t),g=m===null?"":`:${m}`,y={url:`${u}//${f}${g}/`},b=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){wt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),wt(hr(y,r.config.emulator)&&hr(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,po(f)?(JE(`${u}//${f}${g}`),tT("Auth",!0)):UI()}function ib(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function PI(s){const t=ib(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:ME(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:ME(f)}}}function ME(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function UI(){function s(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class jp{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return cs("not implemented")}_getIdTokenResponse(t){return cs("not implemented")}_linkToIdToken(t,i){return cs("not implemented")}_getReauthenticationResolver(t){return cs("not implemented")}}async function zI(s,t){return Tr(s,"POST","/v1/accounts:signUp",t)}async function BI(s,t){return uu(s,"POST","/v1/accounts:signInWithPassword",Er(s,t))}async function qI(s,t){return uu(s,"POST","/v1/accounts:signInWithEmailLink",Er(s,t))}async function HI(s,t){return uu(s,"POST","/v1/accounts:signInWithEmailLink",Er(s,t))}class Xl extends jp{constructor(t,i,r,l=null){super("password",r),this._email=t,this._password=i,this._tenantId=l}static _fromEmailAndPassword(t,i){return new Xl(t,i,"password")}static _fromEmailAndCode(t,i,r=null){return new Xl(t,i,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Um(t,i,"signInWithPassword",BI);case"emailLink":return qI(t,{email:this._email,oobCode:this._password});default:fi(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const r={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Um(t,r,"signUpPassword",zI);case"emailLink":return HI(t,{idToken:i,email:this._email,oobCode:this._password});default:fi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function ro(s,t){return uu(s,"POST","/v1/accounts:signInWithIdp",Er(s,t))}const FI="http://localhost";class sa extends jp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new sa(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):fi("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:l,...u}=i;if(!r||!l)return null;const f=new sa(r,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const i=this.buildRequest();return ro(t,i)}_linkToIdToken(t,i){const r=this.buildRequest();return r.idToken=i,ro(t,r)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,ro(t,i)}buildRequest(){const t={requestUri:FI,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Zl(i)}return t}}function GI(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KI(s){const t=Cl(Il(s)).link,i=t?Cl(Il(t)).deep_link_id:null,r=Cl(Il(s)).deep_link_id;return(r?Cl(Il(r)).link:null)||r||i||t||s}class Lp{constructor(t){const i=Cl(Il(t)),r=i.apiKey??null,l=i.oobCode??null,u=GI(i.mode??null);wt(r&&l&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=l,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(t){const i=KI(t);try{return new Lp(i)}catch{return null}}}class So{constructor(){this.providerId=So.PROVIDER_ID}static credential(t,i){return Xl._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=Lp.parseLink(i);return wt(r,"argument-error"),Xl._fromEmailAndCode(t,r.code,r.tenantId)}}So.PROVIDER_ID="password";So.EMAIL_PASSWORD_SIGN_IN_METHOD="password";So.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class sb{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class cu extends sb{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class tr extends cu{constructor(){super("facebook.com")}static credential(t){return sa._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return tr.credentialFromTaggedObject(t)}static credentialFromError(t){return tr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return tr.credential(t.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";class er extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return sa._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return er.credentialFromTaggedObject(t)}static credentialFromError(t){return er.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return er.credential(i,r)}catch{return null}}}er.GOOGLE_SIGN_IN_METHOD="google.com";er.PROVIDER_ID="google.com";class nr extends cu{constructor(){super("github.com")}static credential(t){return sa._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return nr.credentialFromTaggedObject(t)}static credentialFromError(t){return nr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return nr.credential(t.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";class ir extends cu{constructor(){super("twitter.com")}static credential(t,i){return sa._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return ir.credentialFromTaggedObject(t)}static credentialFromError(t){return ir.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=t;if(!i||!r)return null;try{return ir.credential(i,r)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";async function YI(s,t){return uu(s,"POST","/v1/accounts:signUp",Er(s,t))}class ra{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,r,l=!1){const u=await ci._fromIdTokenResponse(t,r,l),f=jE(r);return new ra({user:u,providerId:f,_tokenResponse:r,operationType:i})}static async _forOperation(t,i,r){await t._updateTokensIfNecessary(r,!0);const l=jE(r);return new ra({user:t,providerId:l,_tokenResponse:r,operationType:i})}}function jE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Eh extends _s{constructor(t,i,r,l){super(i.code,i.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Eh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,i,r,l){return new Eh(t,i,r,l)}}function rb(s,t,i,r){return(t==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Eh._fromErrorAndOperation(s,u,t,r):u})}async function QI(s,t,i=!1){const r=await Ql(s,t._linkToIdToken(s.auth,await s.getIdToken()),i);return ra._forOperation(s,"link",r)}async function XI(s,t,i=!1){const{auth:r}=s;if($n(r.app))return Promise.reject(ds(r));const l="reauthenticate";try{const u=await Ql(s,rb(r,l,t,s),i);wt(u.idToken,r,"internal-error");const f=Vp(u.idToken);wt(f,r,"internal-error");const{sub:m}=f;return wt(s.uid===m,r,"user-mismatch"),ra._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&fi(r,"user-mismatch"),u}}async function ab(s,t,i=!1){if($n(s.app))return Promise.reject(ds(s));const r="signIn",l=await rb(s,r,t),u=await ra._fromIdTokenResponse(s,r,l);return i||await s._updateCurrentUser(u.user),u}async function $I(s,t){return ab(la(s),t)}async function ob(s){const t=la(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ZI(s,t,i){if($n(s.app))return Promise.reject(ds(s));const r=la(s),f=await Um(r,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YI).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&ob(s),g}),m=await ra._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(m.user),m}function WI(s,t,i){return $n(s.app)?Promise.reject(ds(s)):$I(Ae(s),So.credential(t,i)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ob(s),r})}function JI(s,t,i,r){return Ae(s).onIdTokenChanged(t,i,r)}function tx(s,t,i){return Ae(s).beforeAuthStateChanged(t,i)}function ex(s,t,i,r){return Ae(s).onAuthStateChanged(t,i,r)}function nx(s){return Ae(s).signOut()}const Th="__sak";class lb{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(Th,"1"),this.storage.removeItem(Th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const ix=1e3,sx=10;class ub extends lb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),l=this.localCache[i];r!==l&&t(i,l,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const r=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!i&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);TI()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,sx):l()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},ix)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}ub.type="LOCAL";const rx=ub;class cb extends lb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}cb.type="SESSION";const hb=cb;function ax(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}class Gh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const r=new Gh(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:r,eventType:l,data:u}=i.data,f=this.handlersMap[l];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const m=Array.from(f).map(async y=>y(i.origin,u)),g=await ax(m);i.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:g})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gh.receivers=[];function Pp(s="",t=10){let i="";for(let r=0;r<t;r++)i+=Math.floor(Math.random()*10);return s+i}class ox{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((m,g)=>{const y=Pp("",20);l.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(C){const I=C;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:y,data:i},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function qi(){return window}function lx(s){qi().location.href=s}function fb(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}async function ux(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cx(){return navigator?.serviceWorker?.controller||null}function hx(){return fb()?self:null}const db="firebaseLocalStorageDb",fx=1,bh="firebaseLocalStorage",mb="fbase_key";class hu{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Kh(s,t){return s.transaction([bh],t?"readwrite":"readonly").objectStore(bh)}function dx(){const s=indexedDB.deleteDatabase(db);return new hu(s).toPromise()}function zm(){const s=indexedDB.open(db,fx);return new Promise((t,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(bh,{keyPath:mb})}catch(l){i(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(bh)?t(r):(r.close(),await dx(),t(await zm()))})})}async function LE(s,t,i){const r=Kh(s,!0).put({[mb]:t,value:i});return new hu(r).toPromise()}async function mx(s,t){const i=Kh(s,!1).get(t),r=await new hu(i).toPromise();return r===void 0?null:r.value}function PE(s,t){const i=Kh(s,!0).delete(t);return new hu(i).toPromise()}const px=800,gx=3;class pb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zm(),this.db)}async _withRetries(t){let i=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(i++>gx)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gh._getInstance(hx()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ux(),!this.activeServiceWorker)return;this.sender=new ox(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||cx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await zm();return await LE(t,Th,"1"),await PE(t,Th),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>LE(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(r=>mx(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>PE(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const u=Kh(l,!1).getAll();return new hu(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(t.length!==0)for(const{fbase_key:l,value:u}of t)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),px)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pb.type="LOCAL";const yx=pb;new lu(3e4,6e4);function _x(s,t){return t?hs(t):(wt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Up extends jp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ro(t,this._buildIdpRequest())}_linkToIdToken(t,i){return ro(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return ro(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function vx(s){return ab(s.auth,new Up(s),s.bypassAuthState)}function Ex(s){const{auth:t,user:i}=s;return wt(i,t,"internal-error"),XI(i,new Up(s),s.bypassAuthState)}async function Tx(s){const{auth:t,user:i}=s;return wt(i,t,"internal-error"),QI(i,new Up(s),s.bypassAuthState)}class gb{constructor(t,i,r,l,u=!1){this.auth=t,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:r,postBody:l,tenantId:u,error:f,type:m}=t;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:i,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return vx;case"linkViaPopup":case"linkViaRedirect":return Tx;case"reauthViaPopup":case"reauthViaRedirect":return Ex;default:fi(this.auth,"internal-error")}}resolve(t){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bx=new lu(2e3,1e4);class eo extends gb{constructor(t,i,r,l,u){super(t,i,l,u),this.provider=r,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return wt(t,this.auth,"internal-error"),t}async onExecution(){ys(this.filter.length===1,"Popup operations only handle one event");const t=Pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,bx.get())};t()}}eo.currentPopupAction=null;const Sx="pendingRedirect",eh=new Map;class Ax extends gb{constructor(t,i,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let t=eh.get(this.auth._key());if(!t){try{const r=await wx(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(i){t=()=>Promise.reject(i)}eh.set(this.auth._key(),t)}return this.bypassAuthState||eh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wx(s,t){const i=Ix(t),r=Cx(s);if(!await r._isAvailable())return!1;const l=await r._get(i)==="true";return await r._remove(i),l}function Rx(s,t){eh.set(s._key(),t)}function Cx(s){return hs(s._redirectPersistence)}function Ix(s){return th(Sx,s.config.apiKey,s.name)}async function xx(s,t,i=!1){if($n(s.app))return Promise.reject(ds(s));const r=la(s),l=_x(r,t),f=await new Ax(r,l,i).execute();return f&&!i&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,t)),f}const Dx=600*1e3;class Nx{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(i=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Ox(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!yb(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";i.onError(Bi(this.auth,r))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const r=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Dx&&this.cachedEventUids.clear(),this.cachedEventUids.has(UE(t))}saveEventToCache(t){this.cachedEventUids.add(UE(t)),this.lastProcessedEventTime=Date.now()}}function UE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function yb({type:s,error:t}){return s==="unknown"&&t?.code==="auth/no-auth-event"}function Ox(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yb(s);default:return!1}}async function kx(s,t={}){return Tr(s,"GET","/v1/projects",t)}const Vx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mx=/^https?/;async function jx(s){if(s.config.emulator)return;const{authorizedDomains:t}=await kx(s);for(const i of t)try{if(Lx(i))return}catch{}fi(s,"unauthorized-domain")}function Lx(s){const t=Lm(),{protocol:i,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&f.hostname===r}if(!Mx.test(i))return!1;if(Vx.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}const Px=new lu(3e4,6e4);function zE(){const s=qi().___jsl;if(s?.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function Ux(s){return new Promise((t,i)=>{function r(){zE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{zE(),i(Bi(s,"network-request-failed"))},timeout:Px.get()})}if(qi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(qi().gapi?.load)r();else{const l=DI("iframefcb");return qi()[l]=()=>{gapi.load?r():i(Bi(s,"network-request-failed"))},eb(`${xI()}?onload=${l}`).catch(u=>i(u))}}).catch(t=>{throw nh=null,t})}let nh=null;function zx(s){return nh=nh||Ux(s),nh}const Bx=new lu(5e3,15e3),qx="__/auth/iframe",Hx="emulator/auth/iframe",Fx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kx(s){const t=s.config;wt(t.authDomain,s,"auth-domain-config-required");const i=t.emulator?kp(t,Hx):`https://${s.config.authDomain}/${qx}`,r={apiKey:t.apiKey,appName:s.name,v:go},l=Gx.get(s.config.apiHost);l&&(r.eid=l);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${i}?${Zl(r).slice(1)}`}async function Yx(s){const t=await zx(s),i=qi().gapi;return wt(i,s,"internal-error"),t.open({where:document.body,url:Kx(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fx,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const f=Bi(s,"network-request-failed"),m=qi().setTimeout(()=>{u(f)},Bx.get());function g(){qi().clearTimeout(m),l(r)}r.ping(g).then(g,()=>{u(f)})}))}const Qx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xx=500,$x=600,Zx="_blank",Wx="http://localhost";class BE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Jx(s,t,i,r=Xx,l=$x){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...Qx,width:r.toString(),height:l.toString(),top:u,left:f},y=un().toLowerCase();i&&(m=Q0(y)?Zx:i),K0(y)&&(t=t||Wx,g.scrollbars="yes");const b=Object.entries(g).reduce((I,[L,X])=>`${I}${L}=${X},`,"");if(EI(y)&&m!=="_self")return t2(t||"",m),new BE(null);const C=window.open(t||"",m,b);wt(C,s,"popup-blocked");try{C.focus()}catch{}return new BE(C)}function t2(s,t){const i=document.createElement("a");i.href=s,i.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}const e2="__/auth/handler",n2="emulator/auth/handler",i2=encodeURIComponent("fac");async function qE(s,t,i,r,l,u){wt(s.config.authDomain,s,"auth-domain-config-required"),wt(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:go,eventId:l};if(t instanceof sb){t.setDefaultLanguage(s.languageCode),f.providerId=t.providerId||"",DA(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[b,C]of Object.entries({}))f[b]=C}if(t instanceof cu){const b=t.getScopes().filter(C=>C!=="");b.length>0&&(f.scopes=b.join(","))}s.tenantId&&(f.tid=s.tenantId);const m=f;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const g=await s._getAppCheckToken(),y=g?`#${i2}=${encodeURIComponent(g)}`:"";return`${s2(s)}?${Zl(m).slice(1)}${y}`}function s2({config:s}){return s.emulator?kp(s,n2):`https://${s.authDomain}/${e2}`}const hm="webStorageSupport";class r2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hb,this._completeRedirectFn=xx,this._overrideRedirectResult=Rx}async _openPopup(t,i,r,l){ys(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await qE(t,i,r,Lm(),l);return Jx(t,u,Pp())}async _openRedirect(t,i,r,l){await this._originValidation(t);const u=await qE(t,i,r,Lm(),l);return lx(u),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:u}=this.eventManagers[i];return l?Promise.resolve(l):(ys(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(t){const i=await Yx(t),r=new Nx(t);return i.register("authEvent",l=>(wt(l?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=i,r}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(hm,{type:hm},l=>{const u=l?.[0]?.[hm];u!==void 0&&i(!!u),fi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=jx(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return J0()||Y0()||Mp()}}const a2=r2;var HE="@firebase/auth",FE="1.12.0";class o2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){wt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function l2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function u2(s){ao(new ea("auth",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=r.options;wt(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:f,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tb(s)},y=new RI(r,l,u,g);return jI(y,i),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,r)=>{t.getProvider("auth-internal").initialize()})),ao(new ea("auth-internal",t=>{const i=la(t.getProvider("auth").getImmediate());return(r=>new o2(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),lr(HE,FE,l2(s)),lr(HE,FE,"esm2020")}const c2=300,h2=WE("authIdTokenMaxAge")||c2;let GE=null;const f2=s=>async t=>{const i=t&&await t.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>h2)return;const l=i?.token;GE!==l&&(GE=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function d2(s=sT()){const t=Fm(s,"auth");if(t.isInitialized())return t.getImmediate();const i=MI(s,{popupRedirectResolver:a2,persistence:[yx,rx,hb]}),r=WE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=f2(u.toString());tx(i,f,()=>f(i.currentUser)),JI(i,m=>f(m))}}const l=$E("auth");return l&&LI(i,`http://${l}`),i}function m2(){return document.getElementsByTagName("head")?.[0]??document}CI({loadJS(s){return new Promise((t,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=l=>{const u=Bi("internal-error");u.customData=l,i(u)},r.type="text/javascript",r.charset="UTF-8",m2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});u2("Browser");const p2={apiKey:"AIzaSyDd7oNAtznb5DT6R6yAP7Y1yMeVoY4fKhU",authDomain:"notar-app.firebaseapp.com",projectId:"notar-app",storageBucket:"notar-app.firebasestorage.app",messagingSenderId:"620852234294",appId:"1:620852234294:web:e32df64dccc8a2b8ed3097"},_b=iT(p2),It=zC(_b),Sh=d2(_b),g2=({onBack:s,showNotification:t})=>{const[i,r]=dt.useState(new Date().toISOString().slice(0,7)),[l,u]=dt.useState([]),[f,m]=dt.useState(!1),[g,y]=dt.useState([]),[b,C]=dt.useState({});dt.useEffect(()=>{(async()=>{const pt=await Vm(fe(It,"settings","company_profile"));pt.exists()&&(y(pt.data().tasks||[]),C(pt.data()))})()},[]);const I=it=>it.task_type==="fixed_monthly"||it.origin==="contract_generated"?"Sopimukset":["extra","material"].includes(it.task_type)?"Erillistyt":"Kiinteisthuolto",L=it=>{const pt=String(it).replace(/\D/g,""),W=[7,3,1];let ft=0;for(let S=0;S<pt.length;S++)ft+=parseInt(pt.charAt(pt.length-1-S))*W[S%3];const D=(10-ft%10)%10;return pt+D},X=(it,pt,W,ft)=>{if(!it||!pt||!W||!ft)return"";const D=it.replace(/[^0-9]/g,"");if(D.length<16)return"";const S=D.slice(0,16),x=parseFloat(pt).toFixed(2);let[O,N]=x.split(".");O=O.padStart(6,"0").slice(-6);const w=O+N,R=W.replace(/[^0-9]/g,"").padStart(20,"0"),yt=new Date(ft);yt.setDate(yt.getDate()+14);const rt=yt.getFullYear().toString().slice(-2),P=(yt.getMonth()+1).toString().padStart(2,"0"),J=yt.getDate().toString().padStart(2,"0"),ot=rt+P+J;return`4${S}${w}000${R}${ot}`},Q=async()=>{if(window.confirm(`Haluatko varmasti poistaa merkinnt, ett ${i} kk-maksut on laskutettu?`)){m(!0);try{const[it,pt]=i.split("-"),W=`${i}-01`,ft=new Date(it,pt,0).getDate(),D=`${i}-${ft}`,S=zi(Se(It,"work_entries"),Mn("origin","==","fixed_fee"),Mn("date",">=",W),Mn("date","<=",D)),x=await to(S);if(x.empty){t("Ei nollattavaa.","error"),m(!1);return}const O=jm(It);x.docs.forEach(N=>O.delete(N.ref)),await O.commit(),t(`Nollattu ${x.size} kk-maksua.`,"success"),u([])}catch(it){console.error(it),t("Virhe: "+it.message,"error")}finally{m(!1)}}},K=async()=>{m(!0),u([]);try{const[it,pt]=i.split("-"),W=`${i}-01`,ft=new Date(it,pt,0).getDate(),D=`${i}-${ft}`,S=`${pt}/${it}`,x=zi(Se(It,"work_entries"),Mn("invoiced","==",!1),Mn("date",">=",W),Mn("date","<=",D)),N=(await to(x)).docs.map(st=>({id:st.id,...st.data(),origin:"work_entry"})),w=zi(Se(It,"work_entries"),Mn("origin","==","fixed_fee"),Mn("date",">=",W),Mn("date","<=",D)),yt=(await to(w)).docs.map(st=>st.data()),rt=(st,at,vt)=>yt.some(Gt=>Gt.customer_id===st&&Gt.task_id===vt&&(at?Gt.property_id===at:!0)),P=await to(Se(It,"customers")),J=await to(Se(It,"properties")),ot={};P.forEach(st=>{ot[st.id]={id:st.id,...st.data()}});const _t={};J.forEach(st=>{const at=st.data();_t[st.id]={address:at.address,cost_center:at.cost_center,group:at.group,contracts:at.contracts,customer_id:at.customer_id,id:st.id}});const Ct=g.filter(st=>st.type==="fixed_monthly"),V=[];J.docs.forEach(st=>{const at={id:st.id,...st.data()};Ct.forEach(vt=>{const Gt=at.contracts?.[vt.id];if(Gt?.active&&!rt(at.customer_id,at.id,vt.id)){const Mt=ot[at.customer_id];Mt&&V.push({id:`gen_${at.id}_${vt.id}`,customer_id:Mt.id,customer_name:Mt.name,property_id:at.id,property_address:at.address,task_id:vt.id,task_name:vt.label,task_type:"fixed_monthly",price_work:Gt.price,date:D,description:`${vt.label} (${S})`,origin:"contract_generated",group:at.group||Mt.group_names?.[0]||"Sopimukset",cost_center:at.cost_center})}})}),Object.values(ot).forEach(st=>{st.type==="b2c"&&Ct.forEach(at=>{const vt=st.contracts?.[at.id];vt?.active&&!rt(st.id,null,at.id)&&V.push({id:`gen_${st.id}_${at.id}`,customer_id:st.id,customer_name:st.name,task_id:at.id,task_name:at.label,task_type:"fixed_monthly",price_work:vt.price,date:D,description:`${at.label} (${S})`,origin:"contract_generated",group:"Yksityiset"})})});const H=[...N,...V];if(H.length===0){t("Ei laskutettavaa.","error"),m(!1);return}const nt={};H.forEach(st=>{const at=ot[st.customer_id];if(!at)return;let vt=st.customer_id,Gt=at.name;const Mt=I(st);if(at.type==="isannointi"){let we=st.group;!we&&st.property_id&&_t[st.property_id]&&(we=_t[st.property_id].group),we=we||"Muu",vt=`${st.customer_id}_${we}_${Mt}`,Gt=`${at.name} - ${we} - ${Mt}`}nt[vt]||(nt[vt]={key:vt,customer:at,title:Gt,category:Mt,entries:[]}),nt[vt].entries.push(st)});const ut=Object.values(nt).map(st=>{const{customer:at,entries:vt}=st,Gt=[];let Mt=0;vt.sort((Re,nn)=>(Re.property_address||"ZZZ").localeCompare(nn.property_address||"ZZZ")||new Date(Re.date)-new Date(nn.date));const we={};return vt.forEach(Re=>{let nn=Re.cost_center;Re.property_id&&_t[Re.property_id]&&(nn=_t[Re.property_id].cost_center||nn);let Ge=Re.property_address||"Yleinen";at.type!=="b2c"&&(Ge=nn?`Viite: KP ${nn} / ${Re.property_address}`:`Viite: - / ${Re.property_address}`),we[Ge]||(we[Ge]=[]),we[Ge].push(Re)}),Object.entries(we).forEach(([Re,nn])=>{(at.type!=="b2c"||Object.keys(we).length>1)&&Gt.push({type:"header",text:Re});const Ge={},An=[];nn.forEach(jt=>{if(["checkbox","kg","fixed","hourly"].includes(jt.task_type)&&jt.task_type!=="extra"&&jt.task_type!=="material"&&jt.task_type!=="fixed_monthly"){const Ke=`${jt.task_name}_${jt.price_work}`;Ge[Ke]||(Ge[Ke]={name:jt.task_name,price:parseFloat(jt.price_work||0),dates:[],unit:jt.task_type==="kg"?"kg":"kpl",totalQty:0});const wn=new Date(jt.date).getDate()+"."+(new Date(jt.date).getMonth()+1)+".";Ge[Ke].dates.push(wn);const de=jt.task_type==="kg"?parseFloat(jt.value||0):1;Ge[Ke].totalQty+=de}else An.push(jt)}),Object.values(Ge).forEach(jt=>{const sn=jt.totalQty*jt.price;Mt+=sn,jt.dates.sort((Ke,wn)=>parseInt(Ke)-parseInt(wn)),Gt.push({type:"row",text:`${jt.name} (${jt.dates.join(", ")})`,details:`${jt.totalQty} ${jt.unit} x ${jt.price} `,total:sn})}),An.forEach(jt=>{const sn=parseFloat(jt.price_work||0),Ke=parseFloat(jt.price_material||0);Mt+=sn+Ke;let wn=jt.description||jt.task_name;jt.task_type!=="fixed_monthly"&&(wn=`${new Date(jt.date).getDate()+"."+(new Date(jt.date).getMonth()+1)+"."} ${wn}`),Gt.push({type:"row",text:wn,details:Ke>0?`Ty: ${sn}, Tarvike: ${Ke}`:`${sn} `,total:sn+Ke})})}),{id:st.key,customerName:at.name,invoiceTitle:st.title,customerType:at.type,billingAddress:`${at.street}, ${at.zip} ${at.city}`,rows:Gt,totalSum:Mt,rawEntries:vt}});ut.sort((st,at)=>st.invoiceTitle.localeCompare(at.invoiceTitle)),u(ut),t(`Luotu ${ut.length} laskuluonnosta.`,"success")}catch(it){console.error(it),t("Virhe: "+it.message,"error")}finally{m(!1)}},ct=async()=>{if(window.confirm("Hyvksytnk laskut?")){m(!0);try{const it=fe(It,"settings","company_profile"),pt=await Vm(it);let W=1e3;pt.exists()&&pt.data().invoice_start_number&&(W=parseInt(pt.data().invoice_start_number));const ft=jm(It),D=L0();for(const S of l){const x=W.toString();W++;const O=fe(Se(It,"invoices"));ft.set(O,{invoice_number:x,title:S.invoiceTitle,customer_name:S.customerName,customer_type:S.customerType,billing_address:S.billingAddress,month:i,date:new Date().toISOString().slice(0,10),rows:S.rows,total_sum:S.totalSum,status:"open",created_at:D});for(const N of S.rawEntries)if(N.origin==="work_entry"){const w=fe(It,"work_entries",N.id);ft.update(w,{invoiced:!0,invoice_id:O.id})}else if(N.origin==="contract_generated"){const w=fe(Se(It,"work_entries"));ft.set(w,{...N,origin:"fixed_fee",invoiced:!0,invoice_id:O.id,created_at:D})}}ft.update(it,{invoice_start_number:W.toString()}),await ft.commit(),t("Laskut luotu ja arkistoitu! ","success"),u([])}catch(it){console.error(it),t("Virhe: "+it.message,"error")}finally{m(!1)}}},Tt=it=>{const pt=b.invoice_start_number||"Luonnos",W=L(pt),ft=X(b.iban,it.totalSum,W,new Date().toISOString()),D=`<html><head><title>Esikatselu</title><style>
            body{font-family:Arial,sans-serif;padding:20px;font-size:12px;color:#333}
            .header{display:flex;justify-content:space-between;margin-bottom:30px}
            .company{font-size:14px;font-weight:bold}
            .meta{text-align:right}
            table{width:100%;border-collapse:collapse;margin-bottom:20px}
            th{text-align:left;border-bottom:2px solid #000;padding:5px}
            td{border-bottom:1px solid #ddd;padding:5px}
            .totals{text-align:right;font-size:14px;font-weight:bold}
            .barcode{margin-top:20px;padding:10px;background:#f0f0f0;border:1px solid #ccc;font-family:monospace;letter-spacing:1px;text-align:center;font-weight:bold;font-size:14px}
        </style></head><body>
            <div class="header">
                <div class="company">${b.nimi||"Yritys"}<br>${b.katu||""}<br>${b.postinro||""} ${b.toimipaikka||""}</div>
                <div class="meta">Pivys: ${new Date().toLocaleDateString()}<br>Laskun nro: ${pt} (Luonnos)<br>Viite: ${W}</div>
            </div>
            <h3>${it.invoiceTitle}</h3>
            <table><thead><tr><th>Kuvaus</th><th style="text-align:right">Summa</th></tr></thead><tbody>
                ${it.rows.map(x=>x.type==="header"?`<tr><td colspan="2" style="font-weight:bold;background:#eee">${x.text}</td></tr>`:`<tr><td>${x.text}</td><td style="text-align:right">${x.total.toFixed(2)}</td></tr>`).join("")}
            </tbody></table>
            <div class="totals">Yhteens: ${it.totalSum.toFixed(2)} </div>
            ${ft?`<div class="barcode">Virtuaaliviivakoodi: ${ft}</div>`:""}
        </body></html>`,S=window.open("","","width=800,height=600");S.document.write(D),S.document.close()};return E.jsxs("div",{className:"admin-section",children:[E.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),E.jsx("h2",{children:"Laskutus"}),E.jsxs("div",{className:"card-box",style:{display:"flex",gap:"20px",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between"},children:[E.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[E.jsx("label",{children:"Valitse kuukausi:"}),E.jsx("input",{type:"month",value:i,onChange:it=>r(it.target.value),style:{fontSize:"1.1rem"}}),E.jsx("button",{onClick:K,className:"save-btn",disabled:f,children:f?"Haetaan...":" Hae laskutettavat"}),E.jsx("button",{onClick:Q,className:"back-btn",style:{borderColor:"#d32f2f",color:"#d32f2f"},children:" Nollaa KK-laskutustieto"})]}),l.length>0&&E.jsx("button",{onClick:ct,className:"save-btn",style:{background:"#e65100"},children:" Hyvksy & Merkitse laskutetuksi"})]}),E.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[l.map((it,pt)=>E.jsxs("div",{style:{background:"#1e1e1e",border:"1px solid #444",borderRadius:"8px",overflow:"hidden"},children:[E.jsxs("div",{style:{background:"#333",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsxs("div",{children:[E.jsx("h3",{style:{margin:0},children:it.invoiceTitle}),E.jsx("span",{style:{fontSize:"0.8em",color:"#aaa"},children:it.customerType==="b2c"?"Yksityinen (Sis. ALV)":"Yritys/Isnninti (+ ALV)"})]}),E.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[E.jsxs("div",{style:{textAlign:"right"},children:[E.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#4caf50"},children:[it.totalSum.toFixed(2)," "]}),E.jsxs("small",{children:[it.rows.filter(W=>W.type!=="header").length," rivi"]})]}),E.jsx("button",{onClick:()=>Tt(it),className:"icon-btn",style:{fontSize:"1.5rem"},title:"Esikatselu",children:""})]})]}),E.jsx("div",{style:{padding:"15px"},children:E.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},children:[E.jsx("thead",{children:E.jsxs("tr",{style:{borderBottom:"1px solid #555",color:"#aaa",textAlign:"left"},children:[E.jsx("th",{style:{paddingBottom:"5px"},children:"Kuvaus"}),E.jsx("th",{style:{textAlign:"right"},children:"Peruste"}),E.jsx("th",{style:{textAlign:"right"},children:"Yhteens"})]})}),E.jsx("tbody",{children:it.rows.map((W,ft)=>E.jsx("tr",{style:{borderBottom:W.type==="header"?"2px solid #444":"1px solid #2c2c2c",background:W.type==="header"?"#2c2c2c":"transparent"},children:W.type==="header"?E.jsx("td",{colSpan:"3",style:{padding:"15px 5px 5px 5px",fontWeight:"bold",color:"#2196f3",fontSize:"1rem"},children:W.text}):E.jsxs(E.Fragment,{children:[E.jsx("td",{style:{padding:"8px 5px"},children:W.text}),E.jsx("td",{style:{textAlign:"right",color:"#ccc"},children:W.details}),E.jsxs("td",{style:{textAlign:"right",fontWeight:"bold"},children:[W.total.toFixed(2)," "]})]})},ft))})]})})]},pt)),l.length===0&&!f&&E.jsx("p",{style:{textAlign:"center",color:"#666",marginTop:"20px"},children:"Ei laskuja nkyviss."})]})]})},y2=({onBack:s,showNotification:t,requestConfirm:i})=>{const[r,l]=dt.useState([]),[u,f]=dt.useState(!0),[m,g]=dt.useState({}),[y,b]=dt.useState(!1),[C,I]=dt.useState(""),[L,X]=dt.useState(""),[Q,K]=dt.useState({start:"",end:""});dt.useEffect(()=>{(async()=>{const R=await Vm(fe(It,"settings","company_profile"));R.exists()&&g(R.data())})()},[]),dt.useEffect(()=>{f(!0);const w=zi(Se(It,"invoices"),Ip("created_at","desc"),XC(100)),R=Mi(w,yt=>{const rt=yt.docs.map(P=>({id:P.id,...P.data()}));l(rt),f(!1)},yt=>{console.error("Virhe:",yt),f(!1)});return()=>R()},[]);const ct=[...new Set(r.map(w=>w.customer_name))].sort(),Tt=w=>{const R=String(w).replace(/\D/g,""),yt=[7,3,1];let rt=0;for(let J=0;J<R.length;J++)rt+=parseInt(R.charAt(R.length-1-J))*yt[J%3];const P=(10-rt%10)%10;return R+P},it=w=>{if(!w)return"";const R=new Date(w);return R.setDate(R.getDate()+14),R.toLocaleDateString("fi-FI")},pt=(w,R,yt,rt)=>{if(!w||!R||!yt||!rt)return"";const P=w.replace(/[^0-9]/g,"");if(P.length<16)return"";const J=P.slice(0,16),ot=parseFloat(R).toFixed(2);let[_t,Ct]=ot.split(".");_t=_t.padStart(6,"0").slice(-6);const V=_t+Ct,H=yt.replace(/[^0-9]/g,"").padStart(20,"0"),nt=new Date(rt);nt.setDate(nt.getDate()+14);const ut=nt.getFullYear().toString().slice(-2),st=(nt.getMonth()+1).toString().padStart(2,"0"),at=nt.getDate().toString().padStart(2,"0"),vt=ut+st+at;return`4${J}${V}000${H}${vt}`},W=w=>{i("Merkitnk lasku maksetuksi?",async()=>{await rr(fe(It,"invoices",w.id),{status:"paid"}),t("Merkitty maksetuksi.","success")})},ft=w=>{i("Mittidnk lasku? Se j arkistoon, mutta merkitn perutuksi.",async()=>{await rr(fe(It,"invoices",w.id),{status:"cancelled"}),t("Lasku mittity.","info")})},D=w=>{i(`VAROITUS: Haluatko poistaa laskun kokonaan?

- Lasku poistuu arkistosta.
- Tyt palautuvat "tekemttmiksi".`,async()=>{f(!0);try{const R=jm(It),yt=zi(Se(It,"work_entries"),Mn("invoice_id","==",w.id));(await to(yt)).docs.forEach(P=>{const J=P.data();J.origin==="contract_generated"||J.origin==="fixed_fee"?R.delete(P.ref):R.update(P.ref,{invoiced:!1,invoice_id:null})}),R.delete(fe(It,"invoices",w.id)),await R.commit(),t("Lasku poistettu ja tyt palautettu listalle.","success")}catch(R){console.error(R),t("Virhe: "+R.message,"error")}finally{f(!1)}})},S=async w=>{i("Luodaanko hyvityslasku?",async()=>{const R=w.rows.map(yt=>({...yt,total:-yt.total}));await Yl(Se(It,"invoices"),{title:`HYVITYSLASKU - ${w.title}`,customer_name:w.customer_name,customer_type:w.customer_type,billing_address:w.billing_address,month:w.month,date:new Date().toISOString().slice(0,10),rows:R,total_sum:-w.total_sum,status:"paid",type:"credit_note",original_invoice_id:w.id,created_at:L0()}),await rr(fe(It,"invoices",w.id),{status:"credited"}),t("Hyvityslasku luotu.","success")})},x=w=>{const R=w.invoice_number||"Luonnos",yt=Tt(R),rt=it(w.date),P=new Date(w.date).toLocaleDateString("fi-FI"),J=w.total_sum/1.255,ot=w.total_sum-J,_t=pt(m.iban,w.total_sum,yt,w.date),Ct=`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Lasku ${R}</title>
                <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"><\/script>
                <style>
                    @page { size: A4; margin: 10mm 15mm; }
                    body { font-family: Arial, Helvetica, sans-serif; font-size: 13px; color: #000; line-height: 1.3; }
                    .container { width: 100%; max-width: 210mm; margin: 0 auto; position: relative; min-height: 270mm; }
                    
                    /* HEADER */
                    .header { display: flex; justify-content: space-between; margin-bottom: 40px; }
                    .company-name { font-size: 18px; font-weight: bold; text-transform: uppercase; margin-bottom: 5px; }
                    .company-details { font-size: 12px; color: #333; line-height: 1.4; }
                    .meta-box { text-align: left; width: 320px; }
                    .meta-row { display: flex; justify-content: space-between; margin-bottom: 2px; }
                    .meta-label { font-weight: bold; text-transform: uppercase; font-size: 11px; width: 130px; }
                    .meta-value { text-align: right; width: 100%; }

                    /* RECIPIENT */
                    .recipient { margin-top: 10px; margin-bottom: 30px; border: 1px solid #aaa; padding: 15px; width: 300px; border-radius: 2px; min-height: 80px;}
                    .recipient b { font-size: 14px; display:block; margin-bottom: 5px; }

                    /* TABLE */
                    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
                    th { text-align: left; background-color: #ddd; padding: 6px 8px; border: 1px solid #999; font-size: 11px; font-weight: bold; text-transform: uppercase; }
                    td { padding: 6px 8px; border: 1px solid #ccc; vertical-align: top; font-size: 12px; }
                    .col-desc { width: 75%; }
                    .col-sum { width: 25%; text-align: right; }
                    .row-header td { background-color: #f0f0f0; font-weight: bold; border-top: 2px solid #666; font-size: 12px; }
                    .small-text { font-size: 11px; color: #444; display: block; margin-top: 2px; font-style: italic; }

                    /* TOTALS */
                    .totals-section { display: flex; justify-content: flex-end; margin-bottom: 40px; page-break-inside: avoid; }
                    .totals-box { width: 250px; }
                    .total-row { display: flex; justify-content: space-between; margin-bottom: 3px; font-size: 12px; }
                    .total-final { font-size: 14px; font-weight: bold; border-top: 1px solid #000; padding-top: 5px; margin-top: 5px; }

                    /* FOOTER & BARCODE */
                    .footer-wrapper { position: absolute; bottom: 0; left: 0; right: 0; border-top: 2px dashed #000; padding-top: 10px; }
                    .footer-header { font-size: 10px; font-weight: bold; margin-bottom: 5px; text-transform: uppercase; }
                    .footer-content { display: flex; justify-content: space-between; font-size: 12px; }
                    .bank-details { width: 40%; }
                    .payment-details { width: 55%; text-align: right; }
                    .payment-row { display: flex; justify-content: space-between; margin-bottom: 6px; border-bottom: 1px solid #eee; padding-bottom: 2px; }
                    .payment-label { font-weight: bold; font-size: 11px; }
                    
                    /* Viivakoodialue */
                    .barcode-container { margin-top: 10px; text-align: left; padding: 5px 0; display: flex; flex-direction: column; align-items: center; }
                    .barcode-number { font-family: monospace; letter-spacing: 1px; font-size: 11px; margin-top: 5px; }
                    svg#barcode { width: 100%; max-width: 400px; height: 50px; }

                    tr { page-break-inside: avoid; }
                </style>
            </head>
            <body>
                <div class="container">
                    <div class="header">
                        <div>
                            <div class="company-name">${m.nimi||"KRKLN NOTAR OY"}</div>
                            <div class="company-details">
                                ${m.katu||""}<br>
                                ${m.postinro||""} ${m.toimipaikka||""}<br>
                                Puh: ${m.puhelin||""}<br>
                                Email: ${m.email||""}
                            </div>
                        </div>
                        <div class="meta-box">
                            <div class="meta-row"><span class="meta-label">PIVMR:</span> <span class="meta-value">${P}</span></div>
                            <div class="meta-row"><span class="meta-label">LASKUN NRO:</span> <span class="meta-value">${R}</span></div>
                            <div class="meta-row"><span class="meta-label">VIITENUMERO:</span> <span class="meta-value">${yt}</span></div>
                            <div class="meta-row" style="margin-top:10px"><span class="meta-label">ERPIV:</span> <span class="meta-value">${rt}</span></div>
                        </div>
                    </div>

                    <div class="recipient">
                        <b>${w.customer_name}</b><br>
                        ${w.billing_address?w.billing_address.replace(",","<br>"):""}
                    </div>

                    <table>
                        <thead><tr><th class="col-desc">KUVAUS</th><th class="col-sum">SUMMA</th></tr></thead>
                        <tbody>
                            ${w.rows.map(H=>{if(H.type==="header"){let nt=H.text.replace("","").trim();return nt.startsWith("Viite:")&&(nt=nt.replace("Viite:","Kohde:")),`<tr class="row-header"><td colspan="2">${nt}</td></tr>`}return`<tr><td>${H.text} ${H.details?`<span class="small-text">${H.details}</span>`:""}</td><td style="text-align:right">${H.total.toFixed(2)} </td></tr>`}).join("")}
                        </tbody>
                    </table>

                    <div class="totals-section">
                        <div class="totals-box">
                            <div class="total-row"><span>VLISUMMA:</span> <span>${J.toFixed(2)} </span></div>
                            <div class="total-row"><span>ALV (${m.alv_pros||"25.5"}%):</span> <span>${ot.toFixed(2)} </span></div>
                            <div class="total-row total-final"><span>YHTEENS:</span> <span>${w.total_sum.toFixed(2)} </span></div>
                        </div>
                    </div>

                    <div class="footer-wrapper">
                        <div class="footer-header">Maksettaessa kytettv viitenumeroa</div>
                        <div class="footer-content">
                            <div class="bank-details">
                                <div class="bank-row"><span class="bank-label" style="display:inline-block;width:60px;font-weight:bold">Saaja:</span> ${m.nimi||"Krkln Notar Oy"}</div>
                                <div class="bank-row"><span class="bank-label" style="display:inline-block;width:60px;font-weight:bold">IBAN:</span> ${m.iban||"-"}</div>
                                <div class="bank-row"><span class="bank-label" style="display:inline-block;width:60px;font-weight:bold">BIC:</span> -</div>
                            </div>
                            <div class="payment-details">
                                <div class="payment-row"><span class="payment-label">Viitenumero:</span> <span>${yt}</span></div>
                                <div class="payment-row"><span class="payment-label">Erpiv:</span> <span>${rt}</span></div>
                                <div class="payment-row"><span class="payment-label">Euroa:</span> <span>${w.total_sum.toFixed(2)}</span></div>
                            </div>
                        </div>
                        
                        ${_t?`
                        <div class="barcode-container">
                            <svg id="barcode"></svg>
                            <div class="barcode-number">Virtuaaliviivakoodi: ${_t}</div>
                        </div>
                        `:""}
                    </div>
                </div>
                
                <script>
                    // Kun sivu on ladattu, piirretn viivakoodi ja tulostetaan
                    window.onload = function() {
                        try {
                            if ("${_t}") {
                                JsBarcode("#barcode", "${_t}", {
                                    format: "CODE128",
                                    lineColor: "#000",
                                    width: 1.5,
                                    height: 40,
                                    displayValue: false, // Ei numeroa viivojen alle (meill on se erikseen)
                                    margin: 0
                                });
                            }
                        } catch(e) { console.error("Viivakoodivirhe:", e); }
                        
                        setTimeout(() => { window.print(); }, 800);
                    };
                <\/script>
            </body>
            </html>
        `,V=window.open("","_blank","width=950,height=1200");V?(V.document.write(Ct),V.document.close()):t("Salli ponnahdusikkunat!","error")},O=w=>{const R=new Date;let yt=new Date;if(w==="thisMonth")yt=new Date(R.getFullYear(),R.getMonth(),1);else if(w==="prevMonth")yt=new Date(R.getFullYear(),R.getMonth()-1,1),R.setDate(0);else if(w==="3kk")yt.setMonth(yt.getMonth()-3);else if(w==="year")yt.setFullYear(yt.getFullYear()-1);else if(w==="clear"){K({start:"",end:""});return}const rt=P=>P.toISOString().split("T")[0];K({start:rt(yt),end:rt(R)})},N=r.filter(w=>{const R=C.toLowerCase(),yt=!C||w.customer_name.toLowerCase().includes(R)||w.title.toLowerCase().includes(R)||w.invoice_number&&w.invoice_number.includes(R),rt=!L||w.customer_name===L;let P=!0;return Q.start&&Q.end&&(P=w.date>=Q.start&&w.date<=Q.end),yt&&rt&&P});return E.jsxs("div",{className:"admin-section",children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[E.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),E.jsx("h2",{style:{margin:0},children:"Laskuarkisto"})]}),E.jsxs("div",{className:"card-box",style:{padding:"15px"},children:[E.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[E.jsxs("div",{style:{flex:1,position:"relative",display:"flex",alignItems:"center",background:"#2c2c2c",borderRadius:"6px",padding:"8px 12px",border:"1px solid #444"},children:[E.jsx("span",{style:{fontSize:"1.1rem",marginRight:"10px"},children:""}),E.jsx("input",{placeholder:"Hae asiakasta tai laskun numeroa...",value:C,onChange:w=>I(w.target.value),style:{border:"none",background:"transparent",color:"white",fontSize:"1rem",outline:"none",width:"100%"}}),C&&E.jsx("button",{onClick:()=>I(""),style:{background:"none",border:"none",color:"#888",cursor:"pointer",fontSize:"1.1rem"},children:""})]}),E.jsx("button",{onClick:()=>b(!y),className:"save-btn",style:{background:y?"#1976d2":"#333",minWidth:"120px"},children:y?"Piilota ":"Suodattimet "})]}),y&&E.jsxs("div",{style:{marginTop:"15px",borderTop:"1px solid #444",paddingTop:"15px",display:"flex",flexDirection:"column",gap:"15px"},children:[E.jsxs("div",{children:[E.jsx("label",{style:{marginBottom:"5px",color:"#aaa"},children:"Aikajakso:"}),E.jsxs("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:[E.jsx("button",{className:"back-btn",onClick:()=>O("thisMonth"),children:"Tm kuu"}),E.jsx("button",{className:"back-btn",onClick:()=>O("prevMonth"),children:"Edellinen"}),E.jsx("button",{className:"back-btn",onClick:()=>O("3kk"),children:"3 kk"}),E.jsx("button",{className:"back-btn",onClick:()=>O("year"),children:"Vuosi"}),E.jsx("button",{className:"back-btn",onClick:()=>O("clear"),style:{color:"#ff5252",borderColor:"#ff5252"},children:"Tyhjenn"})]})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{children:[E.jsx("label",{children:"Tarkka aikavli:"}),E.jsxs("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[E.jsx("input",{type:"date",value:Q.start,onChange:w=>K({...Q,start:w.target.value})}),E.jsx("span",{children:"-"}),E.jsx("input",{type:"date",value:Q.end,onChange:w=>K({...Q,end:w.target.value})})]})]}),E.jsxs("div",{children:[E.jsx("label",{children:"Asiakas:"}),E.jsxs("select",{value:L,onChange:w=>X(w.target.value),children:[E.jsx("option",{value:"",children:"-- Kaikki --"}),ct.map(w=>E.jsx("option",{value:w,children:w},w))]})]})]})]})]}),E.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[u&&E.jsx("p",{style:{textAlign:"center",color:"#aaa"},children:"Ladataan laskuja..."}),!u&&N.length===0&&E.jsx("div",{style:{textAlign:"center",padding:"30px",color:"#666",border:"2px dashed #333",borderRadius:"8px"},children:E.jsx("p",{children:"Ei laskuja."})}),N.map(w=>E.jsxs("div",{style:{background:"#1e1e1e",border:"1px solid #333",borderRadius:"6px",padding:"10px 15px",display:"flex",justifyContent:"space-between",alignItems:"center",opacity:w.status==="cancelled"?.6:1},children:[E.jsxs("div",{style:{flex:1},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[E.jsxs("span",{style:{fontWeight:"bold",fontSize:"1rem",color:w.total_sum<0?"#ff5252":"white"},children:[w.title," ",E.jsxs("span",{style:{fontWeight:"normal",color:"#aaa",fontSize:"0.9rem"},children:["(#",w.invoice_number||"---",")"]})]}),w.status==="open"&&E.jsx("span",{style:{background:"#ff9800",color:"black",padding:"1px 5px",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"bold"},children:"AVOIN"}),w.status==="paid"&&E.jsx("span",{style:{background:"#4caf50",color:"white",padding:"1px 5px",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"bold"},children:"MAKSETTU"}),w.status==="cancelled"&&E.jsx("span",{style:{background:"#d32f2f",color:"white",padding:"1px 5px",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"bold"},children:"MITTITY"}),w.status==="credited"&&E.jsx("span",{style:{background:"#9c27b0",color:"white",padding:"1px 5px",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"bold"},children:"HYVITETTY"})]}),E.jsxs("div",{style:{fontSize:"0.85rem",color:"#aaa",marginTop:"2px"},children:[w.date,"  ",w.customer_name]})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[E.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",minWidth:"80px",textAlign:"right",color:w.total_sum<0?"#ff5252":"#4caf50"},children:[w.total_sum.toFixed(2)," "]}),E.jsxs("div",{style:{display:"flex",gap:"5px"},children:[E.jsx("button",{onClick:()=>x(w),className:"icon-btn",title:"Tulosta",children:""}),E.jsx("button",{onClick:()=>x(w),className:"icon-btn",title:"Lataa PDF",style:{color:"#90caf9"},children:" PDF"}),w.status==="open"&&E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:()=>W(w),className:"icon-btn",style:{color:"#4caf50"},title:"Merkitse maksetuksi",children:""}),E.jsx("button",{onClick:()=>S(w),className:"icon-btn",style:{color:"#ff9800"},title:"Hyvityslasku",children:""}),E.jsx("button",{onClick:()=>ft(w),className:"icon-btn",style:{color:"#d32f2f"},title:"Mitti",children:""})]}),w.status==="cancelled"&&E.jsx("button",{onClick:()=>D(w),className:"icon-btn",style:{color:"#ff5252",border:"1px solid #555",borderRadius:"4px",padding:"2px 5px"},title:"Poista pysyvsti",children:" Tuhoa"})]})]})]},w.id))]})]})},_2=()=>{const[s,t]=dt.useState(""),[i,r]=dt.useState(""),[l,u]=dt.useState(!1),[f,m]=dt.useState(""),g=async y=>{y.preventDefault(),m("");try{l?await ZI(Sh,s,i):await WI(Sh,s,i)}catch(b){console.error("Login error:",b),b.code==="auth/invalid-credential"?m("Vr shkposti tai salasana."):b.code==="auth/email-already-in-use"?m("Shkposti on jo kytss."):b.code==="auth/weak-password"?m("Salasanan pit olla vhintn 6 merkki."):m("Virhe: "+b.message)}};return E.jsx("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px"},children:E.jsxs("div",{className:"card-box",style:{maxWidth:"400px",width:"100%",textAlign:"center"},children:[E.jsx("h2",{style:{marginTop:0},children:l?"Luo tunnus":"Kirjaudu sisn"}),E.jsx("p",{style:{color:"#aaa",marginBottom:"20px"},children:"Krkln Notar Oy"}),E.jsxs("form",{onSubmit:g,children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{style:{textAlign:"left"},children:"Shkposti"}),E.jsx("input",{type:"email",value:s,onChange:y=>t(y.target.value),required:!0,placeholder:"esim. posti@firma.fi"})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{style:{textAlign:"left"},children:"Salasana"}),E.jsx("input",{type:"password",value:i,onChange:y=>r(y.target.value),required:!0,placeholder:"******"})]}),f&&E.jsx("div",{style:{backgroundColor:"rgba(211, 47, 47, 0.1)",color:"#ff5252",padding:"10px",borderRadius:"6px",marginBottom:"15px",border:"1px solid #d32f2f"},children:f}),E.jsx("button",{type:"submit",className:"save-btn",style:{width:"100%",padding:"15px"},children:l?"Rekisteridy":"Kirjaudu"})]}),E.jsx("div",{style:{marginTop:"20px",borderTop:"1px solid #444",paddingTop:"15px"},children:E.jsx("button",{onClick:()=>{u(!l),m("")},className:"back-btn",style:{border:"none",color:"#2196f3",textDecoration:"underline"},children:l?"Onko sinulla jo tunnus? Kirjaudu":"Eik tunnusta? Rekisteridy"})})]})})},v2="/notar-app/assets/logo-D7EU7HDK.jpeg",E2=({msg:s,type:t})=>s?E.jsxs("div",{className:`notification-toast ${t}`,children:[t==="success"?"":""," ",s]}):null,T2=({isOpen:s,message:t,onConfirm:i,onCancel:r})=>s?E.jsx("div",{className:"modal-overlay",children:E.jsxs("div",{className:"modal-content",style:{textAlign:"center"},children:[E.jsx("h3",{children:"Vahvistus"}),E.jsx("p",{style:{whiteSpace:"pre-wrap"},children:t}),E.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center",marginTop:"20px"},children:[E.jsx("button",{onClick:i,className:"save-btn",children:"Kyll"}),E.jsx("button",{onClick:r,className:"back-btn",children:"Peruuta"})]})]})}):null,KE=({task:s,contractData:t,onToggle:i,onPriceChange:r,isOverridden:l=!1})=>{const u=t?.active||!1,f=t?.price||"";let m="",g="0";return s.type==="kg"?m=" / kg":s.type==="hourly"?m=" / h":s.type==="fixed"?m=" (Kerta)":s.type==="fixed_monthly"?m=" / kk":(s.type==="extra"||s.type==="material")&&(m="",g="0"),E.jsxs("div",{style:{marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #333",paddingBottom:"8px",backgroundColor:l?"#2e2e10":"transparent",padding:l?"5px":"0",borderRadius:"4px"},children:[E.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",fontWeight:u?"bold":"normal",flex:1,color:"white"},children:[E.jsx("input",{type:"checkbox",className:"big-checkbox",checked:u,onChange:i}),s.label,l&&E.jsx("span",{style:{fontSize:"0.7em",color:"#ffb74d"},children:"(Kohdekohtainen)"})]}),u&&E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[E.jsx("input",{type:"number",placeholder:g,value:f,onChange:r,style:{width:"90px",padding:"8px",textAlign:"right"}}),E.jsx("span",{style:{fontSize:"0.8em",color:"#aaa"},children:m})]})]})},b2=({currentView:s,setCurrentView:t})=>{const[i,r]=dt.useState(new Date),[l,u]=dt.useState(null),[f,m]=dt.useState("Paikannetaan..."),[g,y]=dt.useState(null);dt.useEffect(()=>{const Q=setInterval(()=>r(new Date),1e3);return()=>clearInterval(Q)},[]),dt.useEffect(()=>{if(!navigator.geolocation){m("Ei paikannusta");return}navigator.geolocation.getCurrentPosition(async Q=>{const K=Q.coords.latitude,ct=Q.coords.longitude;y({lat:K.toFixed(3),lon:ct.toFixed(3)});try{const it=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${K}&longitude=${ct}&current_weather=true`)).json();u(it.current_weather);const W=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${K}&lon=${ct}`)).json(),ft=W.address.city||W.address.town||W.address.village||W.address.municipality||"Tuntematon",D=W.address.road||"";m(D?`${D}, ${ft}`:ft)}catch(Tt){console.error("Stietojen haku eponnistui",Tt),m("S ei saatavilla")}},Q=>{console.error("Sijaintivirhe",Q),m("Lahti (Oletus)")})},[]);const b=Q=>Q===void 0?"":Q<=1?"":Q<=3?"":Q<=48?"":Q<=67?"":Q<=77?"":Q<=82?"":Q<=86?"":Q<=99?"":"",I=["SU","MA","TI","KE","TO","PE","LA"][i.getDay()],L=i.toLocaleDateString("fi-FI"),X=i.toLocaleTimeString("fi-FI",{hour:"2-digit",minute:"2-digit"}).replace(".",".");return E.jsxs("div",{className:"info-bar-container",children:[E.jsxs("div",{className:"info-left",children:[E.jsxs("div",{className:"weather-box",children:[E.jsx("span",{className:"weather-icon",children:l?b(l.weathercode):"..."}),E.jsx("span",{className:"weather-temp",children:l?`${l.temperature>0?"+":""}${l.temperature}C`:"--"})]}),E.jsxs("div",{className:"location-box",children:[E.jsx("div",{children:f}),g&&E.jsxs("div",{className:"coords",children:["N ",g.lat," E ",g.lon]})]})]}),E.jsx("div",{className:"info-right",children:E.jsxs("div",{className:"time-box",children:[E.jsx("div",{className:"clock-time",children:X}),E.jsxs("div",{className:"clock-date",children:[I," ",L]})]})}),E.jsxs("div",{className:"info-center",children:[E.jsx("button",{className:`nav-btn ${s==="tyot"||s==="log"?"active":""}`,onClick:()=>t("tyot"),children:" Tyt"}),E.jsx("button",{className:`nav-btn ${s!=="tyot"&&s!=="log"?"active":""}`,onClick:()=>t("admin"),children:" Toimisto"})]})]})},S2=({onBack:s,showNotification:t,requestConfirm:i})=>{const[r,l]=dt.useState([]),[u,f]=dt.useState(""),[m,g]=dt.useState(null);dt.useEffect(()=>{const I=zi(Se(It,"work_entries"),Mn("invoiced","==",!1)),L=Mi(I,X=>{const Q=X.docs.map(K=>({id:K.id,...K.data()}));Q.sort((K,ct)=>K.date<ct.date?1:-1),l(Q)});return()=>L()},[]);const y=I=>{i("Poistetaanko tm kirjaus pysyvsti?",async()=>{await Mm(fe(It,"work_entries",I)),t("Kirjaus poistettu","success")})},b=async()=>{if(m)try{await rr(fe(It,"work_entries",m.id),{date:m.date,description:m.description||"",value:m.value||!0,price_work:m.price_work||"0",price_material:m.price_material||"0"}),t("Muutokset tallennettu!","success"),g(null)}catch(I){t("Virhe: "+I.message,"error")}},C=r.filter(I=>I.customer_name&&I.customer_name.toLowerCase().includes(u.toLowerCase())||I.property_address&&I.property_address.toLowerCase().includes(u.toLowerCase())||I.task_name&&I.task_name.toLowerCase().includes(u.toLowerCase()));return E.jsxs("div",{className:"admin-section",children:[E.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),E.jsx("h2",{children:"Tyhistoria"}),E.jsxs("div",{className:"card-box",children:[E.jsx("input",{placeholder:" Etsi...",value:u,onChange:I=>f(I.target.value),style:{marginBottom:"10px"}}),E.jsxs("p",{style:{fontSize:"0.9em",color:"#aaa"},children:["Yhteens: ",C.length," kirjausta"]})]}),E.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[C.map(I=>E.jsxs("div",{style:{background:"#1e1e1e",padding:"15px",borderRadius:"8px",border:"1px solid #333",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[E.jsxs("div",{children:[E.jsxs("div",{style:{fontWeight:"bold",color:"#2196f3",fontSize:"1.1rem"},children:[I.task_name," ",E.jsxs("span",{style:{color:"white",fontSize:"0.9rem"},children:["- ",I.date]})]}),E.jsx("div",{style:{fontWeight:"bold",marginTop:"5px"},children:I.customer_name}),E.jsx("div",{style:{fontSize:"0.9rem"},children:I.property_address}),E.jsxs("div",{style:{marginTop:"5px",fontSize:"0.9rem",color:"#ccc"},children:[I.task_type==="kg"&&E.jsxs("span",{children:["Mr: ",E.jsxs("b",{children:[I.value," kg"]})," | "]}),E.jsxs("span",{children:["Hinta: ",E.jsxs("b",{children:[I.price_work," "]})]}),I.price_material>0&&E.jsxs("span",{children:[" + Tarvike ",I.price_material," "]}),I.description&&E.jsx("div",{style:{marginTop:"3px"},children:E.jsxs("i",{children:['"',I.description,'"']})})]})]}),E.jsxs("div",{style:{display:"flex",gap:"10px"},children:[E.jsx("button",{onClick:()=>g(I),className:"icon-btn edit-btn",title:"Muokkaa",children:""}),E.jsx("button",{onClick:()=>y(I.id),className:"icon-btn delete-btn",title:"Poista",children:""})]})]},I.id)),C.length===0&&E.jsx("p",{children:"Ei kirjauksia."})]}),m&&E.jsx("div",{className:"modal-overlay",children:E.jsxs("div",{className:"modal-content",children:[E.jsx("h3",{children:"Muokkaa kirjausta"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Pivmr"}),E.jsx("input",{type:"date",value:m.date,onChange:I=>g({...m,date:I.target.value})})]}),m.task_type==="kg"&&E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Mr (kg)"}),E.jsx("input",{type:"number",value:m.value,onChange:I=>g({...m,value:I.target.value})})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{children:[E.jsx("label",{children:"Ty Hinta ()"}),E.jsx("input",{type:"number",value:m.price_work,onChange:I=>g({...m,price_work:I.target.value})})]}),m.task_type==="material"&&E.jsxs("div",{children:[E.jsx("label",{children:"Tarvike ()"}),E.jsx("input",{type:"number",value:m.price_material,onChange:I=>g({...m,price_material:I.target.value})})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Selite"}),E.jsx("input",{value:m.description||"",onChange:I=>g({...m,description:I.target.value}),placeholder:"Listiedot..."})]}),E.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[E.jsx("button",{onClick:b,className:"save-btn",children:"Tallenna"}),E.jsx("button",{onClick:()=>g(null),className:"back-btn",children:"Peruuta"})]})]})})]})},A2=({availableTasks:s,onOpenLog:t,showNotification:i})=>{const[r,l]=dt.useState(null),u=s.filter(rt=>rt.showInWorkView!==!1),[f,m]=dt.useState(new Date().toISOString().slice(0,10)),[g,y]=dt.useState([]),[b,C]=dt.useState({}),[I,L]=dt.useState("all"),[X,Q]=dt.useState([]),[K,ct]=dt.useState(""),[Tt,it]=dt.useState(""),[pt,W]=dt.useState([]),[ft,D]=dt.useState(""),[S,x]=dt.useState(""),[O,N]=dt.useState("");dt.useEffect(()=>{if(!r)return;if(["checkbox","fixed","kg","hourly"].includes(r.type))Mi(Se(It,"customers"),P=>{const J=P.docs.map(ot=>({id:ot.id,...ot.data()}));Mi(Se(It,"properties"),ot=>{const _t=ot.docs.map(H=>({id:H.id,...H.data()}));let Ct=[];_t.forEach(H=>{const nt=J.find(vt=>vt.id===H.customer_id);if(!nt)return;const ut=H.contracts?.[r.id],st=nt.contracts?.[r.id];if(ut?.active||st?.active){const vt=ut?.active?ut.price:st?.price||"0";Ct.push({id:H.id,type:"property",name:H.address,group:H.group||"Ei ryhm",customerName:nt.name,customerType:nt.type,parentId:nt.id,contractPrice:vt})}}),J.forEach(H=>{const nt=H.contracts?.[r.id];H.type==="b2c"&&nt?.active&&Ct.push({id:H.id,type:"customer",name:H.street?`${H.name} (${H.street})`:H.name,group:"Yksityiset",customerName:H.name,customerType:"b2c",parentId:H.id,contractPrice:nt.price||"0"})}),y(Ct);const V={};Ct.forEach(H=>V[H.id]=r.type==="kg"?"":!0),C(V)})});else{const P=zi(Se(It,"customers"),Ip("name"));Mi(P,J=>Q(J.docs.map(ot=>({id:ot.id,...ot.data()}))))}},[r]),dt.useEffect(()=>{if(K){const rt=zi(Se(It,"properties"),Mn("customer_id","==",K));Mi(rt,P=>W(P.docs.map(J=>({id:J.id,...J.data()}))))}},[K]);const w=async()=>{const rt=[];for(const[P,J]of Object.entries(b)){if(!J)continue;const ot=g.find(_t=>_t.id===P);ot&&rt.push(Yl(Se(It,"work_entries"),{date:f,task_id:r.id,task_name:r.label,task_type:r.type,property_id:P,property_address:ot.name,customer_name:ot.customerName,group:ot.group,customer_id:ot.parentId,value:J,price_work:ot.contractPrice,invoiced:!1,created_at:new Date}))}await Promise.all(rt),i(`Tallennettu ${rt.length} kirjausta!`,"success"),l(null)},R=async()=>{if(!K||!S)return i("Tyt pakolliset kentt!","error");const rt=X.find(J=>J.id===K);let P={id:K,address:rt.street||rt.name,group:"Yksityinen"};if(Tt){const J=pt.find(ot=>ot.id===Tt);J&&(P={id:J.id,address:J.address,group:J.group})}else if(rt.type!=="b2c")return i("Valitse kohde listasta!","error");await Yl(Se(It,"work_entries"),{date:f,task_id:r.id,task_name:r.label,task_type:r.type,property_id:P.id,property_address:P.address,group:P.group,customer_id:K,customer_name:rt.name,description:ft,price_work:S,price_material:O,invoiced:!1,created_at:new Date}),i("Kirjaus tallennettu!","success"),l(null),D(""),x(""),N("")};if(!r)return E.jsxs("div",{children:[E.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"Valitse tytehtv:"}),E.jsx("div",{className:"button-grid",children:u.map(rt=>E.jsx("button",{className:"work-button",style:{backgroundColor:rt.color||"#2196f3"},onClick:()=>l(rt),children:rt.label},rt.id))}),E.jsx("div",{style:{textAlign:"center",marginTop:"30px"},children:E.jsx("button",{onClick:t,className:"back-btn",style:{padding:"15px",width:"100%",fontSize:"1rem"},children:" Selaa & Muokkaa kirjauksia "})})]});const yt=["checkbox","fixed","kg","hourly"].includes(r.type);return E.jsxs("div",{className:"admin-section",children:[E.jsx("button",{onClick:()=>l(null),className:"back-btn",style:{marginBottom:"20px"},children:" Takaisin"}),E.jsx("h2",{style:{borderBottom:`4px solid ${r.color}`,display:"inline-block",paddingBottom:"5px"},children:r.label}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Pivmr:"}),E.jsx("input",{type:"date",value:f,onChange:rt=>m(rt.target.value),style:{maxWidth:"200px"}})]}),yt&&E.jsxs("div",{children:[E.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",flexWrap:"wrap"},children:[E.jsx("button",{className:`nav-btn ${I==="isannointi"?"active":""}`,onClick:()=>L("isannointi"),style:{flex:1,fontSize:"0.8rem"},children:" Isnn."}),E.jsx("button",{className:`nav-btn ${I==="b2b"?"active":""}`,onClick:()=>L("b2b"),style:{flex:1,fontSize:"0.8rem"},children:" Yritys"}),E.jsx("button",{className:`nav-btn ${I==="b2c"?"active":""}`,onClick:()=>L("b2c"),style:{flex:1,fontSize:"0.8rem"},children:" Yksity."}),E.jsx("button",{className:`nav-btn ${I==="all"?"active":""}`,onClick:()=>L("all"),style:{flex:1,fontSize:"0.8rem"},children:"Kaikki"})]}),E.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[Array.from(new Set(g.filter(rt=>I==="all"||rt.customerType===I).map(rt=>`${rt.customerName}::${rt.group}`))).map(rt=>{const[P,J]=rt.split("::"),ot=g.filter(_t=>_t.customerName===P&&_t.group===J);return E.jsxs("div",{className:"card-box",style:{padding:"10px"},children:[E.jsx("h4",{style:{margin:"0 0 5px 0",color:"#fff"},children:P}),E.jsx("div",{style:{fontSize:"0.9em",color:"#2196f3",marginBottom:"10px",fontWeight:"bold"},children:J}),ot.map(_t=>E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #333",alignItems:"center"},children:[E.jsx("span",{children:_t.name}),r.type==="kg"?E.jsx("input",{type:"number",placeholder:"kg",value:b[_t.id]||"",onChange:Ct=>C({...b,[_t.id]:Ct.target.value}),style:{width:"80px",padding:"5px"}}):E.jsx("input",{type:"checkbox",className:"big-checkbox",checked:!!b[_t.id],onChange:Ct=>C({...b,[_t.id]:Ct.target.checked})})]},_t.id))]},rt)}),g.length===0&&E.jsx("p",{children:"Ei kohteita."})]}),E.jsx("button",{onClick:w,className:"save-btn",style:{width:"100%",marginTop:"20px",padding:"15px"},children:"Tallenna Valinnat "})]}),!yt&&E.jsxs("div",{className:"card-box",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Asiakas:"}),E.jsxs("select",{value:K,onChange:rt=>{ct(rt.target.value),it("")},children:[E.jsx("option",{value:"",children:"-- Valitse --"}),X.map(rt=>E.jsx("option",{value:rt.id,children:rt.name},rt.id))]})]}),(pt.length>0||K&&X.find(rt=>rt.id===K)?.type!=="b2c")&&E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Kohde:"}),E.jsxs("select",{value:Tt,onChange:rt=>it(rt.target.value),children:[E.jsx("option",{value:"",children:"-- Valitse --"}),pt.map(rt=>E.jsx("option",{value:rt.id,children:rt.address},rt.id))]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Selite:"}),E.jsx("input",{value:ft,onChange:rt=>D(rt.target.value),placeholder:"Mit tehtiin..."})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{children:[E.jsx("label",{children:"Ty ()"}),E.jsx("input",{type:"number",value:S,onChange:rt=>x(rt.target.value)})]}),r.type==="material"&&E.jsxs("div",{children:[E.jsx("label",{children:"Tarvike ()"}),E.jsx("input",{type:"number",value:O,onChange:rt=>N(rt.target.value)})]})]}),E.jsx("button",{onClick:R,className:"save-btn",style:{width:"100%",marginTop:"20px"},children:"Tallenna Kirjaus "})]})]})},w2=({onBack:s,showNotification:t,requestConfirm:i})=>{const[r,l]=dt.useState({nimi:"",y_tunnus:"",alv_pros:"25.5",katu:"",postinro:"",toimipaikka:"",email:"",puhelin:"",iban:"",invoice_start_number:"1000",tasks:[]}),[u,f]=dt.useState(!1),[m,g]=dt.useState(null),[y,b]=dt.useState(""),[C,I]=dt.useState("checkbox"),[L,X]=dt.useState("#2196f3"),[Q,K]=dt.useState(!0);dt.useEffect(()=>{const W=Mi(fe(It,"settings","company_profile"),ft=>{ft.exists()&&l({...ft.data(),tasks:ft.data().tasks||[]})});return()=>W()},[]);const ct=async()=>{if(!y)return t("Nimi puuttuu!","error");if(r.tasks.some(D=>D.color===L&&D.id!==m))return t("Vri kytss!","error");let W=[...r.tasks];const ft={label:y,type:C,color:L,showInWorkView:Q};m?W=W.map(D=>D.id===m?{...D,...ft}:D):W.push({id:y.toLowerCase().replace(/[^a-z0-9]/g,"_")+"_"+Date.now(),...ft}),await lm(fe(It,"settings","company_profile"),{...r,tasks:W}),f(!1),t("Tehtv tallennettu!","success")},Tt=W=>i("Poistetaanko tehtv?",async()=>await lm(fe(It,"settings","company_profile"),{...r,tasks:r.tasks.filter(ft=>ft.id!==W)})),it=async()=>{await lm(fe(It,"settings","company_profile"),r),t("Tiedot tallennettu!","success")},pt=W=>{g(W.id),b(W.label),I(W.type||"checkbox"),X(W.color||"#2196f3"),K(W.showInWorkView!==!1),f(!0)};return E.jsxs("div",{className:"admin-section",children:[E.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),E.jsx("h2",{children:"Yrityksen Asetukset"}),E.jsxs("div",{className:"card-box",children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[E.jsx("h3",{children:"1. Tytehtvt"}),E.jsx("button",{onClick:()=>{g(null),b(""),X("#2196f3"),f(!0)},className:"save-btn",children:"+ Lis"})]}),E.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:r.tasks.map(W=>E.jsxs("div",{className:"task-pill",style:{borderLeft:`5px solid ${W.color}`,opacity:W.showInWorkView===!1?.6:1},children:[E.jsxs("span",{style:{flex:1},children:[E.jsx("strong",{children:W.label})," ",E.jsxs("small",{children:["(",W.type==="fixed_monthly"?"KK-sopimus":W.type,")"]})]}),E.jsxs("div",{style:{display:"flex",gap:"5px"},children:[E.jsx("button",{onClick:()=>pt(W),className:"icon-btn edit-btn",title:"Muokkaa",children:""}),E.jsx("button",{onClick:()=>Tt(W.id),className:"icon-btn delete-btn",title:"Poista",children:""})]})]},W.id))})]}),E.jsxs("div",{className:"card-box",children:[E.jsx("h3",{children:"2. Yrityksen tiedot"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Nimi"}),E.jsx("input",{value:r.nimi,onChange:W=>l({...r,nimi:W.target.value})})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{children:[E.jsx("label",{children:"Y-tunnus"}),E.jsx("input",{value:r.y_tunnus,onChange:W=>l({...r,y_tunnus:W.target.value})})]}),E.jsxs("div",{children:[E.jsx("label",{children:"ALV %"}),E.jsx("input",{value:r.alv_pros,onChange:W=>l({...r,alv_pros:W.target.value})})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Katuosoite"}),E.jsx("input",{value:r.katu,onChange:W=>l({...r,katu:W.target.value})})]}),E.jsxs("div",{className:"form-row three-col",children:[E.jsxs("div",{children:[E.jsx("label",{children:"Postinro"}),E.jsx("input",{value:r.postinro,onChange:W=>l({...r,postinro:W.target.value})})]}),E.jsxs("div",{children:[E.jsx("label",{children:"Ptp"}),E.jsx("input",{value:r.toimipaikka,onChange:W=>l({...r,toimipaikka:W.target.value})})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Puhelin"}),E.jsx("input",{value:r.puhelin,onChange:W=>l({...r,puhelin:W.target.value})})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Email"}),E.jsx("input",{value:r.email,onChange:W=>l({...r,email:W.target.value})})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{children:[E.jsx("label",{children:"IBAN"}),E.jsx("input",{value:r.iban,onChange:W=>l({...r,iban:W.target.value})})]}),E.jsxs("div",{children:[E.jsx("label",{style:{color:"#ff9800"},children:"Seuraavan laskun nro"}),E.jsx("input",{type:"number",value:r.invoice_start_number||"",onChange:W=>l({...r,invoice_start_number:W.target.value}),style:{textAlign:"center",fontWeight:"bold"}})]})]}),E.jsx("button",{className:"save-btn",onClick:it,children:"Tallenna"})]}),u&&E.jsx("div",{className:"modal-overlay",children:E.jsxs("div",{className:"modal-content",children:[E.jsx("h3",{children:m?"Muokkaa":"Lis"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Nimi"}),E.jsx("input",{value:y,onChange:W=>b(W.target.value)})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{children:[E.jsx("label",{children:"Tyyppi"}),E.jsxs("select",{value:C,onChange:W=>I(W.target.value),children:[E.jsx("option",{value:"checkbox",children:"Perus (Tehty/Ei)"}),E.jsx("option",{value:"fixed",children:"Kntt (Kertakorvaus)"}),E.jsx("option",{value:"fixed_monthly",children:"Kiinte KK-sopimus"}),E.jsx("option",{value:"kg",children:"Mr (kg)"}),E.jsx("option",{value:"hourly",children:"Tuntity"}),E.jsx("option",{value:"extra",children:"Listy"}),E.jsx("option",{value:"material",children:"Liitety"})]})]}),E.jsxs("div",{children:[E.jsx("label",{children:"Vri"}),E.jsx("input",{type:"color",value:L,onChange:W=>X(W.target.value),style:{height:"45px",width:"100%"}})]})]}),E.jsx("div",{className:"form-group",children:E.jsxs("label",{style:{display:"flex",alignItems:"center"},children:[E.jsx("input",{type:"checkbox",className:"big-checkbox",checked:Q,onChange:W=>K(W.target.checked),style:{marginRight:"10px"}}),"Nyt etusivulla"]})}),E.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[E.jsx("button",{onClick:ct,className:"save-btn",children:"Tallenna"}),E.jsx("button",{onClick:()=>f(!1),className:"back-btn",children:"Peruuta"})]})]})})]})},R2=({asiakas:s,onBack:t,onDeleted:i,availableTasks:r,showNotification:l,requestConfirm:u})=>{const[f,m]=dt.useState({...s,contracts:s.contracts||{},group_names:s.group_names||[],street:s.street||"",zip:s.zip||"",city:s.city||"",phone:s.phone||"",email:s.email||"",payment_term_type:s.payment_term_type||"14pv",fixed_due_day:s.fixed_due_day||""}),[g,y]=dt.useState([]),[b,C]=dt.useState(""),[I,L]=dt.useState(null),[X,Q]=dt.useState({isOpen:!1,mode:"add",group:null,id:null,address:"",cost_center:""});dt.useEffect(()=>{const S=zi(Se(It,"properties"),Mn("customer_id","==",s.id));return Mi(S,x=>{y(x.docs.map(O=>({id:O.id,...O.data()})))})},[s.id]);const K=async()=>{await rr(fe(It,"customers",s.id),f),l("Tiedot tallennettu!","success")},ct=()=>u("Poistetaanko asiakas?",async()=>{await Mm(fe(It,"customers",s.id)),i()}),Tt=(S,x,O)=>{m(N=>({...N,contracts:{...N.contracts,[S]:{...N.contracts[S],[x]:O}}}))},it=async()=>{b&&(await rr(fe(It,"customers",s.id),{group_names:JC(b)}),m({...f,group_names:[...f.group_names,b]}),C(""))},pt=async()=>{const{mode:S,group:x,id:O,address:N,cost_center:w}=X;if(!N)return l("Osoite vaaditaan!","error");S==="add"?await Yl(Se(It,"properties"),{customer_id:s.id,group:x,address:N,cost_center:w,contracts:{}}):await rr(fe(It,"properties",O),{address:N,cost_center:w}),Q({...X,isOpen:!1})},W=S=>u("Poistetaanko kohde?",async()=>await Mm(fe(It,"properties",S.id))),ft=async()=>{I&&(await rr(fe(It,"properties",I.id),{contracts:I.contracts}),L(null),l("Hinnat tallennettu!","success"))},D=()=>{const S=new Date;if(f.payment_term_type==="fixed"){const x=parseInt(f.fixed_due_day);if(!x)return"??.??.????";let O=new Date(S.getFullYear(),S.getMonth(),x);return S.getDate()>x&&O.setMonth(O.getMonth()+1),O.toLocaleDateString("fi-FI")}else{const x=parseInt(f.payment_term_type)||14,O=new Date(S);return O.setDate(O.getDate()+x),O.toLocaleDateString("fi-FI")}};return E.jsxs("div",{className:"admin-section",children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[E.jsx("button",{onClick:t,className:"back-btn",children:" Takaisin"}),E.jsx("button",{onClick:ct,className:"save-btn",style:{background:"#d32f2f"},children:"Poista Asiakas"})]}),E.jsx("h2",{children:f.name}),E.jsxs("div",{className:"card-box",children:[E.jsx("h3",{children:"Perustiedot"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Nimi"}),E.jsx("input",{value:f.name,onChange:S=>m({...f,name:S.target.value})})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{children:[E.jsx("label",{children:"Y-tunnus"}),E.jsx("input",{value:f.y_tunnus||"",onChange:S=>m({...f,y_tunnus:S.target.value})})]}),E.jsxs("div",{children:[E.jsx("label",{children:"Tyyppi"}),E.jsxs("select",{value:f.type||"b2b",onChange:S=>m({...f,type:S.target.value}),children:[E.jsx("option",{value:"isannointi",children:"Isnninti"}),E.jsx("option",{value:"b2b",children:"Yritys"}),E.jsx("option",{value:"b2c",children:"Yksityinen"})]})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Katuosoite (Laskutus)"}),E.jsx("input",{value:f.street||"",onChange:S=>m({...f,street:S.target.value})})]}),E.jsxs("div",{className:"form-row three-col",children:[E.jsxs("div",{children:[E.jsx("label",{children:"Postinro"}),E.jsx("input",{value:f.zip||"",onChange:S=>m({...f,zip:S.target.value})})]}),E.jsxs("div",{children:[E.jsx("label",{children:"Ptp"}),E.jsx("input",{value:f.city||"",onChange:S=>m({...f,city:S.target.value})})]})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{children:[E.jsx("label",{children:"Puhelin"}),E.jsx("input",{value:f.phone||"",onChange:S=>m({...f,phone:S.target.value})})]}),E.jsxs("div",{children:[E.jsx("label",{children:"Email"}),E.jsx("input",{value:f.email||"",onChange:S=>m({...f,email:S.target.value})})]})]}),E.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#2c2c2c",borderRadius:"8px",border:"1px solid #444"},children:[E.jsx("label",{style:{color:"#ff9800",marginBottom:"10px"},children:"Maksuehto / Erpiv"}),E.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[E.jsxs("select",{value:f.payment_term_type||"14pv",onChange:S=>m({...f,payment_term_type:S.target.value}),style:{flex:1},children:[E.jsx("option",{value:"14pv",children:"14 pv netto (Yleinen)"}),E.jsx("option",{value:"7pv",children:"7 pv netto (Nopea)"}),E.jsx("option",{value:"30pv",children:"30 pv netto (Yritys)"}),E.jsx("option",{value:"fixed",children:"Kiinte erpiv"})]}),f.payment_term_type==="fixed"&&E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[E.jsx("span",{style:{fontSize:"0.9rem"},children:"Piv:"}),E.jsx("input",{type:"number",placeholder:"PP",value:f.fixed_due_day||"",onChange:S=>m({...f,fixed_due_day:S.target.value}),style:{width:"60px",textAlign:"center"},min:"1",max:"31"})]})]}),E.jsxs("p",{style:{fontSize:"0.8em",color:"#aaa",marginTop:"8px",fontStyle:"italic"},children:["Jos lasku tehdn tnn, erpivksi tulee: ",E.jsx("strong",{style:{color:"#4caf50"},children:D()})]})]}),E.jsx("button",{onClick:K,className:"save-btn",style:{marginTop:"20px",width:"100%"},children:"Tallenna muutokset"})]}),E.jsxs("div",{className:"card-box",children:[E.jsx("h3",{children:"Oletushinnasto"}),r.map(S=>E.jsx(KE,{task:S,contractData:f.contracts?.[S.id],onToggle:x=>Tt(S.id,"active",x.target.checked),onPriceChange:x=>Tt(S.id,"price",x.target.value)},S.id)),E.jsx("button",{onClick:K,className:"save-btn",style:{marginTop:"15px"},children:"Tallenna muutokset"})]}),E.jsxs("div",{style:{marginTop:"30px"},children:[E.jsx("h3",{children:"Kohteet ja Ryhmittely"}),E.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[E.jsx("input",{placeholder:"Uusi Ryhm...",value:b,onChange:S=>C(S.target.value),style:{flex:1}}),E.jsx("button",{onClick:it,className:"save-btn",children:"+ Luo Ryhm"})]}),f.group_names.map((S,x)=>{const O=g.filter(N=>N.group===S);return E.jsxs("div",{style:{border:"1px solid #444",borderRadius:"8px",marginBottom:"15px",background:"#252525"},children:[E.jsxs("div",{style:{background:"#333",padding:"10px",display:"flex",justifyContent:"space-between",borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},children:[E.jsxs("strong",{children:[" ",S]}),E.jsx("button",{onClick:()=>Q({isOpen:!0,mode:"add",group:S,id:null,address:"",cost_center:""}),style:{fontSize:"0.9em",cursor:"pointer",background:"none",color:"#2196f3"},children:"+ Lis kohde"})]}),O.map(N=>E.jsxs("div",{style:{padding:"10px",borderBottom:"1px solid #333"},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[E.jsxs("div",{children:[E.jsx("div",{style:{fontWeight:"bold"},children:N.address}),E.jsx("div",{style:{fontSize:"0.9em",color:"#aaa"},children:N.cost_center?`KP: ${N.cost_center}`:""})]}),E.jsxs("div",{style:{display:"flex",gap:"5px"},children:[E.jsx("button",{onClick:()=>Q({isOpen:!0,mode:"edit",group:S,id:N.id,address:N.address,cost_center:N.cost_center}),className:"icon-btn edit-btn",children:""}),E.jsx("button",{onClick:()=>L(N),className:"icon-btn",style:{color:"#f57c00"},children:""}),E.jsx("button",{onClick:()=>W(N),className:"icon-btn delete-btn",children:""})]})]}),E.jsx("div",{style:{marginTop:"8px",display:"flex",gap:"5px",flexWrap:"wrap"},children:N.contracts&&r.map(w=>{const R=N.contracts[w.id];return R&&R.active?E.jsxs("span",{style:{fontSize:"0.75em",background:"#2e2e10",padding:"3px 8px",borderRadius:"4px",border:"1px solid #ffb74d",color:"#ffb74d"},children:[w.label,": ",R.price,""]},w.id):null})})]},N.id))]},x)})]}),X.isOpen&&E.jsx("div",{className:"modal-overlay",children:E.jsxs("div",{className:"modal-content",children:[E.jsx("h3",{children:X.mode==="add"?"Lis kohde":"Muokkaa"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Osoite"}),E.jsx("input",{value:X.address,onChange:S=>Q({...X,address:S.target.value}),autoFocus:!0})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Kustannuspaikka (KP)"}),E.jsx("input",{value:X.cost_center,onChange:S=>Q({...X,cost_center:S.target.value})})]}),E.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[E.jsx("button",{onClick:pt,className:"save-btn",children:"Tallenna"}),E.jsx("button",{onClick:()=>Q({...X,isOpen:!1}),className:"back-btn",children:"Peruuta"})]})]})}),I&&E.jsx("div",{className:"modal-overlay",children:E.jsxs("div",{className:"modal-content",children:[E.jsxs("h3",{children:["Hinnasto: ",I.address]}),E.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto"},children:r.map(S=>S.type==="extra"||S.type==="material"?null:E.jsx("div",{style:{marginBottom:"10px"},children:E.jsx(KE,{task:S,isOverridden:!0,contractData:I.contracts?.[S.id],onToggle:x=>{const O={...I.contracts};O[S.id]||(O[S.id]={}),O[S.id].active=x.target.checked,L({...I,contracts:O})},onPriceChange:x=>{const O={...I.contracts};O[S.id].price=x.target.value,L({...I,contracts:O})}})},S.id))}),E.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[E.jsx("button",{onClick:ft,className:"save-btn",children:"Tallenna"}),E.jsx("button",{onClick:()=>L(null),className:"back-btn",children:"Peruuta"})]})]})})]})},C2=({onBack:s,availableTasks:t,showNotification:i,requestConfirm:r})=>{const[l,u]=dt.useState([]),[f,m]=dt.useState(null);dt.useEffect(()=>{const L=zi(Se(It,"customers"),Ip("name"));return Mi(L,X=>u(X.docs.map(Q=>({id:Q.id,...Q.data()}))))},[]);const g=async()=>{const L=await Yl(Se(It,"customers"),{name:"Uusi Asiakas",type:"b2b",created_at:new Date,contracts:{},group_names:[]});m({id:L.id,name:"",type:"b2b",contracts:{},group_names:[]})};if(f)return E.jsx(R2,{asiakas:f,onBack:()=>m(null),onDeleted:()=>m(null),availableTasks:t,showNotification:i,requestConfirm:r});const y=l.filter(L=>L.type==="isannointi"),b=l.filter(L=>L.type==="b2b"),C=l.filter(L=>L.type==="b2c"),I=(L,X,Q)=>E.jsxs("div",{style:{marginBottom:"20px"},children:[E.jsxs("h3",{style:{color:"#aaa",fontSize:"1rem",borderBottom:"1px solid #333",paddingBottom:"5px",marginBottom:"10px"},children:[Q," ",L," (",X.length,")"]}),X.length===0&&E.jsx("p",{style:{color:"#666",fontStyle:"italic"},children:"Ei asiakkaita."}),X.map(K=>E.jsxs("div",{className:"card-box",onClick:()=>m(K),style:{cursor:"pointer",display:"flex",justifyContent:"space-between",padding:"15px",marginBottom:"8px",borderLeft:`4px solid ${L==="Isnninti"?"#2196f3":L==="Yritykset"?"#ff9800":"#4caf50"}`},children:[E.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:K.name}),E.jsx("span",{style:{color:"#2196f3"},children:"Avaa "})]},K.id))]});return E.jsxs("div",{className:"admin-section",children:[E.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"20px 0"},children:[E.jsx("h2",{children:"Asiakasrekisteri"}),E.jsx("button",{onClick:g,className:"save-btn",children:"+ Uusi Asiakas"})]}),I("Isnninti",y,""),I("Yritykset",b,""),I("Yksityiset",C,"")]})};function I2(){const[s,t]=dt.useState(null),[i,r]=dt.useState(!0),[l,u]=dt.useState("tyot"),[f,m]=dt.useState([]),[g,y]=dt.useState(null),[b,C]=dt.useState({isOpen:!1,message:"",onConfirm:null});dt.useEffect(()=>{const K=ex(Sh,ct=>{t(ct),r(!1)});return()=>K()},[]);const I=(K,ct="success")=>{y({msg:K,type:ct}),setTimeout(()=>y(null),3e3)},L=(K,ct)=>{C({isOpen:!0,message:K,onConfirm:()=>{ct(),C({isOpen:!1,message:"",onConfirm:null})}})};dt.useEffect(()=>{if(!s)return;const K=Mi(fe(It,"settings","company_profile"),ct=>{ct.exists()&&ct.data().tasks?m(ct.data().tasks):m([])});return()=>K()},[s]);const X=async()=>{await nx(Sh),u("tyot")},Q=()=>E.jsxs("div",{className:"admin-section",style:{textAlign:"center"},children:[E.jsx("h2",{children:"Toimiston Ohjauspaneeli"}),E.jsxs("div",{className:"button-grid",style:{marginTop:"30px"},children:[E.jsx("div",{className:"work-button",style:{backgroundColor:"#455a64"},onClick:()=>u("settings"),children:E.jsx("h3",{children:" Omat Tiedot & Tyt"})}),E.jsx("div",{className:"work-button",style:{backgroundColor:"#00695c"},onClick:()=>u("customers"),children:E.jsx("h3",{children:" Asiakasrekisteri"})}),E.jsx("div",{className:"work-button",style:{backgroundColor:"#795548"},onClick:()=>u("invoicing"),children:E.jsx("h3",{children:" Laskutus"})}),E.jsx("div",{className:"work-button",style:{backgroundColor:"#37474f"},onClick:()=>u("archive"),children:E.jsx("h3",{children:" Laskuarkisto"})})]}),E.jsxs("button",{onClick:X,className:"back-btn",style:{marginTop:"40px",borderColor:"#d32f2f",color:"#d32f2f"},children:["Kirjaudu ulos (",s.email,")"]})]});return i?E.jsx("div",{style:{color:"white",textAlign:"center",marginTop:"50px"},children:"Ladataan..."}):s?E.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"10px"},children:[E.jsx("div",{className:"logo-container",children:E.jsx("img",{src:v2,alt:"Krkln Notar Oy",className:"app-logo"})}),E.jsx(E2,{msg:g?.msg,type:g?.type}),E.jsx(T2,{isOpen:b.isOpen,message:b.message,onConfirm:b.onConfirm,onCancel:()=>C({...b,isOpen:!1})}),E.jsx(b2,{currentView:l,setCurrentView:u}),l==="tyot"&&E.jsx(A2,{availableTasks:f,onOpenLog:()=>u("log"),showNotification:I}),l==="log"&&E.jsx(S2,{onBack:()=>u("tyot"),showNotification:I,requestConfirm:L}),l==="admin"&&E.jsx(Q,{}),l==="settings"&&E.jsx(w2,{onBack:()=>u("admin"),showNotification:I,requestConfirm:L}),l==="customers"&&E.jsx(C2,{onBack:()=>u("admin"),availableTasks:f,showNotification:I,requestConfirm:L}),l==="invoicing"&&E.jsx(g2,{onBack:()=>u("admin"),showNotification:I}),l==="archive"&&E.jsx(y2,{onBack:()=>u("admin"),showNotification:I,requestConfirm:L})]}):E.jsx(_2,{})}sA.createRoot(document.getElementById("root")).render(E.jsx(dt.StrictMode,{children:E.jsx(I2,{})}));
