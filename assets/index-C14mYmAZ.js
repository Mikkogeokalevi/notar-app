(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=i(l);fetch(l.href,u)}})();var Qd={exports:{}},Dl={};var ov;function XS(){if(ov)return Dl;ov=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var m in l)m!=="key"&&(u[m]=l[m])}else u=l;return l=u.ref,{$$typeof:s,type:r,key:f,ref:l!==void 0?l:null,props:u}}return Dl.Fragment=t,Dl.jsx=i,Dl.jsxs=i,Dl}var lv;function $S(){return lv||(lv=1,Qd.exports=XS()),Qd.exports}var p=$S(),Xd={exports:{}},kt={};var uv;function WS(){if(uv)return kt;uv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),x=Symbol.iterator;function U(O){return O===null||typeof O!="object"?null:(O=x&&O[x]||O["@@iterator"],typeof O=="function"?O:null)}var J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,X={};function Z(O,G,st){this.props=O,this.context=G,this.refs=X,this.updater=st||J}Z.prototype.isReactComponent={},Z.prototype.setState=function(O,G){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,G,"setState")},Z.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ut(){}ut.prototype=Z.prototype;function _t(O,G,st){this.props=O,this.context=G,this.refs=X,this.updater=st||J}var Vt=_t.prototype=new ut;Vt.constructor=_t,W(Vt,Z.prototype),Vt.isPureReactComponent=!0;var at=Array.isArray;function bt(){}var k={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(O,G,st){var ot=st.ref;return{$$typeof:s,type:O,key:G,ref:ot!==void 0?ot:null,props:st}}function V(O,G){return C(O.type,G,O.props)}function N(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function j(O){var G={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(st){return G[st]})}var I=/\/+/g;function Xt(O,G){return typeof O=="object"&&O!==null&&O.key!=null?j(""+O.key):G.toString(36)}function B(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(bt,bt):(O.status="pending",O.then(function(G){O.status==="pending"&&(O.status="fulfilled",O.value=G)},function(G){O.status==="pending"&&(O.status="rejected",O.reason=G)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function R(O,G,st,ot,ft){var mt=typeof O;(mt==="undefined"||mt==="boolean")&&(O=null);var St=!1;if(O===null)St=!0;else switch(mt){case"bigint":case"string":case"number":St=!0;break;case"object":switch(O.$$typeof){case s:case t:St=!0;break;case b:return St=O._init,R(St(O._payload),G,st,ot,ft)}}if(St)return ft=ft(O),St=ot===""?"."+Xt(O,0):ot,at(ft)?(st="",St!=null&&(st=St.replace(I,"$&/")+"/"),R(ft,G,st,"",function(He){return He})):ft!=null&&(N(ft)&&(ft=V(ft,st+(ft.key==null||O&&O.key===ft.key?"":(""+ft.key).replace(I,"$&/")+"/")+St)),G.push(ft)),1;St=0;var ne=ot===""?".":ot+":";if(at(O))for(var Gt=0;Gt<O.length;Gt++)ot=O[Gt],mt=ne+Xt(ot,Gt),St+=R(ot,G,st,mt,ft);else if(Gt=U(O),typeof Gt=="function")for(O=Gt.call(O),Gt=0;!(ot=O.next()).done;)ot=ot.value,mt=ne+Xt(ot,Gt++),St+=R(ot,G,st,mt,ft);else if(mt==="object"){if(typeof O.then=="function")return R(B(O),G,st,ot,ft);throw G=String(O),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return St}function P(O,G,st){if(O==null)return O;var ot=[],ft=0;return R(O,ot,"","",function(mt){return G.call(st,mt,ft++)}),ot}function F(O){if(O._status===-1){var G=O._result;G=G(),G.then(function(st){(O._status===0||O._status===-1)&&(O._status=1,O._result=st)},function(st){(O._status===0||O._status===-1)&&(O._status=2,O._result=st)}),O._status===-1&&(O._status=0,O._result=G)}if(O._status===1)return O._result.default;throw O._result}var rt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},pt={map:P,forEach:function(O,G,st){P(O,function(){G.apply(this,arguments)},st)},count:function(O){var G=0;return P(O,function(){G++}),G},toArray:function(O){return P(O,function(G){return G})||[]},only:function(O){if(!N(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return kt.Activity=w,kt.Children=pt,kt.Component=Z,kt.Fragment=i,kt.Profiler=l,kt.PureComponent=_t,kt.StrictMode=r,kt.Suspense=y,kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,kt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return k.H.useMemoCache(O)}},kt.cache=function(O){return function(){return O.apply(null,arguments)}},kt.cacheSignal=function(){return null},kt.cloneElement=function(O,G,st){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ot=W({},O.props),ft=O.key;if(G!=null)for(mt in G.key!==void 0&&(ft=""+G.key),G)!S.call(G,mt)||mt==="key"||mt==="__self"||mt==="__source"||mt==="ref"&&G.ref===void 0||(ot[mt]=G[mt]);var mt=arguments.length-2;if(mt===1)ot.children=st;else if(1<mt){for(var St=Array(mt),ne=0;ne<mt;ne++)St[ne]=arguments[ne+2];ot.children=St}return C(O.type,ft,ot)},kt.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},kt.createElement=function(O,G,st){var ot,ft={},mt=null;if(G!=null)for(ot in G.key!==void 0&&(mt=""+G.key),G)S.call(G,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(ft[ot]=G[ot]);var St=arguments.length-2;if(St===1)ft.children=st;else if(1<St){for(var ne=Array(St),Gt=0;Gt<St;Gt++)ne[Gt]=arguments[Gt+2];ft.children=ne}if(O&&O.defaultProps)for(ot in St=O.defaultProps,St)ft[ot]===void 0&&(ft[ot]=St[ot]);return C(O,mt,ft)},kt.createRef=function(){return{current:null}},kt.forwardRef=function(O){return{$$typeof:m,render:O}},kt.isValidElement=N,kt.lazy=function(O){return{$$typeof:b,_payload:{_status:-1,_result:O},_init:F}},kt.memo=function(O,G){return{$$typeof:_,type:O,compare:G===void 0?null:G}},kt.startTransition=function(O){var G=k.T,st={};k.T=st;try{var ot=O(),ft=k.S;ft!==null&&ft(st,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(bt,rt)}catch(mt){rt(mt)}finally{G!==null&&st.types!==null&&(G.types=st.types),k.T=G}},kt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},kt.use=function(O){return k.H.use(O)},kt.useActionState=function(O,G,st){return k.H.useActionState(O,G,st)},kt.useCallback=function(O,G){return k.H.useCallback(O,G)},kt.useContext=function(O){return k.H.useContext(O)},kt.useDebugValue=function(){},kt.useDeferredValue=function(O,G){return k.H.useDeferredValue(O,G)},kt.useEffect=function(O,G){return k.H.useEffect(O,G)},kt.useEffectEvent=function(O){return k.H.useEffectEvent(O)},kt.useId=function(){return k.H.useId()},kt.useImperativeHandle=function(O,G,st){return k.H.useImperativeHandle(O,G,st)},kt.useInsertionEffect=function(O,G){return k.H.useInsertionEffect(O,G)},kt.useLayoutEffect=function(O,G){return k.H.useLayoutEffect(O,G)},kt.useMemo=function(O,G){return k.H.useMemo(O,G)},kt.useOptimistic=function(O,G){return k.H.useOptimistic(O,G)},kt.useReducer=function(O,G,st){return k.H.useReducer(O,G,st)},kt.useRef=function(O){return k.H.useRef(O)},kt.useState=function(O){return k.H.useState(O)},kt.useSyncExternalStore=function(O,G,st){return k.H.useSyncExternalStore(O,G,st)},kt.useTransition=function(){return k.H.useTransition()},kt.version="19.2.3",kt}var cv;function Hm(){return cv||(cv=1,Xd.exports=WS()),Xd.exports}var ht=Hm(),$d={exports:{}},Ol={},Wd={exports:{}},Jd={};var hv;function JS(){return hv||(hv=1,(function(s){function t(R,P){var F=R.length;R.push(P);t:for(;0<F;){var rt=F-1>>>1,pt=R[rt];if(0<l(pt,P))R[rt]=P,R[F]=pt,F=rt;else break t}}function i(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var P=R[0],F=R.pop();if(F!==P){R[0]=F;t:for(var rt=0,pt=R.length,O=pt>>>1;rt<O;){var G=2*(rt+1)-1,st=R[G],ot=G+1,ft=R[ot];if(0>l(st,F))ot<pt&&0>l(ft,st)?(R[rt]=ft,R[ot]=F,rt=ot):(R[rt]=st,R[G]=F,rt=G);else if(ot<pt&&0>l(ft,F))R[rt]=ft,R[ot]=F,rt=ot;else break t}}return P}function l(R,P){var F=R.sortIndex-P.sortIndex;return F!==0?F:R.id-P.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var y=[],_=[],b=1,w=null,x=3,U=!1,J=!1,W=!1,X=!1,Z=typeof setTimeout=="function"?setTimeout:null,ut=typeof clearTimeout=="function"?clearTimeout:null,_t=typeof setImmediate<"u"?setImmediate:null;function Vt(R){for(var P=i(_);P!==null;){if(P.callback===null)r(_);else if(P.startTime<=R)r(_),P.sortIndex=P.expirationTime,t(y,P);else break;P=i(_)}}function at(R){if(W=!1,Vt(R),!J)if(i(y)!==null)J=!0,bt||(bt=!0,j());else{var P=i(_);P!==null&&B(at,P.startTime-R)}}var bt=!1,k=-1,S=5,C=-1;function V(){return X?!0:!(s.unstable_now()-C<S)}function N(){if(X=!1,bt){var R=s.unstable_now();C=R;var P=!0;try{t:{J=!1,W&&(W=!1,ut(k),k=-1),U=!0;var F=x;try{e:{for(Vt(R),w=i(y);w!==null&&!(w.expirationTime>R&&V());){var rt=w.callback;if(typeof rt=="function"){w.callback=null,x=w.priorityLevel;var pt=rt(w.expirationTime<=R);if(R=s.unstable_now(),typeof pt=="function"){w.callback=pt,Vt(R),P=!0;break e}w===i(y)&&r(y),Vt(R)}else r(y);w=i(y)}if(w!==null)P=!0;else{var O=i(_);O!==null&&B(at,O.startTime-R),P=!1}}break t}finally{w=null,x=F,U=!1}P=void 0}}finally{P?j():bt=!1}}}var j;if(typeof _t=="function")j=function(){_t(N)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Xt=I.port2;I.port1.onmessage=N,j=function(){Xt.postMessage(null)}}else j=function(){Z(N,0)};function B(R,P){k=Z(function(){R(s.unstable_now())},P)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(R){R.callback=null},s.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<R?Math.floor(1e3/R):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(R){switch(x){case 1:case 2:case 3:var P=3;break;default:P=x}var F=x;x=P;try{return R()}finally{x=F}},s.unstable_requestPaint=function(){X=!0},s.unstable_runWithPriority=function(R,P){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var F=x;x=R;try{return P()}finally{x=F}},s.unstable_scheduleCallback=function(R,P,F){var rt=s.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?rt+F:rt):F=rt,R){case 1:var pt=-1;break;case 2:pt=250;break;case 5:pt=1073741823;break;case 4:pt=1e4;break;default:pt=5e3}return pt=F+pt,R={id:b++,callback:P,priorityLevel:R,startTime:F,expirationTime:pt,sortIndex:-1},F>rt?(R.sortIndex=F,t(_,R),i(y)===null&&R===i(_)&&(W?(ut(k),k=-1):W=!0,B(at,F-rt))):(R.sortIndex=pt,t(y,R),J||U||(J=!0,bt||(bt=!0,j()))),R},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(R){var P=x;return function(){var F=x;x=P;try{return R.apply(this,arguments)}finally{x=F}}}})(Jd)),Jd}var fv;function ZS(){return fv||(fv=1,Wd.exports=JS()),Wd.exports}var Zd={exports:{}},on={};var dv;function tA(){if(dv)return on;dv=1;var s=Hm();function t(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)_+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(y,_,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:y,containerInfo:_,implementation:b}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,on.createPortal=function(y,_){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(y,_,null,b)},on.flushSync=function(y){var _=f.T,b=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=_,r.p=b,r.d.f()}},on.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(y,_))},on.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},on.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var b=_.as,w=m(b,_.crossOrigin),x=typeof _.integrity=="string"?_.integrity:void 0,U=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;b==="style"?r.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:w,integrity:x,fetchPriority:U}):b==="script"&&r.d.X(y,{crossOrigin:w,integrity:x,fetchPriority:U,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},on.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var b=m(_.as,_.crossOrigin);r.d.M(y,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(y)},on.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var b=_.as,w=m(b,_.crossOrigin);r.d.L(y,b,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},on.preloadModule=function(y,_){if(typeof y=="string")if(_){var b=m(_.as,_.crossOrigin);r.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(y)},on.requestFormReset=function(y){r.d.r(y)},on.unstable_batchedUpdates=function(y,_){return y(_)},on.useFormState=function(y,_,b){return f.H.useFormState(y,_,b)},on.useFormStatus=function(){return f.H.useHostTransitionStatus()},on.version="19.2.3",on}var mv;function eA(){if(mv)return Zd.exports;mv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Zd.exports=tA(),Zd.exports}var pv;function nA(){if(pv)return Ol;pv=1;var s=ZS(),t=Hm(),i=eA();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function y(e){if(u(e)!==e)throw Error(r(188))}function _(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,o=n;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return y(h),e;if(d===o)return y(h),n;d=d.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=d;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,o=d;break}if(T===o){v=!0,o=h,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,o=h;break}if(T===o){v=!0,o=d,a=h;break}T=T.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function b(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=b(e),n!==null)return n;e=e.sibling}return null}var w=Object.assign,x=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),J=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),ut=Symbol.for("react.consumer"),_t=Symbol.for("react.context"),Vt=Symbol.for("react.forward_ref"),at=Symbol.for("react.suspense"),bt=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function j(e){return e===null||typeof e!="object"?null:(e=N&&e[N]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function Xt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case Z:return"Profiler";case X:return"StrictMode";case at:return"Suspense";case bt:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case J:return"Portal";case _t:return e.displayName||"Context";case ut:return(e._context.displayName||"Context")+".Consumer";case Vt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return n=e.displayName||null,n!==null?n:Xt(e.type)||"Memo";case S:n=e._payload,e=e._init;try{return Xt(e(n))}catch{}}return null}var B=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},rt=[],pt=-1;function O(e){return{current:e}}function G(e){0>pt||(e.current=rt[pt],rt[pt]=null,pt--)}function st(e,n){pt++,rt[pt]=e.current,e.current=n}var ot=O(null),ft=O(null),mt=O(null),St=O(null);function ne(e,n){switch(st(mt,n),st(ft,e),st(ot,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?k_(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=k_(n),e=N_(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}G(ot),st(ot,e)}function Gt(){G(ot),G(ft),G(mt)}function He(e){e.memoizedState!==null&&st(St,e);var n=ot.current,a=N_(n,e.type);n!==a&&(st(ft,e),st(ot,a))}function Rn(e){ft.current===e&&(G(ot),G(ft)),St.current===e&&(G(St),Cl._currentValue=F)}var ii,Ji;function yn(e){if(ii===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);ii=n&&n[1]||"",Ji=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ii+e+Ji}var Cs=!1;function zn(e,n){if(!e||Cs)return"";Cs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(Q){var K=Q}Reflect.construct(e,[],nt)}else{try{nt.call()}catch(Q){K=Q}e.call(nt.prototype)}}else{try{throw Error()}catch(Q){K=Q}(nt=e())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var D=v.split(`
`),H=T.split(`
`);for(h=o=0;o<D.length&&!D[o].includes("DetermineComponentFrameRoot");)o++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(o===D.length||h===H.length)for(o=D.length-1,h=H.length-1;1<=o&&0<=h&&D[o]!==H[h];)h--;for(;1<=o&&0<=h;o--,h--)if(D[o]!==H[h]){if(o!==1||h!==1)do if(o--,h--,0>h||D[o]!==H[h]){var $=`
`+D[o].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=o&&0<=h);break}}}finally{Cs=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?yn(a):""}function ga(e,n){switch(e.tag){case 26:case 27:case 5:return yn(e.type);case 16:return yn("Lazy");case 13:return e.child!==n&&n!==null?yn("Suspense Fallback"):yn("Suspense");case 19:return yn("SuspenseList");case 0:case 15:return zn(e.type,!1);case 11:return zn(e.type.render,!1);case 1:return zn(e.type,!0);case 31:return yn("Activity");default:return""}}function Is(e){try{var n="",a=null;do n+=ga(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ye=Object.prototype.hasOwnProperty,vt=s.unstable_scheduleCallback,At=s.unstable_cancelCallback,he=s.unstable_shouldYield,ze=s.unstable_requestPaint,ie=s.unstable_now,an=s.unstable_getCurrentPriorityLevel,Xe=s.unstable_ImmediatePriority,Cn=s.unstable_UserBlockingPriority,Fe=s.unstable_NormalPriority,ya=s.unstable_LowPriority,Kt=s.unstable_IdlePriority,si=s.log,Bn=s.unstable_setDisableYieldValue,fn=null,$e=null;function qn(e){if(typeof si=="function"&&Bn(e),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(fn,e)}catch{}}var Se=Math.clz32?Math.clz32:vu,_u=Math.log,_a=Math.LN2;function vu(e){return e>>>=0,e===0?32:31-(_u(e)/_a|0)|0}var Ei=256,Ir=262144,Ie=4194304;function Ti(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function bi(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var T=o&134217727;return T!==0?(o=T&~d,o!==0?h=Ti(o):(v&=T,v!==0?h=Ti(v):a||(a=T&~e,a!==0&&(h=Ti(a))))):(T=o&~d,T!==0?h=Ti(T):v!==0?h=Ti(v):a||(a=o&~e,a!==0&&(h=Ti(a)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:h}function ri(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Wh(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Eu(){var e=Ie;return Ie<<=1,(Ie&62914560)===0&&(Ie=4194304),e}function Si(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function kr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Jh(e,n,a,o,h,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var T=e.entanglements,D=e.expirationTimes,H=e.hiddenUpdates;for(a=v&~a;0<a;){var $=31-Se(a),nt=1<<$;T[$]=0,D[$]=-1;var K=H[$];if(K!==null)for(H[$]=null,$=0;$<K.length;$++){var Q=K[$];Q!==null&&(Q.lane&=-536870913)}a&=~nt}o!==0&&Nr(e,o,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~n))}function Nr(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Se(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function Oo(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-Se(a),h=1<<o;h&n|e[o]&n&&(e[o]|=n),a&=~h}}function Vo(e,n){var a=n&-n;return a=(a&42)!==0?1:Dr(a),(a&(e.suspendedLanes|n))!==0?0:a}function Dr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Zi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Tu(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:tv(e.type))}function ai(e,n){var a=P.p;try{return P.p=e,n()}finally{P.p=a}}var oi=Math.random().toString(36).slice(2),ke="__reactFiber$"+oi,Ge="__reactProps$"+oi,Ai="__reactContainer$"+oi,va="__reactEvents$"+oi,Zh="__reactListeners$"+oi,bu="__reactHandles$"+oi,Su="__reactResources$"+oi,wi="__reactMarker$"+oi;function Ea(e){delete e[ke],delete e[Ge],delete e[va],delete e[Zh],delete e[bu]}function xi(e){var n=e[ke];if(n)return n;for(var a=e.parentNode;a;){if(n=a[Ai]||a[ke]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=P_(e);e!==null;){if(a=e[ke])return a;e=P_(e)}return n}e=a,a=e.parentNode}return null}function Hn(e){if(e=e[ke]||e[Ai]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function In(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function Ri(e){var n=e[Su];return n||(n=e[Su]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ne(e){e[wi]=!0}var Mo=new Set,jo={};function Ci(e,n){Ii(e,n),Ii(e+"Capture",n)}function Ii(e,n){for(jo[e]=n,e=0;e<n.length;e++)Mo.add(n[e])}var Lo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Po={},Uo={};function Au(e){return ye.call(Uo,e)?!0:ye.call(Po,e)?!1:Lo.test(e)?Uo[e]=!0:(Po[e]=!0,!1)}function Ta(e,n,a){if(Au(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function kn(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function De(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function Ke(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ks(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function zo(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Zt(e){if(!e._valueTracker){var n=ks(e)?"checked":"value";e._valueTracker=zo(e,n,""+e[n])}}function Or(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=ks(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function ki(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Vr=/[\n"\\]/g;function _n(e){return e.replace(Vr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ba(e,n,a,o,h,d,v,T){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Ke(n)):e.value!==""+Ke(n)&&(e.value=""+Ke(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?Bo(e,v,Ke(n)):a!=null?Bo(e,v,Ke(a)):o!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+Ke(T):e.removeAttribute("name")}function wu(e,n,a,o,h,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){Zt(e);return}a=a!=null?""+Ke(a):"",n=n!=null?""+Ke(n):a,T||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=T?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Zt(e)}function Bo(e,n,a){n==="number"&&ki(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ns(e,n,a,o){if(e=e.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=n.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Ke(a),n=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function xu(e,n,a){if(n!=null&&(n=""+Ke(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Ke(a):""}function Ds(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(r(92));if(B(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=Ke(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),Zt(e)}function vn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Ru=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qo(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||Ru.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Ho(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&qo(e,h,o)}else for(var d in n)n.hasOwnProperty(d)&&qo(e,d,n[d])}function Sa(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Os=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Aa(e){return Os.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function li(){}var Fo=null;function Fn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vs=null,Ni=null;function Mr(e){var n=Hn(e);if(n&&(e=n.stateNode)){var a=e[Ge]||null;t:switch(e=n.stateNode,n.type){case"input":if(ba(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+_n(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var h=o[Ge]||null;if(!h)throw Error(r(90));ba(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&Or(o)}break t;case"textarea":xu(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Ns(e,!!a.multiple,n,!1)}}}var wa=!1;function Ms(e,n,a){if(wa)return e(n,a);wa=!0;try{var o=e(n);return o}finally{if(wa=!1,(Vs!==null||Ni!==null)&&(Tc(),Vs&&(n=Vs,e=Ni,Ni=Vs=null,Mr(n),e)))for(n=0;n<e.length;n++)Mr(e[n])}}function ui(e,n){var a=e.stateNode;if(a===null)return null;var o=a[Ge]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jr=!1;if(Gn)try{var se={};Object.defineProperty(se,"passive",{get:function(){jr=!0}}),window.addEventListener("test",se,se),window.removeEventListener("test",se,se)}catch{jr=!1}var Di=null,Go=null,Lr=null;function Ko(){if(Lr)return Lr;var e,n=Go,a=n.length,o,h="value"in Di?Di.value:Di.textContent,d=h.length;for(e=0;e<a&&n[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&n[a-o]===h[d-o];o++);return Lr=h.slice(e,1<o?1-o:void 0)}function Pr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ts(){return!0}function ci(){return!1}function We(e){function n(a,o,h,d,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(a=e[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ts:ci,this.isPropagationStopped=ci,this}return w(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),n}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oi=We(es),js=w({},es,{view:0,detail:0}),Yo=We(js),Ls,xa,Vi,Ra=w({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vi&&(Vi&&e.type==="mousemove"?(Ls=e.screenX-Vi.screenX,xa=e.screenY-Vi.screenY):xa=Ls=0,Vi=e),Ls)},movementY:function(e){return"movementY"in e?e.movementY:xa}}),Qo=We(Ra),Ur=w({},Ra,{dataTransfer:0}),Iu=We(Ur),ku=w({},js,{relatedTarget:0}),zr=We(ku),Xo=w({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),Nu=We(Xo),Ca=w({},es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Du=We(Ca),Ou=w({},es,{data:0}),Mi=We(Ou),Vu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lu(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ju[e])?!!n[e]:!1}function Ps(){return Lu}var dn=w({},js,{key:function(e){if(e.key){var n=Vu[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Pr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(e){return e.type==="keypress"?Pr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pu=We(dn),Uu=w({},Ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ns=We(Uu),c=w({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),g=We(c),E=w({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=We(E),z=w({},Ra,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=We(z),lt=w({},es,{newState:0,oldState:0}),Dt=We(lt),Ae=[9,13,27,32],$t=Gn&&"CompositionEvent"in window,pe=null;Gn&&"documentMode"in document&&(pe=document.documentMode);var Kn=Gn&&"TextEvent"in window&&!pe,ji=Gn&&(!$t||pe&&8<pe&&11>=pe),hi=" ",fi=!1;function Br(e,n){switch(e){case"keyup":return Ae.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ia(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ka=!1;function vb(e,n){switch(e){case"compositionend":return Ia(n);case"keypress":return n.which!==32?null:(fi=!0,hi);case"textInput":return e=n.data,e===hi&&fi?null:e;default:return null}}function Eb(e,n){if(ka)return e==="compositionend"||!$t&&Br(e,n)?(e=Ko(),Lr=Go=Di=null,ka=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ji&&n.locale!=="ko"?null:n.data;default:return null}}var Tb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bp(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Tb[e.type]:n==="textarea"}function qp(e,n,a,o){Vs?Ni?Ni.push(o):Ni=[o]:Vs=o,n=Cc(n,"onChange"),0<n.length&&(a=new Oi("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var $o=null,Wo=null;function bb(e){A_(e,0)}function zu(e){var n=In(e);if(Or(n))return e}function Hp(e,n){if(e==="change")return n}var Fp=!1;if(Gn){var tf;if(Gn){var ef="oninput"in document;if(!ef){var Gp=document.createElement("div");Gp.setAttribute("oninput","return;"),ef=typeof Gp.oninput=="function"}tf=ef}else tf=!1;Fp=tf&&(!document.documentMode||9<document.documentMode)}function Kp(){$o&&($o.detachEvent("onpropertychange",Yp),Wo=$o=null)}function Yp(e){if(e.propertyName==="value"&&zu(Wo)){var n=[];qp(n,Wo,e,Fn(e)),Ms(bb,n)}}function Sb(e,n,a){e==="focusin"?(Kp(),$o=n,Wo=a,$o.attachEvent("onpropertychange",Yp)):e==="focusout"&&Kp()}function Ab(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zu(Wo)}function wb(e,n){if(e==="click")return zu(n)}function xb(e,n){if(e==="input"||e==="change")return zu(n)}function Rb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Nn=typeof Object.is=="function"?Object.is:Rb;function Jo(e,n){if(Nn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!ye.call(n,h)||!Nn(e[h],n[h]))return!1}return!0}function Qp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xp(e,n){var a=Qp(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Qp(a)}}function $p(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?$p(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Wp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ki(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=ki(e.document)}return n}function nf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Cb=Gn&&"documentMode"in document&&11>=document.documentMode,Na=null,sf=null,Zo=null,rf=!1;function Jp(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;rf||Na==null||Na!==ki(o)||(o=Na,"selectionStart"in o&&nf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Zo&&Jo(Zo,o)||(Zo=o,o=Cc(sf,"onSelect"),0<o.length&&(n=new Oi("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=Na)))}function qr(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Da={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionrun:qr("Transition","TransitionRun"),transitionstart:qr("Transition","TransitionStart"),transitioncancel:qr("Transition","TransitionCancel"),transitionend:qr("Transition","TransitionEnd")},af={},Zp={};Gn&&(Zp=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function Hr(e){if(af[e])return af[e];if(!Da[e])return e;var n=Da[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Zp)return af[e]=n[a];return e}var tg=Hr("animationend"),eg=Hr("animationiteration"),ng=Hr("animationstart"),Ib=Hr("transitionrun"),kb=Hr("transitionstart"),Nb=Hr("transitioncancel"),ig=Hr("transitionend"),sg=new Map,of="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");of.push("scrollEnd");function di(e,n){sg.set(e,n),Ci(n,[e])}var Bu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Yn=[],Oa=0,lf=0;function qu(){for(var e=Oa,n=lf=Oa=0;n<e;){var a=Yn[n];Yn[n++]=null;var o=Yn[n];Yn[n++]=null;var h=Yn[n];Yn[n++]=null;var d=Yn[n];if(Yn[n++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&rg(a,h,d)}}function Hu(e,n,a,o){Yn[Oa++]=e,Yn[Oa++]=n,Yn[Oa++]=a,Yn[Oa++]=o,lf|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function uf(e,n,a,o){return Hu(e,n,a,o),Fu(e)}function Fr(e,n){return Hu(e,null,null,n),Fu(e)}function rg(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&n!==null&&(h=31-Se(a),e=d.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=a|536870912),d):null}function Fu(e){if(50<Tl)throw Tl=0,_d=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Va={};function Db(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(e,n,a,o){return new Db(e,n,a,o)}function cf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function is(e,n){var a=e.alternate;return a===null?(a=Dn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ag(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Gu(e,n,a,o,h,d){var v=0;if(o=e,typeof e=="function")cf(e)&&(v=1);else if(typeof e=="string")v=LS(e,a,ot.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=Dn(31,a,n,h),e.elementType=C,e.lanes=d,e;case W:return Gr(a.children,h,d,n);case X:v=8,h|=24;break;case Z:return e=Dn(12,a,n,h|2),e.elementType=Z,e.lanes=d,e;case at:return e=Dn(13,a,n,h),e.elementType=at,e.lanes=d,e;case bt:return e=Dn(19,a,n,h),e.elementType=bt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _t:v=10;break t;case ut:v=9;break t;case Vt:v=11;break t;case k:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(r(130,e===null?"null":typeof e,"")),o=null}return n=Dn(v,a,n,h),n.elementType=e,n.type=o,n.lanes=d,n}function Gr(e,n,a,o){return e=Dn(7,e,o,n),e.lanes=a,e}function hf(e,n,a){return e=Dn(6,e,null,n),e.lanes=a,e}function og(e){var n=Dn(18,null,null,0);return n.stateNode=e,n}function ff(e,n,a){return n=Dn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var lg=new WeakMap;function Qn(e,n){if(typeof e=="object"&&e!==null){var a=lg.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Is(n)},lg.set(e,n),n)}return{value:e,source:n,stack:Is(n)}}var Ma=[],ja=0,Ku=null,tl=0,Xn=[],$n=0,Us=null,Li=1,Pi="";function ss(e,n){Ma[ja++]=tl,Ma[ja++]=Ku,Ku=e,tl=n}function ug(e,n,a){Xn[$n++]=Li,Xn[$n++]=Pi,Xn[$n++]=Us,Us=e;var o=Li;e=Pi;var h=32-Se(o)-1;o&=~(1<<h),a+=1;var d=32-Se(n)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Li=1<<32-Se(n)+h|a<<h|o,Pi=d+e}else Li=1<<d|a<<h|o,Pi=e}function df(e){e.return!==null&&(ss(e,1),ug(e,1,0))}function mf(e){for(;e===Ku;)Ku=Ma[--ja],Ma[ja]=null,tl=Ma[--ja],Ma[ja]=null;for(;e===Us;)Us=Xn[--$n],Xn[$n]=null,Pi=Xn[--$n],Xn[$n]=null,Li=Xn[--$n],Xn[$n]=null}function cg(e,n){Xn[$n++]=Li,Xn[$n++]=Pi,Xn[$n++]=Us,Li=n.id,Pi=n.overflow,Us=e}var Je=null,fe=null,Ht=!1,zs=null,Wn=!1,pf=Error(r(519));function Bs(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw el(Qn(n,e)),pf}function hg(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[ke]=e,n[Ge]=o,a){case"dialog":Lt("cancel",n),Lt("close",n);break;case"iframe":case"object":case"embed":Lt("load",n);break;case"video":case"audio":for(a=0;a<Sl.length;a++)Lt(Sl[a],n);break;case"source":Lt("error",n);break;case"img":case"image":case"link":Lt("error",n),Lt("load",n);break;case"details":Lt("toggle",n);break;case"input":Lt("invalid",n),wu(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Lt("invalid",n);break;case"textarea":Lt("invalid",n),Ds(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||C_(n.textContent,a)?(o.popover!=null&&(Lt("beforetoggle",n),Lt("toggle",n)),o.onScroll!=null&&Lt("scroll",n),o.onScrollEnd!=null&&Lt("scrollend",n),o.onClick!=null&&(n.onclick=li),n=!0):n=!1,n||Bs(e,!0)}function fg(e){for(Je=e.return;Je;)switch(Je.tag){case 5:case 31:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:Je=Je.return}}function La(e){if(e!==Je)return!1;if(!Ht)return fg(e),Ht=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Od(e.type,e.memoizedProps)),a=!a),a&&fe&&Bs(e),fg(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));fe=L_(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));fe=L_(e)}else n===27?(n=fe,er(e.type)?(e=Pd,Pd=null,fe=e):fe=n):fe=Je?Zn(e.stateNode.nextSibling):null;return!0}function Kr(){fe=Je=null,Ht=!1}function gf(){var e=zs;return e!==null&&(Sn===null?Sn=e:Sn.push.apply(Sn,e),zs=null),e}function el(e){zs===null?zs=[e]:zs.push(e)}var yf=O(null),Yr=null,rs=null;function qs(e,n,a){st(yf,n._currentValue),n._currentValue=a}function as(e){e._currentValue=yf.current,G(yf)}function _f(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function vf(e,n,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=h;for(var D=0;D<n.length;D++)if(T.context===n[D]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),_f(d.return,a,e),o||(v=null);break t}d=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),_f(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Pa(e,n,a,o){e=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=h.type;Nn(h.pendingProps.value,v.value)||(e!==null?e.push(T):e=[T])}}else if(h===St.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Cl):e=[Cl])}h=h.return}e!==null&&vf(n,e,a,o),n.flags|=262144}function Yu(e){for(e=e.firstContext;e!==null;){if(!Nn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qr(e){Yr=e,rs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ze(e){return dg(Yr,e)}function Qu(e,n){return Yr===null&&Qr(e),dg(e,n)}function dg(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},rs===null){if(e===null)throw Error(r(308));rs=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else rs=rs.next=n;return a}var Ob=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Vb=s.unstable_scheduleCallback,Mb=s.unstable_NormalPriority,Oe={$$typeof:_t,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ef(){return{controller:new Ob,data:new Map,refCount:0}}function nl(e){e.refCount--,e.refCount===0&&Vb(Mb,function(){e.controller.abort()})}var il=null,Tf=0,Ua=0,za=null;function jb(e,n){if(il===null){var a=il=[];Tf=0,Ua=Ad(),za={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Tf++,n.then(mg,mg),n}function mg(){if(--Tf===0&&il!==null){za!==null&&(za.status="fulfilled");var e=il;il=null,Ua=0,za=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Lb(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var pg=R.S;R.S=function(e,n){Jy=ie(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&jb(e,n),pg!==null&&pg(e,n)};var Xr=O(null);function bf(){var e=Xr.current;return e!==null?e:le.pooledCache}function Xu(e,n){n===null?st(Xr,Xr.current):st(Xr,n.pool)}function gg(){var e=bf();return e===null?null:{parent:Oe._currentValue,pool:e}}var Ba=Error(r(460)),Sf=Error(r(474)),$u=Error(r(542)),Wu={then:function(){}};function yg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function _g(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(li,li),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Eg(e),e;default:if(typeof n.status=="string")n.then(li,li);else{if(e=le,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Eg(e),e}throw Wr=n,Ba}}function $r(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Wr=a,Ba):a}}var Wr=null;function vg(){if(Wr===null)throw Error(r(459));var e=Wr;return Wr=null,e}function Eg(e){if(e===Ba||e===$u)throw Error(r(483))}var qa=null,sl=0;function Ju(e){var n=sl;return sl+=1,qa===null&&(qa=[]),_g(qa,e,n)}function rl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Zu(e,n){throw n.$$typeof===x?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Tg(e){function n(L,M){if(e){var q=L.deletions;q===null?(L.deletions=[M],L.flags|=16):q.push(M)}}function a(L,M){if(!e)return null;for(;M!==null;)n(L,M),M=M.sibling;return null}function o(L){for(var M=new Map;L!==null;)L.key!==null?M.set(L.key,L):M.set(L.index,L),L=L.sibling;return M}function h(L,M){return L=is(L,M),L.index=0,L.sibling=null,L}function d(L,M,q){return L.index=q,e?(q=L.alternate,q!==null?(q=q.index,q<M?(L.flags|=67108866,M):q):(L.flags|=67108866,M)):(L.flags|=1048576,M)}function v(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function T(L,M,q,tt){return M===null||M.tag!==6?(M=hf(q,L.mode,tt),M.return=L,M):(M=h(M,q),M.return=L,M)}function D(L,M,q,tt){var Et=q.type;return Et===W?$(L,M,q.props.children,tt,q.key):M!==null&&(M.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===S&&$r(Et)===M.type)?(M=h(M,q.props),rl(M,q),M.return=L,M):(M=Gu(q.type,q.key,q.props,null,L.mode,tt),rl(M,q),M.return=L,M)}function H(L,M,q,tt){return M===null||M.tag!==4||M.stateNode.containerInfo!==q.containerInfo||M.stateNode.implementation!==q.implementation?(M=ff(q,L.mode,tt),M.return=L,M):(M=h(M,q.children||[]),M.return=L,M)}function $(L,M,q,tt,Et){return M===null||M.tag!==7?(M=Gr(q,L.mode,tt,Et),M.return=L,M):(M=h(M,q),M.return=L,M)}function nt(L,M,q){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=hf(""+M,L.mode,q),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case U:return q=Gu(M.type,M.key,M.props,null,L.mode,q),rl(q,M),q.return=L,q;case J:return M=ff(M,L.mode,q),M.return=L,M;case S:return M=$r(M),nt(L,M,q)}if(B(M)||j(M))return M=Gr(M,L.mode,q,null),M.return=L,M;if(typeof M.then=="function")return nt(L,Ju(M),q);if(M.$$typeof===_t)return nt(L,Qu(L,M),q);Zu(L,M)}return null}function K(L,M,q,tt){var Et=M!==null?M.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Et!==null?null:T(L,M,""+q,tt);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case U:return q.key===Et?D(L,M,q,tt):null;case J:return q.key===Et?H(L,M,q,tt):null;case S:return q=$r(q),K(L,M,q,tt)}if(B(q)||j(q))return Et!==null?null:$(L,M,q,tt,null);if(typeof q.then=="function")return K(L,M,Ju(q),tt);if(q.$$typeof===_t)return K(L,M,Qu(L,q),tt);Zu(L,q)}return null}function Q(L,M,q,tt,Et){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return L=L.get(q)||null,T(M,L,""+tt,Et);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case U:return L=L.get(tt.key===null?q:tt.key)||null,D(M,L,tt,Et);case J:return L=L.get(tt.key===null?q:tt.key)||null,H(M,L,tt,Et);case S:return tt=$r(tt),Q(L,M,q,tt,Et)}if(B(tt)||j(tt))return L=L.get(q)||null,$(M,L,tt,Et,null);if(typeof tt.then=="function")return Q(L,M,q,Ju(tt),Et);if(tt.$$typeof===_t)return Q(L,M,q,Qu(M,tt),Et);Zu(M,tt)}return null}function gt(L,M,q,tt){for(var Et=null,Yt=null,yt=M,Mt=M=0,Ut=null;yt!==null&&Mt<q.length;Mt++){yt.index>Mt?(Ut=yt,yt=null):Ut=yt.sibling;var Qt=K(L,yt,q[Mt],tt);if(Qt===null){yt===null&&(yt=Ut);break}e&&yt&&Qt.alternate===null&&n(L,yt),M=d(Qt,M,Mt),Yt===null?Et=Qt:Yt.sibling=Qt,Yt=Qt,yt=Ut}if(Mt===q.length)return a(L,yt),Ht&&ss(L,Mt),Et;if(yt===null){for(;Mt<q.length;Mt++)yt=nt(L,q[Mt],tt),yt!==null&&(M=d(yt,M,Mt),Yt===null?Et=yt:Yt.sibling=yt,Yt=yt);return Ht&&ss(L,Mt),Et}for(yt=o(yt);Mt<q.length;Mt++)Ut=Q(yt,L,Mt,q[Mt],tt),Ut!==null&&(e&&Ut.alternate!==null&&yt.delete(Ut.key===null?Mt:Ut.key),M=d(Ut,M,Mt),Yt===null?Et=Ut:Yt.sibling=Ut,Yt=Ut);return e&&yt.forEach(function(ar){return n(L,ar)}),Ht&&ss(L,Mt),Et}function wt(L,M,q,tt){if(q==null)throw Error(r(151));for(var Et=null,Yt=null,yt=M,Mt=M=0,Ut=null,Qt=q.next();yt!==null&&!Qt.done;Mt++,Qt=q.next()){yt.index>Mt?(Ut=yt,yt=null):Ut=yt.sibling;var ar=K(L,yt,Qt.value,tt);if(ar===null){yt===null&&(yt=Ut);break}e&&yt&&ar.alternate===null&&n(L,yt),M=d(ar,M,Mt),Yt===null?Et=ar:Yt.sibling=ar,Yt=ar,yt=Ut}if(Qt.done)return a(L,yt),Ht&&ss(L,Mt),Et;if(yt===null){for(;!Qt.done;Mt++,Qt=q.next())Qt=nt(L,Qt.value,tt),Qt!==null&&(M=d(Qt,M,Mt),Yt===null?Et=Qt:Yt.sibling=Qt,Yt=Qt);return Ht&&ss(L,Mt),Et}for(yt=o(yt);!Qt.done;Mt++,Qt=q.next())Qt=Q(yt,L,Mt,Qt.value,tt),Qt!==null&&(e&&Qt.alternate!==null&&yt.delete(Qt.key===null?Mt:Qt.key),M=d(Qt,M,Mt),Yt===null?Et=Qt:Yt.sibling=Qt,Yt=Qt);return e&&yt.forEach(function(QS){return n(L,QS)}),Ht&&ss(L,Mt),Et}function oe(L,M,q,tt){if(typeof q=="object"&&q!==null&&q.type===W&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case U:t:{for(var Et=q.key;M!==null;){if(M.key===Et){if(Et=q.type,Et===W){if(M.tag===7){a(L,M.sibling),tt=h(M,q.props.children),tt.return=L,L=tt;break t}}else if(M.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===S&&$r(Et)===M.type){a(L,M.sibling),tt=h(M,q.props),rl(tt,q),tt.return=L,L=tt;break t}a(L,M);break}else n(L,M);M=M.sibling}q.type===W?(tt=Gr(q.props.children,L.mode,tt,q.key),tt.return=L,L=tt):(tt=Gu(q.type,q.key,q.props,null,L.mode,tt),rl(tt,q),tt.return=L,L=tt)}return v(L);case J:t:{for(Et=q.key;M!==null;){if(M.key===Et)if(M.tag===4&&M.stateNode.containerInfo===q.containerInfo&&M.stateNode.implementation===q.implementation){a(L,M.sibling),tt=h(M,q.children||[]),tt.return=L,L=tt;break t}else{a(L,M);break}else n(L,M);M=M.sibling}tt=ff(q,L.mode,tt),tt.return=L,L=tt}return v(L);case S:return q=$r(q),oe(L,M,q,tt)}if(B(q))return gt(L,M,q,tt);if(j(q)){if(Et=j(q),typeof Et!="function")throw Error(r(150));return q=Et.call(q),wt(L,M,q,tt)}if(typeof q.then=="function")return oe(L,M,Ju(q),tt);if(q.$$typeof===_t)return oe(L,M,Qu(L,q),tt);Zu(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,M!==null&&M.tag===6?(a(L,M.sibling),tt=h(M,q),tt.return=L,L=tt):(a(L,M),tt=hf(q,L.mode,tt),tt.return=L,L=tt),v(L)):a(L,M)}return function(L,M,q,tt){try{sl=0;var Et=oe(L,M,q,tt);return qa=null,Et}catch(yt){if(yt===Ba||yt===$u)throw yt;var Yt=Dn(29,yt,null,L.mode);return Yt.lanes=tt,Yt.return=L,Yt}}}var Jr=Tg(!0),bg=Tg(!1),Hs=!1;function Af(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Fs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Gs(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Wt&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=Fu(e),rg(e,null,a),n}return Hu(e,o,n,a),Fu(e)}function al(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Oo(e,a)}}function xf(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=n:d=d.next=n}else h=d=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Rf=!1;function ol(){if(Rf){var e=za;if(e!==null)throw e}}function ll(e,n,a,o){Rf=!1;var h=e.updateQueue;Hs=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var D=T,H=D.next;D.next=null,v===null?d=H:v.next=H,v=D;var $=e.alternate;$!==null&&($=$.updateQueue,T=$.lastBaseUpdate,T!==v&&(T===null?$.firstBaseUpdate=H:T.next=H,$.lastBaseUpdate=D))}if(d!==null){var nt=h.baseState;v=0,$=H=D=null,T=d;do{var K=T.lane&-536870913,Q=K!==T.lane;if(Q?(Pt&K)===K:(o&K)===K){K!==0&&K===Ua&&(Rf=!0),$!==null&&($=$.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var gt=e,wt=T;K=n;var oe=a;switch(wt.tag){case 1:if(gt=wt.payload,typeof gt=="function"){nt=gt.call(oe,nt,K);break t}nt=gt;break t;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=wt.payload,K=typeof gt=="function"?gt.call(oe,nt,K):gt,K==null)break t;nt=w({},nt,K);break t;case 2:Hs=!0}}K=T.callback,K!==null&&(e.flags|=64,Q&&(e.flags|=8192),Q=h.callbacks,Q===null?h.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},$===null?(H=$=Q,D=nt):$=$.next=Q,v|=K;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);$===null&&(D=nt),h.baseState=D,h.firstBaseUpdate=H,h.lastBaseUpdate=$,d===null&&(h.shared.lanes=0),$s|=v,e.lanes=v,e.memoizedState=nt}}function Sg(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function Ag(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Sg(a[e],n)}var Ha=O(null),tc=O(0);function wg(e,n){e=ps,st(tc,e),st(Ha,n),ps=e|n.baseLanes}function Cf(){st(tc,ps),st(Ha,Ha.current)}function If(){ps=tc.current,G(Ha),G(tc)}var On=O(null),Jn=null;function Ks(e){var n=e.alternate;st(we,we.current&1),st(On,e),Jn===null&&(n===null||Ha.current!==null||n.memoizedState!==null)&&(Jn=e)}function kf(e){st(we,we.current),st(On,e),Jn===null&&(Jn=e)}function xg(e){e.tag===22?(st(we,we.current),st(On,e),Jn===null&&(Jn=e)):Ys()}function Ys(){st(we,we.current),st(On,On.current)}function Vn(e){G(On),Jn===e&&(Jn=null),G(we)}var we=O(0);function ec(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||jd(a)||Ld(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var os=0,Ot=null,re=null,Ve=null,nc=!1,Fa=!1,Zr=!1,ic=0,ul=0,Ga=null,Pb=0;function Ee(){throw Error(r(321))}function Nf(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Nn(e[a],n[a]))return!1;return!0}function Df(e,n,a,o,h,d){return os=d,Ot=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,R.H=e===null||e.memoizedState===null?uy:Yf,Zr=!1,d=a(o,h),Zr=!1,Fa&&(d=Cg(n,a,o,h)),Rg(e),d}function Rg(e){R.H=fl;var n=re!==null&&re.next!==null;if(os=0,Ve=re=Ot=null,nc=!1,ul=0,Ga=null,n)throw Error(r(300));e===null||Me||(e=e.dependencies,e!==null&&Yu(e)&&(Me=!0))}function Cg(e,n,a,o){Ot=e;var h=0;do{if(Fa&&(Ga=null),ul=0,Fa=!1,25<=h)throw Error(r(301));if(h+=1,Ve=re=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}R.H=cy,d=n(a,o)}while(Fa);return d}function Ub(){var e=R.H,n=e.useState()[0];return n=typeof n.then=="function"?cl(n):n,e=e.useState()[0],(re!==null?re.memoizedState:null)!==e&&(Ot.flags|=1024),n}function Of(){var e=ic!==0;return ic=0,e}function Vf(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Mf(e){if(nc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}nc=!1}os=0,Ve=re=Ot=null,Fa=!1,ul=ic=0,Ga=null}function mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Ot.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function xe(){if(re===null){var e=Ot.alternate;e=e!==null?e.memoizedState:null}else e=re.next;var n=Ve===null?Ot.memoizedState:Ve.next;if(n!==null)Ve=n,re=e;else{if(e===null)throw Ot.alternate===null?Error(r(467)):Error(r(310));re=e,e={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},Ve===null?Ot.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cl(e){var n=ul;return ul+=1,Ga===null&&(Ga=[]),e=_g(Ga,e,n),n=Ot,(Ve===null?n.memoizedState:Ve.next)===null&&(n=n.alternate,R.H=n===null||n.memoizedState===null?uy:Yf),e}function rc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return cl(e);if(e.$$typeof===_t)return Ze(e)}throw Error(r(438,String(e)))}function jf(e){var n=null,a=Ot.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Ot.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=sc(),Ot.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=V;return n.index++,a}function ls(e,n){return typeof n=="function"?n(e):n}function ac(e){var n=xe();return Lf(n,re,e)}function Lf(e,n,a){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=e.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}n.baseQueue=h=d,o.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{n=h.next;var T=v=null,D=null,H=n,$=!1;do{var nt=H.lane&-536870913;if(nt!==H.lane?(Pt&nt)===nt:(os&nt)===nt){var K=H.revertLane;if(K===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),nt===Ua&&($=!0);else if((os&K)===K){H=H.next,K===Ua&&($=!0);continue}else nt={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},D===null?(T=D=nt,v=d):D=D.next=nt,Ot.lanes|=K,$s|=K;nt=H.action,Zr&&a(d,nt),d=H.hasEagerState?H.eagerState:a(d,nt)}else K={lane:nt,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},D===null?(T=D=K,v=d):D=D.next=K,Ot.lanes|=nt,$s|=nt;H=H.next}while(H!==null&&H!==n);if(D===null?v=d:D.next=T,!Nn(d,e.memoizedState)&&(Me=!0,$&&(a=za,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=D,o.lastRenderedState=d}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Pf(e){var n=xe(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,d=n.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);Nn(d,n.memoizedState)||(Me=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,o]}function Ig(e,n,a){var o=Ot,h=xe(),d=Ht;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=n();var v=!Nn((re||h).memoizedState,a);if(v&&(h.memoizedState=a,Me=!0),h=h.queue,Bf(Dg.bind(null,o,h,e),[e]),h.getSnapshot!==n||v||Ve!==null&&Ve.memoizedState.tag&1){if(o.flags|=2048,Ka(9,{destroy:void 0},Ng.bind(null,o,h,a,n),null),le===null)throw Error(r(349));d||(os&127)!==0||kg(o,n,a)}return a}function kg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=Ot.updateQueue,n===null?(n=sc(),Ot.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Ng(e,n,a,o){n.value=a,n.getSnapshot=o,Og(n)&&Vg(e)}function Dg(e,n,a){return a(function(){Og(n)&&Vg(e)})}function Og(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Nn(e,a)}catch{return!0}}function Vg(e){var n=Fr(e,2);n!==null&&An(n,e,2)}function Uf(e){var n=mn();if(typeof e=="function"){var a=e;if(e=a(),Zr){qn(!0);try{a()}finally{qn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:e},n}function Mg(e,n,a,o){return e.baseState=a,Lf(e,re,typeof o=="function"?o:ls)}function zb(e,n,a,o,h){if(uc(e))throw Error(r(485));if(e=n.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};R.T!==null?a(!0):d.isTransition=!1,o(d),a=n.pending,a===null?(d.next=n.pending=d,jg(n,d)):(d.next=a.next,n.pending=a.next=d)}}function jg(e,n){var a=n.action,o=n.payload,h=e.state;if(n.isTransition){var d=R.T,v={};R.T=v;try{var T=a(h,o),D=R.S;D!==null&&D(v,T),Lg(e,n,T)}catch(H){zf(e,n,H)}finally{d!==null&&v.types!==null&&(d.types=v.types),R.T=d}}else try{d=a(h,o),Lg(e,n,d)}catch(H){zf(e,n,H)}}function Lg(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Pg(e,n,o)},function(o){return zf(e,n,o)}):Pg(e,n,a)}function Pg(e,n,a){n.status="fulfilled",n.value=a,Ug(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,jg(e,a)))}function zf(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Ug(n),n=n.next;while(n!==o)}e.action=null}function Ug(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function zg(e,n){return n}function Bg(e,n){if(Ht){var a=le.formState;if(a!==null){t:{var o=Ot;if(Ht){if(fe){e:{for(var h=fe,d=Wn;h.nodeType!==8;){if(!d){h=null;break e}if(h=Zn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){fe=Zn(h.nextSibling),o=h.data==="F!";break t}}Bs(o)}o=!1}o&&(n=a[0])}}return a=mn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zg,lastRenderedState:n},a.queue=o,a=ay.bind(null,Ot,o),o.dispatch=a,o=Uf(!1),d=Kf.bind(null,Ot,!1,o.queue),o=mn(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,a=zb.bind(null,Ot,h,d,a),h.dispatch=a,o.memoizedState=e,[n,a,!1]}function qg(e){var n=xe();return Hg(n,re,e)}function Hg(e,n,a){if(n=Lf(e,n,zg)[0],e=ac(ls)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=cl(n)}catch(v){throw v===Ba?$u:v}else o=n;n=xe();var h=n.queue,d=h.dispatch;return a!==n.memoizedState&&(Ot.flags|=2048,Ka(9,{destroy:void 0},Bb.bind(null,h,a),null)),[o,d,e]}function Bb(e,n){e.action=n}function Fg(e){var n=xe(),a=re;if(a!==null)return Hg(n,a,e);xe(),n=n.memoizedState,a=xe();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function Ka(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=Ot.updateQueue,n===null&&(n=sc(),Ot.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Gg(){return xe().memoizedState}function oc(e,n,a,o){var h=mn();Ot.flags|=e,h.memoizedState=Ka(1|n,{destroy:void 0},a,o===void 0?null:o)}function lc(e,n,a,o){var h=xe();o=o===void 0?null:o;var d=h.memoizedState.inst;re!==null&&o!==null&&Nf(o,re.memoizedState.deps)?h.memoizedState=Ka(n,d,a,o):(Ot.flags|=e,h.memoizedState=Ka(1|n,d,a,o))}function Kg(e,n){oc(8390656,8,e,n)}function Bf(e,n){lc(2048,8,e,n)}function qb(e){Ot.flags|=4;var n=Ot.updateQueue;if(n===null)n=sc(),Ot.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Yg(e){var n=xe().memoizedState;return qb({ref:n,nextImpl:e}),function(){if((Wt&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function Qg(e,n){return lc(4,2,e,n)}function Xg(e,n){return lc(4,4,e,n)}function $g(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Wg(e,n,a){a=a!=null?a.concat([e]):null,lc(4,4,$g.bind(null,n,e),a)}function qf(){}function Jg(e,n){var a=xe();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&Nf(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Zg(e,n){var a=xe();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&Nf(n,o[1]))return o[0];if(o=e(),Zr){qn(!0);try{e()}finally{qn(!1)}}return a.memoizedState=[o,n],o}function Hf(e,n,a){return a===void 0||(os&1073741824)!==0&&(Pt&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=t_(),Ot.lanes|=e,$s|=e,a)}function ty(e,n,a,o){return Nn(a,n)?a:Ha.current!==null?(e=Hf(e,a,o),Nn(e,n)||(Me=!0),e):(os&42)===0||(os&1073741824)!==0&&(Pt&261930)===0?(Me=!0,e.memoizedState=a):(e=t_(),Ot.lanes|=e,$s|=e,n)}function ey(e,n,a,o,h){var d=P.p;P.p=d!==0&&8>d?d:8;var v=R.T,T={};R.T=T,Kf(e,!1,n,a);try{var D=h(),H=R.S;if(H!==null&&H(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var $=Lb(D,o);hl(e,n,$,Ln(e))}else hl(e,n,o,Ln(e))}catch(nt){hl(e,n,{then:function(){},status:"rejected",reason:nt},Ln())}finally{P.p=d,v!==null&&T.types!==null&&(v.types=T.types),R.T=v}}function Hb(){}function Ff(e,n,a,o){if(e.tag!==5)throw Error(r(476));var h=ny(e).queue;ey(e,h,n,F,a===null?Hb:function(){return iy(e),a(o)})}function ny(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:F},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function iy(e){var n=ny(e);n.next===null&&(n=e.alternate.memoizedState),hl(e,n.next.queue,{},Ln())}function Gf(){return Ze(Cl)}function sy(){return xe().memoizedState}function ry(){return xe().memoizedState}function Fb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Ln();e=Fs(a);var o=Gs(n,e,a);o!==null&&(An(o,n,a),al(o,n,a)),n={cache:Ef()},e.payload=n;return}n=n.return}}function Gb(e,n,a){var o=Ln();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},uc(e)?oy(n,a):(a=uf(e,n,a,o),a!==null&&(An(a,e,o),ly(a,n,o)))}function ay(e,n,a){var o=Ln();hl(e,n,a,o)}function hl(e,n,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(uc(e))oy(n,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var v=n.lastRenderedState,T=d(v,a);if(h.hasEagerState=!0,h.eagerState=T,Nn(T,v))return Hu(e,n,h,0),le===null&&qu(),!1}catch{}if(a=uf(e,n,h,o),a!==null)return An(a,e,o),ly(a,n,o),!0}return!1}function Kf(e,n,a,o){if(o={lane:2,revertLane:Ad(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},uc(e)){if(n)throw Error(r(479))}else n=uf(e,a,o,2),n!==null&&An(n,e,2)}function uc(e){var n=e.alternate;return e===Ot||n!==null&&n===Ot}function oy(e,n){Fa=nc=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function ly(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Oo(e,a)}}var fl={readContext:Ze,use:rc,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useLayoutEffect:Ee,useInsertionEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useSyncExternalStore:Ee,useId:Ee,useHostTransitionStatus:Ee,useFormState:Ee,useActionState:Ee,useOptimistic:Ee,useMemoCache:Ee,useCacheRefresh:Ee};fl.useEffectEvent=Ee;var uy={readContext:Ze,use:rc,useCallback:function(e,n){return mn().memoizedState=[e,n===void 0?null:n],e},useContext:Ze,useEffect:Kg,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,oc(4194308,4,$g.bind(null,n,e),a)},useLayoutEffect:function(e,n){return oc(4194308,4,e,n)},useInsertionEffect:function(e,n){oc(4,2,e,n)},useMemo:function(e,n){var a=mn();n=n===void 0?null:n;var o=e();if(Zr){qn(!0);try{e()}finally{qn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=mn();if(a!==void 0){var h=a(n);if(Zr){qn(!0);try{a(n)}finally{qn(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=Gb.bind(null,Ot,e),[o.memoizedState,e]},useRef:function(e){var n=mn();return e={current:e},n.memoizedState=e},useState:function(e){e=Uf(e);var n=e.queue,a=ay.bind(null,Ot,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:qf,useDeferredValue:function(e,n){var a=mn();return Hf(a,e,n)},useTransition:function(){var e=Uf(!1);return e=ey.bind(null,Ot,e.queue,!0,!1),mn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=Ot,h=mn();if(Ht){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),le===null)throw Error(r(349));(Pt&127)!==0||kg(o,n,a)}h.memoizedState=a;var d={value:a,getSnapshot:n};return h.queue=d,Kg(Dg.bind(null,o,d,e),[e]),o.flags|=2048,Ka(9,{destroy:void 0},Ng.bind(null,o,d,a,n),null),a},useId:function(){var e=mn(),n=le.identifierPrefix;if(Ht){var a=Pi,o=Li;a=(o&~(1<<32-Se(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=ic++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Pb++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Gf,useFormState:Bg,useActionState:Bg,useOptimistic:function(e){var n=mn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Kf.bind(null,Ot,!0,a),a.dispatch=n,[e,n]},useMemoCache:jf,useCacheRefresh:function(){return mn().memoizedState=Fb.bind(null,Ot)},useEffectEvent:function(e){var n=mn(),a={impl:e};return n.memoizedState=a,function(){if((Wt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Yf={readContext:Ze,use:rc,useCallback:Jg,useContext:Ze,useEffect:Bf,useImperativeHandle:Wg,useInsertionEffect:Qg,useLayoutEffect:Xg,useMemo:Zg,useReducer:ac,useRef:Gg,useState:function(){return ac(ls)},useDebugValue:qf,useDeferredValue:function(e,n){var a=xe();return ty(a,re.memoizedState,e,n)},useTransition:function(){var e=ac(ls)[0],n=xe().memoizedState;return[typeof e=="boolean"?e:cl(e),n]},useSyncExternalStore:Ig,useId:sy,useHostTransitionStatus:Gf,useFormState:qg,useActionState:qg,useOptimistic:function(e,n){var a=xe();return Mg(a,re,e,n)},useMemoCache:jf,useCacheRefresh:ry};Yf.useEffectEvent=Yg;var cy={readContext:Ze,use:rc,useCallback:Jg,useContext:Ze,useEffect:Bf,useImperativeHandle:Wg,useInsertionEffect:Qg,useLayoutEffect:Xg,useMemo:Zg,useReducer:Pf,useRef:Gg,useState:function(){return Pf(ls)},useDebugValue:qf,useDeferredValue:function(e,n){var a=xe();return re===null?Hf(a,e,n):ty(a,re.memoizedState,e,n)},useTransition:function(){var e=Pf(ls)[0],n=xe().memoizedState;return[typeof e=="boolean"?e:cl(e),n]},useSyncExternalStore:Ig,useId:sy,useHostTransitionStatus:Gf,useFormState:Fg,useActionState:Fg,useOptimistic:function(e,n){var a=xe();return re!==null?Mg(a,re,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:jf,useCacheRefresh:ry};cy.useEffectEvent=Yg;function Qf(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:w({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Xf={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=Ln(),h=Fs(o);h.payload=n,a!=null&&(h.callback=a),n=Gs(e,h,o),n!==null&&(An(n,e,o),al(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=Ln(),h=Fs(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Gs(e,h,o),n!==null&&(An(n,e,o),al(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Ln(),o=Fs(a);o.tag=2,n!=null&&(o.callback=n),n=Gs(e,o,a),n!==null&&(An(n,e,a),al(n,e,a))}};function hy(e,n,a,o,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,v):n.prototype&&n.prototype.isPureReactComponent?!Jo(a,o)||!Jo(h,d):!0}function fy(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&Xf.enqueueReplaceState(n,n.state,null)}function ta(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=w({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function dy(e){Bu(e)}function my(e){console.error(e)}function py(e){Bu(e)}function cc(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function gy(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function $f(e,n,a){return a=Fs(a),a.tag=3,a.payload={element:null},a.callback=function(){cc(e,n)},a}function yy(e){return e=Fs(e),e.tag=3,e}function _y(e,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;e.payload=function(){return h(d)},e.callback=function(){gy(n,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){gy(n,a,o),typeof h!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function Kb(e,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Pa(n,a,h,!0),a=On.current,a!==null){switch(a.tag){case 31:case 13:return Jn===null?bc():a.alternate===null&&Te===0&&(Te=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Wu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Td(e,o,h)),!1;case 22:return a.flags|=65536,o===Wu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Td(e,o,h)),!1}throw Error(r(435,a.tag))}return Td(e,o,h),bc(),!1}if(Ht)return n=On.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==pf&&(e=Error(r(422),{cause:o}),el(Qn(e,a)))):(o!==pf&&(n=Error(r(423),{cause:o}),el(Qn(n,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Qn(o,a),h=$f(e.stateNode,o,h),xf(e,h),Te!==4&&(Te=2)),!1;var d=Error(r(520),{cause:o});if(d=Qn(d,a),El===null?El=[d]:El.push(d),Te!==4&&(Te=2),n===null)return!0;o=Qn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=$f(a.stateNode,o,e),xf(a,e),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ws===null||!Ws.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=yy(h),_y(h,e,a,o),xf(a,h),!1}a=a.return}while(a!==null);return!1}var Wf=Error(r(461)),Me=!1;function tn(e,n,a,o){n.child=e===null?bg(n,null,a,o):Jr(n,e.child,a,o)}function vy(e,n,a,o,h){a=a.render;var d=n.ref;if("ref"in o){var v={};for(var T in o)T!=="ref"&&(v[T]=o[T])}else v=o;return Qr(n),o=Df(e,n,a,v,d,h),T=Of(),e!==null&&!Me?(Vf(e,n,h),us(e,n,h)):(Ht&&T&&df(n),n.flags|=1,tn(e,n,o,h),n.child)}function Ey(e,n,a,o,h){if(e===null){var d=a.type;return typeof d=="function"&&!cf(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,Ty(e,n,d,o,h)):(e=Gu(a.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!rd(e,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Jo,a(v,o)&&e.ref===n.ref)return us(e,n,h)}return n.flags|=1,e=is(d,o),e.ref=n.ref,e.return=n,n.child=e}function Ty(e,n,a,o,h){if(e!==null){var d=e.memoizedProps;if(Jo(d,o)&&e.ref===n.ref)if(Me=!1,n.pendingProps=o=d,rd(e,h))(e.flags&131072)!==0&&(Me=!0);else return n.lanes=e.lanes,us(e,n,h)}return Jf(e,n,a,o,h)}function by(e,n,a,o){var h=o.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(o=n.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,n.child=null;return Sy(e,n,d,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Xu(n,d!==null?d.cachePool:null),d!==null?wg(n,d):Cf(),xg(n);else return o=n.lanes=536870912,Sy(e,n,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(Xu(n,d.cachePool),wg(n,d),Ys(),n.memoizedState=null):(e!==null&&Xu(n,null),Cf(),Ys());return tn(e,n,h,a),n.child}function dl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Sy(e,n,a,o,h){var d=bf();return d=d===null?null:{parent:Oe._currentValue,pool:d},n.memoizedState={baseLanes:a,cachePool:d},e!==null&&Xu(n,null),Cf(),xg(n),e!==null&&Pa(e,n,o,!0),n.childLanes=h,null}function hc(e,n){return n=dc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Ay(e,n,a){return Jr(n,e.child,null,a),e=hc(n,n.pendingProps),e.flags|=2,Vn(n),n.memoizedState=null,e}function Yb(e,n,a){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Ht){if(o.mode==="hidden")return e=hc(n,o),n.lanes=536870912,dl(null,e);if(kf(n),(e=fe)?(e=j_(e,Wn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Us!==null?{id:Li,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},a=og(e),a.return=n,n.child=a,Je=n,fe=null)):e=null,e===null)throw Bs(n);return n.lanes=536870912,null}return hc(n,o)}var d=e.memoizedState;if(d!==null){var v=d.dehydrated;if(kf(n),h)if(n.flags&256)n.flags&=-257,n=Ay(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(Me||Pa(e,n,a,!1),h=(a&e.childLanes)!==0,Me||h){if(o=le,o!==null&&(v=Vo(o,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Fr(e,v),An(o,e,v),Wf;bc(),n=Ay(e,n,a)}else e=d.treeContext,fe=Zn(v.nextSibling),Je=n,Ht=!0,zs=null,Wn=!1,e!==null&&cg(n,e),n=hc(n,o),n.flags|=4096;return n}return e=is(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function fc(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Jf(e,n,a,o,h){return Qr(n),a=Df(e,n,a,o,void 0,h),o=Of(),e!==null&&!Me?(Vf(e,n,h),us(e,n,h)):(Ht&&o&&df(n),n.flags|=1,tn(e,n,a,h),n.child)}function wy(e,n,a,o,h,d){return Qr(n),n.updateQueue=null,a=Cg(n,o,a,h),Rg(e),o=Of(),e!==null&&!Me?(Vf(e,n,d),us(e,n,d)):(Ht&&o&&df(n),n.flags|=1,tn(e,n,a,d),n.child)}function xy(e,n,a,o,h){if(Qr(n),n.stateNode===null){var d=Va,v=a.contextType;typeof v=="object"&&v!==null&&(d=Ze(v)),d=new a(o,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Xf,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=o,d.state=n.memoizedState,d.refs={},Af(n),v=a.contextType,d.context=typeof v=="object"&&v!==null?Ze(v):Va,d.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Qf(n,a,v,o),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Xf.enqueueReplaceState(d,d.state,null),ll(n,o,d,h),ol(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){d=n.stateNode;var T=n.memoizedProps,D=ta(a,T);d.props=D;var H=d.context,$=a.contextType;v=Va,typeof $=="object"&&$!==null&&(v=Ze($));var nt=a.getDerivedStateFromProps;$=typeof nt=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,$||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||H!==v)&&fy(n,d,o,v),Hs=!1;var K=n.memoizedState;d.state=K,ll(n,o,d,h),ol(),H=n.memoizedState,T||K!==H||Hs?(typeof nt=="function"&&(Qf(n,a,nt,o),H=n.memoizedState),(D=Hs||hy(n,a,D,o,K,H,v))?($||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=H),d.props=o,d.state=H,d.context=v,o=D):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{d=n.stateNode,wf(e,n),v=n.memoizedProps,$=ta(a,v),d.props=$,nt=n.pendingProps,K=d.context,H=a.contextType,D=Va,typeof H=="object"&&H!==null&&(D=Ze(H)),T=a.getDerivedStateFromProps,(H=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==nt||K!==D)&&fy(n,d,o,D),Hs=!1,K=n.memoizedState,d.state=K,ll(n,o,d,h),ol();var Q=n.memoizedState;v!==nt||K!==Q||Hs||e!==null&&e.dependencies!==null&&Yu(e.dependencies)?(typeof T=="function"&&(Qf(n,a,T,o),Q=n.memoizedState),($=Hs||hy(n,a,$,o,K,Q,D)||e!==null&&e.dependencies!==null&&Yu(e.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,Q,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,Q,D)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&K===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&K===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=Q),d.props=o,d.state=Q,d.context=D,o=$):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&K===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&K===e.memoizedState||(n.flags|=1024),o=!1)}return d=o,fc(e,n),o=(n.flags&128)!==0,d||o?(d=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&o?(n.child=Jr(n,e.child,null,h),n.child=Jr(n,null,a,h)):tn(e,n,a,h),n.memoizedState=d.state,e=n.child):e=us(e,n,h),e}function Ry(e,n,a,o){return Kr(),n.flags|=256,tn(e,n,a,o),n.child}var Zf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function td(e){return{baseLanes:e,cachePool:gg()}}function ed(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=jn),e}function Cy(e,n,a){var o=n.pendingProps,h=!1,d=(n.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(we.current&2)!==0),v&&(h=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ht){if(h?Ks(n):Ys(),(e=fe)?(e=j_(e,Wn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Us!==null?{id:Li,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},a=og(e),a.return=n,n.child=a,Je=n,fe=null)):e=null,e===null)throw Bs(n);return Ld(e)?n.lanes=32:n.lanes=536870912,null}var T=o.children;return o=o.fallback,h?(Ys(),h=n.mode,T=dc({mode:"hidden",children:T},h),o=Gr(o,h,a,null),T.return=n,o.return=n,T.sibling=o,n.child=T,o=n.child,o.memoizedState=td(a),o.childLanes=ed(e,v,a),n.memoizedState=Zf,dl(null,o)):(Ks(n),nd(n,T))}var D=e.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(d)n.flags&256?(Ks(n),n.flags&=-257,n=id(e,n,a)):n.memoizedState!==null?(Ys(),n.child=e.child,n.flags|=128,n=null):(Ys(),T=o.fallback,h=n.mode,o=dc({mode:"visible",children:o.children},h),T=Gr(T,h,a,null),T.flags|=2,o.return=n,T.return=n,o.sibling=T,n.child=o,Jr(n,e.child,null,a),o=n.child,o.memoizedState=td(a),o.childLanes=ed(e,v,a),n.memoizedState=Zf,n=dl(null,o));else if(Ks(n),Ld(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var H=v.dgst;v=H,o=Error(r(419)),o.stack="",o.digest=v,el({value:o,source:null,stack:null}),n=id(e,n,a)}else if(Me||Pa(e,n,a,!1),v=(a&e.childLanes)!==0,Me||v){if(v=le,v!==null&&(o=Vo(v,a),o!==0&&o!==D.retryLane))throw D.retryLane=o,Fr(e,o),An(v,e,o),Wf;jd(T)||bc(),n=id(e,n,a)}else jd(T)?(n.flags|=192,n.child=e.child,n=null):(e=D.treeContext,fe=Zn(T.nextSibling),Je=n,Ht=!0,zs=null,Wn=!1,e!==null&&cg(n,e),n=nd(n,o.children),n.flags|=4096);return n}return h?(Ys(),T=o.fallback,h=n.mode,D=e.child,H=D.sibling,o=is(D,{mode:"hidden",children:o.children}),o.subtreeFlags=D.subtreeFlags&65011712,H!==null?T=is(H,T):(T=Gr(T,h,a,null),T.flags|=2),T.return=n,o.return=n,o.sibling=T,n.child=o,dl(null,o),o=n.child,T=e.child.memoizedState,T===null?T=td(a):(h=T.cachePool,h!==null?(D=Oe._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=gg(),T={baseLanes:T.baseLanes|a,cachePool:h}),o.memoizedState=T,o.childLanes=ed(e,v,a),n.memoizedState=Zf,dl(e.child,o)):(Ks(n),a=e.child,e=a.sibling,a=is(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function nd(e,n){return n=dc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function dc(e,n){return e=Dn(22,e,null,n),e.lanes=0,e}function id(e,n,a){return Jr(n,e.child,null,a),e=nd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Iy(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),_f(e.return,n,a)}function sd(e,n,a,o,h,d){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:d}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=h,v.treeForkCount=d)}function ky(e,n,a){var o=n.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var v=we.current,T=(v&2)!==0;if(T?(v=v&1|2,n.flags|=128):v&=1,st(we,v),tn(e,n,o,a),o=Ht?tl:0,!T&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Iy(e,a,n);else if(e.tag===19)Iy(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)e=a.alternate,e!==null&&ec(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),sd(n,!1,h,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&ec(e)===null){n.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}sd(n,!0,a,null,d,o);break;case"together":sd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function us(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),$s|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Pa(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=is(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=is(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function rd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Yu(e)))}function Qb(e,n,a){switch(n.tag){case 3:ne(n,n.stateNode.containerInfo),qs(n,Oe,e.memoizedState.cache),Kr();break;case 27:case 5:He(n);break;case 4:ne(n,n.stateNode.containerInfo);break;case 10:qs(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,kf(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ks(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Cy(e,n,a):(Ks(n),e=us(e,n,a),e!==null?e.sibling:null);Ks(n);break;case 19:var h=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Pa(e,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return ky(e,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),st(we,we.current),o)break;return null;case 22:return n.lanes=0,by(e,n,a,n.pendingProps);case 24:qs(n,Oe,e.memoizedState.cache)}return us(e,n,a)}function Ny(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)Me=!0;else{if(!rd(e,a)&&(n.flags&128)===0)return Me=!1,Qb(e,n,a);Me=(e.flags&131072)!==0}else Me=!1,Ht&&(n.flags&1048576)!==0&&ug(n,tl,n.index);switch(n.lanes=0,n.tag){case 16:t:{var o=n.pendingProps;if(e=$r(n.elementType),n.type=e,typeof e=="function")cf(e)?(o=ta(e,o),n.tag=1,n=xy(null,n,e,o,a)):(n.tag=0,n=Jf(null,n,e,o,a));else{if(e!=null){var h=e.$$typeof;if(h===Vt){n.tag=11,n=vy(null,n,e,o,a);break t}else if(h===k){n.tag=14,n=Ey(null,n,e,o,a);break t}}throw n=Xt(e)||e,Error(r(306,n,""))}}return n;case 0:return Jf(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=ta(o,n.pendingProps),xy(e,n,o,h,a);case 3:t:{if(ne(n,n.stateNode.containerInfo),e===null)throw Error(r(387));o=n.pendingProps;var d=n.memoizedState;h=d.element,wf(e,n),ll(n,o,null,a);var v=n.memoizedState;if(o=v.cache,qs(n,Oe,o),o!==d.cache&&vf(n,[Oe],a,!0),ol(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=Ry(e,n,o,a);break t}else if(o!==h){h=Qn(Error(r(424)),n),el(h),n=Ry(e,n,o,a);break t}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,fe=Zn(e.firstChild),Je=n,Ht=!0,zs=null,Wn=!0,a=bg(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Kr(),o===h){n=us(e,n,a);break t}tn(e,n,o,a)}n=n.child}return n;case 26:return fc(e,n),e===null?(a=q_(n.type,null,n.pendingProps,null))?n.memoizedState=a:Ht||(a=n.type,e=n.pendingProps,o=Ic(mt.current).createElement(a),o[ke]=n,o[Ge]=e,en(o,a,e),Ne(o),n.stateNode=o):n.memoizedState=q_(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return He(n),e===null&&Ht&&(o=n.stateNode=U_(n.type,n.pendingProps,mt.current),Je=n,Wn=!0,h=fe,er(n.type)?(Pd=h,fe=Zn(o.firstChild)):fe=h),tn(e,n,n.pendingProps.children,a),fc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ht&&((h=o=fe)&&(o=AS(o,n.type,n.pendingProps,Wn),o!==null?(n.stateNode=o,Je=n,fe=Zn(o.firstChild),Wn=!1,h=!0):h=!1),h||Bs(n)),He(n),h=n.type,d=n.pendingProps,v=e!==null?e.memoizedProps:null,o=d.children,Od(h,d)?o=null:v!==null&&Od(h,v)&&(n.flags|=32),n.memoizedState!==null&&(h=Df(e,n,Ub,null,null,a),Cl._currentValue=h),fc(e,n),tn(e,n,o,a),n.child;case 6:return e===null&&Ht&&((e=a=fe)&&(a=wS(a,n.pendingProps,Wn),a!==null?(n.stateNode=a,Je=n,fe=null,e=!0):e=!1),e||Bs(n)),null;case 13:return Cy(e,n,a);case 4:return ne(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Jr(n,null,o,a):tn(e,n,o,a),n.child;case 11:return vy(e,n,n.type,n.pendingProps,a);case 7:return tn(e,n,n.pendingProps,a),n.child;case 8:return tn(e,n,n.pendingProps.children,a),n.child;case 12:return tn(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,qs(n,n.type,o.value),tn(e,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,Qr(n),h=Ze(h),o=o(h),n.flags|=1,tn(e,n,o,a),n.child;case 14:return Ey(e,n,n.type,n.pendingProps,a);case 15:return Ty(e,n,n.type,n.pendingProps,a);case 19:return ky(e,n,a);case 31:return Yb(e,n,a);case 22:return by(e,n,a,n.pendingProps);case 24:return Qr(n),o=Ze(Oe),e===null?(h=bf(),h===null&&(h=le,d=Ef(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),n.memoizedState={parent:o,cache:h},Af(n),qs(n,Oe,h)):((e.lanes&a)!==0&&(wf(e,n),ll(n,null,null,a),ol()),h=e.memoizedState,d=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),qs(n,Oe,o)):(o=d.cache,qs(n,Oe,o),o!==h.cache&&vf(n,[Oe],a,!0))),tn(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function cs(e){e.flags|=4}function ad(e,n,a,o,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(s_())e.flags|=8192;else throw Wr=Wu,Sf}else e.flags&=-16777217}function Dy(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Y_(n))if(s_())e.flags|=8192;else throw Wr=Wu,Sf}function mc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Eu():536870912,e.lanes|=n,$a|=n)}function ml(e,n){if(!Ht)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function de(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function Xb(e,n,a){var o=n.pendingProps;switch(mf(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(n),null;case 1:return de(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),as(Oe),Gt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(La(n)?cs(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gf())),de(n),null;case 26:var h=n.type,d=n.memoizedState;return e===null?(cs(n),d!==null?(de(n),Dy(n,d)):(de(n),ad(n,h,null,o,a))):d?d!==e.memoizedState?(cs(n),de(n),Dy(n,d)):(de(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&cs(n),de(n),ad(n,h,e,o,a)),null;case 27:if(Rn(n),a=mt.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&cs(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return de(n),null}e=ot.current,La(n)?hg(n):(e=U_(h,o,a),n.stateNode=e,cs(n))}return de(n),null;case 5:if(Rn(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&cs(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return de(n),null}if(d=ot.current,La(n))hg(n);else{var v=Ic(mt.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?v.createElement(h,{is:o.is}):v.createElement(h)}}d[ke]=n,d[Ge]=o;t:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break t;for(;v.sibling===null;){if(v.return===null||v.return===n)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=d;t:switch(en(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&cs(n)}}return de(n),ad(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&cs(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(r(166));if(e=mt.current,La(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,h=Je,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[ke]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||C_(e.nodeValue,a)),e||Bs(n,!0)}else e=Ic(e).createTextNode(o),e[ke]=n,n.stateNode=e}return de(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=La(n),a!==null){if(e===null){if(!o)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[ke]=n}else Kr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;de(n),e=!1}else a=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Vn(n),n):(Vn(n),null);if((n.flags&128)!==0)throw Error(r(558))}return de(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=La(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[ke]=n}else Kr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;de(n),h=!1}else h=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Vn(n),n):(Vn(n),null)}return Vn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),mc(n,n.updateQueue),de(n),null);case 4:return Gt(),e===null&&Cd(n.stateNode.containerInfo),de(n),null;case 10:return as(n.type),de(n),null;case 19:if(G(we),o=n.memoizedState,o===null)return de(n),null;if(h=(n.flags&128)!==0,d=o.rendering,d===null)if(h)ml(o,!1);else{if(Te!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=ec(e),d!==null){for(n.flags|=128,ml(o,!1),e=d.updateQueue,n.updateQueue=e,mc(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)ag(a,e),a=a.sibling;return st(we,we.current&1|2),Ht&&ss(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&ie()>vc&&(n.flags|=128,h=!0,ml(o,!1),n.lanes=4194304)}else{if(!h)if(e=ec(d),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,mc(n,e),ml(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Ht)return de(n),null}else 2*ie()-o.renderingStartTime>vc&&a!==536870912&&(n.flags|=128,h=!0,ml(o,!1),n.lanes=4194304);o.isBackwards?(d.sibling=n.child,n.child=d):(e=o.last,e!==null?e.sibling=d:n.child=d,o.last=d)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ie(),e.sibling=null,a=we.current,st(we,h?a&1|2:a&1),Ht&&ss(n,o.treeForkCount),e):(de(n),null);case 22:case 23:return Vn(n),If(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(de(n),n.subtreeFlags&6&&(n.flags|=8192)):de(n),a=n.updateQueue,a!==null&&mc(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&G(Xr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),as(Oe),de(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function $b(e,n){switch(mf(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return as(Oe),Gt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Rn(n),null;case 31:if(n.memoizedState!==null){if(Vn(n),n.alternate===null)throw Error(r(340));Kr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Vn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Kr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return G(we),null;case 4:return Gt(),null;case 10:return as(n.type),null;case 22:case 23:return Vn(n),If(),e!==null&&G(Xr),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return as(Oe),null;case 25:return null;default:return null}}function Oy(e,n){switch(mf(n),n.tag){case 3:as(Oe),Gt();break;case 26:case 27:case 5:Rn(n);break;case 4:Gt();break;case 31:n.memoizedState!==null&&Vn(n);break;case 13:Vn(n);break;case 19:G(we);break;case 10:as(n.type);break;case 22:case 23:Vn(n),If(),e!==null&&G(Xr);break;case 24:as(Oe)}}function pl(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var d=a.create,v=a.inst;o=d(),v.destroy=o}a=a.next}while(a!==h)}}catch(T){ee(n,n.return,T)}}function Qs(e,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&e)===e){var v=o.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=n;var D=a,H=T;try{H()}catch($){ee(h,D,$)}}}o=o.next}while(o!==d)}}catch($){ee(n,n.return,$)}}function Vy(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Ag(n,a)}catch(o){ee(e,e.return,o)}}}function My(e,n,a){a.props=ta(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){ee(e,n,o)}}function gl(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){ee(e,n,h)}}function Ui(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){ee(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ee(e,n,h)}else a.current=null}function jy(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){ee(e,e.return,h)}}function od(e,n,a){try{var o=e.stateNode;_S(o,e.type,a,n),o[Ge]=n}catch(h){ee(e,e.return,h)}}function Ly(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&er(e.type)||e.tag===4}function ld(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Ly(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&er(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ud(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=li));else if(o!==4&&(o===27&&er(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(ud(e,n,a),e=e.sibling;e!==null;)ud(e,n,a),e=e.sibling}function pc(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&er(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(pc(e,n,a),e=e.sibling;e!==null;)pc(e,n,a),e=e.sibling}function Py(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);en(n,o,a),n[ke]=e,n[Ge]=a}catch(d){ee(e,e.return,d)}}var hs=!1,je=!1,cd=!1,Uy=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Wb(e,n){if(e=e.containerInfo,Nd=jc,e=Wp(e),nf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,T=-1,D=-1,H=0,$=0,nt=e,K=null;e:for(;;){for(var Q;nt!==a||h!==0&&nt.nodeType!==3||(T=v+h),nt!==d||o!==0&&nt.nodeType!==3||(D=v+o),nt.nodeType===3&&(v+=nt.nodeValue.length),(Q=nt.firstChild)!==null;)K=nt,nt=Q;for(;;){if(nt===e)break e;if(K===a&&++H===h&&(T=v),K===d&&++$===o&&(D=v),(Q=nt.nextSibling)!==null)break;nt=K,K=nt.parentNode}nt=Q}a=T===-1||D===-1?null:{start:T,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dd={focusedElem:e,selectionRange:a},jc=!1,Ye=n;Ye!==null;)if(n=Ye,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Ye=e;else for(;Ye!==null;){switch(n=Ye,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=n,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var gt=ta(a.type,h);e=o.getSnapshotBeforeUpdate(gt,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(wt){ee(a,a.return,wt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Md(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Md(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,Ye=e;break}Ye=n.return}}function zy(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:ds(e,a),o&4&&pl(5,a);break;case 1:if(ds(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){ee(a,a.return,v)}else{var h=ta(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){ee(a,a.return,v)}}o&64&&Vy(a),o&512&&gl(a,a.return);break;case 3:if(ds(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Ag(e,n)}catch(v){ee(a,a.return,v)}}break;case 27:n===null&&o&4&&Py(a);case 26:case 5:ds(e,a),n===null&&o&4&&jy(a),o&512&&gl(a,a.return);break;case 12:ds(e,a);break;case 31:ds(e,a),o&4&&Hy(e,a);break;case 13:ds(e,a),o&4&&Fy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=aS.bind(null,a),xS(e,a))));break;case 22:if(o=a.memoizedState!==null||hs,!o){n=n!==null&&n.memoizedState!==null||je,h=hs;var d=je;hs=o,(je=n)&&!d?ms(e,a,(a.subtreeFlags&8772)!==0):ds(e,a),hs=h,je=d}break;case 30:break;default:ds(e,a)}}function By(e){var n=e.alternate;n!==null&&(e.alternate=null,By(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ea(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ge=null,En=!1;function fs(e,n,a){for(a=a.child;a!==null;)qy(e,n,a),a=a.sibling}function qy(e,n,a){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(fn,a)}catch{}switch(a.tag){case 26:je||Ui(a,n),fs(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:je||Ui(a,n);var o=ge,h=En;er(a.type)&&(ge=a.stateNode,En=!1),fs(e,n,a),wl(a.stateNode),ge=o,En=h;break;case 5:je||Ui(a,n);case 6:if(o=ge,h=En,ge=null,fs(e,n,a),ge=o,En=h,ge!==null)if(En)try{(ge.nodeType===9?ge.body:ge.nodeName==="HTML"?ge.ownerDocument.body:ge).removeChild(a.stateNode)}catch(d){ee(a,n,d)}else try{ge.removeChild(a.stateNode)}catch(d){ee(a,n,d)}break;case 18:ge!==null&&(En?(e=ge,V_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),so(e)):V_(ge,a.stateNode));break;case 4:o=ge,h=En,ge=a.stateNode.containerInfo,En=!0,fs(e,n,a),ge=o,En=h;break;case 0:case 11:case 14:case 15:Qs(2,a,n),je||Qs(4,a,n),fs(e,n,a);break;case 1:je||(Ui(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&My(a,n,o)),fs(e,n,a);break;case 21:fs(e,n,a);break;case 22:je=(o=je)||a.memoizedState!==null,fs(e,n,a),je=o;break;default:fs(e,n,a)}}function Hy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{so(e)}catch(a){ee(n,n.return,a)}}}function Fy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{so(e)}catch(a){ee(n,n.return,a)}}function Jb(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Uy),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Uy),n;default:throw Error(r(435,e.tag))}}function gc(e,n){var a=Jb(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var h=oS.bind(null,e,o);o.then(h,h)}})}function Tn(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=e,v=n,T=v;t:for(;T!==null;){switch(T.tag){case 27:if(er(T.type)){ge=T.stateNode,En=!1;break t}break;case 5:ge=T.stateNode,En=!1;break t;case 3:case 4:ge=T.stateNode.containerInfo,En=!0;break t}T=T.return}if(ge===null)throw Error(r(160));qy(d,v,h),ge=null,En=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Gy(n,e),n=n.sibling}var mi=null;function Gy(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Tn(n,e),bn(e),o&4&&(Qs(3,e,e.return),pl(3,e),Qs(5,e,e.return));break;case 1:Tn(n,e),bn(e),o&512&&(je||a===null||Ui(a,a.return)),o&64&&hs&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=mi;if(Tn(n,e),bn(e),o&512&&(je||a===null||Ui(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[wi]||d[ke]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),en(d,o,a),d[ke]=e,Ne(d),o=d;break t;case"link":var v=G_("link","href",h).get(o+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break e}}d=h.createElement(o),en(d,o,a),h.head.appendChild(d);break;case"meta":if(v=G_("meta","content",h).get(o+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break e}}d=h.createElement(o),en(d,o,a),h.head.appendChild(d);break;default:throw Error(r(468,o))}d[ke]=e,Ne(d),o=d}e.stateNode=o}else K_(h,e.type,e.stateNode);else e.stateNode=F_(h,o,e.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?K_(h,e.type,e.stateNode):F_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&od(e,e.memoizedProps,a.memoizedProps)}break;case 27:Tn(n,e),bn(e),o&512&&(je||a===null||Ui(a,a.return)),a!==null&&o&4&&od(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Tn(n,e),bn(e),o&512&&(je||a===null||Ui(a,a.return)),e.flags&32){h=e.stateNode;try{vn(h,"")}catch(gt){ee(e,e.return,gt)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,od(e,h,a!==null?a.memoizedProps:h)),o&1024&&(cd=!0);break;case 6:if(Tn(n,e),bn(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(gt){ee(e,e.return,gt)}}break;case 3:if(Dc=null,h=mi,mi=kc(n.containerInfo),Tn(n,e),mi=h,bn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{so(n.containerInfo)}catch(gt){ee(e,e.return,gt)}cd&&(cd=!1,Ky(e));break;case 4:o=mi,mi=kc(e.stateNode.containerInfo),Tn(n,e),bn(e),mi=o;break;case 12:Tn(n,e),bn(e);break;case 31:Tn(n,e),bn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,gc(e,o)));break;case 13:Tn(n,e),bn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(_c=ie()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,gc(e,o)));break;case 22:h=e.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,H=hs,$=je;if(hs=H||h,je=$||D,Tn(n,e),je=$,hs=H,bn(e),o&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||D||hs||je||ea(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){D=a=n;try{if(d=D.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=D.stateNode;var nt=D.memoizedProps.style,K=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;T.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(gt){ee(D,D.return,gt)}}}else if(n.tag===6){if(a===null){D=n;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(gt){ee(D,D.return,gt)}}}else if(n.tag===18){if(a===null){D=n;try{var Q=D.stateNode;h?M_(Q,!0):M_(D.stateNode,!1)}catch(gt){ee(D,D.return,gt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,gc(e,a))));break;case 19:Tn(n,e),bn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,gc(e,o)));break;case 30:break;case 21:break;default:Tn(n,e),bn(e)}}function bn(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(Ly(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=ld(e);pc(e,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(vn(v,""),a.flags&=-33);var T=ld(e);pc(e,T,v);break;case 3:case 4:var D=a.stateNode.containerInfo,H=ld(e);ud(e,H,D);break;default:throw Error(r(161))}}catch($){ee(e,e.return,$)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Ky(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Ky(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ds(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)zy(e,n.alternate,n),n=n.sibling}function ea(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Qs(4,n,n.return),ea(n);break;case 1:Ui(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&My(n,n.return,a),ea(n);break;case 27:wl(n.stateNode);case 26:case 5:Ui(n,n.return),ea(n);break;case 22:n.memoizedState===null&&ea(n);break;case 30:ea(n);break;default:ea(n)}e=e.sibling}}function ms(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,d=n,v=d.flags;switch(d.tag){case 0:case 11:case 15:ms(h,d,a),pl(4,d);break;case 1:if(ms(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){ee(o,o.return,H)}if(o=d,h=o.updateQueue,h!==null){var T=o.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)Sg(D[h],T)}catch(H){ee(o,o.return,H)}}a&&v&64&&Vy(d),gl(d,d.return);break;case 27:Py(d);case 26:case 5:ms(h,d,a),a&&o===null&&v&4&&jy(d),gl(d,d.return);break;case 12:ms(h,d,a);break;case 31:ms(h,d,a),a&&v&4&&Hy(h,d);break;case 13:ms(h,d,a),a&&v&4&&Fy(h,d);break;case 22:d.memoizedState===null&&ms(h,d,a),gl(d,d.return);break;case 30:break;default:ms(h,d,a)}n=n.sibling}}function hd(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&nl(a))}function fd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&nl(e))}function pi(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Yy(e,n,a,o),n=n.sibling}function Yy(e,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:pi(e,n,a,o),h&2048&&pl(9,n);break;case 1:pi(e,n,a,o);break;case 3:pi(e,n,a,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&nl(e)));break;case 12:if(h&2048){pi(e,n,a,o),e=n.stateNode;try{var d=n.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){ee(n,n.return,D)}}else pi(e,n,a,o);break;case 31:pi(e,n,a,o);break;case 13:pi(e,n,a,o);break;case 23:break;case 22:d=n.stateNode,v=n.alternate,n.memoizedState!==null?d._visibility&2?pi(e,n,a,o):yl(e,n):d._visibility&2?pi(e,n,a,o):(d._visibility|=2,Ya(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&hd(v,n);break;case 24:pi(e,n,a,o),h&2048&&fd(n.alternate,n);break;default:pi(e,n,a,o)}}function Ya(e,n,a,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,v=n,T=a,D=o,H=v.flags;switch(v.tag){case 0:case 11:case 15:Ya(d,v,T,D,h),pl(8,v);break;case 23:break;case 22:var $=v.stateNode;v.memoizedState!==null?$._visibility&2?Ya(d,v,T,D,h):yl(d,v):($._visibility|=2,Ya(d,v,T,D,h)),h&&H&2048&&hd(v.alternate,v);break;case 24:Ya(d,v,T,D,h),h&&H&2048&&fd(v.alternate,v);break;default:Ya(d,v,T,D,h)}n=n.sibling}}function yl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,h=o.flags;switch(o.tag){case 22:yl(a,o),h&2048&&hd(o.alternate,o);break;case 24:yl(a,o),h&2048&&fd(o.alternate,o);break;default:yl(a,o)}n=n.sibling}}var _l=8192;function Qa(e,n,a){if(e.subtreeFlags&_l)for(e=e.child;e!==null;)Qy(e,n,a),e=e.sibling}function Qy(e,n,a){switch(e.tag){case 26:Qa(e,n,a),e.flags&_l&&e.memoizedState!==null&&PS(a,mi,e.memoizedState,e.memoizedProps);break;case 5:Qa(e,n,a);break;case 3:case 4:var o=mi;mi=kc(e.stateNode.containerInfo),Qa(e,n,a),mi=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=_l,_l=16777216,Qa(e,n,a),_l=o):Qa(e,n,a));break;default:Qa(e,n,a)}}function Xy(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function vl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Ye=o,Wy(o,e)}Xy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$y(e),e=e.sibling}function $y(e){switch(e.tag){case 0:case 11:case 15:vl(e),e.flags&2048&&Qs(9,e,e.return);break;case 3:vl(e);break;case 12:vl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,yc(e)):vl(e);break;default:vl(e)}}function yc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Ye=o,Wy(o,e)}Xy(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Qs(8,n,n.return),yc(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,yc(n));break;default:yc(n)}e=e.sibling}}function Wy(e,n){for(;Ye!==null;){var a=Ye;switch(a.tag){case 0:case 11:case 15:Qs(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:nl(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ye=o;else t:for(a=e;Ye!==null;){o=Ye;var h=o.sibling,d=o.return;if(By(o),o===a){Ye=null;break t}if(h!==null){h.return=d,Ye=h;break t}Ye=d}}}var Zb={getCacheForType:function(e){var n=Ze(Oe),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Ze(Oe).controller.signal}},tS=typeof WeakMap=="function"?WeakMap:Map,Wt=0,le=null,jt=null,Pt=0,te=0,Mn=null,Xs=!1,Xa=!1,dd=!1,ps=0,Te=0,$s=0,na=0,md=0,jn=0,$a=0,El=null,Sn=null,pd=!1,_c=0,Jy=0,vc=1/0,Ec=null,Ws=null,Be=0,Js=null,Wa=null,gs=0,gd=0,yd=null,Zy=null,Tl=0,_d=null;function Ln(){return(Wt&2)!==0&&Pt!==0?Pt&-Pt:R.T!==null?Ad():Tu()}function t_(){if(jn===0)if((Pt&536870912)===0||Ht){var e=Ir;Ir<<=1,(Ir&3932160)===0&&(Ir=262144),jn=e}else jn=536870912;return e=On.current,e!==null&&(e.flags|=32),jn}function An(e,n,a){(e===le&&(te===2||te===9)||e.cancelPendingCommit!==null)&&(Ja(e,0),Zs(e,Pt,jn,!1)),kr(e,a),((Wt&2)===0||e!==le)&&(e===le&&((Wt&2)===0&&(na|=a),Te===4&&Zs(e,Pt,jn,!1)),zi(e))}function e_(e,n,a){if((Wt&6)!==0)throw Error(r(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||ri(e,n),h=o?iS(e,n):Ed(e,n,!0),d=o;do{if(h===0){Xa&&!o&&Zs(e,n,0,!1);break}else{if(a=e.current.alternate,d&&!eS(a)){h=Ed(e,n,!1),d=!1;continue}if(h===2){if(d=n,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var T=e;h=El;var D=T.current.memoizedState.isDehydrated;if(D&&(Ja(T,v).flags|=256),v=Ed(T,v,!1),v!==2){if(dd&&!D){T.errorRecoveryDisabledLanes|=d,na|=d,h=4;break t}d=Sn,Sn=h,d!==null&&(Sn===null?Sn=d:Sn.push.apply(Sn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Ja(e,0),Zs(e,n,0,!0);break}t:{switch(o=e,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Zs(o,n,jn,!Xs);break t;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=_c+300-ie(),10<h)){if(Zs(o,n,jn,!Xs),bi(o,0,!0)!==0)break t;gs=n,o.timeoutHandle=D_(n_.bind(null,o,a,Sn,Ec,pd,n,jn,na,$a,Xs,d,"Throttled",-0,0),h);break t}n_(o,a,Sn,Ec,pd,n,jn,na,$a,Xs,d,null,-0,0)}}break}while(!0);zi(e)}function n_(e,n,a,o,h,d,v,T,D,H,$,nt,K,Q){if(e.timeoutHandle=-1,nt=n.subtreeFlags,nt&8192||(nt&16785408)===16785408){nt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},Qy(n,d,nt);var gt=(d&62914560)===d?_c-ie():(d&4194048)===d?Jy-ie():0;if(gt=US(nt,gt),gt!==null){gs=d,e.cancelPendingCommit=gt(c_.bind(null,e,n,d,a,o,h,v,T,D,$,nt,null,K,Q)),Zs(e,d,v,!H);return}}c_(e,n,d,a,o,h,v,T,D)}function eS(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!Nn(d(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Zs(e,n,a,o){n&=~md,n&=~na,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var d=31-Se(h),v=1<<d;o[d]=-1,h&=~v}a!==0&&Nr(e,a,n)}function Tc(){return(Wt&6)===0?(bl(0),!1):!0}function vd(){if(jt!==null){if(te===0)var e=jt.return;else e=jt,rs=Yr=null,Mf(e),qa=null,sl=0,e=jt;for(;e!==null;)Oy(e.alternate,e),e=e.return;jt=null}}function Ja(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,TS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),gs=0,vd(),le=e,jt=a=is(e.current,null),Pt=n,te=0,Mn=null,Xs=!1,Xa=ri(e,n),dd=!1,$a=jn=md=na=$s=Te=0,Sn=El=null,pd=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-Se(o),d=1<<h;n|=e[h],o&=~d}return ps=n,qu(),a}function i_(e,n){Ot=null,R.H=fl,n===Ba||n===$u?(n=vg(),te=3):n===Sf?(n=vg(),te=4):te=n===Wf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Mn=n,jt===null&&(Te=1,cc(e,Qn(n,e.current)))}function s_(){var e=On.current;return e===null?!0:(Pt&4194048)===Pt?Jn===null:(Pt&62914560)===Pt||(Pt&536870912)!==0?e===Jn:!1}function r_(){var e=R.H;return R.H=fl,e===null?fl:e}function a_(){var e=R.A;return R.A=Zb,e}function bc(){Te=4,Xs||(Pt&4194048)!==Pt&&On.current!==null||(Xa=!0),($s&134217727)===0&&(na&134217727)===0||le===null||Zs(le,Pt,jn,!1)}function Ed(e,n,a){var o=Wt;Wt|=2;var h=r_(),d=a_();(le!==e||Pt!==n)&&(Ec=null,Ja(e,n)),n=!1;var v=Te;t:do try{if(te!==0&&jt!==null){var T=jt,D=Mn;switch(te){case 8:vd(),v=6;break t;case 3:case 2:case 9:case 6:On.current===null&&(n=!0);var H=te;if(te=0,Mn=null,Za(e,T,D,H),a&&Xa){v=0;break t}break;default:H=te,te=0,Mn=null,Za(e,T,D,H)}}nS(),v=Te;break}catch($){i_(e,$)}while(!0);return n&&e.shellSuspendCounter++,rs=Yr=null,Wt=o,R.H=h,R.A=d,jt===null&&(le=null,Pt=0,qu()),v}function nS(){for(;jt!==null;)o_(jt)}function iS(e,n){var a=Wt;Wt|=2;var o=r_(),h=a_();le!==e||Pt!==n?(Ec=null,vc=ie()+500,Ja(e,n)):Xa=ri(e,n);t:do try{if(te!==0&&jt!==null){n=jt;var d=Mn;e:switch(te){case 1:te=0,Mn=null,Za(e,n,d,1);break;case 2:case 9:if(yg(d)){te=0,Mn=null,l_(n);break}n=function(){te!==2&&te!==9||le!==e||(te=7),zi(e)},d.then(n,n);break t;case 3:te=7;break t;case 4:te=5;break t;case 7:yg(d)?(te=0,Mn=null,l_(n)):(te=0,Mn=null,Za(e,n,d,7));break;case 5:var v=null;switch(jt.tag){case 26:v=jt.memoizedState;case 5:case 27:var T=jt;if(v?Y_(v):T.stateNode.complete){te=0,Mn=null;var D=T.sibling;if(D!==null)jt=D;else{var H=T.return;H!==null?(jt=H,Sc(H)):jt=null}break e}}te=0,Mn=null,Za(e,n,d,5);break;case 6:te=0,Mn=null,Za(e,n,d,6);break;case 8:vd(),Te=6;break t;default:throw Error(r(462))}}sS();break}catch($){i_(e,$)}while(!0);return rs=Yr=null,R.H=o,R.A=h,Wt=a,jt!==null?0:(le=null,Pt=0,qu(),Te)}function sS(){for(;jt!==null&&!he();)o_(jt)}function o_(e){var n=Ny(e.alternate,e,ps);e.memoizedProps=e.pendingProps,n===null?Sc(e):jt=n}function l_(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=wy(a,n,n.pendingProps,n.type,void 0,Pt);break;case 11:n=wy(a,n,n.pendingProps,n.type.render,n.ref,Pt);break;case 5:Mf(n);default:Oy(a,n),n=jt=ag(n,ps),n=Ny(a,n,ps)}e.memoizedProps=e.pendingProps,n===null?Sc(e):jt=n}function Za(e,n,a,o){rs=Yr=null,Mf(n),qa=null,sl=0;var h=n.return;try{if(Kb(e,h,n,a,Pt)){Te=1,cc(e,Qn(a,e.current)),jt=null;return}}catch(d){if(h!==null)throw jt=h,d;Te=1,cc(e,Qn(a,e.current)),jt=null;return}n.flags&32768?(Ht||o===1?e=!0:Xa||(Pt&536870912)!==0?e=!1:(Xs=e=!0,(o===2||o===9||o===3||o===6)&&(o=On.current,o!==null&&o.tag===13&&(o.flags|=16384))),u_(n,e)):Sc(n)}function Sc(e){var n=e;do{if((n.flags&32768)!==0){u_(n,Xs);return}e=n.return;var a=Xb(n.alternate,n,ps);if(a!==null){jt=a;return}if(n=n.sibling,n!==null){jt=n;return}jt=n=e}while(n!==null);Te===0&&(Te=5)}function u_(e,n){do{var a=$b(e.alternate,e);if(a!==null){a.flags&=32767,jt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){jt=e;return}jt=e=a}while(e!==null);Te=6,jt=null}function c_(e,n,a,o,h,d,v,T,D){e.cancelPendingCommit=null;do Ac();while(Be!==0);if((Wt&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(d=n.lanes|n.childLanes,d|=lf,Jh(e,a,d,v,T,D),e===le&&(jt=le=null,Pt=0),Wa=n,Js=e,gs=a,gd=d,yd=h,Zy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,lS(Fe,function(){return p_(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=R.T,R.T=null,h=P.p,P.p=2,v=Wt,Wt|=4;try{Wb(e,n,a)}finally{Wt=v,P.p=h,R.T=o}}Be=1,h_(),f_(),d_()}}function h_(){if(Be===1){Be=0;var e=Js,n=Wa,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=R.T,R.T=null;var o=P.p;P.p=2;var h=Wt;Wt|=4;try{Gy(n,e);var d=Dd,v=Wp(e.containerInfo),T=d.focusedElem,D=d.selectionRange;if(v!==T&&T&&T.ownerDocument&&$p(T.ownerDocument.documentElement,T)){if(D!==null&&nf(T)){var H=D.start,$=D.end;if($===void 0&&($=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min($,T.value.length);else{var nt=T.ownerDocument||document,K=nt&&nt.defaultView||window;if(K.getSelection){var Q=K.getSelection(),gt=T.textContent.length,wt=Math.min(D.start,gt),oe=D.end===void 0?wt:Math.min(D.end,gt);!Q.extend&&wt>oe&&(v=oe,oe=wt,wt=v);var L=Xp(T,wt),M=Xp(T,oe);if(L&&M&&(Q.rangeCount!==1||Q.anchorNode!==L.node||Q.anchorOffset!==L.offset||Q.focusNode!==M.node||Q.focusOffset!==M.offset)){var q=nt.createRange();q.setStart(L.node,L.offset),Q.removeAllRanges(),wt>oe?(Q.addRange(q),Q.extend(M.node,M.offset)):(q.setEnd(M.node,M.offset),Q.addRange(q))}}}}for(nt=[],Q=T;Q=Q.parentNode;)Q.nodeType===1&&nt.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<nt.length;T++){var tt=nt[T];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}jc=!!Nd,Dd=Nd=null}finally{Wt=h,P.p=o,R.T=a}}e.current=n,Be=2}}function f_(){if(Be===2){Be=0;var e=Js,n=Wa,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=R.T,R.T=null;var o=P.p;P.p=2;var h=Wt;Wt|=4;try{zy(e,n.alternate,n)}finally{Wt=h,P.p=o,R.T=a}}Be=3}}function d_(){if(Be===4||Be===3){Be=0,ze();var e=Js,n=Wa,a=gs,o=Zy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Be=5:(Be=0,Wa=Js=null,m_(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Ws=null),Zi(a),n=n.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(fn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=R.T,h=P.p,P.p=2,R.T=null;try{for(var d=e.onRecoverableError,v=0;v<o.length;v++){var T=o[v];d(T.value,{componentStack:T.stack})}}finally{R.T=n,P.p=h}}(gs&3)!==0&&Ac(),zi(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===_d?Tl++:(Tl=0,_d=e):Tl=0,bl(0)}}function m_(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,nl(n)))}function Ac(){return h_(),f_(),d_(),p_()}function p_(){if(Be!==5)return!1;var e=Js,n=gd;gd=0;var a=Zi(gs),o=R.T,h=P.p;try{P.p=32>a?32:a,R.T=null,a=yd,yd=null;var d=Js,v=gs;if(Be=0,Wa=Js=null,gs=0,(Wt&6)!==0)throw Error(r(331));var T=Wt;if(Wt|=4,$y(d.current),Yy(d,d.current,v,a),Wt=T,bl(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(fn,d)}catch{}return!0}finally{P.p=h,R.T=o,m_(e,n)}}function g_(e,n,a){n=Qn(a,n),n=$f(e.stateNode,n,2),e=Gs(e,n,2),e!==null&&(kr(e,2),zi(e))}function ee(e,n,a){if(e.tag===3)g_(e,e,a);else for(;n!==null;){if(n.tag===3){g_(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ws===null||!Ws.has(o))){e=Qn(a,e),a=yy(2),o=Gs(n,a,2),o!==null&&(_y(a,o,n,e),kr(o,2),zi(o));break}}n=n.return}}function Td(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new tS;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(dd=!0,h.add(a),e=rS.bind(null,e,n,a),n.then(e,e))}function rS(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,le===e&&(Pt&a)===a&&(Te===4||Te===3&&(Pt&62914560)===Pt&&300>ie()-_c?(Wt&2)===0&&Ja(e,0):md|=a,$a===Pt&&($a=0)),zi(e)}function y_(e,n){n===0&&(n=Eu()),e=Fr(e,n),e!==null&&(kr(e,n),zi(e))}function aS(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),y_(e,a)}function oS(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(n),y_(e,a)}function lS(e,n){return vt(e,n)}var wc=null,to=null,bd=!1,xc=!1,Sd=!1,tr=0;function zi(e){e!==to&&e.next===null&&(to===null?wc=to=e:to=to.next=e),xc=!0,bd||(bd=!0,cS())}function bl(e,n){if(!Sd&&xc){Sd=!0;do for(var a=!1,o=wc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,T=o.pingedLanes;d=(1<<31-Se(42|e)+1)-1,d&=h&~(v&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,T_(o,d))}else d=Pt,d=bi(o,o===le?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||ri(o,d)||(a=!0,T_(o,d));o=o.next}while(a);Sd=!1}}function uS(){__()}function __(){xc=bd=!1;var e=0;tr!==0&&ES()&&(e=tr);for(var n=ie(),a=null,o=wc;o!==null;){var h=o.next,d=v_(o,n);d===0?(o.next=null,a===null?wc=h:a.next=h,h===null&&(to=a)):(a=o,(e!==0||(d&3)!==0)&&(xc=!0)),o=h}Be!==0&&Be!==5||bl(e),tr!==0&&(tr=0)}function v_(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-Se(d),T=1<<v,D=h[v];D===-1?((T&a)===0||(T&o)!==0)&&(h[v]=Wh(T,n)):D<=n&&(e.expiredLanes|=T),d&=~T}if(n=le,a=Pt,a=bi(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(te===2||te===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&At(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ri(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&At(o),Zi(a)){case 2:case 8:a=Cn;break;case 32:a=Fe;break;case 268435456:a=Kt;break;default:a=Fe}return o=E_.bind(null,e),a=vt(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&At(o),e.callbackPriority=2,e.callbackNode=null,2}function E_(e,n){if(Be!==0&&Be!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ac()&&e.callbackNode!==a)return null;var o=Pt;return o=bi(e,e===le?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(e_(e,o,n),v_(e,ie()),e.callbackNode!=null&&e.callbackNode===a?E_.bind(null,e):null)}function T_(e,n){if(Ac())return null;e_(e,n,!0)}function cS(){bS(function(){(Wt&6)!==0?vt(Xe,uS):__()})}function Ad(){if(tr===0){var e=Ua;e===0&&(e=Ei,Ei<<=1,(Ei&261888)===0&&(Ei=256)),tr=e}return tr}function b_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Aa(""+e)}function S_(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function hS(e,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var d=b_((h[Ge]||null).action),v=o.submitter;v&&(n=(n=v[Ge]||null)?b_(n.formAction):v.getAttribute("formAction"),n!==null&&(d=n,v=null));var T=new Oi("action","action",null,o,h);e.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(tr!==0){var D=v?S_(h,v):new FormData(h);Ff(a,{pending:!0,data:D,method:h.method,action:d},null,D)}}else typeof d=="function"&&(T.preventDefault(),D=v?S_(h,v):new FormData(h),Ff(a,{pending:!0,data:D,method:h.method,action:d},d,D))},currentTarget:h}]})}}for(var wd=0;wd<of.length;wd++){var xd=of[wd],fS=xd.toLowerCase(),dS=xd[0].toUpperCase()+xd.slice(1);di(fS,"on"+dS)}di(tg,"onAnimationEnd"),di(eg,"onAnimationIteration"),di(ng,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(Ib,"onTransitionRun"),di(kb,"onTransitionStart"),di(Nb,"onTransitionCancel"),di(ig,"onTransitionEnd"),Ii("onMouseEnter",["mouseout","mouseover"]),Ii("onMouseLeave",["mouseout","mouseover"]),Ii("onPointerEnter",["pointerout","pointerover"]),Ii("onPointerLeave",["pointerout","pointerover"]),Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sl));function A_(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var d=void 0;if(n)for(var v=o.length-1;0<=v;v--){var T=o[v],D=T.instance,H=T.currentTarget;if(T=T.listener,D!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=H;try{d(h)}catch($){Bu($)}h.currentTarget=null,d=D}else for(v=0;v<o.length;v++){if(T=o[v],D=T.instance,H=T.currentTarget,T=T.listener,D!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=H;try{d(h)}catch($){Bu($)}h.currentTarget=null,d=D}}}}function Lt(e,n){var a=n[va];a===void 0&&(a=n[va]=new Set);var o=e+"__bubble";a.has(o)||(w_(n,e,2,!1),a.add(o))}function Rd(e,n,a){var o=0;n&&(o|=4),w_(a,e,o,n)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function Cd(e){if(!e[Rc]){e[Rc]=!0,Mo.forEach(function(a){a!=="selectionchange"&&(mS.has(a)||Rd(a,!1,e),Rd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Rc]||(n[Rc]=!0,Rd("selectionchange",!1,n))}}function w_(e,n,a,o){switch(tv(n)){case 2:var h=qS;break;case 8:h=HS;break;default:h=Hd}a=h.bind(null,n,a,e),h=void 0,!jr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,a,{capture:!0,passive:h}):e.addEventListener(n,a,!0):h!==void 0?e.addEventListener(n,a,{passive:h}):e.addEventListener(n,a,!1)}function Id(e,n,a,o,h){var d=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var T=o.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=o.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=xi(T),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){o=d=v;continue t}T=T.parentNode}}o=o.return}Ms(function(){var H=d,$=Fn(a),nt=[];t:{var K=sg.get(e);if(K!==void 0){var Q=Oi,gt=e;switch(e){case"keypress":if(Pr(a)===0)break t;case"keydown":case"keyup":Q=Pu;break;case"focusin":gt="focus",Q=zr;break;case"focusout":gt="blur",Q=zr;break;case"beforeblur":case"afterblur":Q=zr;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Iu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=g;break;case tg:case eg:case ng:Q=Nu;break;case ig:Q=A;break;case"scroll":case"scrollend":Q=Yo;break;case"wheel":Q=Y;break;case"copy":case"cut":case"paste":Q=Du;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ns;break;case"toggle":case"beforetoggle":Q=Dt}var wt=(n&4)!==0,oe=!wt&&(e==="scroll"||e==="scrollend"),L=wt?K!==null?K+"Capture":null:K;wt=[];for(var M=H,q;M!==null;){var tt=M;if(q=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||q===null||L===null||(tt=ui(M,L),tt!=null&&wt.push(Al(M,tt,q))),oe)break;M=M.return}0<wt.length&&(K=new Q(K,gt,null,a,$),nt.push({event:K,listeners:wt}))}}if((n&7)===0){t:{if(K=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",K&&a!==Fo&&(gt=a.relatedTarget||a.fromElement)&&(xi(gt)||gt[Ai]))break t;if((Q||K)&&(K=$.window===$?$:(K=$.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(gt=a.relatedTarget||a.toElement,Q=H,gt=gt?xi(gt):null,gt!==null&&(oe=u(gt),wt=gt.tag,gt!==oe||wt!==5&&wt!==27&&wt!==6)&&(gt=null)):(Q=null,gt=H),Q!==gt)){if(wt=Qo,tt="onMouseLeave",L="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(wt=ns,tt="onPointerLeave",L="onPointerEnter",M="pointer"),oe=Q==null?K:In(Q),q=gt==null?K:In(gt),K=new wt(tt,M+"leave",Q,a,$),K.target=oe,K.relatedTarget=q,tt=null,xi($)===H&&(wt=new wt(L,M+"enter",gt,a,$),wt.target=q,wt.relatedTarget=oe,tt=wt),oe=tt,Q&&gt)e:{for(wt=pS,L=Q,M=gt,q=0,tt=L;tt;tt=wt(tt))q++;tt=0;for(var Et=M;Et;Et=wt(Et))tt++;for(;0<q-tt;)L=wt(L),q--;for(;0<tt-q;)M=wt(M),tt--;for(;q--;){if(L===M||M!==null&&L===M.alternate){wt=L;break e}L=wt(L),M=wt(M)}wt=null}else wt=null;Q!==null&&x_(nt,K,Q,wt,!1),gt!==null&&oe!==null&&x_(nt,oe,gt,wt,!0)}}t:{if(K=H?In(H):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var Yt=Hp;else if(Bp(K))if(Fp)Yt=xb;else{Yt=Ab;var yt=Sb}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?H&&Sa(H.elementType)&&(Yt=Hp):Yt=wb;if(Yt&&(Yt=Yt(e,H))){qp(nt,Yt,a,$);break t}yt&&yt(e,K,H),e==="focusout"&&H&&K.type==="number"&&H.memoizedProps.value!=null&&Bo(K,"number",K.value)}switch(yt=H?In(H):window,e){case"focusin":(Bp(yt)||yt.contentEditable==="true")&&(Na=yt,sf=H,Zo=null);break;case"focusout":Zo=sf=Na=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,Jp(nt,a,$);break;case"selectionchange":if(Cb)break;case"keydown":case"keyup":Jp(nt,a,$)}var Mt;if($t)t:{switch(e){case"compositionstart":var Ut="onCompositionStart";break t;case"compositionend":Ut="onCompositionEnd";break t;case"compositionupdate":Ut="onCompositionUpdate";break t}Ut=void 0}else ka?Br(e,a)&&(Ut="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ut="onCompositionStart");Ut&&(ji&&a.locale!=="ko"&&(ka||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&ka&&(Mt=Ko()):(Di=$,Go="value"in Di?Di.value:Di.textContent,ka=!0)),yt=Cc(H,Ut),0<yt.length&&(Ut=new Mi(Ut,e,null,a,$),nt.push({event:Ut,listeners:yt}),Mt?Ut.data=Mt:(Mt=Ia(a),Mt!==null&&(Ut.data=Mt)))),(Mt=Kn?vb(e,a):Eb(e,a))&&(Ut=Cc(H,"onBeforeInput"),0<Ut.length&&(yt=new Mi("onBeforeInput","beforeinput",null,a,$),nt.push({event:yt,listeners:Ut}),yt.data=Mt)),hS(nt,e,H,a,$)}A_(nt,n)})}function Al(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Cc(e,n){for(var a=n+"Capture",o=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ui(e,a),h!=null&&o.unshift(Al(e,h,d)),h=ui(e,n),h!=null&&o.push(Al(e,h,d))),e.tag===3)return o;e=e.return}return[]}function pS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function x_(e,n,a,o,h){for(var d=n._reactName,v=[];a!==null&&a!==o;){var T=a,D=T.alternate,H=T.stateNode;if(T=T.tag,D!==null&&D===o)break;T!==5&&T!==26&&T!==27||H===null||(D=H,h?(H=ui(a,d),H!=null&&v.unshift(Al(a,H,D))):h||(H=ui(a,d),H!=null&&v.push(Al(a,H,D)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var gS=/\r\n?/g,yS=/\u0000|\uFFFD/g;function R_(e){return(typeof e=="string"?e:""+e).replace(gS,`
`).replace(yS,"")}function C_(e,n){return n=R_(n),R_(e)===n}function ae(e,n,a,o,h,d){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||vn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&vn(e,""+o);break;case"className":kn(e,"class",o);break;case"tabIndex":kn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(e,a,o);break;case"style":Ho(e,o,d);break;case"data":if(n!=="object"){kn(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Aa(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&ae(e,n,"name",h.name,h,null),ae(e,n,"formEncType",h.formEncType,h,null),ae(e,n,"formMethod",h.formMethod,h,null),ae(e,n,"formTarget",h.formTarget,h,null)):(ae(e,n,"encType",h.encType,h,null),ae(e,n,"method",h.method,h,null),ae(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Aa(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=li);break;case"onScroll":o!=null&&Lt("scroll",e);break;case"onScrollEnd":o!=null&&Lt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Aa(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Lt("beforetoggle",e),Lt("toggle",e),Ta(e,"popover",o);break;case"xlinkActuate":De(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":De(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":De(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":De(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":De(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":De(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":De(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":De(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":De(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ta(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Cu.get(a)||a,Ta(e,a,o))}}function kd(e,n,a,o,h,d){switch(a){case"style":Ho(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof o=="string"?vn(e,o):(typeof o=="number"||typeof o=="bigint")&&vn(e,""+o);break;case"onScroll":o!=null&&Lt("scroll",e);break;case"onScrollEnd":o!=null&&Lt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jo.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),d=e[Ge]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(n,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):Ta(e,a,o)}}}function en(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",e),Lt("load",e);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:ae(e,n,d,v,a,null)}}h&&ae(e,n,"srcSet",a.srcSet,a,null),o&&ae(e,n,"src",a.src,a,null);return;case"input":Lt("invalid",e);var T=d=v=h=null,D=null,H=null;for(o in a)if(a.hasOwnProperty(o)){var $=a[o];if($!=null)switch(o){case"name":h=$;break;case"type":v=$;break;case"checked":D=$;break;case"defaultChecked":H=$;break;case"value":d=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,n));break;default:ae(e,n,o,$,a,null)}}wu(e,d,T,D,H,v,h,!1);return;case"select":Lt("invalid",e),o=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":o=T;default:ae(e,n,h,T,a,null)}n=d,a=v,e.multiple=!!o,n!=null?Ns(e,!!o,n,!1):a!=null&&Ns(e,!!o,a,!0);return;case"textarea":Lt("invalid",e),d=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":o=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:ae(e,n,v,T,a,null)}Ds(e,o,h,d);return;case"option":for(D in a)a.hasOwnProperty(D)&&(o=a[D],o!=null)&&(D==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":ae(e,n,D,o,a,null));return;case"dialog":Lt("beforetoggle",e),Lt("toggle",e),Lt("cancel",e),Lt("close",e);break;case"iframe":case"object":Lt("load",e);break;case"video":case"audio":for(o=0;o<Sl.length;o++)Lt(Sl[o],e);break;case"image":Lt("error",e),Lt("load",e);break;case"details":Lt("toggle",e);break;case"embed":case"source":case"link":Lt("error",e),Lt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(o=a[H],o!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:ae(e,n,H,o,a,null)}return;default:if(Sa(n)){for($ in a)a.hasOwnProperty($)&&(o=a[$],o!==void 0&&kd(e,n,$,o,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(o=a[T],o!=null&&ae(e,n,T,o,a,null))}function _S(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,T=null,D=null,H=null,$=null;for(Q in a){var nt=a[Q];if(a.hasOwnProperty(Q)&&nt!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":D=nt;default:o.hasOwnProperty(Q)||ae(e,n,Q,null,o,nt)}}for(var K in o){var Q=o[K];if(nt=a[K],o.hasOwnProperty(K)&&(Q!=null||nt!=null))switch(K){case"type":d=Q;break;case"name":h=Q;break;case"checked":H=Q;break;case"defaultChecked":$=Q;break;case"value":v=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,n));break;default:Q!==nt&&ae(e,n,K,Q,o,nt)}}ba(e,v,T,D,H,$,d,h);return;case"select":Q=v=T=K=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":Q=D;default:o.hasOwnProperty(d)||ae(e,n,d,null,o,D)}for(h in o)if(d=o[h],D=a[h],o.hasOwnProperty(h)&&(d!=null||D!=null))switch(h){case"value":K=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==D&&ae(e,n,h,d,o,D)}n=T,a=v,o=Q,K!=null?Ns(e,!!a,K,!1):!!o!=!!a&&(n!=null?Ns(e,!!a,n,!0):Ns(e,!!a,a?[]:"",!1));return;case"textarea":Q=K=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ae(e,n,T,null,o,h)}for(v in o)if(h=o[v],d=a[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":K=h;break;case"defaultValue":Q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&ae(e,n,v,h,o,d)}xu(e,K,Q);return;case"option":for(var gt in a)K=a[gt],a.hasOwnProperty(gt)&&K!=null&&!o.hasOwnProperty(gt)&&(gt==="selected"?e.selected=!1:ae(e,n,gt,null,o,K));for(D in o)K=o[D],Q=a[D],o.hasOwnProperty(D)&&K!==Q&&(K!=null||Q!=null)&&(D==="selected"?e.selected=K&&typeof K!="function"&&typeof K!="symbol":ae(e,n,D,K,o,Q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wt in a)K=a[wt],a.hasOwnProperty(wt)&&K!=null&&!o.hasOwnProperty(wt)&&ae(e,n,wt,null,o,K);for(H in o)if(K=o[H],Q=a[H],o.hasOwnProperty(H)&&K!==Q&&(K!=null||Q!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,n));break;default:ae(e,n,H,K,o,Q)}return;default:if(Sa(n)){for(var oe in a)K=a[oe],a.hasOwnProperty(oe)&&K!==void 0&&!o.hasOwnProperty(oe)&&kd(e,n,oe,void 0,o,K);for($ in o)K=o[$],Q=a[$],!o.hasOwnProperty($)||K===Q||K===void 0&&Q===void 0||kd(e,n,$,K,o,Q);return}}for(var L in a)K=a[L],a.hasOwnProperty(L)&&K!=null&&!o.hasOwnProperty(L)&&ae(e,n,L,null,o,K);for(nt in o)K=o[nt],Q=a[nt],!o.hasOwnProperty(nt)||K===Q||K==null&&Q==null||ae(e,n,nt,K,o,Q)}function I_(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],d=h.transferSize,v=h.initiatorType,T=h.duration;if(d&&T&&I_(v)){for(v=0,T=h.responseEnd,o+=1;o<a.length;o++){var D=a[o],H=D.startTime;if(H>T)break;var $=D.transferSize,nt=D.initiatorType;$&&I_(nt)&&(D=D.responseEnd,v+=$*(D<T?1:(T-H)/(D-H)))}if(--o,n+=8*(d+v)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Nd=null,Dd=null;function Ic(e){return e.nodeType===9?e:e.ownerDocument}function k_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function N_(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Od(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Vd=null;function ES(){var e=window.event;return e&&e.type==="popstate"?e===Vd?!1:(Vd=e,!0):(Vd=null,!1)}var D_=typeof setTimeout=="function"?setTimeout:void 0,TS=typeof clearTimeout=="function"?clearTimeout:void 0,O_=typeof Promise=="function"?Promise:void 0,bS=typeof queueMicrotask=="function"?queueMicrotask:typeof O_<"u"?function(e){return O_.resolve(null).then(e).catch(SS)}:D_;function SS(e){setTimeout(function(){throw e})}function er(e){return e==="head"}function V_(e,n){var a=n,o=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(h),so(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")wl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,wl(a);for(var d=a.firstChild;d;){var v=d.nextSibling,T=d.nodeName;d[wi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&wl(e.ownerDocument.body);a=h}while(a);so(n)}function M_(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function Md(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Md(a),Ea(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function AS(e,n,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[wi])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Zn(e.nextSibling),e===null)break}return null}function wS(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Zn(e.nextSibling),e===null))return null;return e}function j_(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Zn(e.nextSibling),e===null))return null;return e}function jd(e){return e.data==="$?"||e.data==="$~"}function Ld(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function xS(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Zn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Pd=null;function L_(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return Zn(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function P_(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function U_(e,n,a){switch(n=Ic(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function wl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ea(e)}var ti=new Map,z_=new Set;function kc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ys=P.d;P.d={f:RS,r:CS,D:IS,C:kS,L:NS,m:DS,X:VS,S:OS,M:MS};function RS(){var e=ys.f(),n=Tc();return e||n}function CS(e){var n=Hn(e);n!==null&&n.tag===5&&n.type==="form"?iy(n):ys.r(e)}var eo=typeof document>"u"?null:document;function B_(e,n,a){var o=eo;if(o&&typeof n=="string"&&n){var h=_n(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),z_.has(h)||(z_.add(h),e={rel:e,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),en(n,"link",e),Ne(n),o.head.appendChild(n)))}}function IS(e){ys.D(e),B_("dns-prefetch",e,null)}function kS(e,n){ys.C(e,n),B_("preconnect",e,n)}function NS(e,n,a){ys.L(e,n,a);var o=eo;if(o&&e&&n){var h='link[rel="preload"][as="'+_n(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+_n(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+_n(a.imageSizes)+'"]')):h+='[href="'+_n(e)+'"]';var d=h;switch(n){case"style":d=no(e);break;case"script":d=io(e)}ti.has(d)||(e=w({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),ti.set(d,e),o.querySelector(h)!==null||n==="style"&&o.querySelector(xl(d))||n==="script"&&o.querySelector(Rl(d))||(n=o.createElement("link"),en(n,"link",e),Ne(n),o.head.appendChild(n)))}}function DS(e,n){ys.m(e,n);var a=eo;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+_n(o)+'"][href="'+_n(e)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=io(e)}if(!ti.has(d)&&(e=w({rel:"modulepreload",href:e},n),ti.set(d,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Rl(d)))return}o=a.createElement("link"),en(o,"link",e),Ne(o),a.head.appendChild(o)}}}function OS(e,n,a){ys.S(e,n,a);var o=eo;if(o&&e){var h=Ri(o).hoistableStyles,d=no(e);n=n||"default";var v=h.get(d);if(!v){var T={loading:0,preload:null};if(v=o.querySelector(xl(d)))T.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":n},a),(a=ti.get(d))&&Ud(e,a);var D=v=o.createElement("link");Ne(D),en(D,"link",e),D._p=new Promise(function(H,$){D.onload=H,D.onerror=$}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Nc(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(d,v)}}}function VS(e,n){ys.X(e,n);var a=eo;if(a&&e){var o=Ri(a).hoistableScripts,h=io(e),d=o.get(h);d||(d=a.querySelector(Rl(h)),d||(e=w({src:e,async:!0},n),(n=ti.get(h))&&zd(e,n),d=a.createElement("script"),Ne(d),en(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function MS(e,n){ys.M(e,n);var a=eo;if(a&&e){var o=Ri(a).hoistableScripts,h=io(e),d=o.get(h);d||(d=a.querySelector(Rl(h)),d||(e=w({src:e,async:!0,type:"module"},n),(n=ti.get(h))&&zd(e,n),d=a.createElement("script"),Ne(d),en(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function q_(e,n,a,o){var h=(h=mt.current)?kc(h):null;if(!h)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=no(a.href),a=Ri(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=no(a.href);var d=Ri(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(xl(e)))&&!d._p&&(v.instance=d,v.state.loading=5),ti.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ti.set(e,a),d||jS(h,e,a,v.state))),n&&o===null)throw Error(r(528,""));return v}if(n&&o!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=io(a),a=Ri(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function no(e){return'href="'+_n(e)+'"'}function xl(e){return'link[rel="stylesheet"]['+e+"]"}function H_(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function jS(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),en(n,"link",a),Ne(n),e.head.appendChild(n))}function io(e){return'[src="'+_n(e)+'"]'}function Rl(e){return"script[async]"+e}function F_(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+_n(a.href)+'"]');if(o)return n.instance=o,Ne(o),o;var h=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Ne(o),en(o,"style",h),Nc(o,a.precedence,e),n.instance=o;case"stylesheet":h=no(a.href);var d=e.querySelector(xl(h));if(d)return n.state.loading|=4,n.instance=d,Ne(d),d;o=H_(a),(h=ti.get(h))&&Ud(o,h),d=(e.ownerDocument||e).createElement("link"),Ne(d);var v=d;return v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),en(d,"link",o),n.state.loading|=4,Nc(d,a.precedence,e),n.instance=d;case"script":return d=io(a.src),(h=e.querySelector(Rl(d)))?(n.instance=h,Ne(h),h):(o=a,(h=ti.get(d))&&(o=w({},a),zd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),Ne(h),en(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Nc(o,a.precedence,e));return n.instance}function Nc(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var T=o[v];if(T.dataset.precedence===n)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Ud(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function zd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Dc=null;function G_(e,n,a){if(Dc===null){var o=new Map,h=Dc=new Map;h.set(a,o)}else h=Dc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[wi]||d[ke]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(n)||"";v=e+v;var T=o.get(v);T?T.push(d):o.set(v,[d])}}return o}function K_(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function LS(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Y_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function PS(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=no(o.href),d=n.querySelector(xl(h));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Oc.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=d,Ne(d);return}d=n.ownerDocument||n,o=H_(o),(h=ti.get(h))&&Ud(o,h),d=d.createElement("link"),Ne(d);var v=d;v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),en(d,"link",o),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Oc.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Bd=0;function US(e,n){return e.stylesheets&&e.count===0&&Mc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&Mc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&Bd===0&&(Bd=62500*vS());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Mc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Bd?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Oc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Vc=null;function Mc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Vc=new Map,n.forEach(zS,e),Vc=null,Oc.call(e))}function zS(e,n){if(!(n.state.loading&4)){var a=Vc.get(e);if(a)var o=a.get(null);else{a=new Map,Vc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=n.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||o,d===o&&a.set(null,h),a.set(v,h),this.count++,o=Oc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var Cl={$$typeof:_t,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function BS(e,n,a,o,h,d,v,T,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.hiddenUpdates=Si(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Q_(e,n,a,o,h,d,v,T,D,H,$,nt){return e=new BS(e,n,a,v,D,H,$,nt,T),n=1,d===!0&&(n|=24),d=Dn(3,null,null,n),e.current=d,d.stateNode=e,n=Ef(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:n},Af(d),e}function X_(e){return e?(e=Va,e):Va}function $_(e,n,a,o,h,d){h=X_(h),o.context===null?o.context=h:o.pendingContext=h,o=Fs(n),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=Gs(e,o,n),a!==null&&(An(a,e,n),al(a,e,n))}function W_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function qd(e,n){W_(e,n),(e=e.alternate)&&W_(e,n)}function J_(e){if(e.tag===13||e.tag===31){var n=Fr(e,67108864);n!==null&&An(n,e,67108864),qd(e,67108864)}}function Z_(e){if(e.tag===13||e.tag===31){var n=Ln();n=Dr(n);var a=Fr(e,n);a!==null&&An(a,e,n),qd(e,n)}}var jc=!0;function qS(e,n,a,o){var h=R.T;R.T=null;var d=P.p;try{P.p=2,Hd(e,n,a,o)}finally{P.p=d,R.T=h}}function HS(e,n,a,o){var h=R.T;R.T=null;var d=P.p;try{P.p=8,Hd(e,n,a,o)}finally{P.p=d,R.T=h}}function Hd(e,n,a,o){if(jc){var h=Fd(o);if(h===null)Id(e,n,o,Lc,a),ev(e,o);else if(GS(h,e,n,a,o))o.stopPropagation();else if(ev(e,o),n&4&&-1<FS.indexOf(e)){for(;h!==null;){var d=Hn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Ti(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var D=1<<31-Se(v);T.entanglements[1]|=D,v&=~D}zi(d),(Wt&6)===0&&(vc=ie()+500,bl(0))}}break;case 31:case 13:T=Fr(d,2),T!==null&&An(T,d,2),Tc(),qd(d,2)}if(d=Fd(o),d===null&&Id(e,n,o,Lc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else Id(e,n,o,null,a)}}function Fd(e){return e=Fn(e),Gd(e)}var Lc=null;function Gd(e){if(Lc=null,e=xi(e),e!==null){var n=u(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=f(n),e!==null)return e;e=null}else if(a===31){if(e=m(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Lc=e,null}function tv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(an()){case Xe:return 2;case Cn:return 8;case Fe:case ya:return 32;case Kt:return 268435456;default:return 32}default:return 32}}var Kd=!1,nr=null,ir=null,sr=null,Il=new Map,kl=new Map,rr=[],FS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ev(e,n){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":Il.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(n.pointerId)}}function Nl(e,n,a,o,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},n!==null&&(n=Hn(n),n!==null&&J_(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function GS(e,n,a,o,h){switch(n){case"focusin":return nr=Nl(nr,e,n,a,o,h),!0;case"dragenter":return ir=Nl(ir,e,n,a,o,h),!0;case"mouseover":return sr=Nl(sr,e,n,a,o,h),!0;case"pointerover":var d=h.pointerId;return Il.set(d,Nl(Il.get(d)||null,e,n,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,kl.set(d,Nl(kl.get(d)||null,e,n,a,o,h)),!0}return!1}function nv(e){var n=xi(e.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){e.blockedOn=n,ai(e.priority,function(){Z_(a)});return}}else if(n===31){if(n=m(a),n!==null){e.blockedOn=n,ai(e.priority,function(){Z_(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Fd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Fo=o,a.target.dispatchEvent(o),Fo=null}else return n=Hn(a),n!==null&&J_(n),e.blockedOn=a,!1;n.shift()}return!0}function iv(e,n,a){Pc(e)&&a.delete(n)}function KS(){Kd=!1,nr!==null&&Pc(nr)&&(nr=null),ir!==null&&Pc(ir)&&(ir=null),sr!==null&&Pc(sr)&&(sr=null),Il.forEach(iv),kl.forEach(iv)}function Uc(e,n){e.blockedOn===n&&(e.blockedOn=null,Kd||(Kd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,KS)))}var zc=null;function sv(e){zc!==e&&(zc=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){zc===e&&(zc=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(Gd(o||a)===null)continue;break}var d=Hn(a);d!==null&&(e.splice(n,3),n-=3,Ff(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function so(e){function n(D){return Uc(D,e)}nr!==null&&Uc(nr,e),ir!==null&&Uc(ir,e),sr!==null&&Uc(sr,e),Il.forEach(n),kl.forEach(n);for(var a=0;a<rr.length;a++){var o=rr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<rr.length&&(a=rr[0],a.blockedOn===null);)nv(a),a.blockedOn===null&&rr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],v=h[Ge]||null;if(typeof d=="function")v||sv(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ge]||null)T=v.formAction;else if(Gd(h)!==null)continue}else T=v.action;typeof T=="function"?a[o+1]=T:(a.splice(o,3),o-=3),sv(a)}}}function rv(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Yd(e){this._internalRoot=e}Bc.prototype.render=Yd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,o=Ln();$_(a,o,e,n,null,null)},Bc.prototype.unmount=Yd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;$_(e.current,2,null,e,null,null),Tc(),n[Ai]=null}};function Bc(e){this._internalRoot=e}Bc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Tu();e={blockedOn:null,target:e,priority:n};for(var a=0;a<rr.length&&n!==0&&n<rr[a].priority;a++);rr.splice(a,0,e),a===0&&nv(e)}};var av=t.version;if(av!=="19.2.3")throw Error(r(527,av,"19.2.3"));P.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=_(n),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var YS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{fn=qc.inject(YS),$e=qc}catch{}}return Ol.createRoot=function(e,n){if(!l(e))throw Error(r(299));var a=!1,o="",h=dy,d=my,v=py;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Q_(e,1,!1,null,null,a,o,null,h,d,v,rv),e[Ai]=n.current,Cd(e),new Yd(n)},Ol.hydrateRoot=function(e,n,a){if(!l(e))throw Error(r(299));var o=!1,h="",d=dy,v=my,T=py,D=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),n=Q_(e,1,!0,n,a??null,o,h,D,d,v,T,rv),n.context=X_(null),a=n.current,o=Ln(),o=Dr(o),h=Fs(o),h.callback=null,Gs(a,h,o),a=o,n.current.lanes=a,kr(n,a),zi(n),e[Ai]=n.current,Cd(e),new Bc(n)},Ol.version="19.2.3",Ol}var gv;function iA(){if(gv)return $d.exports;gv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),$d.exports=nA(),$d.exports}var sA=iA();const rA=()=>{};var yv={};const QE=function(s){const t=[];let i=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},aA=function(s){const t=[];let i=0,r=0;for(;i<s.length;){const l=s[i++];if(l<128)t[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[i++];t[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[i++],f=s[i++],m=s[i++],y=((l&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(y>>10)),t[r++]=String.fromCharCode(56320+(y&1023))}else{const u=s[i++],f=s[i++];t[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return t.join("")},XE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const u=s[l],f=l+1<s.length,m=f?s[l+1]:0,y=l+2<s.length,_=y?s[l+2]:0,b=u>>2,w=(u&3)<<4|m>>4;let x=(m&15)<<2|_>>6,U=_&63;y||(U=64,f||(x=64)),r.push(i[b],i[w],i[x],i[U])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(QE(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):aA(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const u=i[s.charAt(l++)],m=l<s.length?i[s.charAt(l)]:0;++l;const _=l<s.length?i[s.charAt(l)]:64;++l;const w=l<s.length?i[s.charAt(l)]:64;if(++l,u==null||m==null||_==null||w==null)throw new oA;const x=u<<2|m>>4;if(r.push(x),_!==64){const U=m<<4&240|_>>2;if(r.push(U),w!==64){const J=_<<6&192|w;r.push(J)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class oA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lA=function(s){const t=QE(s);return XE.encodeByteArray(t,!0)},ah=function(s){return lA(s).replace(/\./g,"")},$E=function(s){try{return XE.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function uA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const cA=()=>uA().__FIREBASE_DEFAULTS__,hA=()=>{if(typeof process>"u"||typeof yv>"u")return;const s=yv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},fA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&$E(s[1]);return t&&JSON.parse(t)},Rh=()=>{try{return rA()||cA()||hA()||fA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},WE=s=>Rh()?.emulatorHosts?.[s],dA=s=>{const t=WE(s);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},JE=()=>Rh()?.config,ZE=s=>Rh()?.[`_${s}`];class mA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}function Ao(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tT(s){return(await fetch(s,{credentials:"include"})).ok}function pA(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ah(JSON.stringify(i)),ah(JSON.stringify(f)),""].join(".")}const zl={};function gA(){const s={prod:[],emulator:[]};for(const t of Object.keys(zl))zl[t]?s.emulator.push(t):s.prod.push(t);return s}function yA(s){let t=document.getElementById(s),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),i=!0),{created:i,element:t}}let _v=!1;function eT(s,t){if(typeof window>"u"||typeof document>"u"||!Ao(window.location.host)||zl[s]===t||zl[s]||_v)return;zl[s]=t;function i(x){return`__firebase__banner__${x}`}const r="__firebase__banner",u=gA().prod.length>0;function f(){const x=document.getElementById(r);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function y(x,U){x.setAttribute("width","24"),x.setAttribute("id",U),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function _(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{_v=!0,f()},x}function b(x,U){x.setAttribute("id",U),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function w(){const x=yA(r),U=i("text"),J=document.getElementById(U)||document.createElement("span"),W=i("learnmore"),X=document.getElementById(W)||document.createElement("a"),Z=i("preprendIcon"),ut=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const _t=x.element;m(_t),b(X,W);const Vt=_();y(ut,Z),_t.append(ut,J,X,Vt),document.body.appendChild(_t)}u?(J.innerText="Preview backend disconnected.",ut.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ut.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,J.innerText="Preview backend running in this workspace."),J.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _A(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function vA(){const s=Rh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function bA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SA(){const s=hn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function AA(){return!vA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wA(){try{return typeof indexedDB=="object"}catch{return!1}}function xA(){return new Promise((s,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(i){t(i)}})}const RA="FirebaseError";class xs extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=RA,Object.setPrototypeOf(this,xs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nu.prototype.create)}}class nu{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},l=`${this.service}/${t}`,u=this.errors[t],f=u?CA(u,r):"Error",m=`${this.serviceName}: ${f} (${l}).`;return new xs(l,m,r)}}function CA(s,t){return s.replace(IA,(i,r)=>{const l=t[r];return l!=null?String(l):`<${r}?>`})}const IA=/\{\$([^}]+)}/g;function kA(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function _r(s,t){if(s===t)return!0;const i=Object.keys(s),r=Object.keys(t);for(const l of i){if(!r.includes(l))return!1;const u=s[l],f=t[l];if(vv(u)&&vv(f)){if(!_r(u,f))return!1}else if(u!==f)return!1}for(const l of r)if(!i.includes(l))return!1;return!0}function vv(s){return s!==null&&typeof s=="object"}function iu(s){const t=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Vl(s){const t={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");t[decodeURIComponent(l)]=decodeURIComponent(u)}}),t}function Ml(s){const t=s.indexOf("?");if(!t)return"";const i=s.indexOf("#",t);return s.substring(t,i>0?i:void 0)}function NA(s,t){const i=new DA(s,t);return i.subscribe.bind(i)}class DA{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,r){let l;if(t===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");OA(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:r},l.next===void 0&&(l.next=tm),l.error===void 0&&(l.error=tm),l.complete===void 0&&(l.complete=tm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OA(s,t){if(typeof s!="object"||s===null)return!1;for(const i of t)if(i in s&&typeof s[i]=="function")return!0;return!1}function tm(){}function Ce(s){return s&&s._delegate?s._delegate:s}class la{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ia="[DEFAULT]";class VA{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new mA;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jA(t))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(t=ia){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ia){return this.instances.has(t)}getOptions(t=ia){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&f.resolve(l)}return l}onInit(t,i){const r=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(r)??new Set;l.add(t),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&t(u,r),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const l of r)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MA(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ia){return this.component?this.component.multipleInstances?t:ia:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MA(s){return s===ia?void 0:s}function jA(s){return s.instantiationMode==="EAGER"}class LA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new VA(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}var zt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(zt||(zt={}));const PA={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},UA=zt.INFO,zA={[zt.DEBUG]:"log",[zt.VERBOSE]:"log",[zt.INFO]:"info",[zt.WARN]:"warn",[zt.ERROR]:"error"},BA=(s,t,...i)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),l=zA[t];if(l)console[l](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Fm{constructor(t){this.name=t,this._logLevel=UA,this._logHandler=BA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in zt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?PA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,zt.DEBUG,...t),this._logHandler(this,zt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,zt.VERBOSE,...t),this._logHandler(this,zt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,zt.INFO,...t),this._logHandler(this,zt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,zt.WARN,...t),this._logHandler(this,zt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,zt.ERROR,...t),this._logHandler(this,zt.ERROR,...t)}}const qA=(s,t)=>t.some(i=>s instanceof i);let Ev,Tv;function HA(){return Ev||(Ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FA(){return Tv||(Tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nT=new WeakMap,pm=new WeakMap,iT=new WeakMap,em=new WeakMap,Gm=new WeakMap;function GA(s){const t=new Promise((i,r)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{i(dr(s.result)),l()},f=()=>{r(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",f)});return t.then(i=>{i instanceof IDBCursor&&nT.set(i,s)}).catch(()=>{}),Gm.set(t,s),t}function KA(s){if(pm.has(s))return;const t=new Promise((i,r)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{i(),l()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});pm.set(s,t)}let gm={get(s,t,i){if(s instanceof IDBTransaction){if(t==="done")return pm.get(s);if(t==="objectStoreNames")return s.objectStoreNames||iT.get(s);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return dr(s[t])},set(s,t,i){return s[t]=i,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function YA(s){gm=s(gm)}function QA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=s.call(nm(this),t,...i);return iT.set(r,t.sort?t.sort():[t]),dr(r)}:FA().includes(s)?function(...t){return s.apply(nm(this),t),dr(nT.get(this))}:function(...t){return dr(s.apply(nm(this),t))}}function XA(s){return typeof s=="function"?QA(s):(s instanceof IDBTransaction&&KA(s),qA(s,HA())?new Proxy(s,gm):s)}function dr(s){if(s instanceof IDBRequest)return GA(s);if(em.has(s))return em.get(s);const t=XA(s);return t!==s&&(em.set(s,t),Gm.set(t,s)),t}const nm=s=>Gm.get(s);function $A(s,t,{blocked:i,upgrade:r,blocking:l,terminated:u}={}){const f=indexedDB.open(s,t),m=dr(f);return r&&f.addEventListener("upgradeneeded",y=>{r(dr(f.result),y.oldVersion,y.newVersion,dr(f.transaction),y)}),i&&f.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),m.then(y=>{u&&y.addEventListener("close",()=>u()),l&&y.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const WA=["get","getKey","getAll","getAllKeys","count"],JA=["put","add","delete","clear"],im=new Map;function bv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(im.get(t))return im.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,l=JA.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(l||WA.includes(i)))return;const u=async function(f,...m){const y=this.transaction(f,l?"readwrite":"readonly");let _=y.store;return r&&(_=_.index(m.shift())),(await Promise.all([_[i](...m),l&&y.done]))[0]};return im.set(t,u),u}YA(s=>({...s,get:(t,i,r)=>bv(t,i)||s.get(t,i,r),has:(t,i)=>!!bv(t,i)||s.has(t,i)}));class ZA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(t1(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function t1(s){return s.getComponent()?.type==="VERSION"}const ym="@firebase/app",Sv="0.14.6";const bs=new Fm("@firebase/app"),e1="@firebase/app-compat",n1="@firebase/analytics-compat",i1="@firebase/analytics",s1="@firebase/app-check-compat",r1="@firebase/app-check",a1="@firebase/auth",o1="@firebase/auth-compat",l1="@firebase/database",u1="@firebase/data-connect",c1="@firebase/database-compat",h1="@firebase/functions",f1="@firebase/functions-compat",d1="@firebase/installations",m1="@firebase/installations-compat",p1="@firebase/messaging",g1="@firebase/messaging-compat",y1="@firebase/performance",_1="@firebase/performance-compat",v1="@firebase/remote-config",E1="@firebase/remote-config-compat",T1="@firebase/storage",b1="@firebase/storage-compat",S1="@firebase/firestore",A1="@firebase/ai",w1="@firebase/firestore-compat",x1="firebase",R1="12.6.0";const _m="[DEFAULT]",C1={[ym]:"fire-core",[e1]:"fire-core-compat",[i1]:"fire-analytics",[n1]:"fire-analytics-compat",[r1]:"fire-app-check",[s1]:"fire-app-check-compat",[a1]:"fire-auth",[o1]:"fire-auth-compat",[l1]:"fire-rtdb",[u1]:"fire-data-connect",[c1]:"fire-rtdb-compat",[h1]:"fire-fn",[f1]:"fire-fn-compat",[d1]:"fire-iid",[m1]:"fire-iid-compat",[p1]:"fire-fcm",[g1]:"fire-fcm-compat",[y1]:"fire-perf",[_1]:"fire-perf-compat",[v1]:"fire-rc",[E1]:"fire-rc-compat",[T1]:"fire-gcs",[b1]:"fire-gcs-compat",[S1]:"fire-fst",[w1]:"fire-fst-compat",[A1]:"fire-vertex","fire-js":"fire-js",[x1]:"fire-js-all"};const oh=new Map,I1=new Map,vm=new Map;function Av(s,t){try{s.container.addComponent(t)}catch(i){bs.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,i)}}function po(s){const t=s.name;if(vm.has(t))return bs.debug(`There were multiple attempts to register component ${t}.`),!1;vm.set(t,s);for(const i of oh.values())Av(i,s);for(const i of I1.values())Av(i,s);return!0}function Km(s,t){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(t)}function ei(s){return s==null?!1:s.settings!==void 0}const k1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new nu("app","Firebase",k1);class N1{constructor(t,i,r){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new la("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}const wo=R1;function sT(s,t={}){let i=s;typeof t!="object"&&(t={name:t});const r={name:_m,automaticDataCollectionEnabled:!0,...t},l=r.name;if(typeof l!="string"||!l)throw mr.create("bad-app-name",{appName:String(l)});if(i||(i=JE()),!i)throw mr.create("no-options");const u=oh.get(l);if(u){if(_r(i,u.options)&&_r(r,u.config))return u;throw mr.create("duplicate-app",{appName:l})}const f=new LA(l);for(const y of vm.values())f.addComponent(y);const m=new N1(i,r,f);return oh.set(l,m),m}function rT(s=_m){const t=oh.get(s);if(!t&&s===_m&&JE())return sT();if(!t)throw mr.create("no-app",{appName:s});return t}function pr(s,t,i){let r=C1[s]??s;i&&(r+=`-${i}`);const l=r.match(/\s|\//),u=t.match(/\s|\//);if(l||u){const f=[`Unable to register library "${r}" with version "${t}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),bs.warn(f.join(" "));return}po(new la(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const D1="firebase-heartbeat-database",O1=1,Kl="firebase-heartbeat-store";let sm=null;function aT(){return sm||(sm=$A(D1,O1,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Kl)}catch(i){console.warn(i)}}}}).catch(s=>{throw mr.create("idb-open",{originalErrorMessage:s.message})})),sm}async function V1(s){try{const i=(await aT()).transaction(Kl),r=await i.objectStore(Kl).get(oT(s));return await i.done,r}catch(t){if(t instanceof xs)bs.warn(t.message);else{const i=mr.create("idb-get",{originalErrorMessage:t?.message});bs.warn(i.message)}}}async function wv(s,t){try{const r=(await aT()).transaction(Kl,"readwrite");await r.objectStore(Kl).put(t,oT(s)),await r.done}catch(i){if(i instanceof xs)bs.warn(i.message);else{const r=mr.create("idb-set",{originalErrorMessage:i?.message});bs.warn(r.message)}}}function oT(s){return`${s.name}!${s.options.appId}`}const M1=1024,j1=30;class L1{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new U1(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>j1){const l=z1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){bs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xv(),{heartbeatsToSend:i,unsentEntries:r}=P1(this._heartbeatsCache.heartbeats),l=ah(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return bs.warn(t),""}}}function xv(){return new Date().toISOString().substring(0,10)}function P1(s,t=M1){const i=[];let r=s.slice();for(const l of s){const u=i.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),Rv(i)>t){u.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),Rv(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class U1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wA()?xA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await V1(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return wv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return wv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Rv(s){return ah(JSON.stringify({version:2,heartbeats:s})).length}function z1(s){if(s.length===0)return-1;let t=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,t=r);return t}function B1(s){po(new la("platform-logger",t=>new ZA(t),"PRIVATE")),po(new la("heartbeat",t=>new L1(t),"PRIVATE")),pr(ym,Sv,s),pr(ym,Sv,"esm2020"),pr("fire-js","")}B1("");var q1="firebase",H1="12.7.0";pr(q1,H1,"app");var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var gr,lT;(function(){var s;function t(k,S){function C(){}C.prototype=S.prototype,k.F=S.prototype,k.prototype=new C,k.prototype.constructor=k,k.D=function(V,N,j){for(var I=Array(arguments.length-2),Xt=2;Xt<arguments.length;Xt++)I[Xt-2]=arguments[Xt];return S.prototype[N].apply(V,I)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,i),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(k,S,C){C||(C=0);const V=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)V[N]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(N=0;N<16;++N)V[N]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=k.g[0],C=k.g[1],N=k.g[2];let j=k.g[3],I;I=S+(j^C&(N^j))+V[0]+3614090360&4294967295,S=C+(I<<7&4294967295|I>>>25),I=j+(N^S&(C^N))+V[1]+3905402710&4294967295,j=S+(I<<12&4294967295|I>>>20),I=N+(C^j&(S^C))+V[2]+606105819&4294967295,N=j+(I<<17&4294967295|I>>>15),I=C+(S^N&(j^S))+V[3]+3250441966&4294967295,C=N+(I<<22&4294967295|I>>>10),I=S+(j^C&(N^j))+V[4]+4118548399&4294967295,S=C+(I<<7&4294967295|I>>>25),I=j+(N^S&(C^N))+V[5]+1200080426&4294967295,j=S+(I<<12&4294967295|I>>>20),I=N+(C^j&(S^C))+V[6]+2821735955&4294967295,N=j+(I<<17&4294967295|I>>>15),I=C+(S^N&(j^S))+V[7]+4249261313&4294967295,C=N+(I<<22&4294967295|I>>>10),I=S+(j^C&(N^j))+V[8]+1770035416&4294967295,S=C+(I<<7&4294967295|I>>>25),I=j+(N^S&(C^N))+V[9]+2336552879&4294967295,j=S+(I<<12&4294967295|I>>>20),I=N+(C^j&(S^C))+V[10]+4294925233&4294967295,N=j+(I<<17&4294967295|I>>>15),I=C+(S^N&(j^S))+V[11]+2304563134&4294967295,C=N+(I<<22&4294967295|I>>>10),I=S+(j^C&(N^j))+V[12]+1804603682&4294967295,S=C+(I<<7&4294967295|I>>>25),I=j+(N^S&(C^N))+V[13]+4254626195&4294967295,j=S+(I<<12&4294967295|I>>>20),I=N+(C^j&(S^C))+V[14]+2792965006&4294967295,N=j+(I<<17&4294967295|I>>>15),I=C+(S^N&(j^S))+V[15]+1236535329&4294967295,C=N+(I<<22&4294967295|I>>>10),I=S+(N^j&(C^N))+V[1]+4129170786&4294967295,S=C+(I<<5&4294967295|I>>>27),I=j+(C^N&(S^C))+V[6]+3225465664&4294967295,j=S+(I<<9&4294967295|I>>>23),I=N+(S^C&(j^S))+V[11]+643717713&4294967295,N=j+(I<<14&4294967295|I>>>18),I=C+(j^S&(N^j))+V[0]+3921069994&4294967295,C=N+(I<<20&4294967295|I>>>12),I=S+(N^j&(C^N))+V[5]+3593408605&4294967295,S=C+(I<<5&4294967295|I>>>27),I=j+(C^N&(S^C))+V[10]+38016083&4294967295,j=S+(I<<9&4294967295|I>>>23),I=N+(S^C&(j^S))+V[15]+3634488961&4294967295,N=j+(I<<14&4294967295|I>>>18),I=C+(j^S&(N^j))+V[4]+3889429448&4294967295,C=N+(I<<20&4294967295|I>>>12),I=S+(N^j&(C^N))+V[9]+568446438&4294967295,S=C+(I<<5&4294967295|I>>>27),I=j+(C^N&(S^C))+V[14]+3275163606&4294967295,j=S+(I<<9&4294967295|I>>>23),I=N+(S^C&(j^S))+V[3]+4107603335&4294967295,N=j+(I<<14&4294967295|I>>>18),I=C+(j^S&(N^j))+V[8]+1163531501&4294967295,C=N+(I<<20&4294967295|I>>>12),I=S+(N^j&(C^N))+V[13]+2850285829&4294967295,S=C+(I<<5&4294967295|I>>>27),I=j+(C^N&(S^C))+V[2]+4243563512&4294967295,j=S+(I<<9&4294967295|I>>>23),I=N+(S^C&(j^S))+V[7]+1735328473&4294967295,N=j+(I<<14&4294967295|I>>>18),I=C+(j^S&(N^j))+V[12]+2368359562&4294967295,C=N+(I<<20&4294967295|I>>>12),I=S+(C^N^j)+V[5]+4294588738&4294967295,S=C+(I<<4&4294967295|I>>>28),I=j+(S^C^N)+V[8]+2272392833&4294967295,j=S+(I<<11&4294967295|I>>>21),I=N+(j^S^C)+V[11]+1839030562&4294967295,N=j+(I<<16&4294967295|I>>>16),I=C+(N^j^S)+V[14]+4259657740&4294967295,C=N+(I<<23&4294967295|I>>>9),I=S+(C^N^j)+V[1]+2763975236&4294967295,S=C+(I<<4&4294967295|I>>>28),I=j+(S^C^N)+V[4]+1272893353&4294967295,j=S+(I<<11&4294967295|I>>>21),I=N+(j^S^C)+V[7]+4139469664&4294967295,N=j+(I<<16&4294967295|I>>>16),I=C+(N^j^S)+V[10]+3200236656&4294967295,C=N+(I<<23&4294967295|I>>>9),I=S+(C^N^j)+V[13]+681279174&4294967295,S=C+(I<<4&4294967295|I>>>28),I=j+(S^C^N)+V[0]+3936430074&4294967295,j=S+(I<<11&4294967295|I>>>21),I=N+(j^S^C)+V[3]+3572445317&4294967295,N=j+(I<<16&4294967295|I>>>16),I=C+(N^j^S)+V[6]+76029189&4294967295,C=N+(I<<23&4294967295|I>>>9),I=S+(C^N^j)+V[9]+3654602809&4294967295,S=C+(I<<4&4294967295|I>>>28),I=j+(S^C^N)+V[12]+3873151461&4294967295,j=S+(I<<11&4294967295|I>>>21),I=N+(j^S^C)+V[15]+530742520&4294967295,N=j+(I<<16&4294967295|I>>>16),I=C+(N^j^S)+V[2]+3299628645&4294967295,C=N+(I<<23&4294967295|I>>>9),I=S+(N^(C|~j))+V[0]+4096336452&4294967295,S=C+(I<<6&4294967295|I>>>26),I=j+(C^(S|~N))+V[7]+1126891415&4294967295,j=S+(I<<10&4294967295|I>>>22),I=N+(S^(j|~C))+V[14]+2878612391&4294967295,N=j+(I<<15&4294967295|I>>>17),I=C+(j^(N|~S))+V[5]+4237533241&4294967295,C=N+(I<<21&4294967295|I>>>11),I=S+(N^(C|~j))+V[12]+1700485571&4294967295,S=C+(I<<6&4294967295|I>>>26),I=j+(C^(S|~N))+V[3]+2399980690&4294967295,j=S+(I<<10&4294967295|I>>>22),I=N+(S^(j|~C))+V[10]+4293915773&4294967295,N=j+(I<<15&4294967295|I>>>17),I=C+(j^(N|~S))+V[1]+2240044497&4294967295,C=N+(I<<21&4294967295|I>>>11),I=S+(N^(C|~j))+V[8]+1873313359&4294967295,S=C+(I<<6&4294967295|I>>>26),I=j+(C^(S|~N))+V[15]+4264355552&4294967295,j=S+(I<<10&4294967295|I>>>22),I=N+(S^(j|~C))+V[6]+2734768916&4294967295,N=j+(I<<15&4294967295|I>>>17),I=C+(j^(N|~S))+V[13]+1309151649&4294967295,C=N+(I<<21&4294967295|I>>>11),I=S+(N^(C|~j))+V[4]+4149444226&4294967295,S=C+(I<<6&4294967295|I>>>26),I=j+(C^(S|~N))+V[11]+3174756917&4294967295,j=S+(I<<10&4294967295|I>>>22),I=N+(S^(j|~C))+V[2]+718787259&4294967295,N=j+(I<<15&4294967295|I>>>17),I=C+(j^(N|~S))+V[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+j&4294967295}r.prototype.v=function(k,S){S===void 0&&(S=k.length);const C=S-this.blockSize,V=this.C;let N=this.h,j=0;for(;j<S;){if(N==0)for(;j<=C;)l(this,k,j),j+=this.blockSize;if(typeof k=="string"){for(;j<S;)if(V[N++]=k.charCodeAt(j++),N==this.blockSize){l(this,V),N=0;break}}else for(;j<S;)if(V[N++]=k[j++],N==this.blockSize){l(this,V),N=0;break}}this.h=N,this.o+=S},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;S=this.o*8;for(var C=k.length-8;C<k.length;++C)k[C]=S&255,S/=256;for(this.v(k),k=Array(16),S=0,C=0;C<4;++C)for(let V=0;V<32;V+=8)k[S++]=this.g[C]>>>V&255;return k};function u(k,S){var C=m;return Object.prototype.hasOwnProperty.call(C,k)?C[k]:C[k]=S(k)}function f(k,S){this.h=S;const C=[];let V=!0;for(let N=k.length-1;N>=0;N--){const j=k[N]|0;V&&j==S||(C[N]=j,V=!1)}this.g=C}var m={};function y(k){return-128<=k&&k<128?u(k,function(S){return new f([S|0],S<0?-1:0)}):new f([k|0],k<0?-1:0)}function _(k){if(isNaN(k)||!isFinite(k))return w;if(k<0)return X(_(-k));const S=[];let C=1;for(let V=0;k>=C;V++)S[V]=k/C|0,C*=4294967296;return new f(S,0)}function b(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return X(b(k.substring(1),S));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=_(Math.pow(S,8));let V=w;for(let j=0;j<k.length;j+=8){var N=Math.min(8,k.length-j);const I=parseInt(k.substring(j,j+N),S);N<8?(N=_(Math.pow(S,N)),V=V.j(N).add(_(I))):(V=V.j(C),V=V.add(_(I)))}return V}var w=y(0),x=y(1),U=y(16777216);s=f.prototype,s.m=function(){if(W(this))return-X(this).m();let k=0,S=1;for(let C=0;C<this.g.length;C++){const V=this.i(C);k+=(V>=0?V:4294967296+V)*S,S*=4294967296}return k},s.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(J(this))return"0";if(W(this))return"-"+X(this).toString(k);const S=_(Math.pow(k,6));var C=this;let V="";for(;;){const N=Vt(C,S).g;C=Z(C,N.j(S));let j=((C.g.length>0?C.g[0]:C.h)>>>0).toString(k);if(C=N,J(C))return j+V;for(;j.length<6;)j="0"+j;V=j+V}},s.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function J(k){if(k.h!=0)return!1;for(let S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function W(k){return k.h==-1}s.l=function(k){return k=Z(this,k),W(k)?-1:J(k)?0:1};function X(k){const S=k.g.length,C=[];for(let V=0;V<S;V++)C[V]=~k.g[V];return new f(C,~k.h).add(x)}s.abs=function(){return W(this)?X(this):this},s.add=function(k){const S=Math.max(this.g.length,k.g.length),C=[];let V=0;for(let N=0;N<=S;N++){let j=V+(this.i(N)&65535)+(k.i(N)&65535),I=(j>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);V=I>>>16,j&=65535,I&=65535,C[N]=I<<16|j}return new f(C,C[C.length-1]&-2147483648?-1:0)};function Z(k,S){return k.add(X(S))}s.j=function(k){if(J(this)||J(k))return w;if(W(this))return W(k)?X(this).j(X(k)):X(X(this).j(k));if(W(k))return X(this.j(X(k)));if(this.l(U)<0&&k.l(U)<0)return _(this.m()*k.m());const S=this.g.length+k.g.length,C=[];for(var V=0;V<2*S;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(let N=0;N<k.g.length;N++){const j=this.i(V)>>>16,I=this.i(V)&65535,Xt=k.i(N)>>>16,B=k.i(N)&65535;C[2*V+2*N]+=I*B,ut(C,2*V+2*N),C[2*V+2*N+1]+=j*B,ut(C,2*V+2*N+1),C[2*V+2*N+1]+=I*Xt,ut(C,2*V+2*N+1),C[2*V+2*N+2]+=j*Xt,ut(C,2*V+2*N+2)}for(k=0;k<S;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=S;k<2*S;k++)C[k]=0;return new f(C,0)};function ut(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function _t(k,S){this.g=k,this.h=S}function Vt(k,S){if(J(S))throw Error("division by zero");if(J(k))return new _t(w,w);if(W(k))return S=Vt(X(k),S),new _t(X(S.g),X(S.h));if(W(S))return S=Vt(k,X(S)),new _t(X(S.g),S.h);if(k.g.length>30){if(W(k)||W(S))throw Error("slowDivide_ only works with positive integers.");for(var C=x,V=S;V.l(k)<=0;)C=at(C),V=at(V);var N=bt(C,1),j=bt(V,1);for(V=bt(V,2),C=bt(C,2);!J(V);){var I=j.add(V);I.l(k)<=0&&(N=N.add(C),j=I),V=bt(V,1),C=bt(C,1)}return S=Z(k,N.j(S)),new _t(N,S)}for(N=w;k.l(S)>=0;){for(C=Math.max(1,Math.floor(k.m()/S.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),j=_(C),I=j.j(S);W(I)||I.l(k)>0;)C-=V,j=_(C),I=j.j(S);J(j)&&(j=x),N=N.add(j),k=Z(k,I)}return new _t(N,k)}s.B=function(k){return Vt(this,k).h},s.and=function(k){const S=Math.max(this.g.length,k.g.length),C=[];for(let V=0;V<S;V++)C[V]=this.i(V)&k.i(V);return new f(C,this.h&k.h)},s.or=function(k){const S=Math.max(this.g.length,k.g.length),C=[];for(let V=0;V<S;V++)C[V]=this.i(V)|k.i(V);return new f(C,this.h|k.h)},s.xor=function(k){const S=Math.max(this.g.length,k.g.length),C=[];for(let V=0;V<S;V++)C[V]=this.i(V)^k.i(V);return new f(C,this.h^k.h)};function at(k){const S=k.g.length+1,C=[];for(let V=0;V<S;V++)C[V]=k.i(V)<<1|k.i(V-1)>>>31;return new f(C,k.h)}function bt(k,S){const C=S>>5;S%=32;const V=k.g.length-C,N=[];for(let j=0;j<V;j++)N[j]=S>0?k.i(j+C)>>>S|k.i(j+C+1)<<32-S:k.i(j+C);return new f(N,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,lT=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=b,gr=f}).apply(typeof Cv<"u"?Cv:typeof self<"u"?self:typeof window<"u"?window:{});var Hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var uT,jl,cT,Xc,Em,hT,fT,dT;(function(){var s,t=Object.defineProperty;function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hc=="object"&&Hc];for(var g=0;g<c.length;++g){var E=c[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=i(this);function l(c,g){if(g)t:{var E=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var z=c[A];if(!(z in E))break t;E=E[z]}c=c[c.length-1],A=E[c],g=g(A),g!=A&&g!=null&&t(E,c,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(g){var E=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&E.push([A,g[A]]);return E}});var u=u||{},f=this||self;function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function y(c,g,E){return c.call.apply(c.bind,arguments)}function _(c,g,E){return _=y,_.apply(null,arguments)}function b(c,g){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function w(c,g){function E(){}E.prototype=g.prototype,c.Z=g.prototype,c.prototype=new E,c.prototype.constructor=c,c.Ob=function(A,z,Y){for(var lt=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)lt[Dt-2]=arguments[Dt];return g.prototype[z].apply(A,lt)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function U(c){const g=c.length;if(g>0){const E=Array(g);for(let A=0;A<g;A++)E[A]=c[A];return E}return[]}function J(c,g){for(let A=1;A<arguments.length;A++){const z=arguments[A];var E=typeof z;if(E=E!="object"?E:z?Array.isArray(z)?"array":E:"null",E=="array"||E=="object"&&typeof z.length=="number"){E=c.length||0;const Y=z.length||0;c.length=E+Y;for(let lt=0;lt<Y;lt++)c[E+lt]=z[lt]}else c.push(z)}}class W{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function X(c){f.setTimeout(()=>{throw c},0)}function Z(){var c=k;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ut{constructor(){this.h=this.g=null}add(g,E){const A=_t.get();A.set(g,E),this.h?this.h.next=A:this.g=A,this.h=A}}var _t=new W(()=>new Vt,c=>c.reset());class Vt{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let at,bt=!1,k=new ut,S=()=>{const c=Promise.resolve(void 0);at=()=>{c.then(C)}};function C(){for(var c;c=Z();){try{c.h.call(c.g)}catch(E){X(E)}var g=_t;g.j(c),g.h<100&&(g.h++,c.next=g.g,g.g=c)}bt=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};f.addEventListener("test",E,g),f.removeEventListener("test",E,g)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function Xt(c,g){N.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,g)}w(Xt,N),Xt.prototype.init=function(c,g){const E=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget,g||(E=="mouseover"?g=c.fromElement:E=="mouseout"&&(g=c.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Xt.Z.h.call(this)},Xt.prototype.h=function(){Xt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var B="closure_listenable_"+(Math.random()*1e6|0),R=0;function P(c,g,E,A,z){this.listener=c,this.proxy=null,this.src=g,this.type=E,this.capture=!!A,this.ha=z,this.key=++R,this.da=this.fa=!1}function F(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function rt(c,g,E){for(const A in c)g.call(E,c[A],A,c)}function pt(c,g){for(const E in c)g.call(void 0,c[E],E,c)}function O(c){const g={};for(const E in c)g[E]=c[E];return g}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function st(c,g){let E,A;for(let z=1;z<arguments.length;z++){A=arguments[z];for(E in A)c[E]=A[E];for(let Y=0;Y<G.length;Y++)E=G[Y],Object.prototype.hasOwnProperty.call(A,E)&&(c[E]=A[E])}}function ot(c){this.src=c,this.g={},this.h=0}ot.prototype.add=function(c,g,E,A,z){const Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);const lt=mt(c,g,A,z);return lt>-1?(g=c[lt],E||(g.fa=!1)):(g=new P(g,this.src,Y,!!A,z),g.fa=E,c.push(g)),g};function ft(c,g){const E=g.type;if(E in c.g){var A=c.g[E],z=Array.prototype.indexOf.call(A,g,void 0),Y;(Y=z>=0)&&Array.prototype.splice.call(A,z,1),Y&&(F(g),c.g[E].length==0&&(delete c.g[E],c.h--))}}function mt(c,g,E,A){for(let z=0;z<c.length;++z){const Y=c[z];if(!Y.da&&Y.listener==g&&Y.capture==!!E&&Y.ha==A)return z}return-1}var St="closure_lm_"+(Math.random()*1e6|0),ne={};function Gt(c,g,E,A,z){if(Array.isArray(g)){for(let Y=0;Y<g.length;Y++)Gt(c,g[Y],E,A,z);return null}return E=Is(E),c&&c[B]?c.J(g,E,m(A)?!!A.capture:!1,z):He(c,g,E,!1,A,z)}function He(c,g,E,A,z,Y){if(!g)throw Error("Invalid event type");const lt=m(z)?!!z.capture:!!z;let Dt=zn(c);if(Dt||(c[St]=Dt=new ot(c)),E=Dt.add(g,E,A,lt,Y),E.proxy)return E;if(A=Rn(),E.proxy=A,A.src=c,A.listener=E,c.addEventListener)j||(z=lt),z===void 0&&(z=!1),c.addEventListener(g.toString(),A,z);else if(c.attachEvent)c.attachEvent(yn(g.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Rn(){function c(E){return g.call(c.src,c.listener,E)}const g=Cs;return c}function ii(c,g,E,A,z){if(Array.isArray(g))for(var Y=0;Y<g.length;Y++)ii(c,g[Y],E,A,z);else A=m(A)?!!A.capture:!!A,E=Is(E),c&&c[B]?(c=c.i,Y=String(g).toString(),Y in c.g&&(g=c.g[Y],E=mt(g,E,A,z),E>-1&&(F(g[E]),Array.prototype.splice.call(g,E,1),g.length==0&&(delete c.g[Y],c.h--)))):c&&(c=zn(c))&&(g=c.g[g.toString()],c=-1,g&&(c=mt(g,E,A,z)),(E=c>-1?g[c]:null)&&Ji(E))}function Ji(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[B])ft(g.i,c);else{var E=c.type,A=c.proxy;g.removeEventListener?g.removeEventListener(E,A,c.capture):g.detachEvent?g.detachEvent(yn(E),A):g.addListener&&g.removeListener&&g.removeListener(A),(E=zn(g))?(ft(E,c),E.h==0&&(E.src=null,g[St]=null)):F(c)}}}function yn(c){return c in ne?ne[c]:ne[c]="on"+c}function Cs(c,g){if(c.da)c=!0;else{g=new Xt(g,this);const E=c.listener,A=c.ha||c.src;c.fa&&Ji(c),c=E.call(A,g)}return c}function zn(c){return c=c[St],c instanceof ot?c:null}var ga="__closure_events_fn_"+(Math.random()*1e9>>>0);function Is(c){return typeof c=="function"?c:(c[ga]||(c[ga]=function(g){return c.handleEvent(g)}),c[ga])}function ye(){V.call(this),this.i=new ot(this),this.M=this,this.G=null}w(ye,V),ye.prototype[B]=!0,ye.prototype.removeEventListener=function(c,g,E,A){ii(this,c,g,E,A)};function vt(c,g){var E,A=c.G;if(A)for(E=[];A;A=A.G)E.push(A);if(c=c.M,A=g.type||g,typeof g=="string")g=new N(g,c);else if(g instanceof N)g.target=g.target||c;else{var z=g;g=new N(A,c),st(g,z)}z=!0;let Y,lt;if(E)for(lt=E.length-1;lt>=0;lt--)Y=g.g=E[lt],z=At(Y,A,!0,g)&&z;if(Y=g.g=c,z=At(Y,A,!0,g)&&z,z=At(Y,A,!1,g)&&z,E)for(lt=0;lt<E.length;lt++)Y=g.g=E[lt],z=At(Y,A,!1,g)&&z}ye.prototype.N=function(){if(ye.Z.N.call(this),this.i){var c=this.i;for(const g in c.g){const E=c.g[g];for(let A=0;A<E.length;A++)F(E[A]);delete c.g[g],c.h--}}this.G=null},ye.prototype.J=function(c,g,E,A){return this.i.add(String(c),g,!1,E,A)},ye.prototype.K=function(c,g,E,A){return this.i.add(String(c),g,!0,E,A)};function At(c,g,E,A){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();let z=!0;for(let Y=0;Y<g.length;++Y){const lt=g[Y];if(lt&&!lt.da&&lt.capture==E){const Dt=lt.listener,Ae=lt.ha||lt.src;lt.fa&&ft(c.i,lt),z=Dt.call(Ae,A)!==!1&&z}}return z&&!A.defaultPrevented}function he(c,g){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=_(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(c,g||0)}function ze(c){c.g=he(()=>{c.g=null,c.i&&(c.i=!1,ze(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class ie extends V{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ze(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function an(c){V.call(this),this.h=c,this.g={}}w(an,V);var Xe=[];function Cn(c){rt(c.g,function(g,E){this.g.hasOwnProperty(E)&&Ji(g)},c),c.g={}}an.prototype.N=function(){an.Z.N.call(this),Cn(this)},an.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fe=f.JSON.stringify,ya=f.JSON.parse,Kt=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function si(){}function Bn(){}var fn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $e(){N.call(this,"d")}w($e,N);function qn(){N.call(this,"c")}w(qn,N);var Se={},_u=null;function _a(){return _u=_u||new ye}Se.Ia="serverreachability";function vu(c){N.call(this,Se.Ia,c)}w(vu,N);function Ei(c){const g=_a();vt(g,new vu(g))}Se.STAT_EVENT="statevent";function Ir(c,g){N.call(this,Se.STAT_EVENT,c),this.stat=g}w(Ir,N);function Ie(c){const g=_a();vt(g,new Ir(g,c))}Se.Ja="timingevent";function Ti(c,g){N.call(this,Se.Ja,c),this.size=g}w(Ti,N);function bi(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},g)}function ri(){this.g=!0}ri.prototype.ua=function(){this.g=!1};function Wh(c,g,E,A,z,Y){c.info(function(){if(c.g)if(Y){var lt="",Dt=Y.split("&");for(let $t=0;$t<Dt.length;$t++){var Ae=Dt[$t].split("=");if(Ae.length>1){const pe=Ae[0];Ae=Ae[1];const Kn=pe.split("_");lt=Kn.length>=2&&Kn[1]=="type"?lt+(pe+"="+Ae+"&"):lt+(pe+"=redacted&")}}}else lt=null;else lt=Y;return"XMLHTTP REQ ("+A+") [attempt "+z+"]: "+g+`
`+E+`
`+lt})}function Eu(c,g,E,A,z,Y,lt){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+z+"]: "+g+`
`+E+`
`+Y+" "+lt})}function Si(c,g,E,A){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Jh(c,E)+(A?" "+A:"")})}function kr(c,g){c.info(function(){return"TIMEOUT: "+g})}ri.prototype.info=function(){};function Jh(c,g){if(!c.g)return g;if(!g)return null;try{const Y=JSON.parse(g);if(Y){for(c=0;c<Y.length;c++)if(Array.isArray(Y[c])){var E=Y[c];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var z=A[0];if(z!="noop"&&z!="stop"&&z!="close")for(let lt=1;lt<A.length;lt++)A[lt]=""}}}}return Fe(Y)}catch{return g}}var Nr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Oo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vo;function Dr(){}w(Dr,si),Dr.prototype.g=function(){return new XMLHttpRequest},Vo=new Dr;function Zi(c){return encodeURIComponent(String(c))}function Tu(c){var g=1;c=c.split(":");const E=[];for(;g>0&&c.length;)E.push(c.shift()),g--;return c.length&&E.push(c.join(":")),E}function ai(c,g,E,A){this.j=c,this.i=g,this.l=E,this.S=A||1,this.V=new an(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new oi}function oi(){this.i=null,this.g="",this.h=!1}var ke={},Ge={};function Ai(c,g,E){c.M=1,c.A=Or(De(g)),c.u=E,c.R=!0,va(c,null)}function va(c,g){c.F=Date.now(),wi(c),c.B=De(c.A);var E=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),Sa(E.i,"t",A),c.C=0,E=c.j.L,c.h=new oi,c.g=ju(c.j,E?g:null,!c.u),c.P>0&&(c.O=new ie(_(c.Y,c,c.g),c.P)),g=c.V,E=c.g,A=c.ba;var z="readystatechange";Array.isArray(z)||(z&&(Xe[0]=z.toString()),z=Xe);for(let Y=0;Y<z.length;Y++){const lt=Gt(E,z[Y],A||g.handleEvent,!1,g.h||g);if(!lt)break;g.g[lt.key]=lt}g=c.J?O(c.J):{},c.u?(c.v||(c.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,g)):(c.v="GET",c.g.ea(c.B,c.v,null,g)),Ei(),Wh(c.i,c.v,c.B,c.l,c.S,c.u)}ai.prototype.ba=function(c){c=c.target;const g=this.O;g&&ci(c)==3?g.j():this.Y(c)},ai.prototype.Y=function(c){try{if(c==this.g)t:{const Dt=ci(this.g),Ae=this.g.ya(),$t=this.g.ca();if(!(Dt<3)&&(Dt!=3||this.g&&(this.h.h||this.g.la()||We(this.g)))){this.K||Dt!=4||Ae==7||(Ae==8||$t<=0?Ei(3):Ei(2)),xi(this);var g=this.g.ca();this.X=g;var E=Zh(this);if(this.o=g==200,Eu(this.i,this.v,this.B,this.l,this.S,Dt,g),this.o){if(this.U&&!this.L){e:{if(this.g){var A,z=this.g;if((A=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var Y=A;break e}}Y=null}if(c=Y)Si(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ri(this,c);else{this.o=!1,this.m=3,Ie(12),In(this),Hn(this);break t}}if(this.R){c=!0;let pe;for(;!this.K&&this.C<E.length;)if(pe=Su(this,E),pe==Ge){Dt==4&&(this.m=4,Ie(14),c=!1),Si(this.i,this.l,null,"[Incomplete Response]");break}else if(pe==ke){this.m=4,Ie(15),Si(this.i,this.l,E,"[Invalid Chunk]"),c=!1;break}else Si(this.i,this.l,pe,null),Ri(this,pe);if(bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||E.length!=0||this.h.h||(this.m=1,Ie(16),c=!1),this.o=this.o&&c,!c)Si(this.i,this.l,E,"[Invalid Chunked Response]"),In(this),Hn(this);else if(E.length>0&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.aa&&!lt.P&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Xo(lt),lt.P=!0,Ie(11))}}else Si(this.i,this.l,E,null),Ri(this,E);Dt==4&&In(this),this.o&&!this.K&&(Dt==4?Du(this.j,this):(this.o=!1,wi(this)))}else es(this.g),g==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ie(12)):(this.m=0,Ie(13)),In(this),Hn(this)}}}catch{}};function Zh(c){if(!bu(c))return c.g.la();const g=We(c.g);if(g==="")return"";let E="";const A=g.length,z=ci(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return In(c),Hn(c),"";c.h.i=new f.TextDecoder}for(let Y=0;Y<A;Y++)c.h.h=!0,E+=c.h.i.decode(g[Y],{stream:!(z&&Y==A-1)});return g.length=0,c.h.g+=E,c.C=0,c.h.g}function bu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Su(c,g){var E=c.C,A=g.indexOf(`
`,E);return A==-1?Ge:(E=Number(g.substring(E,A)),isNaN(E)?ke:(A+=1,A+E>g.length?Ge:(g=g.slice(A,A+E),c.C=A+E,g)))}ai.prototype.cancel=function(){this.K=!0,In(this)};function wi(c){c.T=Date.now()+c.H,Ea(c,c.H)}function Ea(c,g){if(c.D!=null)throw Error("WatchDog timer not null");c.D=bi(_(c.aa,c),g)}function xi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}ai.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(kr(this.i,this.B),this.M!=2&&(Ei(),Ie(17)),In(this),this.m=2,Hn(this)):Ea(this,this.T-c)};function Hn(c){c.j.I==0||c.K||Du(c.j,c)}function In(c){xi(c);var g=c.O;g&&typeof g.dispose=="function"&&g.dispose(),c.O=null,Cn(c.V),c.g&&(g=c.g,c.g=null,g.abort(),g.dispose())}function Ri(c,g){try{var E=c.j;if(E.I!=0&&(E.g==c||Ii(E.h,c))){if(!c.L&&Ii(E.h,c)&&E.I==3){try{var A=E.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var z=A;if(z[0]==0){t:if(!E.v){if(E.g)if(E.g.F+3e3<c.F)Ca(E),Ls(E);else break t;zr(E),Ie(18)}}else E.xa=z[1],0<E.xa-E.K&&z[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=bi(_(E.Va,E),6e3));Ci(E.h)<=1&&E.ta&&(E.ta=void 0)}else Mi(E,11)}else if((c.L||E.g==c)&&Ca(E),!I(g))for(z=E.Ba.g.parse(g),g=0;g<z.length;g++){let $t=z[g];const pe=$t[0];if(!(pe<=E.K))if(E.K=pe,$t=$t[1],E.I==2)if($t[0]=="c"){E.M=$t[1],E.ba=$t[2];const Kn=$t[3];Kn!=null&&(E.ka=Kn,E.j.info("VER="+E.ka));const ji=$t[4];ji!=null&&(E.za=ji,E.j.info("SVER="+E.za));const hi=$t[5];hi!=null&&typeof hi=="number"&&hi>0&&(A=1.5*hi,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const fi=c.g;if(fi){const Br=fi.g?fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Br){var Y=A.h;Y.g||Br.indexOf("spdy")==-1&&Br.indexOf("quic")==-1&&Br.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Lo(Y,Y.h),Y.h=null))}if(A.G){const Ia=fi.g?fi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(A.wa=Ia,Zt(A.J,A.G,Ia))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-c.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var lt=c;if(A.na=Mu(A,A.L?A.ba:null,A.W),lt.L){Po(A.h,lt);var Dt=lt,Ae=A.O;Ae&&(Dt.H=Ae),Dt.D&&(xi(Dt),wi(Dt)),A.g=lt}else ku(A);E.i.length>0&&Vi(E)}else $t[0]!="stop"&&$t[0]!="close"||Mi(E,7);else E.I==3&&($t[0]=="stop"||$t[0]=="close"?$t[0]=="stop"?Mi(E,7):Yo(E):$t[0]!="noop"&&E.l&&E.l.qa($t),E.A=0)}}Ei(4)}catch{}}var Ne=class{constructor(c,g){this.g=c,this.map=g}};function Mo(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ci(c){return c.h?1:c.g?c.g.size:0}function Ii(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Lo(c,g){c.g?c.g.add(g):c.h=g}function Po(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Mo.prototype.cancel=function(){if(this.i=Uo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Uo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const E of c.g.values())g=g.concat(E.G);return g}return U(c.i)}var Au=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(c,g){if(c){c=c.split("&");for(let E=0;E<c.length;E++){const A=c[E].indexOf("=");let z,Y=null;A>=0?(z=c[E].substring(0,A),Y=c[E].substring(A+1)):z=c[E],g(z,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function kn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;c instanceof kn?(this.l=c.l,Ke(this,c.j),this.o=c.o,this.g=c.g,ks(this,c.u),this.h=c.h,zo(this,Cu(c.i)),this.m=c.m):c&&(g=String(c).match(Au))?(this.l=!1,Ke(this,g[1]||"",!0),this.o=ki(g[2]||""),this.g=ki(g[3]||"",!0),ks(this,g[4]),this.h=ki(g[5]||"",!0),zo(this,g[6]||"",!0),this.m=ki(g[7]||"")):(this.l=!1,this.i=new Ds(null,this.l))}kn.prototype.toString=function(){const c=[];var g=this.j;g&&c.push(Vr(g,ba,!0),":");var E=this.g;return(E||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Vr(g,ba,!0),"@"),c.push(Zi(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&c.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(Vr(E,E.charAt(0)=="/"?Bo:wu,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",Vr(E,xu)),c.join("")},kn.prototype.resolve=function(c){const g=De(this);let E=!!c.j;E?Ke(g,c.j):E=!!c.o,E?g.o=c.o:E=!!c.g,E?g.g=c.g:E=c.u!=null;var A=c.h;if(E)ks(g,c.u);else if(E=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var z=g.h.lastIndexOf("/");z!=-1&&(A=g.h.slice(0,z+1)+A)}if(z=A,z==".."||z==".")A="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){A=z.lastIndexOf("/",0)==0,z=z.split("/");const Y=[];for(let lt=0;lt<z.length;){const Dt=z[lt++];Dt=="."?A&&lt==z.length&&Y.push(""):Dt==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),A&&lt==z.length&&Y.push("")):(Y.push(Dt),A=!0)}A=Y.join("/")}else A=z}return E?g.h=A:E=c.i.toString()!=="",E?zo(g,Cu(c.i)):E=!!c.m,E&&(g.m=c.m),g};function De(c){return new kn(c)}function Ke(c,g,E){c.j=E?ki(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ks(c,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);c.u=g}else c.u=null}function zo(c,g,E){g instanceof Ds?(c.i=g,Aa(c.i,c.l)):(E||(g=Vr(g,Ns)),c.i=new Ds(g,c.l))}function Zt(c,g,E){c.i.set(g,E)}function Or(c){return Zt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ki(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Vr(c,g,E){return typeof c=="string"?(c=encodeURI(c).replace(g,_n),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function _n(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ba=/[#\/\?@]/g,wu=/[#\?:]/g,Bo=/[#\?]/g,Ns=/[#\?@]/g,xu=/#/g;function Ds(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function vn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ta(c.i,function(g,E){c.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}s=Ds.prototype,s.add=function(c,g){vn(this),this.i=null,c=Os(this,c);let E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(g),this.h+=1,this};function Ru(c,g){vn(c),g=Os(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function qo(c,g){return vn(c),g=Os(c,g),c.g.has(g)}s.forEach=function(c,g){vn(this),this.g.forEach(function(E,A){E.forEach(function(z){c.call(g,z,A,this)},this)},this)};function Ho(c,g){vn(c);let E=[];if(typeof g=="string")qo(c,g)&&(E=E.concat(c.g.get(Os(c,g))));else for(c=Array.from(c.g.values()),g=0;g<c.length;g++)E=E.concat(c[g]);return E}s.set=function(c,g){return vn(this),this.i=null,c=Os(this,c),qo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},s.get=function(c,g){return c?(c=Ho(this,c),c.length>0?String(c[0]):g):g};function Sa(c,g,E){Ru(c,g),E.length>0&&(c.i=null,c.g.set(Os(c,g),U(E)),c.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var E=g[A];const z=Zi(E);E=Ho(this,E);for(let Y=0;Y<E.length;Y++){let lt=z;E[Y]!==""&&(lt+="="+Zi(E[Y])),c.push(lt)}}return this.i=c.join("&")};function Cu(c){const g=new Ds;return g.i=c.i,c.g&&(g.g=new Map(c.g),g.h=c.h),g}function Os(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Aa(c,g){g&&!c.j&&(vn(c),c.i=null,c.g.forEach(function(E,A){const z=A.toLowerCase();A!=z&&(Ru(this,A),Sa(this,z,E))},c)),c.j=g}function li(c,g){const E=new ri;if(f.Image){const A=new Image;A.onload=b(Fn,E,"TestLoadImage: loaded",!0,g,A),A.onerror=b(Fn,E,"TestLoadImage: error",!1,g,A),A.onabort=b(Fn,E,"TestLoadImage: abort",!1,g,A),A.ontimeout=b(Fn,E,"TestLoadImage: timeout",!1,g,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else g(!1)}function Fo(c,g){const E=new ri,A=new AbortController,z=setTimeout(()=>{A.abort(),Fn(E,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:A.signal}).then(Y=>{clearTimeout(z),Y.ok?Fn(E,"TestPingServer: ok",!0,g):Fn(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),Fn(E,"TestPingServer: error",!1,g)})}function Fn(c,g,E,A,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),A(E)}catch{}}function Vs(){this.g=new Kt}function Ni(c){this.i=c.Sb||null,this.h=c.ab||!1}w(Ni,si),Ni.prototype.g=function(){return new Mr(this.i,this.h)};function Mr(c,g){ye.call(this),this.H=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Mr,ye),s=Mr.prototype,s.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=g,this.readyState=1,ui(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(g.body=c),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ms(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function wa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Ms(this):ui(this),this.readyState==3&&wa(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,Ms(this))},s.Na=function(c){this.g&&(this.response=c,Ms(this))},s.ga=function(){this.g&&Ms(this)};function Ms(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ui(c)}s.setRequestHeader=function(c,g){this.A.append(c,g)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=g.next();return c.join(`\r
`)};function ui(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Mr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Gn(c){let g="";return rt(c,function(E,A){g+=A,g+=":",g+=E,g+=`\r
`}),g}function jr(c,g,E){t:{for(A in E){var A=!1;break t}A=!0}A||(E=Gn(E),typeof c=="string"?E!=null&&Zi(E):Zt(c,g,E))}function se(c){ye.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(se,ye);var Di=/^https?$/i,Go=["POST","PUT"];s=se.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,g,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vo.g(),this.g.onreadystatechange=x(_(this.Ca,this));try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(Y){Lr(this,Y);return}if(c=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var z in A)E.set(z,A[z]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())E.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),z=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Go,g,void 0)>=0)||A||z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,lt]of E)this.g.setRequestHeader(Y,lt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Y){Lr(this,Y)}};function Lr(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.o=5,Ko(c),ts(c)}function Ko(c){c.A||(c.A=!0,vt(c,"complete"),vt(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,vt(this,"complete"),vt(this,"abort"),ts(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),se.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Pr(this):this.Xa())},s.Xa=function(){Pr(this)};function Pr(c){if(c.h&&typeof u<"u"){if(c.v&&ci(c)==4)setTimeout(c.Ca.bind(c),0);else if(vt(c,"readystatechange"),ci(c)==4){c.h=!1;try{const Y=c.ca();t:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break t;default:g=!1}var E;if(!(E=g)){var A;if(A=Y===0){let lt=String(c.D).match(Au)[1]||null;!lt&&f.self&&f.self.location&&(lt=f.self.location.protocol.slice(0,-1)),A=!Di.test(lt?lt.toLowerCase():"")}E=A}if(E)vt(c,"complete"),vt(c,"success");else{c.o=6;try{var z=ci(c)>2?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.ca()+"]",Ko(c)}}finally{ts(c)}}}}function ts(c,g){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const E=c.g;c.g=null,g||vt(c,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ci(c){return c.g?c.g.readyState:0}s.ca=function(){try{return ci(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),ya(g)}};function We(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function es(c){const g={};c=(c.g&&ci(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(I(c[A]))continue;var E=Tu(c[A]);const z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=g[z]||[];g[z]=Y,Y.push(E)}pt(g,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oi(c,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||g}function js(c){this.za=0,this.i=[],this.j=new ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oi("baseRetryDelayMs",5e3,c),this.Za=Oi("retryDelaySeedMs",1e4,c),this.Ta=Oi("forwardChannelMaxRetries",2,c),this.va=Oi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Mo(c&&c.concurrentRequestLimit),this.Ba=new Vs,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=js.prototype,s.ka=8,s.I=1,s.connect=function(c,g,E,A){Ie(0),this.W=c,this.H=g||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=Mu(this,null,this.W),Vi(this)};function Yo(c){if(xa(c),c.I==3){var g=c.V++,E=De(c.J);if(Zt(E,"SID",c.M),Zt(E,"RID",g),Zt(E,"TYPE","terminate"),Ur(c,E),g=new ai(c,c.j,g),g.M=2,g.A=Or(De(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!E&&f.Image&&(new Image().src=g.A,E=!0),E||(g.g=ju(g.j,null),g.g.ea(g.A)),g.F=Date.now(),wi(g)}Vu(c)}function Ls(c){c.g&&(Xo(c),c.g.cancel(),c.g=null)}function xa(c){Ls(c),c.v&&(f.clearTimeout(c.v),c.v=null),Ca(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function Vi(c){if(!jo(c.h)&&!c.m){c.m=!0;var g=c.Ea;at||S(),bt||(at(),bt=!0),k.add(g,c),c.D=0}}function Ra(c,g){return Ci(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=g.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=bi(_(c.Ea,c,g),Ou(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const z=new ai(this,this.j,c);let Y=this.o;if(this.U&&(Y?(Y=O(Y),st(Y,this.U)):Y=this.U),this.u!==null||this.R||(z.J=Y,Y=null),this.S)t:{for(var g=0,E=0;E<this.i.length;E++){e:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=E;break t}if(g===4096||E===this.i.length-1){g=E+1;break t}}g=1e3}else g=1e3;g=Iu(this,z,g),E=De(this.J),Zt(E,"RID",c),Zt(E,"CVER",22),this.G&&Zt(E,"X-HTTP-Session-Id",this.G),Ur(this,E),Y&&(this.R?g="headers="+Zi(Gn(Y))+"&"+g:this.u&&jr(E,this.u,Y)),Lo(this.h,z),this.Ra&&Zt(E,"TYPE","init"),this.S?(Zt(E,"$req",g),Zt(E,"SID","null"),z.U=!0,Ai(z,E,null)):Ai(z,E,g),this.I=2}}else this.I==3&&(c?Qo(this,c):this.i.length==0||jo(this.h)||Qo(this))};function Qo(c,g){var E;g?E=g.l:E=c.V++;const A=De(c.J);Zt(A,"SID",c.M),Zt(A,"RID",E),Zt(A,"AID",c.K),Ur(c,A),c.u&&c.o&&jr(A,c.u,c.o),E=new ai(c,c.j,E,c.D+1),c.u===null&&(E.J=c.o),g&&(c.i=g.G.concat(c.i)),g=Iu(c,E,1e3),E.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Lo(c.h,E),Ai(E,A,g)}function Ur(c,g){c.H&&rt(c.H,function(E,A){Zt(g,A,E)}),c.l&&rt({},function(E,A){Zt(g,A,E)})}function Iu(c,g,E){E=Math.min(c.i.length,E);const A=c.l?_(c.l.Ka,c.l,c):null;t:{var z=c.i;let Dt=-1;for(;;){const Ae=["count="+E];Dt==-1?E>0?(Dt=z[0].g,Ae.push("ofs="+Dt)):Dt=0:Ae.push("ofs="+Dt);let $t=!0;for(let pe=0;pe<E;pe++){var Y=z[pe].g;const Kn=z[pe].map;if(Y-=Dt,Y<0)Dt=Math.max(0,z[pe].g-100),$t=!1;else try{Y="req"+Y+"_"||"";try{var lt=Kn instanceof Map?Kn:Object.entries(Kn);for(const[ji,hi]of lt){let fi=hi;m(hi)&&(fi=Fe(hi)),Ae.push(Y+ji+"="+encodeURIComponent(fi))}}catch(ji){throw Ae.push(Y+"type="+encodeURIComponent("_badmap")),ji}}catch{A&&A(Kn)}}if($t){lt=Ae.join("&");break t}}lt=void 0}return c=c.i.splice(0,E),g.G=c,lt}function ku(c){if(!c.g&&!c.v){c.Y=1;var g=c.Da;at||S(),bt||(at(),bt=!0),k.add(g,c),c.A=0}}function zr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=bi(_(c.Da,c),Ou(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,Nu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=bi(_(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ie(10),Ls(this),Nu(this))};function Xo(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Nu(c){c.g=new ai(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var g=De(c.na);Zt(g,"RID","rpc"),Zt(g,"SID",c.M),Zt(g,"AID",c.K),Zt(g,"CI",c.F?"0":"1"),!c.F&&c.ia&&Zt(g,"TO",c.ia),Zt(g,"TYPE","xmlhttp"),Ur(c,g),c.u&&c.o&&jr(g,c.u,c.o),c.O&&(c.g.H=c.O);var E=c.g;c=c.ba,E.M=1,E.A=Or(De(g)),E.u=null,E.R=!0,va(E,c)}s.Va=function(){this.C!=null&&(this.C=null,Ls(this),zr(this),Ie(19))};function Ca(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Du(c,g){var E=null;if(c.g==g){Ca(c),Xo(c),c.g=null;var A=2}else if(Ii(c.h,g))E=g.G,Po(c.h,g),A=1;else return;if(c.I!=0){if(g.o)if(A==1){E=g.u?g.u.length:0,g=Date.now()-g.F;var z=c.D;A=_a(),vt(A,new Ti(A,E)),Vi(c)}else ku(c);else if(z=g.m,z==3||z==0&&g.X>0||!(A==1&&Ra(c,g)||A==2&&zr(c)))switch(E&&E.length>0&&(g=c.h,g.i=g.i.concat(E)),z){case 1:Mi(c,5);break;case 4:Mi(c,10);break;case 3:Mi(c,6);break;default:Mi(c,2)}}}function Ou(c,g){let E=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(E*=2),E*g}function Mi(c,g){if(c.j.info("Error code "+g),g==2){var E=_(c.bb,c),A=c.Ua;const z=!A;A=new kn(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ke(A,"https"),Or(A),z?li(A.toString(),E):Fo(A.toString(),E)}else Ie(2);c.I=0,c.l&&c.l.pa(g),Vu(c),xa(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))};function Vu(c){if(c.I=0,c.ja=[],c.l){const g=Uo(c.h);(g.length!=0||c.i.length!=0)&&(J(c.ja,g),J(c.ja,c.i),c.h.i.length=0,U(c.i),c.i.length=0),c.l.oa()}}function Mu(c,g,E){var A=E instanceof kn?De(E):new kn(E);if(A.g!="")g&&(A.g=g+"."+A.g),ks(A,A.u);else{var z=f.location;A=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;const Y=new kn(null);A&&Ke(Y,A),g&&(Y.g=g),z&&ks(Y,z),E&&(Y.h=E),A=Y}return E=c.G,g=c.wa,E&&g&&Zt(A,E,g),Zt(A,"VER",c.ka),Ur(c,A),A}function ju(c,g,E){if(g&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Aa&&!c.ma?new se(new Ni({ab:E})):new se(c.ma),g.Fa(c.L),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lu(){}s=Lu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ps(){}Ps.prototype.g=function(c,g){return new dn(c,g)};function dn(c,g){ye.call(this),this.g=new js(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(c?c["X-WebChannel-Client-Profile"]=g.sa:c={"X-WebChannel-Client-Profile":g.sa}),this.g.U=c,(c=g&&g.Qb)&&!I(c)&&(this.g.u=c),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new ns(this)}w(dn,ye),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Yo(this.g)},dn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.v&&(E={},E.__data__=Fe(c),c=E);g.i.push(new Ne(g.Ya++,c)),g.I==3&&Vi(g)},dn.prototype.N=function(){this.g.l=null,delete this.j,Yo(this.g),delete this.g,dn.Z.N.call(this)};function Pu(c){$e.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){t:{for(const E in g){c=E;break t}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}w(Pu,$e);function Uu(){qn.call(this),this.status=1}w(Uu,qn);function ns(c){this.g=c}w(ns,Lu),ns.prototype.ra=function(){vt(this.g,"a")},ns.prototype.qa=function(c){vt(this.g,new Pu(c))},ns.prototype.pa=function(c){vt(this.g,new Uu)},ns.prototype.oa=function(){vt(this.g,"b")},Ps.prototype.createWebChannel=Ps.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,dT=function(){return new Ps},fT=function(){return _a()},hT=Se,Em={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Nr.NO_ERROR=0,Nr.TIMEOUT=8,Nr.HTTP_ERROR=6,Xc=Nr,Oo.COMPLETE="complete",cT=Oo,Bn.EventType=fn,fn.OPEN="a",fn.CLOSE="b",fn.ERROR="c",fn.MESSAGE="d",ye.prototype.listen=ye.prototype.J,jl=Bn,se.prototype.listenOnce=se.prototype.K,se.prototype.getLastError=se.prototype.Ha,se.prototype.getLastErrorCode=se.prototype.ya,se.prototype.getStatus=se.prototype.ca,se.prototype.getResponseJson=se.prototype.La,se.prototype.getResponseText=se.prototype.la,se.prototype.send=se.prototype.ea,se.prototype.setWithCredentials=se.prototype.Fa,uT=se}).apply(typeof Hc<"u"?Hc:typeof self<"u"?self:typeof window<"u"?window:{});const Iv="@firebase/firestore",kv="4.9.3";class un{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");let xo="12.7.0";const ua=new Fm("@firebase/firestore");function ro(){return ua.logLevel}function dt(s,...t){if(ua.logLevel<=zt.DEBUG){const i=t.map(Ym);ua.debug(`Firestore (${xo}): ${s}`,...i)}}function Ss(s,...t){if(ua.logLevel<=zt.ERROR){const i=t.map(Ym);ua.error(`Firestore (${xo}): ${s}`,...i)}}function go(s,...t){if(ua.logLevel<=zt.WARN){const i=t.map(Ym);ua.warn(`Firestore (${xo}): ${s}`,...i)}}function Ym(s){if(typeof s=="string")return s;try{return(function(i){return JSON.stringify(i)})(s)}catch{return s}}function Ct(s,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,mT(s,r,i)}function mT(s,t,i){let r=`FIRESTORE (${xo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw Ss(r),new Error(r)}function Jt(s,t,i,r){let l="Unexpected state";typeof i=="string"?l=i:r=i,s||mT(t,l,r)}function Nt(s,t){return s}const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends xs{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Es{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}}class pT{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class F1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable((()=>i(un.UNAUTHENTICATED)))}shutdown(){}}class G1{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class K1{constructor(t){this.t=t,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Jt(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,i(y)):Promise.resolve();let u=new Es;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Es,t.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const y=u;t.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},m=y=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Es)}}),0),f()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((r=>this.i!==t?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Jt(typeof r.accessToken=="string",31837,{l:r}),new pT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Jt(t===null||typeof t=="string",2055,{h:t}),new un(t)}}class Y1{constructor(t,i,r){this.P=t,this.T=i,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Q1{constructor(t,i,r){this.P=t,this.T=i,this.I=r}getToken(){return Promise.resolve(new Y1(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable((()=>i(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Nv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X1{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ei(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Jt(this.o===void 0,3512);const r=u=>{u.error!=null&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,dt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const l=u=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Nv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((i=>i?(Jt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new Nv(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function $1(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<s;r++)i[r]=Math.floor(256*Math.random());return i}class Qm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=$1(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<i&&(r+=t.charAt(l[u]%62))}return r}}function Bt(s,t){return s<t?-1:s>t?1:0}function Tm(s,t){const i=Math.min(s.length,t.length);for(let r=0;r<i;r++){const l=s.charAt(r),u=t.charAt(r);if(l!==u)return rm(l)===rm(u)?Bt(l,u):rm(l)?1:-1}return Bt(s.length,t.length)}const W1=55296,J1=57343;function rm(s){const t=s.charCodeAt(0);return t>=W1&&t<=J1}function yo(s,t,i){return s.length===t.length&&s.every(((r,l)=>i(r,t[l])))}const Dv="__name__";class Bi{constructor(t,i,r){i===void 0?i=0:i>t.length&&Ct(637,{offset:i,range:t.length}),r===void 0?r=t.length-i:r>t.length-i&&Ct(1746,{length:r,range:t.length-i}),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return Bi.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Bi?t.forEach((r=>{i.push(r)})):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let l=0;l<r;l++){const u=Bi.compareSegments(t.get(l),i.get(l));if(u!==0)return u}return Bt(t.length,i.length)}static compareSegments(t,i){const r=Bi.isNumericId(t),l=Bi.isNumericId(i);return r&&!l?-1:!r&&l?1:r&&l?Bi.extractNumericId(t).compare(Bi.extractNumericId(i)):Tm(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return gr.fromString(t.substring(4,t.length-2))}}class ue extends Bi{construct(t,i,r){return new ue(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new ct(et.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter((l=>l.length>0)))}return new ue(i)}static emptyPath(){return new ue([])}}const Z1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Bi{construct(t,i,r){return new sn(t,i,r)}static isValidIdentifier(t){return Z1.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dv}static keyField(){return new sn([Dv])}static fromServerFormat(t){const i=[];let r="",l=0;const u=()=>{if(r.length===0)throw new ct(et.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let f=!1;for(;l<t.length;){const m=t[l];if(m==="\\"){if(l+1===t.length)throw new ct(et.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ct(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=y,l+=2}else m==="`"?(f=!f,l++):m!=="."||f?(r+=m,l++):(u(),l++)}if(u(),f)throw new ct(et.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new sn(i)}static emptyPath(){return new sn([])}}class Tt{constructor(t){this.path=t}static fromPath(t){return new Tt(ue.fromString(t))}static fromName(t){return new Tt(ue.fromString(t).popFirst(5))}static empty(){return new Tt(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ue.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return ue.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Tt(new ue(t.slice()))}}function gT(s,t,i){if(!i)throw new ct(et.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function tw(s,t,i,r){if(t===!0&&r===!0)throw new ct(et.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function Ov(s){if(!Tt.isDocumentKey(s))throw new ct(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Vv(s){if(Tt.isDocumentKey(s))throw new ct(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function yT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ch(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":Ct(12329,{type:typeof s})}function pn(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new ct(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Ch(s);throw new ct(et.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return s}function Ue(s,t){const i={typeString:s};return t&&(i.value=t),i}function su(s,t){if(!yT(s))throw new ct(et.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in t)if(t[r]){const l=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){i=`JSON missing required field: '${r}'`;break}const f=s[r];if(l&&typeof f!==l){i=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){i=`Expected '${r}' field to equal '${u.value}'`;break}}if(i)throw new ct(et.INVALID_ARGUMENT,i);return!0}const Mv=-62135596800,jv=1e6;class me{static now(){return me.fromMillis(Date.now())}static fromDate(t){return me.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor((t-1e3*i)*jv);return new me(i,r)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new ct(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ct(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<Mv)throw new ct(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ct(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jv}_compareTo(t){return this.seconds===t.seconds?Bt(this.nanoseconds,t.nanoseconds):Bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(su(t,me._jsonSchema))return new me(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Mv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}me._jsonSchemaVersion="firestore/timestamp/1.0",me._jsonSchema={type:Ue("string",me._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};class It{static fromTimestamp(t){return new It(t)}static min(){return new It(new me(0,0))}static max(){return new It(new me(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Yl=-1;function ew(s,t){const i=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=It.fromTimestamp(r===1e9?new me(i+1,0):new me(i,r));return new vr(l,Tt.empty(),t)}function nw(s){return new vr(s.readTime,s.key,Yl)}class vr{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new vr(It.min(),Tt.empty(),Yl)}static max(){return new vr(It.max(),Tt.empty(),Yl)}}function iw(s,t){let i=s.readTime.compareTo(t.readTime);return i!==0?i:(i=Tt.comparator(s.documentKey,t.documentKey),i!==0?i:Bt(s.largestBatchId,t.largestBatchId))}const sw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Ro(s){if(s.code!==et.FAILED_PRECONDITION||s.message!==sw)throw s;dt("LocalStore","Unexpectedly lost primary lease")}class it{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&Ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new it(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(i,u).next(r,l)}}))}toPromise(){return new Promise(((t,i)=>{this.next(t,i)}))}wrapUserFunction(t){try{const i=t();return i instanceof it?i:it.resolve(i)}catch(i){return it.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction((()=>t(i))):it.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction((()=>t(i))):it.reject(i)}static resolve(t){return new it(((i,r)=>{i(t)}))}static reject(t){return new it(((i,r)=>{r(t)}))}static waitFor(t){return new it(((i,r)=>{let l=0,u=0,f=!1;t.forEach((m=>{++l,m.next((()=>{++u,f&&u===l&&i()}),(y=>r(y)))})),f=!0,u===l&&i()}))}static or(t){let i=it.resolve(!1);for(const r of t)i=i.next((l=>l?it.resolve(l):r()));return i}static forEach(t,i){const r=[];return t.forEach(((l,u)=>{r.push(i.call(this,l,u))})),this.waitFor(r)}static mapArray(t,i){return new it(((r,l)=>{const u=t.length,f=new Array(u);let m=0;for(let y=0;y<u;y++){const _=y;i(t[_]).next((b=>{f[_]=b,++m,m===u&&r(f)}),(b=>l(b)))}}))}static doWhile(t,i){return new it(((r,l)=>{const u=()=>{t()===!0?i().next((()=>{u()}),l):r()};u()}))}}function aw(s){const t=s.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Co(s){return s.name==="IndexedDbTransactionError"}class Ih{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Ih.ce=-1;const Xm=-1;function kh(s){return s==null}function lh(s){return s===0&&1/s==-1/0}function ow(s){return typeof s=="number"&&Number.isInteger(s)&&!lh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const _T="";function lw(s){let t="";for(let i=0;i<s.length;i++)t.length>0&&(t=Lv(t)),t=uw(s.get(i),t);return Lv(t)}function uw(s,t){let i=t;const r=s.length;for(let l=0;l<r;l++){const u=s.charAt(l);switch(u){case"\0":i+="";break;case _T:i+="";break;default:i+=u}}return i}function Lv(s){return s+_T+""}function Pv(s){let t=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t++;return t}function wr(s,t){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t(i,s[i])}function vT(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}class ve{constructor(t,i){this.comparator=t,this.root=i||nn.EMPTY}insert(t,i){return new ve(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(t){return new ve(this.comparator,this.root.remove(t,this.comparator).copy(null,null,nn.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(t,r.key);if(l===0)return i+r.left.size;l<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((i,r)=>(t(i,r),!1)))}toString(){const t=[];return this.inorderTraversal(((i,r)=>(t.push(`${i}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Fc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Fc(this.root,t,this.comparator,!0)}}class Fc{constructor(t,i,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=i?r(t.key,i):1,i&&l&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class nn{constructor(t,i,r,l,u){this.key=t,this.value=i,this.color=r??nn.RED,this.left=l??nn.EMPTY,this.right=u??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,l,u){return new nn(t??this.key,i??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let l=this;const u=r(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,i,r),null):u===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return nn.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ct(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ct(27949);return t+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct(57766)}get value(){throw Ct(16141)}get color(){throw Ct(16727)}get left(){throw Ct(29726)}get right(){throw Ct(36894)}copy(t,i,r,l,u){return this}insert(t,i,r){return new nn(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qe{constructor(t){this.comparator=t,this.data=new ve(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((i,r)=>(t(i),!1)))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new Uv(this.data.getIterator())}getIteratorFrom(t){return new Uv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach((r=>{i=i.add(r)})),i}isEqual(t){if(!(t instanceof qe)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((i=>{t.push(i)})),t}toString(){const t=[];return this.forEach((i=>t.push(i))),"SortedSet("+t.toString()+")"}copy(t){const i=new qe(this.comparator);return i.data=t,i}}class Uv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Un{constructor(t){this.fields=t,t.sort(sn.comparator)}static empty(){return new Un([])}unionWith(t){let i=new qe(sn.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new Un(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return yo(this.fields,t.fields,((i,r)=>i.isEqual(r)))}}class ET extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rn{constructor(t){this.binaryString=t}static fromBase64String(t){const i=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new ET("Invalid base64 string: "+u):u}})(t);return new rn(i)}static fromUint8Array(t){const i=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(t);return new rn(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const r=new Uint8Array(i.length);for(let l=0;l<i.length;l++)r[l]=i.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const cw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(s){if(Jt(!!s,39018),typeof s=="string"){let t=0;const i=cw.exec(s);if(Jt(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Re(s.seconds),nanos:Re(s.nanos)}}function Re(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Tr(s){return typeof s=="string"?rn.fromBase64String(s):rn.fromUint8Array(s)}const TT="server_timestamp",bT="__type__",ST="__previous_value__",AT="__local_write_time__";function $m(s){return(s?.mapValue?.fields||{})[bT]?.stringValue===TT}function Nh(s){const t=s.mapValue.fields[ST];return $m(t)?Nh(t):t}function Ql(s){const t=Er(s.mapValue.fields[AT].timestampValue);return new me(t.seconds,t.nanos)}class hw{constructor(t,i,r,l,u,f,m,y,_,b){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=b}}const uh="(default)";class Xl{constructor(t,i){this.projectId=t,this.database=i||uh}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database===uh}isEqual(t){return t instanceof Xl&&t.projectId===this.projectId&&t.database===this.database}}const wT="__type__",fw="__max__",Gc={mapValue:{}},xT="__vector__",ch="value";function br(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?$m(s)?4:mw(s)?9007199254740991:dw(s)?10:11:Ct(28295,{value:s})}function $i(s,t){if(s===t)return!0;const i=br(s);if(i!==br(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Ql(s).isEqual(Ql(t));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=Er(l.timestampValue),m=Er(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(l,u){return Tr(l.bytesValue).isEqual(Tr(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(l,u){return Re(l.geoPointValue.latitude)===Re(u.geoPointValue.latitude)&&Re(l.geoPointValue.longitude)===Re(u.geoPointValue.longitude)})(s,t);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Re(l.integerValue)===Re(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=Re(l.doubleValue),m=Re(u.doubleValue);return f===m?lh(f)===lh(m):isNaN(f)&&isNaN(m)}return!1})(s,t);case 9:return yo(s.arrayValue.values||[],t.arrayValue.values||[],$i);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},m=u.mapValue.fields||{};if(Pv(f)!==Pv(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!$i(f[y],m[y])))return!1;return!0})(s,t);default:return Ct(52216,{left:s})}}function $l(s,t){return(s.values||[]).find((i=>$i(i,t)))!==void 0}function _o(s,t){if(s===t)return 0;const i=br(s),r=br(t);if(i!==r)return Bt(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return Bt(s.booleanValue,t.booleanValue);case 2:return(function(u,f){const m=Re(u.integerValue||u.doubleValue),y=Re(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(s,t);case 3:return zv(s.timestampValue,t.timestampValue);case 4:return zv(Ql(s),Ql(t));case 5:return Tm(s.stringValue,t.stringValue);case 6:return(function(u,f){const m=Tr(u),y=Tr(f);return m.compareTo(y)})(s.bytesValue,t.bytesValue);case 7:return(function(u,f){const m=u.split("/"),y=f.split("/");for(let _=0;_<m.length&&_<y.length;_++){const b=Bt(m[_],y[_]);if(b!==0)return b}return Bt(m.length,y.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,f){const m=Bt(Re(u.latitude),Re(f.latitude));return m!==0?m:Bt(Re(u.longitude),Re(f.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return Bv(s.arrayValue,t.arrayValue);case 10:return(function(u,f){const m=u.fields||{},y=f.fields||{},_=m[ch]?.arrayValue,b=y[ch]?.arrayValue,w=Bt(_?.values?.length||0,b?.values?.length||0);return w!==0?w:Bv(_,b)})(s.mapValue,t.mapValue);case 11:return(function(u,f){if(u===Gc.mapValue&&f===Gc.mapValue)return 0;if(u===Gc.mapValue)return 1;if(f===Gc.mapValue)return-1;const m=u.fields||{},y=Object.keys(m),_=f.fields||{},b=Object.keys(_);y.sort(),b.sort();for(let w=0;w<y.length&&w<b.length;++w){const x=Tm(y[w],b[w]);if(x!==0)return x;const U=_o(m[y[w]],_[b[w]]);if(U!==0)return U}return Bt(y.length,b.length)})(s.mapValue,t.mapValue);default:throw Ct(23264,{he:i})}}function zv(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Bt(s,t);const i=Er(s),r=Er(t),l=Bt(i.seconds,r.seconds);return l!==0?l:Bt(i.nanos,r.nanos)}function Bv(s,t){const i=s.values||[],r=t.values||[];for(let l=0;l<i.length&&l<r.length;++l){const u=_o(i[l],r[l]);if(u)return u}return Bt(i.length,r.length)}function vo(s){return bm(s)}function bm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const r=Er(i);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return Tr(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return Tt.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let r="[",l=!0;for(const u of i.values||[])l?l=!1:r+=",",r+=bm(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(i){const r=Object.keys(i.fields||{}).sort();let l="{",u=!0;for(const f of r)u?u=!1:l+=",",l+=`${f}:${bm(i.fields[f])}`;return l+"}"})(s.mapValue):Ct(61005,{value:s})}function $c(s){switch(br(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Nh(s);return t?16+$c(t):16;case 5:return 2*s.stringValue.length;case 6:return Tr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+$c(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return wr(r.fields,((u,f)=>{l+=u.length+$c(f)})),l})(s.mapValue);default:throw Ct(13486,{value:s})}}function qv(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Sm(s){return!!s&&"integerValue"in s}function Wm(s){return!!s&&"arrayValue"in s}function Hv(s){return!!s&&"nullValue"in s}function Fv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Wc(s){return!!s&&"mapValue"in s}function dw(s){return(s?.mapValue?.fields||{})[wT]?.stringValue===xT}function Bl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return wr(s.mapValue.fields,((i,r)=>t.mapValue.fields[i]=Bl(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Bl(s.arrayValue.values[i]);return t}return{...s}}function mw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===fw}class xn{constructor(t){this.value=t}static empty(){return new xn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!Wc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Bl(i)}setAll(t){let i=sn.emptyPath(),r={},l=[];t.forEach(((f,m)=>{if(!i.isImmediateParentOf(m)){const y=this.getFieldsMap(i);this.applyChanges(y,r,l),r={},l=[],i=m.popLast()}f?r[m.lastSegment()]=Bl(f):l.push(m.lastSegment())}));const u=this.getFieldsMap(i);this.applyChanges(u,r,l)}delete(t){const i=this.field(t.popLast());Wc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return $i(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let l=i.mapValue.fields[t.get(r)];Wc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,r){wr(i,((l,u)=>t[l]=u));for(const l of r)delete t[l]}clone(){return new xn(Bl(this.value))}}function RT(s){const t=[];return wr(s.fields,((i,r)=>{const l=new sn([i]);if(Wc(r)){const u=RT(r.mapValue).fields;if(u.length===0)t.push(l);else for(const f of u)t.push(l.child(f))}else t.push(l)})),new Un(t)}class cn{constructor(t,i,r,l,u,f,m){this.key=t,this.documentType=i,this.version=r,this.readTime=l,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(t){return new cn(t,0,It.min(),It.min(),It.min(),xn.empty(),0)}static newFoundDocument(t,i,r,l){return new cn(t,1,i,It.min(),r,l,0)}static newNoDocument(t,i){return new cn(t,2,i,It.min(),It.min(),xn.empty(),0)}static newUnknownDocument(t,i){return new cn(t,3,i,It.min(),It.min(),xn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(It.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof cn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hh{constructor(t,i){this.position=t,this.inclusive=i}}function Gv(s,t,i){let r=0;for(let l=0;l<s.position.length;l++){const u=t[l],f=s.position[l];if(u.field.isKeyField()?r=Tt.comparator(Tt.fromName(f.referenceValue),i.key):r=_o(f,i.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kv(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!$i(s.position[i],t.position[i]))return!1;return!0}class Wl{constructor(t,i="asc"){this.field=t,this.dir=i}}function pw(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}class CT{}class Pe extends CT{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new yw(t,i,r):i==="array-contains"?new Ew(t,r):i==="in"?new Tw(t,r):i==="not-in"?new bw(t,r):i==="array-contains-any"?new Sw(t,r):new Pe(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new _w(t,r):new vw(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(_o(i,this.value)):i!==null&&br(this.value)===br(i)&&this.matchesComparison(_o(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _i extends CT{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new _i(t,i)}matches(t){return IT(this)?this.filters.find((i=>!i.matches(t)))===void 0:this.filters.find((i=>i.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,i)=>t.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function IT(s){return s.op==="and"}function kT(s){return gw(s)&&IT(s)}function gw(s){for(const t of s.filters)if(t instanceof _i)return!1;return!0}function Am(s){if(s instanceof Pe)return s.field.canonicalString()+s.op.toString()+vo(s.value);if(kT(s))return s.filters.map((t=>Am(t))).join(",");{const t=s.filters.map((i=>Am(i))).join(",");return`${s.op}(${t})`}}function NT(s,t){return s instanceof Pe?(function(r,l){return l instanceof Pe&&r.op===l.op&&r.field.isEqual(l.field)&&$i(r.value,l.value)})(s,t):s instanceof _i?(function(r,l){return l instanceof _i&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,f,m)=>u&&NT(f,l.filters[m])),!0):!1})(s,t):void Ct(19439)}function DT(s){return s instanceof Pe?(function(i){return`${i.field.canonicalString()} ${i.op} ${vo(i.value)}`})(s):s instanceof _i?(function(i){return i.op.toString()+" {"+i.getFilters().map(DT).join(" ,")+"}"})(s):"Filter"}class yw extends Pe{constructor(t,i,r){super(t,i,r),this.key=Tt.fromName(r.referenceValue)}matches(t){const i=Tt.comparator(t.key,this.key);return this.matchesComparison(i)}}class _w extends Pe{constructor(t,i){super(t,"in",i),this.keys=OT("in",i)}matches(t){return this.keys.some((i=>i.isEqual(t.key)))}}class vw extends Pe{constructor(t,i){super(t,"not-in",i),this.keys=OT("not-in",i)}matches(t){return!this.keys.some((i=>i.isEqual(t.key)))}}function OT(s,t){return(t.arrayValue?.values||[]).map((i=>Tt.fromName(i.referenceValue)))}class Ew extends Pe{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Wm(i)&&$l(i.arrayValue,this.value)}}class Tw extends Pe{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&$l(this.value.arrayValue,i)}}class bw extends Pe{constructor(t,i){super(t,"not-in",i)}matches(t){if($l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!$l(this.value.arrayValue,i)}}class Sw extends Pe{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Wm(i)||!i.arrayValue.values)&&i.arrayValue.values.some((r=>$l(this.value.arrayValue,r)))}}class Aw{constructor(t,i=null,r=[],l=[],u=null,f=null,m=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function Yv(s,t=null,i=[],r=[],l=null,u=null,f=null){return new Aw(s,t,i,r,l,u,f)}function Jm(s){const t=Nt(s);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map((r=>Am(r))).join(","),i+="|ob:",i+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),kh(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>vo(r))).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>vo(r))).join(",")),t.Te=i}return t.Te}function Zm(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!pw(s.orderBy[i],t.orderBy[i]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!NT(s.filters[i],t.filters[i]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!Kv(s.startAt,t.startAt)&&Kv(s.endAt,t.endAt)}function wm(s){return Tt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Io{constructor(t,i=null,r=[],l=[],u=null,f="F",m=null,y=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ww(s,t,i,r,l,u,f,m){return new Io(s,t,i,r,l,u,f,m)}function Dh(s){return new Io(s)}function Qv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function VT(s){return s.collectionGroup!==null}function ql(s){const t=Nt(s);if(t.Ie===null){t.Ie=[];const i=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),i.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new qe(sn.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(t).forEach((u=>{i.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Wl(u,r))})),i.has(sn.keyField().canonicalString())||t.Ie.push(new Wl(sn.keyField(),r))}return t.Ie}function Fi(s){const t=Nt(s);return t.Ee||(t.Ee=xw(t,ql(s))),t.Ee}function xw(s,t){if(s.limitType==="F")return Yv(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Wl(l.field,u)}));const i=s.endAt?new hh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new hh(s.startAt.position,s.startAt.inclusive):null;return Yv(s.path,s.collectionGroup,t,s.filters,s.limit,i,r)}}function xm(s,t){const i=s.filters.concat([t]);return new Io(s.path,s.collectionGroup,s.explicitOrderBy.slice(),i,s.limit,s.limitType,s.startAt,s.endAt)}function fh(s,t,i){return new Io(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,i,s.startAt,s.endAt)}function Oh(s,t){return Zm(Fi(s),Fi(t))&&s.limitType===t.limitType}function MT(s){return`${Jm(Fi(s))}|lt:${s.limitType}`}function ao(s){return`Query(target=${(function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map((l=>DT(l))).join(", ")}]`),kh(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map((l=>vo(l))).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map((l=>vo(l))).join(",")),`Target(${r})`})(Fi(s))}; limitType=${s.limitType})`}function Vh(s,t){return t.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Tt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,l){for(const u of ql(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(s,t)&&(function(r,l){return!(r.startAt&&!(function(f,m,y){const _=Gv(f,m,y);return f.inclusive?_<=0:_<0})(r.startAt,ql(r),l)||r.endAt&&!(function(f,m,y){const _=Gv(f,m,y);return f.inclusive?_>=0:_>0})(r.endAt,ql(r),l))})(s,t)}function Rw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function jT(s){return(t,i)=>{let r=!1;for(const l of ql(s)){const u=Cw(l,t,i);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function Cw(s,t,i){const r=s.field.isKeyField()?Tt.comparator(t.key,i.key):(function(u,f,m){const y=f.data.field(u),_=m.data.field(u);return y!==null&&_!==null?_o(y,_):Ct(42886)})(s.field,t,i);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Ct(19790,{direction:s.dir})}}class da{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,t))return u}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),l=this.inner[r];if(l===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],t))return void(l[u]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return r.length===1?delete this.inner[i]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(t){wr(this.inner,((i,r)=>{for(const[l,u]of r)t(l,u)}))}isEmpty(){return vT(this.inner)}size(){return this.innerSize}}const Iw=new ve(Tt.comparator);function As(){return Iw}const LT=new ve(Tt.comparator);function Ll(...s){let t=LT;for(const i of s)t=t.insert(i.key,i);return t}function PT(s){let t=LT;return s.forEach(((i,r)=>t=t.insert(i,r.overlayedDocument))),t}function ra(){return Hl()}function UT(){return Hl()}function Hl(){return new da((s=>s.toString()),((s,t)=>s.isEqual(t)))}const kw=new ve(Tt.comparator),Nw=new qe(Tt.comparator);function qt(...s){let t=Nw;for(const i of s)t=t.add(i);return t}const Dw=new qe(Bt);function Ow(){return Dw}function tp(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lh(t)?"-0":t}}function zT(s){return{integerValue:""+s}}function Vw(s,t){return ow(t)?zT(t):tp(s,t)}class Mh{constructor(){this._=void 0}}function Mw(s,t,i){return s instanceof Jl?(function(l,u){const f={fields:{[bT]:{stringValue:TT},[AT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&$m(u)&&(u=Nh(u)),u&&(f.fields[ST]=u),{mapValue:f}})(i,t):s instanceof Eo?qT(s,t):s instanceof Zl?HT(s,t):(function(l,u){const f=BT(l,u),m=Xv(f)+Xv(l.Ae);return Sm(f)&&Sm(l.Ae)?zT(m):tp(l.serializer,m)})(s,t)}function jw(s,t,i){return s instanceof Eo?qT(s,t):s instanceof Zl?HT(s,t):i}function BT(s,t){return s instanceof dh?(function(r){return Sm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class Jl extends Mh{}class Eo extends Mh{constructor(t){super(),this.elements=t}}function qT(s,t){const i=FT(t);for(const r of s.elements)i.some((l=>$i(l,r)))||i.push(r);return{arrayValue:{values:i}}}class Zl extends Mh{constructor(t){super(),this.elements=t}}function HT(s,t){let i=FT(t);for(const r of s.elements)i=i.filter((l=>!$i(l,r)));return{arrayValue:{values:i}}}class dh extends Mh{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function Xv(s){return Re(s.integerValue||s.doubleValue)}function FT(s){return Wm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class GT{constructor(t,i){this.field=t,this.transform=i}}function Lw(s,t){return s.field.isEqual(t.field)&&(function(r,l){return r instanceof Eo&&l instanceof Eo||r instanceof Zl&&l instanceof Zl?yo(r.elements,l.elements,$i):r instanceof dh&&l instanceof dh?$i(r.Ae,l.Ae):r instanceof Jl&&l instanceof Jl})(s.transform,t.transform)}class Pw{constructor(t,i){this.version=t,this.transformResults=i}}class gn{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new gn}static exists(t){return new gn(void 0,t)}static updateTime(t){return new gn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Jc(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class jh{}function KT(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Lh(s.key,gn.none()):new ru(s.key,s.data,gn.none());{const i=s.data,r=xn.empty();let l=new qe(sn.comparator);for(let u of t.fields)if(!l.has(u)){let f=i.field(u);f===null&&u.length>1&&(u=u.popLast(),f=i.field(u)),f===null?r.delete(u):r.set(u,f),l=l.add(u)}return new xr(s.key,r,new Un(l.toArray()),gn.none())}}function Uw(s,t,i){s instanceof ru?(function(l,u,f){const m=l.value.clone(),y=Wv(l.fieldTransforms,u,f.transformResults);m.setAll(y),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(s,t,i):s instanceof xr?(function(l,u,f){if(!Jc(l.precondition,u))return void u.convertToUnknownDocument(f.version);const m=Wv(l.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(YT(l)),y.setAll(m),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(s,t,i):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,i)}function Fl(s,t,i,r){return s instanceof ru?(function(u,f,m,y){if(!Jc(u.precondition,f))return m;const _=u.value.clone(),b=Jv(u.fieldTransforms,y,f);return _.setAll(b),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(s,t,i,r):s instanceof xr?(function(u,f,m,y){if(!Jc(u.precondition,f))return m;const _=Jv(u.fieldTransforms,y,f),b=f.data;return b.setAll(YT(u)),b.setAll(_),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,t,i,r):(function(u,f,m){return Jc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(s,t,i)}function zw(s,t){let i=null;for(const r of s.fieldTransforms){const l=t.data.field(r.field),u=BT(r.transform,l||null);u!=null&&(i===null&&(i=xn.empty()),i.set(r.field,u))}return i||null}function $v(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&yo(r,l,((u,f)=>Lw(u,f)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class ru extends jh{constructor(t,i,r,l=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class xr extends jh{constructor(t,i,r,l,u=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function YT(s){const t=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const r=s.data.field(i);t.set(i,r)}})),t}function Wv(s,t,i){const r=new Map;Jt(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let l=0;l<i.length;l++){const u=s[l],f=u.transform,m=t.data.field(u.field);r.set(u.field,jw(f,m,i[l]))}return r}function Jv(s,t,i){const r=new Map;for(const l of s){const u=l.transform,f=i.data.field(l.field);r.set(l.field,Mw(u,f,t))}return r}class Lh extends jh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bw extends jh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qw{constructor(t,i,r,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(t.key)&&Uw(u,t,r[l])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=Fl(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=Fl(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=UT();return this.mutations.forEach((l=>{const u=t.get(l.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=i.has(l.key)?null:m;const y=KT(f,m);y!==null&&r.set(l.key,y),f.isValidDocument()||f.convertToNoDocument(It.min())})),r}keys(){return this.mutations.reduce(((t,i)=>t.add(i.key)),qt())}isEqual(t){return this.batchId===t.batchId&&yo(this.mutations,t.mutations,((i,r)=>$v(i,r)))&&yo(this.baseMutations,t.baseMutations,((i,r)=>$v(i,r)))}}class ep{constructor(t,i,r,l){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=l}static from(t,i,r){Jt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let l=(function(){return kw})();const u=t.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,r[f].version);return new ep(t,i,r,l)}}class Hw{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Fw{constructor(t,i){this.count=t,this.unchangedNames=i}}var Le,Ft;function Gw(s){switch(s){case et.OK:return Ct(64938);case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0;default:return Ct(15467,{code:s})}}function QT(s){if(s===void 0)return Ss("GRPC error has no .code"),et.UNKNOWN;switch(s){case Le.OK:return et.OK;case Le.CANCELLED:return et.CANCELLED;case Le.UNKNOWN:return et.UNKNOWN;case Le.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case Le.INTERNAL:return et.INTERNAL;case Le.UNAVAILABLE:return et.UNAVAILABLE;case Le.UNAUTHENTICATED:return et.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case Le.NOT_FOUND:return et.NOT_FOUND;case Le.ALREADY_EXISTS:return et.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return et.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case Le.ABORTED:return et.ABORTED;case Le.OUT_OF_RANGE:return et.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return et.UNIMPLEMENTED;case Le.DATA_LOSS:return et.DATA_LOSS;default:return Ct(39323,{code:s})}}(Ft=Le||(Le={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";function Kw(){return new TextEncoder}const Yw=new gr([4294967295,4294967295],0);function Zv(s){const t=Kw().encode(s),i=new lT;return i.update(t),new Uint8Array(i.digest())}function tE(s){const t=new DataView(s.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),l=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new gr([i,r],0),new gr([l,u],0)]}class np{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new Pl(`Invalid padding: ${i}`);if(r<0)throw new Pl(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Pl(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new Pl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=gr.fromNumber(this.ge)}ye(t,i,r){let l=t.add(i.multiply(gr.fromNumber(r)));return l.compare(Yw)===1&&(l=new gr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=Zv(t),[r,l]=tE(i);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);if(!this.we(f))return!1}return!0}static create(t,i,r){const l=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new np(u,l,i);return r.forEach((m=>f.insert(m))),f}insert(t){if(this.ge===0)return;const i=Zv(t),[r,l]=tE(i);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);this.Se(f)}}Se(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class Pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ph{constructor(t,i,r,l,u){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const l=new Map;return l.set(t,au.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new Ph(It.min(),l,new ve(Bt),As(),qt())}}class au{constructor(t,i,r,l,u){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new au(r,i,qt(),qt(),qt())}}class Zc{constructor(t,i,r,l){this.be=t,this.removedTargetIds=i,this.key=r,this.De=l}}class XT{constructor(t,i){this.targetId=t,this.Ce=i}}class $T{constructor(t,i,r=rn.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=l}}class eE{constructor(){this.ve=0,this.Fe=nE(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=qt(),i=qt(),r=qt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:r=r.add(l);break;default:Ct(38017,{changeType:u})}})),new au(this.Me,this.xe,t,i,r)}qe(){this.Oe=!1,this.Fe=nE()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Jt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Qw{constructor(t){this.Ge=t,this.ze=new Map,this.je=As(),this.Je=Kc(),this.He=Kc(),this.Ye=new ve(Bt)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,(i=>{const r=this.nt(i);switch(t.state){case 0:this.rt(i)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),r.Le(t.resumeToken));break;default:Ct(56790,{state:t.state})}}))}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach(((r,l)=>{this.rt(l)&&i(l)}))}st(t){const i=t.targetId,r=t.Ce.count,l=this.ot(i);if(l){const u=l.target;if(wm(u))if(r===0){const f=new Tt(u.path);this.et(i,f,cn.newNoDocument(f,It.min()))}else Jt(r===1,20013,{expectedCount:r});else{const f=this._t(i);if(f!==r){const m=this.ut(t),y=m?this.ct(m,t,f):1;if(y!==0){this.it(i);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,_)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=i;let f,m;try{f=Tr(r).toUint8Array()}catch(y){if(y instanceof ET)return go("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new np(f,l,u)}catch(y){return go(y instanceof Pl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(t,i,r){return i.Ce.count===r-this.Pt(t,i.targetId)?0:2}Pt(t,i){const r=this.Ge.getRemoteKeysForTarget(i);let l=0;return r.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(i,u,null),l++)})),l}Tt(t){const i=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&wm(m.target)){const y=new Tt(m.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,cn.newNoDocument(y,t))}u.Be&&(i.set(f,u.ke()),u.qe())}}));let r=qt();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(t)));const l=new Ph(t,i,this.Ye,this.je,r);return this.je=As(),this.Je=Kc(),this.He=Kc(),this.Ye=new ve(Bt),l}Xe(t,i){if(!this.rt(t))return;const r=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,r),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,r){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),r&&(this.je=this.je.insert(i,r))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new eE,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new qe(Bt),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new qe(Bt),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||dt("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new eE),this.Ge.getRemoteKeysForTarget(t).forEach((i=>{this.et(t,i,null)}))}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function Kc(){return new ve(Tt.comparator)}function nE(){return new ve(Tt.comparator)}const Xw={asc:"ASCENDING",desc:"DESCENDING"},$w={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ww={and:"AND",or:"OR"};class Jw{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function Rm(s,t){return s.useProto3Json||kh(t)?t:{value:t}}function mh(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function WT(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function Zw(s,t){return mh(s,t.toTimestamp())}function Gi(s){return Jt(!!s,49232),It.fromTimestamp((function(i){const r=Er(i);return new me(r.seconds,r.nanos)})(s))}function ip(s,t){return Cm(s,t).canonicalString()}function Cm(s,t){const i=(function(l){return new ue(["projects",l.projectId,"databases",l.database])})(s).child("documents");return t===void 0?i:i.child(t)}function JT(s){const t=ue.fromString(s);return Jt(i0(t),10190,{key:t.toString()}),t}function Im(s,t){return ip(s.databaseId,t.path)}function am(s,t){const i=JT(t);if(i.get(1)!==s.databaseId.projectId)throw new ct(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new ct(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new Tt(t0(i))}function ZT(s,t){return ip(s.databaseId,t)}function tx(s){const t=JT(s);return t.length===4?ue.emptyPath():t0(t)}function km(s){return new ue(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function t0(s){return Jt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function iE(s,t,i){return{name:Im(s,t),fields:i.value.mapValue.fields}}function ex(s,t){let i;if("targetChange"in t){t.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ct(39313,{state:_})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],u=(function(_,b){return _.useProto3Json?(Jt(b===void 0||typeof b=="string",58123),rn.fromBase64String(b||"")):(Jt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),rn.fromUint8Array(b||new Uint8Array))})(s,t.targetChange.resumeToken),f=t.targetChange.cause,m=f&&(function(_){const b=_.code===void 0?et.UNKNOWN:QT(_.code);return new ct(b,_.message||"")})(f);i=new $T(r,l,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const l=am(s,r.document.name),u=Gi(r.document.updateTime),f=r.document.createTime?Gi(r.document.createTime):It.min(),m=new xn({mapValue:{fields:r.document.fields}}),y=cn.newFoundDocument(l,u,f,m),_=r.targetIds||[],b=r.removedTargetIds||[];i=new Zc(_,b,y.key,y)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const l=am(s,r.document),u=r.readTime?Gi(r.readTime):It.min(),f=cn.newNoDocument(l,u),m=r.removedTargetIds||[];i=new Zc([],m,f.key,f)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const l=am(s,r.document),u=r.removedTargetIds||[];i=new Zc([],u,l,null)}else{if(!("filter"in t))return Ct(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,f=new Fw(l,u),m=r.targetId;i=new XT(m,f)}}return i}function nx(s,t){let i;if(t instanceof ru)i={update:iE(s,t.key,t.value)};else if(t instanceof Lh)i={delete:Im(s,t.key)};else if(t instanceof xr)i={update:iE(s,t.key,t.data),updateMask:hx(t.fieldMask)};else{if(!(t instanceof Bw))return Ct(16599,{Vt:t.type});i={verify:Im(s,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map((r=>(function(u,f){const m=f.transform;if(m instanceof Jl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Eo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Zl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof dh)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ct(20930,{transform:f.transform})})(0,r)))),t.precondition.isNone||(i.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:Zw(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ct(27497)})(s,t.precondition)),i}function ix(s,t){return s&&s.length>0?(Jt(t!==void 0,14353),s.map((i=>(function(l,u){let f=l.updateTime?Gi(l.updateTime):Gi(u);return f.isEqual(It.min())&&(f=Gi(u)),new Pw(f,l.transformResults||[])})(i,t)))):[]}function sx(s,t){return{documents:[ZT(s,t.path)]}}function rx(s,t){const i={structuredQuery:{}},r=t.path;let l;t.collectionGroup!==null?(l=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=ZT(s,l);const u=(function(_){if(_.length!==0)return n0(_i.create(_,"and"))})(t.filters);u&&(i.structuredQuery.where=u);const f=(function(_){if(_.length!==0)return _.map((b=>(function(x){return{field:oo(x.field),direction:lx(x.dir)}})(b)))})(t.orderBy);f&&(i.structuredQuery.orderBy=f);const m=Rm(s,t.limit);return m!==null&&(i.structuredQuery.limit=m),t.startAt&&(i.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(t.startAt)),t.endAt&&(i.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(t.endAt)),{ft:i,parent:l}}function ax(s){let t=tx(s.parent);const i=s.structuredQuery,r=i.from?i.from.length:0;let l=null;if(r>0){Jt(r===1,65062);const b=i.from[0];b.allDescendants?l=b.collectionId:t=t.child(b.collectionId)}let u=[];i.where&&(u=(function(w){const x=e0(w);return x instanceof _i&&kT(x)?x.getFilters():[x]})(i.where));let f=[];i.orderBy&&(f=(function(w){return w.map((x=>(function(J){return new Wl(lo(J.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(J.direction))})(x)))})(i.orderBy));let m=null;i.limit&&(m=(function(w){let x;return x=typeof w=="object"?w.value:w,kh(x)?null:x})(i.limit));let y=null;i.startAt&&(y=(function(w){const x=!!w.before,U=w.values||[];return new hh(U,x)})(i.startAt));let _=null;return i.endAt&&(_=(function(w){const x=!w.before,U=w.values||[];return new hh(U,x)})(i.endAt)),ww(t,l,f,u,m,"F",y,_)}function ox(s,t){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct(28987,{purpose:l})}})(t.purpose);return i==null?null:{"goog-listen-tags":i}}function e0(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=lo(i.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=lo(i.unaryFilter.field);return Pe.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=lo(i.unaryFilter.field);return Pe.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=lo(i.unaryFilter.field);return Pe.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ct(61313);default:return Ct(60726)}})(s):s.fieldFilter!==void 0?(function(i){return Pe.create(lo(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ct(58110);default:return Ct(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return _i.create(i.compositeFilter.filters.map((r=>e0(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ct(1026)}})(i.compositeFilter.op))})(s):Ct(30097,{filter:s})}function lx(s){return Xw[s]}function ux(s){return $w[s]}function cx(s){return Ww[s]}function oo(s){return{fieldPath:s.canonicalString()}}function lo(s){return sn.fromServerFormat(s.fieldPath)}function n0(s){return s instanceof Pe?(function(i){if(i.op==="=="){if(Fv(i.value))return{unaryFilter:{field:oo(i.field),op:"IS_NAN"}};if(Hv(i.value))return{unaryFilter:{field:oo(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Fv(i.value))return{unaryFilter:{field:oo(i.field),op:"IS_NOT_NAN"}};if(Hv(i.value))return{unaryFilter:{field:oo(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(i.field),op:ux(i.op),value:i.value}}})(s):s instanceof _i?(function(i){const r=i.getFilters().map((l=>n0(l)));return r.length===1?r[0]:{compositeFilter:{op:cx(i.op),filters:r}}})(s):Ct(54877,{filter:s})}function hx(s){const t=[];return s.fields.forEach((i=>t.push(i.canonicalString()))),{fieldPaths:t}}function i0(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class fr{constructor(t,i,r,l,u=It.min(),f=It.min(),m=rn.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(t){return new fr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class fx{constructor(t){this.yt=t}}function dx(s){const t=ax({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?fh(t,t.limit,"L"):t}class mx{constructor(){this.Cn=new px}addToCollectionParentIndex(t,i){return this.Cn.add(i),it.resolve()}getCollectionParents(t,i){return it.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return it.resolve()}deleteFieldIndex(t,i){return it.resolve()}deleteAllFieldIndexes(t){return it.resolve()}createTargetIndexes(t,i){return it.resolve()}getDocumentsMatchingTarget(t,i){return it.resolve(null)}getIndexType(t,i){return it.resolve(0)}getFieldIndexes(t,i){return it.resolve([])}getNextCollectionGroupToUpdate(t){return it.resolve(null)}getMinOffset(t,i){return it.resolve(vr.min())}getMinOffsetFromCollectionGroup(t,i){return it.resolve(vr.min())}updateCollectionGroup(t,i,r){return it.resolve()}updateIndexEntries(t,i){return it.resolve()}}class px{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),l=this.index[i]||new qe(ue.comparator),u=!l.has(r);return this.index[i]=l.add(r),u}has(t){const i=t.lastSegment(),r=t.popLast(),l=this.index[i];return l&&l.has(r)}getEntries(t){return(this.index[t]||new qe(ue.comparator)).toArray()}}const sE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},s0=41943040;class wn{static withCacheSize(t){return new wn(t,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(s0,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);class To{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new To(0)}static cr(){return new To(-1)}}const rE="LruGarbageCollector",gx=1048576;function aE([s,t],[i,r]){const l=Bt(s,i);return l===0?Bt(t,r):l}class yx{constructor(t){this.Ir=t,this.buffer=new qe(aE),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();aE(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class _x{constructor(t,i,r){this.garbageCollector=t,this.asyncQueue=i,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){dt(rE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Co(i)?dt(rE,"Ignoring IndexedDB error during garbage collection: ",i):await Ro(i)}await this.Vr(3e5)}))}}class vx{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next((r=>Math.floor(i/100*r)))}nthSequenceNumber(t,i){if(i===0)return it.resolve(Ih.ce);const r=new yx(i);return this.mr.forEachTarget(t,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(t,i,r){return this.mr.removeTargets(t,i,r)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(dt("LruGarbageCollector","Garbage collection skipped; disabled"),it.resolve(sE)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sE):this.yr(t,i)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let r,l,u,f,m,y,_;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,f=Date.now(),this.nthSequenceNumber(t,l)))).next((w=>(r=w,m=Date.now(),this.removeTargets(t,r,i)))).next((w=>(u=w,y=Date.now(),this.removeOrphanedDocuments(t,r)))).next((w=>(_=Date.now(),ro()<=zt.DEBUG&&dt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${l} in `+(m-f)+`ms
	Removed ${u} targets in `+(y-m)+`ms
	Removed ${w} documents in `+(_-y)+`ms
Total Duration: ${_-b}ms`),it.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:w}))))}}function Ex(s,t){return new vx(s,t)}class Tx{constructor(){this.changes=new da((t=>t.toString()),((t,i)=>t.isEqual(i))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,cn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?it.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class bx{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}class Sx{constructor(t,i,r,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=l}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next((l=>(r=l,this.remoteDocumentCache.getEntry(t,i)))).next((l=>(r!==null&&Fl(r.mutation,l,Un.empty(),me.now()),l)))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next((r=>this.getLocalViewOfDocuments(t,r,qt()).next((()=>r))))}getLocalViewOfDocuments(t,i,r=qt()){const l=ra();return this.populateOverlays(t,l,i).next((()=>this.computeViews(t,i,l,r).next((u=>{let f=Ll();return u.forEach(((m,y)=>{f=f.insert(m,y.overlayedDocument)})),f}))))}getOverlayedDocuments(t,i){const r=ra();return this.populateOverlays(t,r,i).next((()=>this.computeViews(t,i,r,qt())))}populateOverlays(t,i,r){const l=[];return r.forEach((u=>{i.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(t,l).next((u=>{u.forEach(((f,m)=>{i.set(f,m)}))}))}computeViews(t,i,r,l){let u=As();const f=Hl(),m=(function(){return Hl()})();return i.forEach(((y,_)=>{const b=r.get(_.key);l.has(_.key)&&(b===void 0||b.mutation instanceof xr)?u=u.insert(_.key,_):b!==void 0?(f.set(_.key,b.mutation.getFieldMask()),Fl(b.mutation,_,b.mutation.getFieldMask(),me.now())):f.set(_.key,Un.empty())})),this.recalculateAndSaveOverlays(t,u).next((y=>(y.forEach(((_,b)=>f.set(_,b))),i.forEach(((_,b)=>m.set(_,new bx(b,f.get(_)??null)))),m)))}recalculateAndSaveOverlays(t,i){const r=Hl();let l=new ve(((f,m)=>f-m)),u=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next((f=>{for(const m of f)m.keys().forEach((y=>{const _=i.get(y);if(_===null)return;let b=r.get(y)||Un.empty();b=m.applyToLocalView(_,b),r.set(y,b);const w=(l.get(m.batchId)||qt()).add(y);l=l.insert(m.batchId,w)}))})).next((()=>{const f=[],m=l.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),_=y.key,b=y.value,w=UT();b.forEach((x=>{if(!u.has(x)){const U=KT(i.get(x),r.get(x));U!==null&&w.set(x,U),u=u.add(x)}})),f.push(this.documentOverlayCache.saveOverlays(t,_,w))}return it.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,i,r,l){return(function(f){return Tt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):VT(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,l):this.getDocumentsMatchingCollectionQuery(t,i,r,l)}getNextDocuments(t,i,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,l-u.size):it.resolve(ra());let m=Yl,y=u;return f.next((_=>it.forEach(_,((b,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(b)?it.resolve():this.remoteDocumentCache.getEntry(t,b).next((x=>{y=y.insert(b,x)}))))).next((()=>this.populateOverlays(t,_,u))).next((()=>this.computeViews(t,y,_,qt()))).next((b=>({batchId:m,changes:PT(b)})))))}))}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new Tt(i)).next((r=>{let l=Ll();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(t,i,r,l){const u=i.collectionGroup;let f=Ll();return this.indexManager.getCollectionParents(t,u).next((m=>it.forEach(m,(y=>{const _=(function(w,x){return new Io(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(i,y.child(u));return this.getDocumentsMatchingCollectionQuery(t,_,r,l).next((b=>{b.forEach(((w,x)=>{f=f.insert(w,x)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,i,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,u,l)))).next((f=>{u.forEach(((y,_)=>{const b=_.getKey();f.get(b)===null&&(f=f.insert(b,cn.newInvalidDocument(b)))}));let m=Ll();return f.forEach(((y,_)=>{const b=u.get(y);b!==void 0&&Fl(b.mutation,_,Un.empty(),me.now()),Vh(i,_)&&(m=m.insert(y,_))})),m}))}}class Ax{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return it.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Gi(l.createTime)}})(i)),it.resolve()}getNamedQuery(t,i){return it.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:dx(l.bundledQuery),readTime:Gi(l.readTime)}})(i)),it.resolve()}}class wx{constructor(){this.overlays=new ve(Tt.comparator),this.qr=new Map}getOverlay(t,i){return it.resolve(this.overlays.get(i))}getOverlays(t,i){const r=ra();return it.forEach(i,(l=>this.getOverlay(t,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(t,i,r){return r.forEach(((l,u)=>{this.St(t,i,u)})),it.resolve()}removeOverlaysForBatchId(t,i,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),it.resolve()}getOverlaysForCollection(t,i,r){const l=ra(),u=i.length+1,f=new Tt(i.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,_=y.getKey();if(!i.isPrefixOf(_.path))break;_.path.length===u&&y.largestBatchId>r&&l.set(y.getKey(),y)}return it.resolve(l)}getOverlaysForCollectionGroup(t,i,r,l){let u=new ve(((_,b)=>_-b));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===i&&_.largestBatchId>r){let b=u.get(_.largestBatchId);b===null&&(b=ra(),u=u.insert(_.largestBatchId,b)),b.set(_.getKey(),_)}}const m=ra(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((_,b)=>m.set(_,b))),!(m.size()>=l)););return it.resolve(m)}St(t,i,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new Hw(i,r));let u=this.qr.get(i);u===void 0&&(u=qt(),this.qr.set(i,u)),this.qr.set(i,u.add(r.key))}}class xx{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(t){return it.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,it.resolve()}}class sp{constructor(){this.Qr=new qe(Qe.$r),this.Ur=new qe(Qe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const r=new Qe(t,i);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,i){t.forEach((r=>this.addReference(r,i)))}removeReference(t,i){this.Gr(new Qe(t,i))}zr(t,i){t.forEach((r=>this.removeReference(r,i)))}jr(t){const i=new Tt(new ue([])),r=new Qe(i,t),l=new Qe(i,t+1),u=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new Tt(new ue([])),r=new Qe(i,t),l=new Qe(i,t+1);let u=qt();return this.Ur.forEachInRange([r,l],(f=>{u=u.add(f.key)})),u}containsKey(t){const i=new Qe(t,0),r=this.Qr.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class Qe{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return Tt.comparator(t.key,i.key)||Bt(t.Yr,i.Yr)}static Kr(t,i){return Bt(t.Yr,i.Yr)||Tt.comparator(t.key,i.key)}}class Rx{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new qe(Qe.$r)}checkEmpty(t){return it.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new qw(u,i,r,l);this.mutationQueue.push(f);for(const m of l)this.Zr=this.Zr.add(new Qe(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return it.resolve(f)}lookupMutationBatch(t,i){return it.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,l=this.ei(r),u=l<0?0:l;return it.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return it.resolve(this.mutationQueue.length===0?Xm:this.tr-1)}getAllMutationBatches(t){return it.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new Qe(i,0),l=new Qe(i,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,l],(f=>{const m=this.Xr(f.Yr);u.push(m)})),it.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new qe(Bt);return i.forEach((l=>{const u=new Qe(l,0),f=new Qe(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{r=r.add(m.Yr)}))})),it.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,l=r.length+1;let u=r;Tt.isDocumentKey(u)||(u=u.child(""));const f=new Qe(new Tt(u),0);let m=new qe(Bt);return this.Zr.forEachWhile((y=>{const _=y.key.path;return!!r.isPrefixOf(_)&&(_.length===l&&(m=m.add(y.Yr)),!0)}),f),it.resolve(this.ti(m))}ti(t){const i=[];return t.forEach((r=>{const l=this.Xr(r);l!==null&&i.push(l)})),i}removeMutationBatch(t,i){Jt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return it.forEach(i.mutations,(l=>{const u=new Qe(l.key,i.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,i){const r=new Qe(i,0),l=this.Zr.firstAfterOrEqual(r);return it.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,it.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class Cx{constructor(t){this.ri=t,this.docs=(function(){return new ve(Tt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,l=this.docs.get(r),u=l?l.size:0,f=this.ri(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return it.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(i))}getEntries(t,i){let r=As();return i.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():cn.newInvalidDocument(l))})),it.resolve(r)}getDocumentsMatchingQuery(t,i,r,l){let u=As();const f=i.path,m=new Tt(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:_,value:{document:b}}=y.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||iw(nw(b),r)<=0||(l.has(b.key)||Vh(i,b))&&(u=u.insert(b.key,b.mutableCopy()))}return it.resolve(u)}getAllFromCollectionGroup(t,i,r,l){Ct(9500)}ii(t,i){return it.forEach(this.docs,(r=>i(r)))}newChangeBuffer(t){return new Ix(this)}getSize(t){return it.resolve(this.size)}}class Ix extends Tx{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(r)})),it.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}class kx{constructor(t){this.persistence=t,this.si=new da((i=>Jm(i)),Zm),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.oi=0,this._i=new sp,this.targetCount=0,this.ai=To.ur()}forEachTarget(t,i){return this.si.forEach(((r,l)=>i(l))),it.resolve()}getLastRemoteSnapshotVersion(t){return it.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return it.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),it.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.oi&&(this.oi=i),it.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new To(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,it.resolve()}updateTargetData(t,i){return this.Pr(i),it.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,it.resolve()}removeTargets(t,i,r){let l=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=i&&r.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),l++)})),it.waitFor(u).next((()=>l))}getTargetCount(t){return it.resolve(this.targetCount)}getTargetData(t,i){const r=this.si.get(i)||null;return it.resolve(r)}addMatchingKeys(t,i,r){return this._i.Wr(i,r),it.resolve()}removeMatchingKeys(t,i,r){this._i.zr(i,r);const l=this.persistence.referenceDelegate,u=[];return l&&i.forEach((f=>{u.push(l.markPotentiallyOrphaned(t,f))})),it.waitFor(u)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),it.resolve()}getMatchingKeysForTargetId(t,i){const r=this._i.Hr(i);return it.resolve(r)}containsKey(t,i){return it.resolve(this._i.containsKey(i))}}class r0{constructor(t,i){this.ui={},this.overlays={},this.ci=new Ih(0),this.li=!1,this.li=!0,this.hi=new xx,this.referenceDelegate=t(this),this.Pi=new kx(this),this.indexManager=new mx,this.remoteDocumentCache=(function(l){return new Cx(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new fx(i),this.Ii=new Ax(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new wx,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.ui[t.toKey()];return r||(r=new Rx(i,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,r){dt("MemoryPersistence","Starting transaction:",t);const l=new Nx(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(t,i){return it.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,i))))}}class Nx extends rw{constructor(t){super(),this.currentSequenceNumber=t}}class rp{constructor(t){this.persistence=t,this.Ri=new sp,this.Vi=null}static mi(t){return new rp(t)}get fi(){if(this.Vi)return this.Vi;throw Ct(60996)}addReference(t,i,r){return this.Ri.addReference(r,i),this.fi.delete(r.toString()),it.resolve()}removeReference(t,i,r){return this.Ri.removeReference(r,i),this.fi.add(r.toString()),it.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),it.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,i)))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return it.forEach(this.fi,(r=>{const l=Tt.fromPath(r);return this.gi(t,l).next((u=>{u||i.removeEntry(l,It.min())}))})).next((()=>(this.Vi=null,i.apply(t))))}updateLimboDocument(t,i){return this.gi(t,i).next((r=>{r?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(t){return 0}gi(t,i){return it.or([()=>it.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class ph{constructor(t,i){this.persistence=t,this.pi=new da((r=>lw(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=Ex(this,i)}static mi(t,i){return new ph(t,i)}Ei(){}di(t){return it.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>i.next((l=>r+l))))}wr(t){let i=0;return this.pr(t,(r=>{i++})).next((()=>i))}pr(t,i){return it.forEach(this.pi,((r,l)=>this.br(t,r,l).next((u=>u?it.resolve():i(l)))))}removeTargets(t,i,r){return this.persistence.getTargetCache().removeTargets(t,i,r)}removeOrphanedDocuments(t,i){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(t,(f=>this.br(t,f,i).next((m=>{m||(r++,u.removeEntry(f,It.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),it.resolve()}removeTarget(t,i){const r=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,i,r){return this.pi.set(r,t.currentSequenceNumber),it.resolve()}removeReference(t,i,r){return this.pi.set(r,t.currentSequenceNumber),it.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),it.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=$c(t.data.value)),i}br(t,i,r){return it.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return it.resolve(l!==void 0&&l>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class ap{constructor(t,i,r,l){this.targetId=t,this.fromCache=i,this.Es=r,this.ds=l}static As(t,i){let r=qt(),l=qt();for(const u of i.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new ap(t,i.fromCache,r,l)}}class Dx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Ox{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return AA()?8:aw(hn())>0?6:4})()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,r,l){const u={result:null};return this.ys(t,i).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(t,i,l,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new Dx;return this.Ss(t,i,f).next((m=>{if(u.result=m,this.Vs)return this.bs(t,i,f,m.size)}))})).next((()=>u.result))}bs(t,i,r,l){return r.documentReadCount<this.fs?(ro()<=zt.DEBUG&&dt("QueryEngine","SDK will not create cache indexes for query:",ao(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),it.resolve()):(ro()<=zt.DEBUG&&dt("QueryEngine","Query:",ao(i),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(ro()<=zt.DEBUG&&dt("QueryEngine","The SDK decides to create cache indexes for query:",ao(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Fi(i))):it.resolve())}ys(t,i){if(Qv(i))return it.resolve(null);let r=Fi(i);return this.indexManager.getIndexType(t,r).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=fh(i,null,"F"),r=Fi(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const f=qt(...u);return this.ps.getDocuments(t,f).next((m=>this.indexManager.getMinOffset(t,r).next((y=>{const _=this.Ds(i,m);return this.Cs(i,_,f,y.readTime)?this.ys(t,fh(i,null,"F")):this.vs(t,_,i,y)}))))})))))}ws(t,i,r,l){return Qv(i)||l.isEqual(It.min())?it.resolve(null):this.ps.getDocuments(t,r).next((u=>{const f=this.Ds(i,u);return this.Cs(i,f,r,l)?it.resolve(null):(ro()<=zt.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ao(i)),this.vs(t,f,i,ew(l,Yl)).next((m=>m)))}))}Ds(t,i){let r=new qe(jT(t));return i.forEach(((l,u)=>{Vh(t,u)&&(r=r.add(u))})),r}Cs(t,i,r,l){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const u=t.limitType==="F"?i.last():i.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(t,i,r){return ro()<=zt.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",ao(i)),this.ps.getDocumentsMatchingQuery(t,i,vr.min(),r)}vs(t,i,r,l){return this.ps.getDocumentsMatchingQuery(t,r,l).next((u=>(i.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const op="LocalStore",Vx=3e8;class Mx{constructor(t,i,r,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new ve(Bt),this.xs=new da((u=>Jm(u)),Zm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Sx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>t.collect(i,this.Ms)))}}function jx(s,t,i,r){return new Mx(s,t,i,r)}async function a0(s,t){const i=Nt(s);return await i.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return i.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,i.Bs(t),i.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],m=[];let y=qt();for(const _ of l){f.push(_.batchId);for(const b of _.mutations)y=y.add(b.key)}for(const _ of u){m.push(_.batchId);for(const b of _.mutations)y=y.add(b.key)}return i.localDocuments.getDocuments(r,y).next((_=>({Ls:_,removedBatchIds:f,addedBatchIds:m})))}))}))}function Lx(s,t){const i=Nt(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=t.batch.keys(),u=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,y,_,b){const w=_.batch,x=w.keys();let U=it.resolve();return x.forEach((J=>{U=U.next((()=>b.getEntry(y,J))).next((W=>{const X=_.docVersions.get(J);Jt(X!==null,48541),W.version.compareTo(X)<0&&(w.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),b.addEntry(W)))}))})),U.next((()=>m.mutationQueue.removeMutationBatch(y,w)))})(i,r,t,u).next((()=>u.apply(r))).next((()=>i.mutationQueue.performConsistencyCheck(r))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(r,l,t.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let y=qt();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(y=y.add(m.batch.mutations[_].key));return y})(t)))).next((()=>i.localDocuments.getDocuments(r,l)))}))}function o0(s){const t=Nt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>t.Pi.getLastRemoteSnapshotVersion(i)))}function Px(s,t){const i=Nt(s),r=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const m=[];t.targetChanges.forEach(((b,w)=>{const x=l.get(w);if(!x)return;m.push(i.Pi.removeMatchingKeys(u,b.removedDocuments,w).next((()=>i.Pi.addMatchingKeys(u,b.addedDocuments,w))));let U=x.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(w)!==null?U=U.withResumeToken(rn.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):b.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(b.resumeToken,r)),l=l.insert(w,U),(function(W,X,Z){return W.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=Vx?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(x,U,b)&&m.push(i.Pi.updateTargetData(u,U))}));let y=As(),_=qt();if(t.documentUpdates.forEach((b=>{t.resolvedLimboDocuments.has(b)&&m.push(i.persistence.referenceDelegate.updateLimboDocument(u,b))})),m.push(Ux(u,f,t.documentUpdates).next((b=>{y=b.ks,_=b.qs}))),!r.isEqual(It.min())){const b=i.Pi.getLastRemoteSnapshotVersion(u).next((w=>i.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(b)}return it.waitFor(m).next((()=>f.apply(u))).next((()=>i.localDocuments.getLocalViewOfDocuments(u,y,_))).next((()=>y))})).then((u=>(i.Ms=l,u)))}function Ux(s,t,i){let r=qt(),l=qt();return i.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let f=As();return i.forEach(((m,y)=>{const _=u.get(m);y.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(m)),y.isNoDocument()&&y.version.isEqual(It.min())?(t.removeEntry(m,y.readTime),f=f.insert(m,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(y),f=f.insert(m,y)):dt(op,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",y.version)})),{ks:f,qs:l}}))}function zx(s,t){const i=Nt(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=Xm),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function Bx(s,t){const i=Nt(s);return i.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return i.Pi.getTargetData(r,t).next((u=>u?(l=u,it.resolve(l)):i.Pi.allocateTargetId(r).next((f=>(l=new fr(t,f,"TargetPurposeListen",r.currentSequenceNumber),i.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=i.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(r.targetId,r),i.xs.set(t,r.targetId)),r}))}async function Nm(s,t,i){const r=Nt(s),l=r.Ms.get(t),u=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!Co(f))throw f;dt(op,`Failed to update sequence numbers for target ${t}: ${f}`)}r.Ms=r.Ms.remove(t),r.xs.delete(l.target)}function oE(s,t,i){const r=Nt(s);let l=It.min(),u=qt();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,_,b){const w=Nt(y),x=w.xs.get(b);return x!==void 0?it.resolve(w.Ms.get(x)):w.Pi.getTargetData(_,b)})(r,f,Fi(t)).next((m=>{if(m)return l=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,m.targetId).next((y=>{u=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,t,i?l:It.min(),i?u:qt()))).next((m=>(qx(r,Rw(t),m),{documents:m,Qs:u})))))}function qx(s,t,i){let r=s.Os.get(t)||It.min();i.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}class lE{constructor(){this.activeTargetIds=Ow()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Hx{constructor(){this.Mo=new lE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,r){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new lE,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Fx{Oo(t){}shutdown(){}}const uE="ConnectivityMonitor";class cE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){dt(uE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){dt(uE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Yc=null;function Dm(){return Yc===null?Yc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yc++,"0x"+Yc.toString(16)}const om="RestConnection",Gx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kx{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===uh?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(t,i,r,l,u){const f=Dm(),m=this.zo(t,i.toUriEncodedString());dt(om,`Sending RPC '${t}' ${f}:`,m,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,u);const{host:_}=new URL(m),b=Ao(_);return this.Jo(t,m,y,r,b).then((w=>(dt(om,`Received RPC '${t}' ${f}: `,w),w)),(w=>{throw go(om,`RPC '${t}' ${f} failed with error: `,w,"url: ",m,"request:",r),w}))}Ho(t,i,r,l,u,f){return this.Go(t,i,r,l,u)}jo(t,i,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,u)=>t[u]=l)),r&&r.headers.forEach(((l,u)=>t[u]=l))}zo(t,i){const r=Gx[t];return`${this.Uo}/v1/${i}:${r}`}terminate(){}}class Yx{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const ln="WebChannelConnection";class Qx extends Kx{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,r,l,u){const f=Dm();return new Promise(((m,y)=>{const _=new uT;_.setWithCredentials(!0),_.listenOnce(cT.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Xc.NO_ERROR:const w=_.getResponseJson();dt(ln,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(w)),m(w);break;case Xc.TIMEOUT:dt(ln,`RPC '${t}' ${f} timed out`),y(new ct(et.DEADLINE_EXCEEDED,"Request time out"));break;case Xc.HTTP_ERROR:const x=_.getStatus();if(dt(ln,`RPC '${t}' ${f} failed with status:`,x,"response text:",_.getResponseText()),x>0){let U=_.getResponseJson();Array.isArray(U)&&(U=U[0]);const J=U?.error;if(J&&J.status&&J.message){const W=(function(Z){const ut=Z.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(ut)>=0?ut:et.UNKNOWN})(J.status);y(new ct(W,J.message))}else y(new ct(et.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new ct(et.UNAVAILABLE,"Connection failed."));break;default:Ct(9055,{l_:t,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{dt(ln,`RPC '${t}' ${f} completed.`)}}));const b=JSON.stringify(l);dt(ln,`RPC '${t}' ${f} sending request:`,l),_.send(i,"POST",b,r,15)}))}T_(t,i,r){const l=Dm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=dT(),m=fT(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,i,r),y.encodeInitMessageHeaders=!0;const b=u.join("");dt(ln,`Creating RPC '${t}' stream ${l}: ${b}`,y);const w=f.createWebChannel(b,y);this.I_(w);let x=!1,U=!1;const J=new Yx({Yo:X=>{U?dt(ln,`Not sending because RPC '${t}' stream ${l} is closed:`,X):(x||(dt(ln,`Opening RPC '${t}' stream ${l} transport.`),w.open(),x=!0),dt(ln,`RPC '${t}' stream ${l} sending:`,X),w.send(X))},Zo:()=>w.close()}),W=(X,Z,ut)=>{X.listen(Z,(_t=>{try{ut(_t)}catch(Vt){setTimeout((()=>{throw Vt}),0)}}))};return W(w,jl.EventType.OPEN,(()=>{U||(dt(ln,`RPC '${t}' stream ${l} transport opened.`),J.o_())})),W(w,jl.EventType.CLOSE,(()=>{U||(U=!0,dt(ln,`RPC '${t}' stream ${l} transport closed`),J.a_(),this.E_(w))})),W(w,jl.EventType.ERROR,(X=>{U||(U=!0,go(ln,`RPC '${t}' stream ${l} transport errored. Name:`,X.name,"Message:",X.message),J.a_(new ct(et.UNAVAILABLE,"The operation could not be completed")))})),W(w,jl.EventType.MESSAGE,(X=>{if(!U){const Z=X.data[0];Jt(!!Z,16349);const ut=Z,_t=ut?.error||ut[0]?.error;if(_t){dt(ln,`RPC '${t}' stream ${l} received error:`,_t);const Vt=_t.status;let at=(function(S){const C=Le[S];if(C!==void 0)return QT(C)})(Vt),bt=_t.message;at===void 0&&(at=et.INTERNAL,bt="Unknown error status: "+Vt+" with message "+_t.message),U=!0,J.a_(new ct(at,bt)),w.close()}else dt(ln,`RPC '${t}' stream ${l} received:`,Z),J.u_(Z)}})),W(m,hT.STAT_EVENT,(X=>{X.stat===Em.PROXY?dt(ln,`RPC '${t}' stream ${l} detected buffering proxy`):X.stat===Em.NOPROXY&&dt(ln,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{J.__()}),0),J}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((i=>i===t))}}function lm(){return typeof document<"u"?document:null}function Uh(s){return new Jw(s,!0)}class l0{constructor(t,i,r=1e3,l=1.5,u=6e4){this.Mi=t,this.timerId=i,this.d_=r,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-r);l>0&&dt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const hE="PersistentStream";class u0{constructor(t,i,r,l,u,f,m,y){this.Mi=t,this.S_=r,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new l0(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===et.RESOURCE_EXHAUSTED?(Ss(i.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===i&&this.G_(r,l)}),(r=>{t((()=>{const l=new ct(et.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(t,i){const r=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return dt(hE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget((()=>this.D_===t?i():(dt(hE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Xx extends u0{constructor(t,i,r,l,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,l,f),this.serializer=u}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=ex(this.serializer,t),r=(function(u){if(!("targetChange"in u))return It.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?It.min():f.readTime?Gi(f.readTime):It.min()})(t);return this.listener.H_(i,r)}Y_(t){const i={};i.database=km(this.serializer),i.addTarget=(function(u,f){let m;const y=f.target;if(m=wm(y)?{documents:sx(u,y)}:{query:rx(u,y).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=WT(u,f.resumeToken);const _=Rm(u,f.expectedCount);_!==null&&(m.expectedCount=_)}else if(f.snapshotVersion.compareTo(It.min())>0){m.readTime=mh(u,f.snapshotVersion.toTimestamp());const _=Rm(u,f.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,t);const r=ox(this.serializer,t);r&&(i.labels=r),this.q_(i)}Z_(t){const i={};i.database=km(this.serializer),i.removeTarget=t,this.q_(i)}}class $x extends u0{constructor(t,i,r,l,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return Jt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Jt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Jt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=ix(t.writeResults,t.commitTime),r=Gi(t.commitTime);return this.listener.na(r,i)}ra(){const t={};t.database=km(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map((r=>nx(this.serializer,r)))};this.q_(i)}}class Wx{}class Jx extends Wx{constructor(t,i,r,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ct(et.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(t,Cm(i,r),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ct(et.UNKNOWN,u.toString())}))}Ho(t,i,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(t,Cm(i,r),l,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ct(et.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Zx{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ss(i),this.aa=!1):dt("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ca="RemoteStore";class tR{constructor(t,i,r,l,u){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{ma(this)&&(dt(ca,"Restarting streams for network reachability change."),await(async function(y){const _=Nt(y);_.Ea.add(4),await ou(_),_.Ra.set("Unknown"),_.Ea.delete(4),await zh(_)})(this))}))})),this.Ra=new Zx(r,l)}}async function zh(s){if(ma(s))for(const t of s.da)await t(!0)}async function ou(s){for(const t of s.da)await t(!1)}function c0(s,t){const i=Nt(s);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),hp(i)?cp(i):ko(i).O_()&&up(i,t))}function lp(s,t){const i=Nt(s),r=ko(i);i.Ia.delete(t),r.O_()&&h0(i,t),i.Ia.size===0&&(r.O_()?r.L_():ma(i)&&i.Ra.set("Unknown"))}function up(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(It.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}ko(s).Y_(t)}function h0(s,t){s.Va.Ue(t),ko(s).Z_(t)}function cp(s){s.Va=new Qw({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),ko(s).start(),s.Ra.ua()}function hp(s){return ma(s)&&!ko(s).x_()&&s.Ia.size>0}function ma(s){return Nt(s).Ea.size===0}function f0(s){s.Va=void 0}async function eR(s){s.Ra.set("Online")}async function nR(s){s.Ia.forEach(((t,i)=>{up(s,t)}))}async function iR(s,t){f0(s),hp(s)?(s.Ra.ha(t),cp(s)):s.Ra.set("Unknown")}async function sR(s,t,i){if(s.Ra.set("Online"),t instanceof $T&&t.state===2&&t.cause)try{await(async function(l,u){const f=u.cause;for(const m of u.targetIds)l.Ia.has(m)&&(await l.remoteSyncer.rejectListen(m,f),l.Ia.delete(m),l.Va.removeTarget(m))})(s,t)}catch(r){dt(ca,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await gh(s,r)}else if(t instanceof Zc?s.Va.Ze(t):t instanceof XT?s.Va.st(t):s.Va.tt(t),!i.isEqual(It.min()))try{const r=await o0(s.localStore);i.compareTo(r)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const b=u.Ia.get(_);b&&u.Ia.set(_,b.withResumeToken(y.resumeToken,f))}})),m.targetMismatches.forEach(((y,_)=>{const b=u.Ia.get(y);if(!b)return;u.Ia.set(y,b.withResumeToken(rn.EMPTY_BYTE_STRING,b.snapshotVersion)),h0(u,y);const w=new fr(b.target,y,_,b.sequenceNumber);up(u,w)})),u.remoteSyncer.applyRemoteEvent(m)})(s,i)}catch(r){dt(ca,"Failed to raise snapshot:",r),await gh(s,r)}}async function gh(s,t,i){if(!Co(t))throw t;s.Ea.add(1),await ou(s),s.Ra.set("Offline"),i||(i=()=>o0(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{dt(ca,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await zh(s)}))}function d0(s,t){return t().catch((i=>gh(s,i,t)))}async function Bh(s){const t=Nt(s),i=Sr(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Xm;for(;rR(t);)try{const l=await zx(t.localStore,r);if(l===null){t.Ta.length===0&&i.L_();break}r=l.batchId,aR(t,l)}catch(l){await gh(t,l)}m0(t)&&p0(t)}function rR(s){return ma(s)&&s.Ta.length<10}function aR(s,t){s.Ta.push(t);const i=Sr(s);i.O_()&&i.X_&&i.ea(t.mutations)}function m0(s){return ma(s)&&!Sr(s).x_()&&s.Ta.length>0}function p0(s){Sr(s).start()}async function oR(s){Sr(s).ra()}async function lR(s){const t=Sr(s);for(const i of s.Ta)t.ea(i.mutations)}async function uR(s,t,i){const r=s.Ta.shift(),l=ep.from(r,t,i);await d0(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Bh(s)}async function cR(s,t){t&&Sr(s).X_&&await(async function(r,l){if((function(f){return Gw(f)&&f!==et.ABORTED})(l.code)){const u=r.Ta.shift();Sr(r).B_(),await d0(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Bh(r)}})(s,t),m0(s)&&p0(s)}async function fE(s,t){const i=Nt(s);i.asyncQueue.verifyOperationInProgress(),dt(ca,"RemoteStore received new credentials");const r=ma(i);i.Ea.add(3),await ou(i),r&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await zh(i)}async function hR(s,t){const i=Nt(s);t?(i.Ea.delete(2),await zh(i)):t||(i.Ea.add(2),await ou(i),i.Ra.set("Unknown"))}function ko(s){return s.ma||(s.ma=(function(i,r,l){const u=Nt(i);return u.sa(),new Xx(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:eR.bind(null,s),t_:nR.bind(null,s),r_:iR.bind(null,s),H_:sR.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),hp(s)?cp(s):s.Ra.set("Unknown")):(await s.ma.stop(),f0(s))}))),s.ma}function Sr(s){return s.fa||(s.fa=(function(i,r,l){const u=Nt(i);return u.sa(),new $x(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:oR.bind(null,s),r_:cR.bind(null,s),ta:lR.bind(null,s),na:uR.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await Bh(s)):(await s.fa.stop(),s.Ta.length>0&&(dt(ca,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class fp{constructor(t,i,r,l,u){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new Es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,l,u){const f=Date.now()+r,m=new fp(t,i,f,l,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct(et.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dp(s,t){if(Ss("AsyncQueue",`${t}: ${s}`),Co(s))return new ct(et.UNAVAILABLE,`${t}: ${s}`);throw s}class co{static emptySet(t){return new co(t.comparator)}constructor(t){this.comparator=t?(i,r)=>t(i,r)||Tt.comparator(i.key,r.key):(i,r)=>Tt.comparator(i.key,r.key),this.keyedMap=Ll(),this.sortedSet=new ve(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((i,r)=>(t(i),!1)))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof co)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((i=>{t.push(i.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new co;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}class dE{constructor(){this.ga=new ve(Tt.comparator)}track(t){const i=t.doc.key,r=this.ga.get(i);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(i,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(i):t.type===1&&r.type===2?this.ga=this.ga.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):Ct(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal(((i,r)=>{t.push(r)})),t}}class bo{constructor(t,i,r,l,u,f,m,y,_){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(t,i,r,l,u){const f=[];return i.forEach((m=>{f.push({type:0,doc:m})})),new bo(t,i,co.emptySet(i),f,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Oh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==r[l].type||!i[l].doc.isEqual(r[l].doc))return!1;return!0}}class fR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class dR{constructor(){this.queries=mE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const l=Nt(i),u=l.queries;l.queries=mE(),u.forEach(((f,m)=>{for(const y of m.Sa)y.onError(r)}))})(this,new ct(et.ABORTED,"Firestore shutting down"))}}function mE(){return new da((s=>MT(s)),Oh)}async function mp(s,t){const i=Nt(s);let r=3;const l=t.query;let u=i.queries.get(l);u?!u.ba()&&t.Da()&&(r=2):(u=new fR,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await i.onListen(l,!0);break;case 1:u.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(f){const m=dp(f,`Initialization of query '${ao(t.query)}' failed`);return void t.onError(m)}i.queries.set(l,u),u.Sa.push(t),t.va(i.onlineState),u.wa&&t.Fa(u.wa)&&gp(i)}async function pp(s,t){const i=Nt(s),r=t.query;let l=3;const u=i.queries.get(r);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=t.Da()?0:1:!u.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function mR(s,t){const i=Nt(s);let r=!1;for(const l of t){const u=l.query,f=i.queries.get(u);if(f){for(const m of f.Sa)m.Fa(l)&&(r=!0);f.wa=l}}r&&gp(i)}function pR(s,t,i){const r=Nt(s),l=r.queries.get(t);if(l)for(const u of l.Sa)u.onError(i);r.queries.delete(t)}function gp(s){s.Ca.forEach((t=>{t.next()}))}var Om,pE;(pE=Om||(Om={})).Ma="default",pE.Cache="cache";class yp{constructor(t,i,r){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const l of t.docChanges)l.type!==3&&r.push(l);t=new bo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const r=i!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=bo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Om.Cache}}class g0{constructor(t){this.key=t}}class y0{constructor(t){this.key=t}}class gR{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qt(),this.mutatedKeys=qt(),this.eu=jT(t),this.tu=new co(this.eu)}get nu(){return this.Ya}ru(t,i){const r=i?i.iu:new dE,l=i?i.tu:this.tu;let u=i?i.mutatedKeys:this.mutatedKeys,f=l,m=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((b,w)=>{const x=l.get(b),U=Vh(this.query,w)?w:null,J=!!x&&this.mutatedKeys.has(x.key),W=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let X=!1;x&&U?x.data.isEqual(U.data)?J!==W&&(r.track({type:3,doc:U}),X=!0):this.su(x,U)||(r.track({type:2,doc:U}),X=!0,(y&&this.eu(U,y)>0||_&&this.eu(U,_)<0)&&(m=!0)):!x&&U?(r.track({type:0,doc:U}),X=!0):x&&!U&&(r.track({type:1,doc:x}),X=!0,(y||_)&&(m=!0)),X&&(U?(f=f.add(U),u=W?u.add(b):u.delete(b)):(f=f.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{tu:f,iu:r,Cs:m,mutatedKeys:u}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,l){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((b,w)=>(function(U,J){const W=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct(20277,{Rt:X})}};return W(U)-W(J)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(r),l=l??!1;const m=i&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,_=y!==this.Za;return this.Za=y,f.length!==0||_?{snapshot:new bo(this.query,t.tu,u,f,t.mutatedKeys,y===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),t.modifiedDocuments.forEach((i=>{})),t.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=qt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const i=[];return t.forEach((r=>{this.Xa.has(r)||i.push(new y0(r))})),this.Xa.forEach((r=>{t.has(r)||i.push(new g0(r))})),i}cu(t){this.Ya=t.Qs,this.Xa=qt();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _p="SyncEngine";class yR{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class _R{constructor(t){this.key=t,this.hu=!1}}class vR{constructor(t,i,r,l,u,f){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new da((m=>MT(m)),Oh),this.Iu=new Map,this.Eu=new Set,this.du=new ve(Tt.comparator),this.Au=new Map,this.Ru=new sp,this.Vu={},this.mu=new Map,this.fu=To.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ER(s,t,i=!0){const r=S0(s);let l;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await _0(r,t,i,!0),l}async function TR(s,t){const i=S0(s);await _0(i,t,!0,!1)}async function _0(s,t,i,r){const l=await Bx(s.localStore,Fi(t)),u=l.targetId,f=s.sharedClientState.addLocalQueryTarget(u,i);let m;return r&&(m=await bR(s,t,u,f==="current",l.resumeToken)),s.isPrimaryClient&&i&&c0(s.remoteStore,l),m}async function bR(s,t,i,r,l){s.pu=(w,x,U)=>(async function(W,X,Z,ut){let _t=X.view.ru(Z);_t.Cs&&(_t=await oE(W.localStore,X.query,!1).then((({documents:k})=>X.view.ru(k,_t))));const Vt=ut&&ut.targetChanges.get(X.targetId),at=ut&&ut.targetMismatches.get(X.targetId)!=null,bt=X.view.applyChanges(_t,W.isPrimaryClient,Vt,at);return yE(W,X.targetId,bt.au),bt.snapshot})(s,w,x,U);const u=await oE(s.localStore,t,!0),f=new gR(t,u.Qs),m=f.ru(u.documents),y=au.createSynthesizedTargetChangeForCurrentChange(i,r&&s.onlineState!=="Offline",l),_=f.applyChanges(m,s.isPrimaryClient,y);yE(s,i,_.au);const b=new yR(t,i,f);return s.Tu.set(t,b),s.Iu.has(i)?s.Iu.get(i).push(t):s.Iu.set(i,[t]),_.snapshot}async function SR(s,t,i){const r=Nt(s),l=r.Tu.get(t),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((f=>!Oh(f,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Nm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),i&&lp(r.remoteStore,l.targetId),Vm(r,l.targetId)})).catch(Ro)):(Vm(r,l.targetId),await Nm(r.localStore,l.targetId,!0))}async function AR(s,t){const i=Nt(s),r=i.Tu.get(t),l=i.Iu.get(r.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),lp(i.remoteStore,r.targetId))}async function wR(s,t,i){const r=DR(s);try{const l=await(function(f,m){const y=Nt(f),_=me.now(),b=m.reduce(((U,J)=>U.add(J.key)),qt());let w,x;return y.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let J=As(),W=qt();return y.Ns.getEntries(U,b).next((X=>{J=X,J.forEach(((Z,ut)=>{ut.isValidDocument()||(W=W.add(Z))}))})).next((()=>y.localDocuments.getOverlayedDocuments(U,J))).next((X=>{w=X;const Z=[];for(const ut of m){const _t=zw(ut,w.get(ut.key).overlayedDocument);_t!=null&&Z.push(new xr(ut.key,_t,RT(_t.value.mapValue),gn.exists(!0)))}return y.mutationQueue.addMutationBatch(U,_,Z,m)})).next((X=>{x=X;const Z=X.applyToLocalDocumentSet(w,W);return y.documentOverlayCache.saveOverlays(U,X.batchId,Z)}))})).then((()=>({batchId:x.batchId,changes:PT(w)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(l.batchId),(function(f,m,y){let _=f.Vu[f.currentUser.toKey()];_||(_=new ve(Bt)),_=_.insert(m,y),f.Vu[f.currentUser.toKey()]=_})(r,l.batchId,i),await lu(r,l.changes),await Bh(r.remoteStore)}catch(l){const u=dp(l,"Failed to persist write");i.reject(u)}}async function v0(s,t){const i=Nt(s);try{const r=await Px(i.localStore,t);t.targetChanges.forEach(((l,u)=>{const f=i.Au.get(u);f&&(Jt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Jt(f.hu,14607):l.removedDocuments.size>0&&(Jt(f.hu,42227),f.hu=!1))})),await lu(i,r,t)}catch(r){await Ro(r)}}function gE(s,t,i){const r=Nt(s);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const l=[];r.Tu.forEach(((u,f)=>{const m=f.view.va(t);m.snapshot&&l.push(m.snapshot)})),(function(f,m){const y=Nt(f);y.onlineState=m;let _=!1;y.queries.forEach(((b,w)=>{for(const x of w.Sa)x.va(m)&&(_=!0)})),_&&gp(y)})(r.eventManager,t),l.length&&r.Pu.H_(l),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function xR(s,t,i){const r=Nt(s);r.sharedClientState.updateQueryState(t,"rejected",i);const l=r.Au.get(t),u=l&&l.key;if(u){let f=new ve(Tt.comparator);f=f.insert(u,cn.newNoDocument(u,It.min()));const m=qt().add(u),y=new Ph(It.min(),new Map,new ve(Bt),f,m);await v0(r,y),r.du=r.du.remove(u),r.Au.delete(t),vp(r)}else await Nm(r.localStore,t,!1).then((()=>Vm(r,t,i))).catch(Ro)}async function RR(s,t){const i=Nt(s),r=t.batch.batchId;try{const l=await Lx(i.localStore,t);T0(i,r,null),E0(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await lu(i,l)}catch(l){await Ro(l)}}async function CR(s,t,i){const r=Nt(s);try{const l=await(function(f,m){const y=Nt(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let b;return y.mutationQueue.lookupMutationBatch(_,m).next((w=>(Jt(w!==null,37113),b=w.keys(),y.mutationQueue.removeMutationBatch(_,w)))).next((()=>y.mutationQueue.performConsistencyCheck(_))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(_,b,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b))).next((()=>y.localDocuments.getDocuments(_,b)))}))})(r.localStore,t);T0(r,t,i),E0(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await lu(r,l)}catch(l){await Ro(l)}}function E0(s,t){(s.mu.get(t)||[]).forEach((i=>{i.resolve()})),s.mu.delete(t)}function T0(s,t,i){const r=Nt(s);let l=r.Vu[r.currentUser.toKey()];if(l){const u=l.get(t);u&&(i?u.reject(i):u.resolve(),l=l.remove(t)),r.Vu[r.currentUser.toKey()]=l}}function Vm(s,t,i=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),i&&s.Pu.yu(r,i);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||b0(s,r)}))}function b0(s,t){s.Eu.delete(t.path.canonicalString());const i=s.du.get(t);i!==null&&(lp(s.remoteStore,i),s.du=s.du.remove(t),s.Au.delete(i),vp(s))}function yE(s,t,i){for(const r of i)r instanceof g0?(s.Ru.addReference(r.key,t),IR(s,r)):r instanceof y0?(dt(_p,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||b0(s,r.key)):Ct(19791,{wu:r})}function IR(s,t){const i=t.key,r=i.path.canonicalString();s.du.get(i)||s.Eu.has(r)||(dt(_p,"New document in limbo: "+i),s.Eu.add(r),vp(s))}function vp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const i=new Tt(ue.fromString(t)),r=s.fu.next();s.Au.set(r,new _R(i)),s.du=s.du.insert(i,r),c0(s.remoteStore,new fr(Fi(Dh(i.path)),r,"TargetPurposeLimboResolution",Ih.ce))}}async function lu(s,t,i){const r=Nt(s),l=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,y)=>{f.push(r.pu(y,t,i).then((_=>{if((_||i)&&r.isPrimaryClient){const b=_?!_.fromCache:i?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,b?"current":"not-current")}if(_){l.push(_);const b=ap.As(y.targetId,_);u.push(b)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(y,_){const b=Nt(y);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>it.forEach(_,(x=>it.forEach(x.Es,(U=>b.persistence.referenceDelegate.addReference(w,x.targetId,U))).next((()=>it.forEach(x.ds,(U=>b.persistence.referenceDelegate.removeReference(w,x.targetId,U)))))))))}catch(w){if(!Co(w))throw w;dt(op,"Failed to update sequence numbers: "+w)}for(const w of _){const x=w.targetId;if(!w.fromCache){const U=b.Ms.get(x),J=U.snapshotVersion,W=U.withLastLimboFreeSnapshotVersion(J);b.Ms=b.Ms.insert(x,W)}}})(r.localStore,u))}async function kR(s,t){const i=Nt(s);if(!i.currentUser.isEqual(t)){dt(_p,"User change. New user:",t.toKey());const r=await a0(i.localStore,t);i.currentUser=t,(function(u,f){u.mu.forEach((m=>{m.forEach((y=>{y.reject(new ct(et.CANCELLED,f))}))})),u.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await lu(i,r.Ls)}}function NR(s,t){const i=Nt(s),r=i.Au.get(t);if(r&&r.hu)return qt().add(r.key);{let l=qt();const u=i.Iu.get(t);if(!u)return l;for(const f of u){const m=i.Tu.get(f);l=l.unionWith(m.view.nu)}return l}}function S0(s){const t=Nt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=v0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=NR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xR.bind(null,t),t.Pu.H_=mR.bind(null,t.eventManager),t.Pu.yu=pR.bind(null,t.eventManager),t}function DR(s){const t=Nt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=RR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=CR.bind(null,t),t}class yh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Uh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return jx(this.persistence,new Ox,t.initialUser,this.serializer)}Cu(t){return new r0(rp.mi,this.serializer)}Du(t){return new Hx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yh.provider={build:()=>new yh};class OR extends yh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){Jt(this.persistence.referenceDelegate instanceof ph,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new _x(r,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new r0((r=>ph.mi(r,i)),this.serializer)}}class Mm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kR.bind(null,this.syncEngine),await hR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new dR})()}createDatastore(t){const i=Uh(t.databaseInfo.databaseId),r=(function(u){return new Qx(u)})(t.databaseInfo);return(function(u,f,m,y){return new Jx(u,f,m,y)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,l,u,f,m){return new tR(r,l,u,f,m)})(this.localStore,this.datastore,t.asyncQueue,(i=>gE(this.syncEngine,i,0)),(function(){return cE.v()?new cE:new Fx})())}createSyncEngine(t,i){return(function(l,u,f,m,y,_,b){const w=new vR(l,u,f,m,y,_);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const r=Nt(i);dt(ca,"RemoteStore shutting down."),r.Ea.add(5),await ou(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mm.provider={build:()=>new Mm};class Ep{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ss("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout((()=>{this.muted||t(i)}),0)}}const Ar="FirestoreClient";class VR{constructor(t,i,r,l,u){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=l,this.user=un.UNAUTHENTICATED,this.clientId=Qm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{dt(Ar,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(dt(Ar,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=dp(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function um(s,t){s.asyncQueue.verifyOperationInProgress(),dt(Ar,"Initializing OfflineComponentProvider");const i=s.configuration;await t.initialize(i);let r=i.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await a0(t.localStore,l),r=l)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function _E(s,t){s.asyncQueue.verifyOperationInProgress();const i=await MR(s);dt(Ar,"Initializing OnlineComponentProvider"),await t.initialize(i,s.configuration),s.setCredentialChangeListener((r=>fE(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>fE(t.remoteStore,l))),s._onlineComponents=t}async function MR(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){dt(Ar,"Using user provided OfflineComponentProvider");try{await um(s,s._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!(function(l){return l.name==="FirebaseError"?l.code===et.FAILED_PRECONDITION||l.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;go("Error using user provided cache. Falling back to memory cache: "+i),await um(s,new yh)}}else dt(Ar,"Using default OfflineComponentProvider"),await um(s,new OR(void 0));return s._offlineComponents}async function A0(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(dt(Ar,"Using user provided OnlineComponentProvider"),await _E(s,s._uninitializedComponentsProvider._online)):(dt(Ar,"Using default OnlineComponentProvider"),await _E(s,new Mm))),s._onlineComponents}function jR(s){return A0(s).then((t=>t.syncEngine))}async function _h(s){const t=await A0(s),i=t.eventManager;return i.onListen=ER.bind(null,t.syncEngine),i.onUnlisten=SR.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=TR.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=AR.bind(null,t.syncEngine),i}function LR(s,t,i={}){const r=new Es;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,y,_){const b=new Ep({next:x=>{b.Nu(),f.enqueueAndForget((()=>pp(u,w)));const U=x.docs.has(m);!U&&x.fromCache?_.reject(new ct(et.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&x.fromCache&&y&&y.source==="server"?_.reject(new ct(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),w=new yp(Dh(m.path),b,{includeMetadataChanges:!0,qa:!0});return mp(u,w)})(await _h(s),s.asyncQueue,t,i,r))),r.promise}function PR(s,t,i={}){const r=new Es;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,y,_){const b=new Ep({next:x=>{b.Nu(),f.enqueueAndForget((()=>pp(u,w))),x.fromCache&&y.source==="server"?_.reject(new ct(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),w=new yp(m,b,{includeMetadataChanges:!0,qa:!0});return mp(u,w)})(await _h(s),s.asyncQueue,t,i,r))),r.promise}function w0(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}const vE=new Map;const x0="firestore.googleapis.com",EE=!0;class TE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ct(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=x0,this.ssl=EE}else this.host=t.host,this.ssl=t.ssl??EE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=s0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<gx)throw new ct(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}tw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w0(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ct(et.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ct(et.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ct(et.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class qh{constructor(t,i,r,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ct(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ct(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new F1;switch(r.type){case"firstParty":return new Q1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ct(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const r=vE.get(i);r&&(dt("ComponentProvider","Removing Datastore"),vE.delete(i),r.terminate())})(this),Promise.resolve()}}function UR(s,t,i,r={}){s=pn(s,qh);const l=Ao(t),u=s._getSettings(),f={...u,emulatorOptions:s._getEmulatorOptions()},m=`${t}:${i}`;l&&(tT(`https://${m}`),eT("Firestore",!0)),u.host!==x0&&u.host!==m&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:m,ssl:l,emulatorOptions:r};if(!_r(y,f)&&(s._setSettings(y),r.mockUserToken)){let _,b;if(typeof r.mockUserToken=="string")_=r.mockUserToken,b=un.MOCK_USER;else{_=pA(r.mockUserToken,s._app?.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new ct(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new un(w)}s._authCredentials=new G1(new pT(_,b))}}class Rs{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Rs(this.firestore,t,this._query)}}class be{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new be(this.firestore,t,this._key)}toJSON(){return{type:be._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,r){if(su(i,be._jsonSchema))return new be(t,r||null,new Tt(ue.fromString(i.referencePath)))}}be._jsonSchemaVersion="firestore/documentReference/1.0",be._jsonSchema={type:Ue("string",be._jsonSchemaVersion),referencePath:Ue("string")};class yr extends Rs{constructor(t,i,r){super(t,i,Dh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new be(this.firestore,null,new Tt(t))}withConverter(t){return new yr(this.firestore,t,this._path)}}function _e(s,t,...i){if(s=Ce(s),gT("collection","path",t),s instanceof qh){const r=ue.fromString(t,...i);return Vv(r),new yr(s,null,r)}{if(!(s instanceof be||s instanceof yr))throw new ct(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ue.fromString(t,...i));return Vv(r),new yr(s.firestore,null,r)}}function ce(s,t,...i){if(s=Ce(s),arguments.length===1&&(t=Qm.newId()),gT("doc","path",t),s instanceof qh){const r=ue.fromString(t,...i);return Ov(r),new be(s,null,new Tt(r))}{if(!(s instanceof be||s instanceof yr))throw new ct(et.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ue.fromString(t,...i));return Ov(r),new be(s.firestore,s instanceof yr?s.converter:null,new Tt(r))}}const bE="AsyncQueue";class SE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new l0(this,"async_queue_retry"),this._c=()=>{const r=lm();r&&dt(bE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const i=lm();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=lm();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Es;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Co(t))throw t;dt(bE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const i=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Ss("INTERNAL UNHANDLED ERROR: ",AE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=i,i}enqueueAfterDelay(t,i,r){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=fp.createAndSchedule(this,t,i,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Ct(47125,{Pc:AE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((i,r)=>i.targetTimeMs-r.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function AE(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}function wE(s){return(function(i,r){if(typeof i!="object"||i===null)return!1;const l=i;for(const u of r)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class Wi extends qh{constructor(t,i,r,l){super(t,i,r,l),this.type="firestore",this._queue=new SE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new SE(t),this._firestoreClient=void 0,await t}}}function zR(s,t){const i=typeof s=="object"?s:rT(),r=typeof s=="string"?s:uh,l=Km(i,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=dA("firestore");u&&UR(l,...u)}return l}function uu(s){if(s._terminated)throw new ct(et.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||BR(s),s._firestoreClient}function BR(s){const t=s._freezeSettings(),i=(function(l,u,f,m){return new hw(l,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,w0(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new VR(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class ni{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ni(rn.fromBase64String(t))}catch(i){throw new ct(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new ni(rn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ni._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(su(t,ni._jsonSchema))return ni.fromBase64String(t.bytes)}}ni._jsonSchemaVersion="firestore/bytes/1.0",ni._jsonSchema={type:Ue("string",ni._jsonSchemaVersion),bytes:Ue("string")};class cu{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new ct(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class hu{constructor(t){this._methodName=t}}class Ki{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new ct(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new ct(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Bt(this._lat,t._lat)||Bt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ki._jsonSchemaVersion}}static fromJSON(t){if(su(t,Ki._jsonSchema))return new Ki(t.latitude,t.longitude)}}Ki._jsonSchemaVersion="firestore/geoPoint/1.0",Ki._jsonSchema={type:Ue("string",Ki._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};class Yi{constructor(t){this._values=(t||[]).map((i=>i))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(su(t,Yi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((i=>typeof i=="number")))return new Yi(t.vectorValues);throw new ct(et.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yi._jsonSchemaVersion="firestore/vectorValue/1.0",Yi._jsonSchema={type:Ue("string",Yi._jsonSchemaVersion),vectorValues:Ue("object")};const qR=/^__.*__$/;class HR{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new xr(t,this.data,this.fieldMask,i,this.fieldTransforms):new ru(t,this.data,i,this.fieldTransforms)}}class R0{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return new xr(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function C0(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct(40011,{Ac:s})}}class Hh{constructor(t,i,r,l,u,f){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Hh({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),r=this.Vc({path:i,fc:!1});return r.gc(t),r}yc(t){const i=this.path?.child(t),r=this.Vc({path:i,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return vh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((i=>t.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>t.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(C0(this.Ac)&&qR.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class FR{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||Uh(t)}Cc(t,i,r,l=!1){return new Hh({Ac:t,methodName:i,Dc:r,path:sn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fu(s){const t=s._freezeSettings(),i=Uh(s._databaseId);return new FR(s._databaseId,!!t.ignoreUndefinedProperties,i)}function Tp(s,t,i,r,l,u={}){const f=s.Cc(u.merge||u.mergeFields?2:0,t,i,l);Ap("Data must be an object, but it was:",f,r);const m=N0(r,f);let y,_;if(u.merge)y=new Un(f.fieldMask),_=f.fieldTransforms;else if(u.mergeFields){const b=[];for(const w of u.mergeFields){const x=jm(t,w,i);if(!f.contains(x))throw new ct(et.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);O0(b,x)||b.push(x)}y=new Un(b),_=f.fieldTransforms.filter((w=>y.covers(w.field)))}else y=null,_=f.fieldTransforms;return new HR(new xn(m),y,_)}class Fh extends hu{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Fh}}function GR(s,t,i){return new Hh({Ac:3,Dc:t.settings.Dc,methodName:s._methodName,fc:i},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class bp extends hu{_toFieldTransform(t){return new GT(t.path,new Jl)}isEqual(t){return t instanceof bp}}class Sp extends hu{constructor(t,i){super(t),this.vc=i}_toFieldTransform(t){const i=GR(this,t,!0),r=this.vc.map((u=>No(u,i))),l=new Eo(r);return new GT(t.path,l)}isEqual(t){return t instanceof Sp&&_r(this.vc,t.vc)}}function I0(s,t,i,r){const l=s.Cc(1,t,i);Ap("Data must be an object, but it was:",l,r);const u=[],f=xn.empty();wr(r,((y,_)=>{const b=wp(t,y,i);_=Ce(_);const w=l.yc(b);if(_ instanceof Fh)u.push(b);else{const x=No(_,w);x!=null&&(u.push(b),f.set(b,x))}}));const m=new Un(u);return new R0(f,m,l.fieldTransforms)}function k0(s,t,i,r,l,u){const f=s.Cc(1,t,i),m=[jm(t,r,i)],y=[l];if(u.length%2!=0)throw new ct(et.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)m.push(jm(t,u[x])),y.push(u[x+1]);const _=[],b=xn.empty();for(let x=m.length-1;x>=0;--x)if(!O0(_,m[x])){const U=m[x];let J=y[x];J=Ce(J);const W=f.yc(U);if(J instanceof Fh)_.push(U);else{const X=No(J,W);X!=null&&(_.push(U),b.set(U,X))}}const w=new Un(_);return new R0(b,w,f.fieldTransforms)}function KR(s,t,i,r=!1){return No(i,s.Cc(r?4:3,t))}function No(s,t){if(D0(s=Ce(s)))return Ap("Unsupported field value:",t,s),N0(s,t);if(s instanceof hu)return(function(r,l){if(!C0(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,l){const u=[];let f=0;for(const m of r){let y=No(m,l.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}})(s,t)}return(function(r,l){if((r=Ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Vw(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=me.fromDate(r);return{timestampValue:mh(l.serializer,u)}}if(r instanceof me){const u=new me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mh(l.serializer,u)}}if(r instanceof Ki)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ni)return{bytesValue:WT(l.serializer,r._byteString)};if(r instanceof be){const u=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ip(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Yi)return(function(f,m){return{mapValue:{fields:{[wT]:{stringValue:xT},[ch]:{arrayValue:{values:f.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return tp(m.serializer,_)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Ch(r)}`)})(s,t)}function N0(s,t){const i={};return vT(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wr(s,((r,l)=>{const u=No(l,t.mc(r));u!=null&&(i[r]=u)})),{mapValue:{fields:i}}}function D0(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof me||s instanceof Ki||s instanceof ni||s instanceof be||s instanceof hu||s instanceof Yi)}function Ap(s,t,i){if(!D0(i)||!yT(i)){const r=Ch(i);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function jm(s,t,i){if((t=Ce(t))instanceof cu)return t._internalPath;if(typeof t=="string")return wp(s,t);throw vh("Field path arguments must be of type string or ",s,!1,void 0,i)}const YR=new RegExp("[~\\*/\\[\\]]");function wp(s,t,i){if(t.search(YR)>=0)throw vh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new cu(...t.split("."))._internalPath}catch{throw vh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function vh(s,t,i,r,l){const u=r&&!r.isEmpty(),f=l!==void 0;let m=`Function ${t}() called with invalid data`;i&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${r}`),f&&(y+=` in document ${l}`),y+=")"),new ct(et.INVALID_ARGUMENT,m+s+y)}function O0(s,t){return s.some((i=>i.isEqual(t)))}class V0{constructor(t,i,r,l,u){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new QR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(Gh("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class QR extends V0{data(){return super.data()}}function Gh(s,t){return typeof t=="string"?wp(s,t):t instanceof cu?t._internalPath:t._delegate._internalPath}function M0(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ct(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xp{}class Rp extends xp{}function gi(s,t,...i){let r=[];t instanceof xp&&r.push(t),r=r.concat(i),(function(u){const f=u.filter((y=>y instanceof Cp)).length,m=u.filter((y=>y instanceof Kh)).length;if(f>1||f>0&&m>0)throw new ct(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)s=l._apply(s);return s}class Kh extends Rp{constructor(t,i,r){super(),this._field=t,this._op=i,this._value=r,this.type="where"}static _create(t,i,r){return new Kh(t,i,r)}_apply(t){const i=this._parse(t);return j0(t._query,i),new Rs(t.firestore,t.converter,xm(t._query,i))}_parse(t){const i=fu(t.firestore);return(function(u,f,m,y,_,b,w){let x;if(_.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ct(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){RE(w,b);const J=[];for(const W of w)J.push(xE(y,u,W));x={arrayValue:{values:J}}}else x=xE(y,u,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||RE(w,b),x=KR(m,f,w,b==="in"||b==="not-in");return Pe.create(_,b,x)})(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}}function Pn(s,t,i){const r=t,l=Gh("where",s);return Kh._create(l,r,i)}class Cp extends xp{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new Cp(t,i)}_parse(t){const i=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return i.length===1?i[0]:_i.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return i.getFilters().length===0?t:((function(l,u){let f=l;const m=u.getFlattenedFilters();for(const y of m)j0(f,y),f=xm(f,y)})(t._query,i),new Rs(t.firestore,t.converter,xm(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ip extends Rp{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new Ip(t,i)}_apply(t){const i=(function(l,u,f){if(l.startAt!==null)throw new ct(et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new ct(et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wl(u,f)})(t._query,this._field,this._direction);return new Rs(t.firestore,t.converter,(function(l,u){const f=l.explicitOrderBy.concat([u]);return new Io(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,i))}}function Yh(s,t="asc"){const i=t,r=Gh("orderBy",s);return Ip._create(r,i)}class kp extends Rp{constructor(t,i,r){super(),this.type=t,this._limit=i,this._limitType=r}static _create(t,i,r){return new kp(t,i,r)}_apply(t){return new Rs(t.firestore,t.converter,fh(t._query,this._limit,this._limitType))}}function XR(s){return kp._create("limit",s,"F")}function xE(s,t,i){if(typeof(i=Ce(i))=="string"){if(i==="")throw new ct(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VT(t)&&i.indexOf("/")!==-1)throw new ct(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const r=t.path.child(ue.fromString(i));if(!Tt.isDocumentKey(r))throw new ct(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qv(s,new Tt(r))}if(i instanceof be)return qv(s,i._key);throw new ct(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ch(i)}.`)}function RE(s,t){if(!Array.isArray(s)||s.length===0)throw new ct(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function j0(s,t){const i=(function(l,u){for(const f of l)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(i!==null)throw i===t.op?new ct(et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ct(et.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}class $R{convertValue(t,i="none"){switch(br(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Re(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Tr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw Ct(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return wr(t,((l,u)=>{r[l]=this.convertValue(u,i)})),r}convertVectorValue(t){const i=t.fields?.[ch].arrayValue?.values?.map((r=>Re(r.doubleValue)));return new Yi(i)}convertGeoPoint(t){return new Ki(Re(t.latitude),Re(t.longitude))}convertArray(t,i){return(t.values||[]).map((r=>this.convertValue(r,i)))}convertServerTimestamp(t,i){switch(i){case"previous":const r=Nh(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(Ql(t));default:return null}}convertTimestamp(t){const i=Er(t);return new me(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=ue.fromString(t);Jt(i0(r),9688,{name:t});const l=new Xl(r.get(1),r.get(3)),u=new Tt(r.popFirst(5));return l.isEqual(i)||Ss(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),u}}function Np(s,t,i){let r;return r=s?i&&(i.merge||i.mergeFields)?s.toFirestore(t,i):s.toFirestore(t):t,r}class Ul{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class aa extends V0{constructor(t,i,r,l,u,f){super(t,i,r,l,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(Gh("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(et.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=aa._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}aa._jsonSchemaVersion="firestore/documentSnapshot/1.0",aa._jsonSchema={type:Ue("string",aa._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class th extends aa{data(t={}){return super.data(t)}}class oa{constructor(t,i,r,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new Ul(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const t=[];return this.forEach((i=>t.push(i))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach((r=>{t.call(i,new th(this._firestore,this._userDataWriter,r.key,r,new Ul(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ct(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((m=>{const y=new th(l._firestore,l._userDataWriter,m.doc.key,m.doc,new Ul(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const y=new th(l._firestore,l._userDataWriter,m.doc.key,m.doc,new Ul(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,b=-1;return m.type!==0&&(_=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),b=f.indexOf(m.doc.key)),{type:WR(m.type),doc:y,oldIndex:_,newIndex:b}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(et.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=oa._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Qm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(i.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function WR(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct(61501,{type:s})}}function eh(s){s=pn(s,be);const t=pn(s.firestore,Wi);return LR(uu(t),s._key).then((i=>L0(t,s,i)))}oa._jsonSchemaVersion="firestore/querySnapshot/1.0",oa._jsonSchema={type:Ue("string",oa._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class Dp extends $R{constructor(t){super(),this.firestore=t}convertBytes(t){return new ni(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new be(this.firestore,null,i)}}function sa(s){s=pn(s,Rs);const t=pn(s.firestore,Wi),i=uu(t),r=new Dp(t);return M0(s._query),PR(i,s._query).then((l=>new oa(t,r,s,l)))}function cm(s,t,i){s=pn(s,be);const r=pn(s.firestore,Wi),l=Np(s.converter,t,i);return du(r,[Tp(fu(r),"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,gn.none())])}function qi(s,t,i,...r){s=pn(s,be);const l=pn(s.firestore,Wi),u=fu(l);let f;return f=typeof(t=Ce(t))=="string"||t instanceof cu?k0(u,"updateDoc",s._key,t,i,r):I0(u,"updateDoc",s._key,t),du(l,[f.toMutation(s._key,gn.exists(!0))])}function Lm(s){return du(pn(s.firestore,Wi),[new Lh(s._key,gn.none())])}function So(s,t){const i=pn(s.firestore,Wi),r=ce(s),l=Np(s.converter,t);return du(i,[Tp(fu(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,gn.exists(!1))]).then((()=>r))}function Hi(s,...t){s=Ce(s);let i={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||wE(t[r])||(i=t[r++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(wE(t[r])){const y=t[r];t[r]=y.next?.bind(y),t[r+1]=y.error?.bind(y),t[r+2]=y.complete?.bind(y)}let u,f,m;if(s instanceof be)f=pn(s.firestore,Wi),m=Dh(s._key.path),u={next:y=>{t[r]&&t[r](L0(f,s,y))},error:t[r+1],complete:t[r+2]};else{const y=pn(s,Rs);f=pn(y.firestore,Wi),m=y._query;const _=new Dp(f);u={next:b=>{t[r]&&t[r](new oa(f,_,y,b))},error:t[r+1],complete:t[r+2]},M0(s._query)}return(function(_,b,w,x){const U=new Ep(x),J=new yp(b,U,w);return _.asyncQueue.enqueueAndForget((async()=>mp(await _h(_),J))),()=>{U.Nu(),_.asyncQueue.enqueueAndForget((async()=>pp(await _h(_),J)))}})(uu(f),m,l,u)}function du(s,t){return(function(r,l){const u=new Es;return r.asyncQueue.enqueueAndForget((async()=>wR(await jR(r),l,u))),u.promise})(uu(s),t)}function L0(s,t,i){const r=i.docs.get(t._key),l=new Dp(s);return new aa(s,l,t._key,r,new Ul(i.hasPendingWrites,i.fromCache),t.converter)}class JR{constructor(t,i){this._firestore=t,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=fu(t)}set(t,i,r){this._verifyNotCommitted();const l=hm(t,this._firestore),u=Np(l.converter,i,r),f=Tp(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,r);return this._mutations.push(f.toMutation(l._key,gn.none())),this}update(t,i,r,...l){this._verifyNotCommitted();const u=hm(t,this._firestore);let f;return f=typeof(i=Ce(i))=="string"||i instanceof cu?k0(this._dataReader,"WriteBatch.update",u._key,i,r,l):I0(this._dataReader,"WriteBatch.update",u._key,i),this._mutations.push(f.toMutation(u._key,gn.exists(!0))),this}delete(t){this._verifyNotCommitted();const i=hm(t,this._firestore);return this._mutations=this._mutations.concat(new Lh(i._key,gn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ct(et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hm(s,t){if((s=Ce(s)).firestore!==t)throw new ct(et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function fm(){return new bp("serverTimestamp")}function ZR(...s){return new Sp("arrayUnion",s)}function Pm(s){return uu(s=pn(s,Wi)),new JR(s,(t=>du(s,t)))}(function(t,i=!0){(function(l){xo=l})(wo),po(new la("firestore",((r,{instanceIdentifier:l,options:u})=>{const f=r.getProvider("app").getImmediate(),m=new Wi(new K1(r.getProvider("auth-internal")),new X1(f,r.getProvider("app-check-internal")),(function(_,b){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ct(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(_.options.projectId,b)})(f,l),f);return u={useFetchStreams:i,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),pr(Iv,kv,t),pr(Iv,kv,"esm2020")})();function P0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tC=P0,U0=new nu("auth","Firebase",P0());const Eh=new Fm("@firebase/auth");function eC(s,...t){Eh.logLevel<=zt.WARN&&Eh.warn(`Auth (${wo}): ${s}`,...t)}function nh(s,...t){Eh.logLevel<=zt.ERROR&&Eh.error(`Auth (${wo}): ${s}`,...t)}function vi(s,...t){throw Op(s,...t)}function Qi(s,...t){return Op(s,...t)}function z0(s,t,i){const r={...tC(),[t]:i};return new nu("auth","Firebase",r).create(t,{appName:s.name})}function Ts(s){return z0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Op(s,...t){if(typeof s!="string"){const i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return U0.create(s,...t)}function Rt(s,t,...i){if(!s)throw Op(t,...i)}function _s(s){const t="INTERNAL ASSERTION FAILED: "+s;throw nh(t),new Error(t)}function ws(s,t){s||_s(t)}function Um(){return typeof self<"u"&&self.location?.href||""}function nC(){return CE()==="http:"||CE()==="https:"}function CE(){return typeof self<"u"&&self.location?.protocol||null}function iC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nC()||TA()||"connection"in navigator)?navigator.onLine:!0}function sC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class mu{constructor(t,i){this.shortDelay=t,this.longDelay=i,ws(i>t,"Short delay should be less than long delay!"),this.isMobile=_A()||bA()}get(){return iC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vp(s,t){ws(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}class B0{static initialize(t,i,r){this.fetchImpl=t,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const aC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oC=new mu(3e4,6e4);function Rr(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function Cr(s,t,i,r,l={}){return q0(s,l,async()=>{let u={},f={};r&&(t==="GET"?f=r:u={body:JSON.stringify(r)});const m=iu({key:s.config.apiKey,...f}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const _={method:t,headers:y,...u};return EA()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&Ao(s.emulatorConfig.host)&&(_.credentials="include"),B0.fetch()(await H0(s,s.config.apiHost,i,m),_)})}async function q0(s,t,i){s._canInitEmulator=!1;const r={...rC,...t};try{const l=new uC(s),u=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Qc(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[y,_]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qc(s,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw Qc(s,"email-already-in-use",f);if(y==="USER_DISABLED")throw Qc(s,"user-disabled",f);const b=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw z0(s,b,_);vi(s,b)}}catch(l){if(l instanceof xs)throw l;vi(s,"network-request-failed",{message:String(l)})}}async function pu(s,t,i,r,l={}){const u=await Cr(s,t,i,r,l);return"mfaPendingCredential"in u&&vi(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function H0(s,t,i,r){const l=`${t}${i}?${r}`,u=s,f=u.config.emulator?Vp(s.config,l):`${s.config.apiScheme}://${l}`;return aC.includes(i)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function lC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(Qi(this.auth,"network-request-failed")),oC.get())})}}function Qc(s,t,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const l=Qi(s,t,r);return l.customData._tokenResponse=i,l}function IE(s){return s!==void 0&&s.enterprise!==void 0}class cC{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return lC(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hC(s,t){return Cr(s,"GET","/v2/recaptchaConfig",Rr(s,t))}async function fC(s,t){return Cr(s,"POST","/v1/accounts:delete",t)}async function Th(s,t){return Cr(s,"POST","/v1/accounts:lookup",t)}function Gl(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function dC(s,t=!1){const i=Ce(s),r=await i.getIdToken(t),l=Mp(r);Rt(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u?.sign_in_provider;return{claims:l,token:r,authTime:Gl(dm(l.auth_time)),issuedAtTime:Gl(dm(l.iat)),expirationTime:Gl(dm(l.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function dm(s){return Number(s)*1e3}function Mp(s){const[t,i,r]=s.split(".");if(t===void 0||i===void 0||r===void 0)return nh("JWT malformed, contained fewer than 3 sections"),null;try{const l=$E(i);return l?JSON.parse(l):(nh("Failed to decode base64 JWT payload"),null)}catch(l){return nh("Caught error parsing JWT payload as JSON",l?.toString()),null}}function kE(s){const t=Mp(s);return Rt(t,"internal-error"),Rt(typeof t.exp<"u","internal-error"),Rt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function tu(s,t,i=!1){if(i)return t;try{return await t}catch(r){throw r instanceof xs&&mC(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function mC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class pC{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class zm{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gl(this.lastLoginAt),this.creationTime=Gl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function bh(s){const t=s.auth,i=await s.getIdToken(),r=await tu(s,Th(t,{idToken:i}));Rt(r?.users.length,t,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?F0(l.providerUserInfo):[],f=yC(s.providerData,u),m=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!f?.length,_=m?y:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new zm(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(s,b)}async function gC(s){const t=Ce(s);await bh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function yC(s,t){return[...s.filter(r=>!t.some(l=>l.providerId===r.providerId)),...t]}function F0(s){return s.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}async function _C(s,t){const i=await q0(s,{},async()=>{const r=iu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,f=await H0(s,l,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:m,body:r};return s.emulatorConfig&&Ao(s.emulatorConfig.host)&&(y.credentials="include"),B0.fetch()(f,y)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function vC(s,t){return Cr(s,"POST","/v2/accounts:revokeToken",Rr(s,t))}class ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Rt(t.idToken,"internal-error"),Rt(typeof t.idToken<"u","internal-error"),Rt(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):kE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){Rt(t.length!==0,"internal-error");const i=kE(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Rt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:r,refreshToken:l,expiresIn:u}=await _C(t,i);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(t,i,r){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,i){const{refreshToken:r,accessToken:l,expirationTime:u}=i,f=new ho;return r&&(Rt(typeof r=="string","internal-error",{appName:t}),f.refreshToken=r),l&&(Rt(typeof l=="string","internal-error",{appName:t}),f.accessToken=l),u&&(Rt(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ho,this.toJSON())}_performRefresh(){return _s("not implemented")}}function or(s,t){Rt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class yi{constructor({uid:t,auth:i,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new pC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new zm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await tu(this,this.stsTokenManager.getToken(this.auth,t));return Rt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return dC(this,t)}reload(){return gC(this)}_assign(t){this!==t&&(Rt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new yi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){Rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),i&&await bh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ei(this.auth.app))return Promise.reject(Ts(this.auth));const t=await this.getIdToken();return await tu(this,fC(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const r=i.displayName??void 0,l=i.email??void 0,u=i.phoneNumber??void 0,f=i.photoURL??void 0,m=i.tenantId??void 0,y=i._redirectEventId??void 0,_=i.createdAt??void 0,b=i.lastLoginAt??void 0,{uid:w,emailVerified:x,isAnonymous:U,providerData:J,stsTokenManager:W}=i;Rt(w&&W,t,"internal-error");const X=ho.fromJSON(this.name,W);Rt(typeof w=="string",t,"internal-error"),or(r,t.name),or(l,t.name),Rt(typeof x=="boolean",t,"internal-error"),Rt(typeof U=="boolean",t,"internal-error"),or(u,t.name),or(f,t.name),or(m,t.name),or(y,t.name),or(_,t.name),or(b,t.name);const Z=new yi({uid:w,auth:t,email:l,emailVerified:x,displayName:r,isAnonymous:U,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:X,createdAt:_,lastLoginAt:b});return J&&Array.isArray(J)&&(Z.providerData=J.map(ut=>({...ut}))),y&&(Z._redirectEventId=y),Z}static async _fromIdTokenResponse(t,i,r=!1){const l=new ho;l.updateFromServerResponse(i);const u=new yi({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:r});return await bh(u),u}static async _fromGetAccountInfoResponse(t,i,r){const l=i.users[0];Rt(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?F0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!u?.length,m=new ho;m.updateFromIdToken(r);const y=new yi({uid:l.localId,auth:t,stsTokenManager:m,isAnonymous:f}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new zm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(y,_),y}}const NE=new Map;function vs(s){ws(s instanceof Function,"Expected a class definition");let t=NE.get(s);return t?(ws(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,NE.set(s,t),t)}class G0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}G0.type="NONE";const DE=G0;function ih(s,t,i){return`firebase:${s}:${t}:${i}`}class fo{constructor(t,i,r){this.persistence=t,this.auth=i,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=ih(this.userKey,l.apiKey,u),this.fullPersistenceKey=ih("persistence",l.apiKey,u),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await Th(this.auth,{idToken:t}).catch(()=>{});return i?yi._fromGetAccountInfoResponse(this.auth,i,t):null}return yi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,r="authUser"){if(!i.length)return new fo(vs(DE),t,r);const l=(await Promise.all(i.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=l[0]||vs(DE);const f=ih(r,t.config.apiKey,t.name);let m=null;for(const _ of i)try{const b=await _._get(f);if(b){let w;if(typeof b=="string"){const x=await Th(t,{idToken:b}).catch(()=>{});if(!x)break;w=await yi._fromGetAccountInfoResponse(t,x,b)}else w=yi._fromJSON(t,b);_!==u&&(m=w),u=_;break}}catch{}const y=l.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new fo(u,t,r):(u=y[0],m&&await u._set(f,m.toJSON()),await Promise.all(i.map(async _=>{if(_!==u)try{await _._remove(f)}catch{}})),new fo(u,t,r))}}function OE(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(X0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(K0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(W0(t))return"Blackberry";if(J0(t))return"Webos";if(Y0(t))return"Safari";if((t.includes("chrome/")||Q0(t))&&!t.includes("edge/"))return"Chrome";if($0(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function K0(s=hn()){return/firefox\//i.test(s)}function Y0(s=hn()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Q0(s=hn()){return/crios\//i.test(s)}function X0(s=hn()){return/iemobile/i.test(s)}function $0(s=hn()){return/android/i.test(s)}function W0(s=hn()){return/blackberry/i.test(s)}function J0(s=hn()){return/webos/i.test(s)}function jp(s=hn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function EC(s=hn()){return jp(s)&&!!window.navigator?.standalone}function TC(){return SA()&&document.documentMode===10}function Z0(s=hn()){return jp(s)||$0(s)||J0(s)||W0(s)||/windows phone/i.test(s)||X0(s)}function tb(s,t=[]){let i;switch(s){case"Browser":i=OE(hn());break;case"Worker":i=`${OE(hn())}-${s}`;break;default:i=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${wo}/${r}`}class bC{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const r=u=>new Promise((f,m)=>{try{const y=t(u);f(y)}catch(y){m(y)}});r.onAbort=i,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const r of this.queue)await r(t),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function SC(s,t={}){return Cr(s,"GET","/v2/passwordPolicy",Rr(s,t))}const AC=6;class wC{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??AC,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=t.length>=r),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let l=0;l<t.length;l++)r=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,i,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class xC{constructor(t,i,r,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new bC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=U0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=vs(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fo.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await Th(this,{idToken:t}),r=await yi._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(ei(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===f)&&m?.user&&(r=m.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await bh(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=sC()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ei(this.app))return Promise.reject(Ts(this));const i=t?Ce(t):null;return i&&Rt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&Rt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ei(this.app)?Promise.reject(Ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ei(this.app)?Promise.reject(Ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await SC(this),i=new wC(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new nu("auth","Firebase",t())}onAuthStateChanged(t,i,r){return this.registerStateListener(this.authStateSubscription,t,i,r)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,r){return this.registerStateListener(this.idTokenSubscription,t,i,r)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await vC(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const r=await this.getOrInitRedirectPersistenceManager(i);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&vs(t)||this._popupRedirectResolver;Rt(i,this,"argument-error"),this.redirectPersistenceManager=await fo.create(this,[vs(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,r,l){if(this._deleted)return()=>{};const u=typeof i=="function"?i:i.next.bind(i);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rt(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof i=="function"){const y=t.addObserver(i,r,l);return()=>{f=!0,y()}}else{const y=t.addObserver(i);return()=>{f=!0,y()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=tb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&eC(`Error while retrieving App Check token: ${t.error}`),t?.token}}function pa(s){return Ce(s)}class VE{constructor(t){this.auth=t,this.observer=null,this.addObserver=NA(i=>this.observer=i)}get next(){return Rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RC(s){Qh=s}function eb(s){return Qh.loadJS(s)}function CC(){return Qh.recaptchaEnterpriseScript}function IC(){return Qh.gapiScript}function kC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class NC{constructor(){this.enterprise=new DC}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class DC{ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const OC="recaptcha-enterprise",nb="NO_RECAPTCHA";class VC{constructor(t){this.type=OC,this.auth=pa(t)}async verify(t="verify",i=!1){async function r(u){if(!i){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{hC(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new cC(y);return u.tenantId==null?u._agentRecaptchaConfig=_:u._tenantRecaptchaConfigs[u.tenantId]=_,f(_.siteKey)}}).catch(y=>{m(y)})})}function l(u,f,m){const y=window.grecaptcha;IE(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:t}).then(_=>{f(_)}).catch(()=>{f(nb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NC().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(m=>{if(!i&&IE(window.grecaptcha))l(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=CC();y.length!==0&&(y+=m),eb(y).then(()=>{l(m,u,f)}).catch(_=>{f(_)})}}).catch(m=>{f(m)})})}}async function ME(s,t,i,r=!1,l=!1){const u=new VC(s);let f;if(l)f=nb;else try{f=await u.verify(i)}catch{f=await u.verify(i,!0)}const m={...t};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const y=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const y=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Bm(s,t,i,r,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await ME(s,t,i,i==="getOobCode");return r(s,u)}else return r(s,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await ME(s,t,i,i==="getOobCode");return r(s,f)}else return Promise.reject(u)})}function MC(s,t){const i=Km(s,"auth");if(i.isInitialized()){const l=i.getImmediate(),u=i.getOptions();if(_r(u,t??{}))return l;vi(l,"already-initialized")}return i.initialize({options:t})}function jC(s,t){const i=t?.persistence||[],r=(Array.isArray(i)?i:[i]).map(vs);t?.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t?.popupRedirectResolver)}function LC(s,t,i){const r=pa(s);Rt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const l=!1,u=ib(t),{host:f,port:m}=PC(t),y=m===null?"":`:${m}`,_={url:`${u}//${f}${y}/`},b=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){Rt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Rt(_r(_,r.config.emulator)&&_r(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,Ao(f)?(tT(`${u}//${f}${y}`),eT("Auth",!0)):UC()}function ib(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function PC(s){const t=ib(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:jE(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:jE(f)}}}function jE(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function UC(){function s(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Lp{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return _s("not implemented")}_getIdTokenResponse(t){return _s("not implemented")}_linkToIdToken(t,i){return _s("not implemented")}_getReauthenticationResolver(t){return _s("not implemented")}}async function zC(s,t){return Cr(s,"POST","/v1/accounts:signUp",t)}async function BC(s,t){return pu(s,"POST","/v1/accounts:signInWithPassword",Rr(s,t))}async function qC(s,t){return pu(s,"POST","/v1/accounts:signInWithEmailLink",Rr(s,t))}async function HC(s,t){return pu(s,"POST","/v1/accounts:signInWithEmailLink",Rr(s,t))}class eu extends Lp{constructor(t,i,r,l=null){super("password",r),this._email=t,this._password=i,this._tenantId=l}static _fromEmailAndPassword(t,i){return new eu(t,i,"password")}static _fromEmailAndCode(t,i,r=null){return new eu(t,i,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(t,i,"signInWithPassword",BC);case"emailLink":return qC(t,{email:this._email,oobCode:this._password});default:vi(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const r={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(t,r,"signUpPassword",zC);case"emailLink":return HC(t,{idToken:i,email:this._email,oobCode:this._password});default:vi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function mo(s,t){return pu(s,"POST","/v1/accounts:signInWithIdp",Rr(s,t))}const FC="http://localhost";class ha extends Lp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new ha(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):vi("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:l,...u}=i;if(!r||!l)return null;const f=new ha(r,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const i=this.buildRequest();return mo(t,i)}_linkToIdToken(t,i){const r=this.buildRequest();return r.idToken=i,mo(t,r)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,mo(t,i)}buildRequest(){const t={requestUri:FC,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=iu(i)}return t}}function GC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KC(s){const t=Vl(Ml(s)).link,i=t?Vl(Ml(t)).deep_link_id:null,r=Vl(Ml(s)).deep_link_id;return(r?Vl(Ml(r)).link:null)||r||i||t||s}class Pp{constructor(t){const i=Vl(Ml(t)),r=i.apiKey??null,l=i.oobCode??null,u=GC(i.mode??null);Rt(r&&l&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=l,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(t){const i=KC(t);try{return new Pp(i)}catch{return null}}}class Do{constructor(){this.providerId=Do.PROVIDER_ID}static credential(t,i){return eu._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=Pp.parseLink(i);return Rt(r,"argument-error"),eu._fromEmailAndCode(t,r.code,r.tenantId)}}Do.PROVIDER_ID="password";Do.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Do.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class sb{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class gu extends sb{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class lr extends gu{constructor(){super("facebook.com")}static credential(t){return ha._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return lr.credentialFromTaggedObject(t)}static credentialFromError(t){return lr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return lr.credential(t.oauthAccessToken)}catch{return null}}}lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";lr.PROVIDER_ID="facebook.com";class ur extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return ha._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return ur.credentialFromTaggedObject(t)}static credentialFromError(t){return ur.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return ur.credential(i,r)}catch{return null}}}ur.GOOGLE_SIGN_IN_METHOD="google.com";ur.PROVIDER_ID="google.com";class cr extends gu{constructor(){super("github.com")}static credential(t){return ha._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return cr.credentialFromTaggedObject(t)}static credentialFromError(t){return cr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return cr.credential(t.oauthAccessToken)}catch{return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com";cr.PROVIDER_ID="github.com";class hr extends gu{constructor(){super("twitter.com")}static credential(t,i){return ha._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return hr.credentialFromTaggedObject(t)}static credentialFromError(t){return hr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=t;if(!i||!r)return null;try{return hr.credential(i,r)}catch{return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com";hr.PROVIDER_ID="twitter.com";async function YC(s,t){return pu(s,"POST","/v1/accounts:signUp",Rr(s,t))}class fa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,r,l=!1){const u=await yi._fromIdTokenResponse(t,r,l),f=LE(r);return new fa({user:u,providerId:f,_tokenResponse:r,operationType:i})}static async _forOperation(t,i,r){await t._updateTokensIfNecessary(r,!0);const l=LE(r);return new fa({user:t,providerId:l,_tokenResponse:r,operationType:i})}}function LE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Sh extends xs{constructor(t,i,r,l){super(i.code,i.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Sh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,i,r,l){return new Sh(t,i,r,l)}}function rb(s,t,i,r){return(t==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Sh._fromErrorAndOperation(s,u,t,r):u})}async function QC(s,t,i=!1){const r=await tu(s,t._linkToIdToken(s.auth,await s.getIdToken()),i);return fa._forOperation(s,"link",r)}async function XC(s,t,i=!1){const{auth:r}=s;if(ei(r.app))return Promise.reject(Ts(r));const l="reauthenticate";try{const u=await tu(s,rb(r,l,t,s),i);Rt(u.idToken,r,"internal-error");const f=Mp(u.idToken);Rt(f,r,"internal-error");const{sub:m}=f;return Rt(s.uid===m,r,"user-mismatch"),fa._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&vi(r,"user-mismatch"),u}}async function ab(s,t,i=!1){if(ei(s.app))return Promise.reject(Ts(s));const r="signIn",l=await rb(s,r,t),u=await fa._fromIdTokenResponse(s,r,l);return i||await s._updateCurrentUser(u.user),u}async function $C(s,t){return ab(pa(s),t)}async function ob(s){const t=pa(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function WC(s,t,i){if(ei(s.app))return Promise.reject(Ts(s));const r=pa(s),f=await Bm(r,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YC).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&ob(s),y}),m=await fa._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(m.user),m}function JC(s,t,i){return ei(s.app)?Promise.reject(Ts(s)):$C(Ce(s),Do.credential(t,i)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ob(s),r})}function ZC(s,t,i,r){return Ce(s).onIdTokenChanged(t,i,r)}function tI(s,t,i){return Ce(s).beforeAuthStateChanged(t,i)}function eI(s,t,i,r){return Ce(s).onAuthStateChanged(t,i,r)}function nI(s){return Ce(s).signOut()}const Ah="__sak";class lb{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(Ah,"1"),this.storage.removeItem(Ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const iI=1e3,sI=10;class ub extends lb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),l=this.localCache[i];r!==l&&t(i,l,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((f,m,y)=>{this.notifyListeners(f,y)});return}const r=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!i&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);TC()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,sI):l()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},iI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}ub.type="LOCAL";const rI=ub;class cb extends lb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}cb.type="SESSION";const hb=cb;function aI(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}class Xh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const r=new Xh(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:r,eventType:l,data:u}=i.data,f=this.handlersMap[l];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const m=Array.from(f).map(async _=>_(i.origin,u)),y=await aI(m);i.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xh.receivers=[];function Up(s="",t=10){let i="";for(let r=0;r<t;r++)i+=Math.floor(Math.random()*10);return s+i}class oI{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((m,y)=>{const _=Up("",20);l.port1.start();const b=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(w){const x=w;if(x.data.eventId===_)switch(x.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(x.data.response);break;default:clearTimeout(b),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:_,data:i},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Xi(){return window}function lI(s){Xi().location.href=s}function fb(){return typeof Xi().WorkerGlobalScope<"u"&&typeof Xi().importScripts=="function"}async function uI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cI(){return navigator?.serviceWorker?.controller||null}function hI(){return fb()?self:null}const db="firebaseLocalStorageDb",fI=1,wh="firebaseLocalStorage",mb="fbase_key";class yu{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function $h(s,t){return s.transaction([wh],t?"readwrite":"readonly").objectStore(wh)}function dI(){const s=indexedDB.deleteDatabase(db);return new yu(s).toPromise()}function qm(){const s=indexedDB.open(db,fI);return new Promise((t,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(wh,{keyPath:mb})}catch(l){i(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(wh)?t(r):(r.close(),await dI(),t(await qm()))})})}async function PE(s,t,i){const r=$h(s,!0).put({[mb]:t,value:i});return new yu(r).toPromise()}async function mI(s,t){const i=$h(s,!1).get(t),r=await new yu(i).toPromise();return r===void 0?null:r.value}function UE(s,t){const i=$h(s,!0).delete(t);return new yu(i).toPromise()}const pI=800,gI=3;class pb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qm(),this.db)}async _withRetries(t){let i=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(i++>gI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xh._getInstance(hI()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await uI(),!this.activeServiceWorker)return;this.sender=new oI(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||cI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await qm();return await PE(t,Ah,"1"),await UE(t,Ah),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>PE(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(r=>mI(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>UE(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const u=$h(l,!1).getAll();return new yu(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(t.length!==0)for(const{fbase_key:l,value:u}of t)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pb.type="LOCAL";const yI=pb;new mu(3e4,6e4);function _I(s,t){return t?vs(t):(Rt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class zp extends Lp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return mo(t,this._buildIdpRequest())}_linkToIdToken(t,i){return mo(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return mo(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function vI(s){return ab(s.auth,new zp(s),s.bypassAuthState)}function EI(s){const{auth:t,user:i}=s;return Rt(i,t,"internal-error"),XC(i,new zp(s),s.bypassAuthState)}async function TI(s){const{auth:t,user:i}=s;return Rt(i,t,"internal-error"),QC(i,new zp(s),s.bypassAuthState)}class gb{constructor(t,i,r,l,u=!1){this.auth=t,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:r,postBody:l,tenantId:u,error:f,type:m}=t;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:i,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return vI;case"linkViaPopup":case"linkViaRedirect":return TI;case"reauthViaPopup":case"reauthViaRedirect":return EI;default:vi(this.auth,"internal-error")}}resolve(t){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bI=new mu(2e3,1e4);class uo extends gb{constructor(t,i,r,l,u){super(t,i,l,u),this.provider=r,this.authWindow=null,this.pollId=null,uo.currentPopupAction&&uo.currentPopupAction.cancel(),uo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Rt(t,this.auth,"internal-error"),t}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const t=Up();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,bI.get())};t()}}uo.currentPopupAction=null;const SI="pendingRedirect",sh=new Map;class AI extends gb{constructor(t,i,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let t=sh.get(this.auth._key());if(!t){try{const r=await wI(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(i){t=()=>Promise.reject(i)}sh.set(this.auth._key(),t)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wI(s,t){const i=CI(t),r=RI(s);if(!await r._isAvailable())return!1;const l=await r._get(i)==="true";return await r._remove(i),l}function xI(s,t){sh.set(s._key(),t)}function RI(s){return vs(s._redirectPersistence)}function CI(s){return ih(SI,s.config.apiKey,s.name)}async function II(s,t,i=!1){if(ei(s.app))return Promise.reject(Ts(s));const r=pa(s),l=_I(r,t),f=await new AI(r,l,i).execute();return f&&!i&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,t)),f}const kI=600*1e3;class NI{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(i=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!DI(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!yb(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";i.onError(Qi(this.auth,r))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const r=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=kI&&this.cachedEventUids.clear(),this.cachedEventUids.has(zE(t))}saveEventToCache(t){this.cachedEventUids.add(zE(t)),this.lastProcessedEventTime=Date.now()}}function zE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function yb({type:s,error:t}){return s==="unknown"&&t?.code==="auth/no-auth-event"}function DI(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yb(s);default:return!1}}async function OI(s,t={}){return Cr(s,"GET","/v1/projects",t)}const VI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MI=/^https?/;async function jI(s){if(s.config.emulator)return;const{authorizedDomains:t}=await OI(s);for(const i of t)try{if(LI(i))return}catch{}vi(s,"unauthorized-domain")}function LI(s){const t=Um(),{protocol:i,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&f.hostname===r}if(!MI.test(i))return!1;if(VI.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}const PI=new mu(3e4,6e4);function BE(){const s=Xi().___jsl;if(s?.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function UI(s){return new Promise((t,i)=>{function r(){BE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{BE(),i(Qi(s,"network-request-failed"))},timeout:PI.get()})}if(Xi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Xi().gapi?.load)r();else{const l=kC("iframefcb");return Xi()[l]=()=>{gapi.load?r():i(Qi(s,"network-request-failed"))},eb(`${IC()}?onload=${l}`).catch(u=>i(u))}}).catch(t=>{throw rh=null,t})}let rh=null;function zI(s){return rh=rh||UI(s),rh}const BI=new mu(5e3,15e3),qI="__/auth/iframe",HI="emulator/auth/iframe",FI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KI(s){const t=s.config;Rt(t.authDomain,s,"auth-domain-config-required");const i=t.emulator?Vp(t,HI):`https://${s.config.authDomain}/${qI}`,r={apiKey:t.apiKey,appName:s.name,v:wo},l=GI.get(s.config.apiHost);l&&(r.eid=l);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${i}?${iu(r).slice(1)}`}async function YI(s){const t=await zI(s),i=Xi().gapi;return Rt(i,s,"internal-error"),t.open({where:document.body,url:KI(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FI,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const f=Qi(s,"network-request-failed"),m=Xi().setTimeout(()=>{u(f)},BI.get());function y(){Xi().clearTimeout(m),l(r)}r.ping(y).then(y,()=>{u(f)})}))}const QI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XI=500,$I=600,WI="_blank",JI="http://localhost";class qE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZI(s,t,i,r=XI,l=$I){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const y={...QI,width:r.toString(),height:l.toString(),top:u,left:f},_=hn().toLowerCase();i&&(m=Q0(_)?WI:i),K0(_)&&(t=t||JI,y.scrollbars="yes");const b=Object.entries(y).reduce((x,[U,J])=>`${x}${U}=${J},`,"");if(EC(_)&&m!=="_self")return t2(t||"",m),new qE(null);const w=window.open(t||"",m,b);Rt(w,s,"popup-blocked");try{w.focus()}catch{}return new qE(w)}function t2(s,t){const i=document.createElement("a");i.href=s,i.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}const e2="__/auth/handler",n2="emulator/auth/handler",i2=encodeURIComponent("fac");async function HE(s,t,i,r,l,u){Rt(s.config.authDomain,s,"auth-domain-config-required"),Rt(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:wo,eventId:l};if(t instanceof sb){t.setDefaultLanguage(s.languageCode),f.providerId=t.providerId||"",kA(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[b,w]of Object.entries({}))f[b]=w}if(t instanceof gu){const b=t.getScopes().filter(w=>w!=="");b.length>0&&(f.scopes=b.join(","))}s.tenantId&&(f.tid=s.tenantId);const m=f;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const y=await s._getAppCheckToken(),_=y?`#${i2}=${encodeURIComponent(y)}`:"";return`${s2(s)}?${iu(m).slice(1)}${_}`}function s2({config:s}){return s.emulator?Vp(s,n2):`https://${s.authDomain}/${e2}`}const mm="webStorageSupport";class r2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hb,this._completeRedirectFn=II,this._overrideRedirectResult=xI}async _openPopup(t,i,r,l){ws(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await HE(t,i,r,Um(),l);return ZI(t,u,Up())}async _openRedirect(t,i,r,l){await this._originValidation(t);const u=await HE(t,i,r,Um(),l);return lI(u),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:u}=this.eventManagers[i];return l?Promise.resolve(l):(ws(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(t){const i=await YI(t),r=new NI(t);return i.register("authEvent",l=>(Rt(l?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=i,r}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(mm,{type:mm},l=>{const u=l?.[0]?.[mm];u!==void 0&&i(!!u),vi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=jI(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return Z0()||Y0()||jp()}}const a2=r2;var FE="@firebase/auth",GE="1.12.0";class o2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function l2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function u2(s){po(new la("auth",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=r.options;Rt(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tb(s)},_=new xC(r,l,u,y);return jC(_,i),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,r)=>{t.getProvider("auth-internal").initialize()})),po(new la("auth-internal",t=>{const i=pa(t.getProvider("auth").getImmediate());return(r=>new o2(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(FE,GE,l2(s)),pr(FE,GE,"esm2020")}const c2=300,h2=ZE("authIdTokenMaxAge")||c2;let KE=null;const f2=s=>async t=>{const i=t&&await t.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>h2)return;const l=i?.token;KE!==l&&(KE=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function d2(s=rT()){const t=Km(s,"auth");if(t.isInitialized())return t.getImmediate();const i=MC(s,{popupRedirectResolver:a2,persistence:[yI,rI,hb]}),r=ZE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=f2(u.toString());tI(i,f,()=>f(i.currentUser)),ZC(i,m=>f(m))}}const l=WE("auth");return l&&LC(i,`http://${l}`),i}function m2(){return document.getElementsByTagName("head")?.[0]??document}RC({loadJS(s){return new Promise((t,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=l=>{const u=Qi("internal-error");u.customData=l,i(u)},r.type="text/javascript",r.charset="UTF-8",m2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});u2("Browser");const p2={apiKey:"AIzaSyDd7oNAtznb5DT6R6yAP7Y1yMeVoY4fKhU",authDomain:"notar-app.firebaseapp.com",projectId:"notar-app",storageBucket:"notar-app.firebasestorage.app",messagingSenderId:"620852234294",appId:"1:620852234294:web:e32df64dccc8a2b8ed3097"},_b=sT(p2),xt=zR(_b),xh=d2(_b),g2=({onBack:s,showNotification:t})=>{const[i,r]=ht.useState(new Date().toISOString().slice(0,7)),[l,u]=ht.useState([]),[f,m]=ht.useState(!1),[y,_]=ht.useState([]),[b,w]=ht.useState({}),[x,U]=ht.useState(!1),[J,W]=ht.useState([]),X=(R,P)=>{const F=new Date(R);return F.setDate(F.getDate()+parseInt(P)),F.toISOString().slice(0,10)},[Z,ut]=ht.useState({customer_id:"",customer_name:"",address:"",type:"b2c",payment_term:14,date:new Date().toISOString().slice(0,10),due_date:X(new Date().toISOString().slice(0,10),14),rows:[{date:new Date().toISOString().slice(0,10),text:"",price_work:"",price_material:""}]});ht.useEffect(()=>{(async()=>{const F=await eh(ce(xt,"settings","company_profile"));F.exists()&&(_(F.data().tasks||[]),w(F.data()))})(),(async()=>{const F=gi(_e(xt,"customers"),Yh("name")),rt=await sa(F);W(rt.docs.map(pt=>({id:pt.id,...pt.data()})))})()},[]);const _t=R=>{const P=R.target.value,F=J.find(rt=>rt.id===P);ut(F?rt=>({...rt,customer_id:F.id,customer_name:F.name,address:`${F.street||""}, ${F.zip||""} ${F.city||""}`,type:F.type||"b2c"}):rt=>({...rt,customer_id:""}))},Vt=R=>{ut(P=>({...P,date:R,due_date:X(R,P.payment_term)}))},at=R=>{ut(P=>({...P,payment_term:R,due_date:X(P.date,R)}))},bt=()=>{ut({...Z,rows:[...Z.rows,{date:Z.date,text:"",price_work:"",price_material:""}]})},k=(R,P,F)=>{const rt=[...Z.rows];rt[R][P]=F,ut({...Z,rows:rt})},S=R=>{const P=Z.rows.filter((F,rt)=>rt!==R);ut({...Z,rows:P})},C=R=>{const P=parseFloat(R.price_work)||0,F=parseFloat(R.price_material)||0;return P+F},V=async()=>{if(!Z.customer_name||Z.rows.length===0)return t("Tyt asiakas ja vhintn yksi rivi.","error");m(!0);try{const R=ce(xt,"settings","company_profile"),P=await eh(R);let F=1e3;P.exists()&&P.data().invoice_start_number&&(F=parseInt(P.data().invoice_start_number));let rt=Z.customer_id;if(!rt){const ft=J.find(mt=>mt.name.toLowerCase()===Z.customer_name.toLowerCase());if(ft)rt=ft.id;else{const mt=Z.address.split(","),St=mt[0]?.trim()||"",ne=mt[1]?.trim()||"",Gt=ne.split(" ")[0]||"",He=ne.split(" ").slice(1).join(" ")||"";rt=(await So(_e(xt,"customers"),{name:Z.customer_name,type:Z.type,street:St,zip:Gt,city:He,contracts:{},group_names:[],created_at:fm()})).id,t("Uusi asiakas tallennettu rekisteriin!","info")}}const O=1+(b.alv_pros?parseFloat(b.alv_pros):25.5)/100;let G=0;const st=Z.rows.map(ft=>{const mt=parseFloat(ft.price_work)||0,St=parseFloat(ft.price_material)||0,Gt=(mt+St)*O;G+=Gt;let He=[];return mt>0&&He.push(`Ty: ${mt.toFixed(2)}`),St>0&&He.push(`Tarvike: ${St.toFixed(2)}`),{type:"row",text:`${new Date(ft.date).getDate()+"."+(new Date(ft.date).getMonth()+1)+"."} ${ft.text}`,total:Gt,details:He.join(", ")+" (alv0)",raw_work_net:mt,raw_material_net:St,raw_date:ft.date}}),ot=F.toString();await So(_e(xt,"invoices"),{invoice_number:ot,title:Z.customer_name,customer_id:rt,customer_name:Z.customer_name,customer_type:Z.type,billing_address:Z.address,month:i,date:Z.date,due_date:Z.due_date,rows:st,total_sum:G,status:"open",created_at:fm(),is_quick_invoice:!0}),await qi(R,{invoice_start_number:(F+1).toString()}),t("Pikalasku luotu ja arkistoitu! ","success"),U(!1),ut({customer_id:"",customer_name:"",address:"",type:"b2c",payment_term:14,date:new Date().toISOString().slice(0,10),due_date:X(new Date().toISOString().slice(0,10),14),rows:[{date:new Date().toISOString().slice(0,10),text:"",price_work:"",price_material:""}]})}catch(R){console.error(R),t("Virhe: "+R.message,"error")}finally{m(!1)}},N=R=>R.task_type==="fixed_monthly"||R.origin==="contract_generated"?"Sopimukset":["extra","material"].includes(R.task_type)?"Erillistyt":"Kiinteisthuolto",j=async()=>{if(window.confirm(`Haluatko varmasti poistaa merkinnt, ett ${i} kk-maksut on laskutettu?`)){m(!0);try{const[R,P]=i.split("-"),F=`${i}-01`,rt=new Date(R,P,0).getDate(),pt=`${i}-${rt}`,O=gi(_e(xt,"work_entries"),Pn("origin","==","fixed_fee"),Pn("date",">=",F),Pn("date","<=",pt)),G=await sa(O);if(G.empty){t("Ei nollattavaa.","error"),m(!1);return}const st=Pm(xt);G.docs.forEach(ot=>st.delete(ot.ref)),await st.commit(),t(`Nollattu ${G.size} kk-maksua.`,"success"),u([])}catch(R){console.error(R),t("Virhe: "+R.message,"error")}finally{m(!1)}}},I=async()=>{m(!0),u([]);try{const[R,P]=i.split("-"),F=`${i}-01`,rt=new Date(R,P,0).getDate(),pt=`${i}-${rt}`,O=`${P}/${R}`,G=gi(_e(xt,"work_entries"),Pn("invoiced","==",!1),Pn("date",">=",F),Pn("date","<=",pt)),ot=(await sa(G)).docs.map(vt=>({id:vt.id,...vt.data(),origin:"work_entry"})),ft=gi(_e(xt,"work_entries"),Pn("origin","==","fixed_fee"),Pn("date",">=",F),Pn("date","<=",pt)),St=(await sa(ft)).docs.map(vt=>vt.data()),ne=(vt,At,he)=>St.some(ze=>ze.customer_id===vt&&ze.task_id===he&&(At?ze.property_id===At:!0)),Gt=await sa(_e(xt,"customers")),He=await sa(_e(xt,"properties")),Rn={};Gt.forEach(vt=>{Rn[vt.id]={id:vt.id,...vt.data()}});const ii={};He.forEach(vt=>{const At=vt.data();ii[vt.id]={address:At.address,cost_center:At.cost_center,group:At.group,contracts:At.contracts,customer_id:At.customer_id,id:vt.id}});const Ji=y.filter(vt=>vt.type==="fixed_monthly"),yn=[];He.docs.forEach(vt=>{const At={id:vt.id,...vt.data()};Ji.forEach(he=>{const ze=At.contracts?.[he.id];if(ze?.active&&!ne(At.customer_id,At.id,he.id)){const ie=Rn[At.customer_id];ie&&yn.push({id:`gen_${At.id}_${he.id}`,customer_id:ie.id,customer_name:ie.name,property_id:At.id,property_address:At.address,task_id:he.id,task_name:he.label,task_type:"fixed_monthly",price_work:ze.price,date:pt,description:`${he.label} (${O})`,origin:"contract_generated",group:At.group||ie.group_names?.[0]||"Sopimukset",cost_center:At.cost_center})}})}),Object.values(Rn).forEach(vt=>{vt.type==="b2c"&&Ji.forEach(At=>{const he=vt.contracts?.[At.id];he?.active&&!ne(vt.id,null,At.id)&&yn.push({id:`gen_${vt.id}_${At.id}`,customer_id:vt.id,customer_name:vt.name,task_id:At.id,task_name:At.label,task_type:"fixed_monthly",price_work:he.price,date:pt,description:`${At.label} (${O})`,origin:"contract_generated",group:"Yksityiset"})})});const Cs=[...ot,...yn];if(Cs.length===0){t("Ei laskutettavaa.","error"),m(!1);return}const zn={};Cs.forEach(vt=>{const At=Rn[vt.customer_id];if(!At)return;let he=vt.customer_id,ze=At.name;const ie=N(vt);if(At.type==="isannointi"){let an=vt.group||ii[vt.property_id]?.group||"Muu";he=`${vt.customer_id}_${an}_${ie}`,ze=`${At.name} - ${an} - ${ie}`}zn[he]||(zn[he]={key:he,customer:At,title:ze,category:ie,entries:[]}),zn[he].entries.push(vt)});const Is=1+(b.alv_pros?parseFloat(b.alv_pros):25.5)/100,ye=Object.values(zn).map(vt=>{const{customer:At,entries:he}=vt,ze=[];let ie=0;he.sort((Xe,Cn)=>(Xe.property_address||"ZZZ").localeCompare(Cn.property_address||"ZZZ")||new Date(Xe.date)-new Date(Cn.date));const an={};return he.forEach(Xe=>{let Cn=Xe.cost_center||ii[Xe.property_id]?.cost_center,Fe=At.type==="b2c"?Xe.property_address||"Yksityinen":Cn?`Viite: KP ${Cn} / ${Xe.property_address}`:`Viite: - / ${Xe.property_address}`;an[Fe]||(an[Fe]=[]),an[Fe].push(Xe)}),Object.entries(an).forEach(([Xe,Cn])=>{(At.type!=="b2c"||Object.keys(an).length>1)&&ze.push({type:"header",text:Xe});const Fe={},ya=[];Cn.forEach(Kt=>{if(["checkbox","kg","fixed","hourly"].includes(Kt.task_type)&&!["extra","material","fixed_monthly"].includes(Kt.task_type)){const Bn=`${Kt.task_name}_${Kt.price_work}`;Fe[Bn]||(Fe[Bn]={name:Kt.task_name,price:parseFloat(Kt.price_work||0),dates:[],unit:Kt.task_type==="kg"?"kg":"kpl",totalQty:0}),Fe[Bn].dates.push(new Date(Kt.date).getDate()+"."+(new Date(Kt.date).getMonth()+1)+"."),Fe[Bn].totalQty+=Kt.task_type==="kg"?parseFloat(Kt.value||0):1}else ya.push(Kt)}),Object.values(Fe).forEach(Kt=>{const si=Kt.totalQty*Kt.price*Is;ie+=si,ze.push({type:"row",text:`${Kt.name} (${Kt.dates.sort().join(", ")})`,details:`${Kt.totalQty} ${Kt.unit} x ${Kt.price}  (alv0)`,total:si})}),ya.forEach(Kt=>{const si=parseFloat(Kt.price_work||0)+parseFloat(Kt.price_material||0),Bn=si*Is;ie+=Bn;let fn=Kt.description||Kt.task_name;Kt.task_type!=="fixed_monthly"&&(fn=`${new Date(Kt.date).getDate()}.${new Date(Kt.date).getMonth()+1}. ${fn}`),ze.push({type:"row",text:fn,details:`Netto: ${si.toFixed(2)} (alv0)`,total:Bn})})}),{id:vt.key,customerId:At.id,customerName:At.name,invoiceTitle:vt.title,customerType:At.type,billingAddress:`${At.street||""}, ${At.zip||""} ${At.city||""}`,rows:ze,totalSum:ie,rawEntries:he}});u(ye.sort((vt,At)=>vt.invoiceTitle.localeCompare(At.invoiceTitle))),t(`Luotu ${ye.length} laskuluonnosta.`,"success")}catch(R){console.error(R),t("Virhe: "+R.message,"error")}finally{m(!1)}},Xt=async()=>{if(window.confirm("Hyvksytnk laskut?")){m(!0);try{const R=ce(xt,"settings","company_profile"),P=await eh(R);let F=P.exists()?parseInt(P.data().invoice_start_number||1e3):1e3;const rt=Pm(xt),pt=fm();for(const O of l){const G=F.toString();F++;const st=ce(_e(xt,"invoices")),ot=new Date;ot.setDate(ot.getDate()+14),rt.set(st,{invoice_number:G,title:O.invoiceTitle,customer_id:O.customerId,customer_name:O.customerName,customer_type:O.customerType,billing_address:O.billingAddress,month:i,date:new Date().toISOString().slice(0,10),due_date:ot.toISOString().slice(0,10),rows:O.rows,total_sum:O.totalSum,status:"open",created_at:pt});for(const ft of O.rawEntries)ft.origin==="work_entry"?rt.update(ce(xt,"work_entries",ft.id),{invoiced:!0,invoice_id:st.id}):ft.origin==="contract_generated"&&rt.set(ce(_e(xt,"work_entries")),{...ft,origin:"fixed_fee",invoiced:!0,invoice_id:st.id,created_at:pt})}rt.update(R,{invoice_start_number:F.toString()}),await rt.commit(),t("Laskut luotu! ","success"),u([])}catch(R){console.error(R),t("Virhe: "+R.message,"error")}finally{m(!1)}}},B=R=>{b.alv_pros&&parseFloat(b.alv_pros);const P=document.getElementById("printFrame");P&&P.remove();const F=document.createElement("iframe");F.id="printFrame",F.style.position="fixed",F.style.bottom="0",F.style.width="0",F.style.height="0",F.style.border="0",document.body.appendChild(F);const rt=F.contentWindow.document,pt=R.rows.map(O=>`<tr><td>${O.text}</td><td style="text-align:right">${O.total.toFixed(2)} </td></tr>`).join("");rt.open(),rt.write(`<html><head><style>body{font-family:Arial;padding:20px}table{width:100%;border-collapse:collapse}td,th{border:1px solid #ccc;padding:8px}</style></head><body>
            <h2>LASKU #${R.invoice_number||"Luonnos"}</h2>
            <p><b>Asiakas:</b> ${R.customer_name}</p>
            <table><thead><tr><th>Kuvaus</th><th style="text-align:right">Summa</th></tr></thead><tbody>${pt}</tbody></table>
            <p style="text-align:right"><b>Yhteens: ${R.total_sum.toFixed(2)} </b></p>
            <script>window.onload = function() { window.print(); };<\/script></body></html>`),rt.close(),setTimeout(()=>{F.contentWindow.focus(),F.contentWindow.print()},500)};return p.jsxs("div",{className:"admin-section",children:[p.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),p.jsx("h2",{children:"Laskutus"}),p.jsxs("div",{className:"card-box",style:{display:"flex",gap:"20px",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between"},children:[p.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[p.jsx("label",{children:"Valitse kuukausi:"}),p.jsx("input",{type:"month",value:i,onChange:R=>r(R.target.value),style:{fontSize:"1.1rem"}}),p.jsx("button",{onClick:I,className:"save-btn",disabled:f,children:f?"Haetaan...":" Hae laskutettavat"})]}),p.jsx("button",{onClick:()=>U(!0),className:"save-btn",style:{background:"#ff9800",border:"1px solid #ffb74d"},children:" Luo tyhj lasku"}),p.jsx("div",{style:{width:"100%",textAlign:"right"},children:p.jsx("button",{onClick:j,className:"back-btn",style:{borderColor:"#d32f2f",color:"#d32f2f",fontSize:"0.8rem"},children:" Nollaa KK-laskutustieto"})}),l.length>0&&p.jsx("button",{onClick:Xt,className:"save-btn",style:{background:"#e65100",width:"100%"},children:" Hyvksy & Merkitse laskutetuksi"})]}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[l.map((R,P)=>p.jsxs("div",{style:{background:"#1e1e1e",border:"1px solid #444",borderRadius:"8px",overflow:"hidden"},children:[p.jsxs("div",{style:{background:"#333",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsxs("div",{children:[p.jsx("h3",{style:{margin:0},children:R.invoiceTitle}),p.jsx("span",{style:{fontSize:"0.8em",color:"#aaa"},children:R.customerType==="b2c"?"Yksityinen (Sis. ALV)":"Yritys/Isnninti (+ ALV)"})]}),p.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[p.jsx("div",{style:{textAlign:"right"},children:p.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#4caf50"},children:[R.totalSum.toFixed(2)," "]})}),p.jsx("button",{onClick:()=>B(R),className:"icon-btn",style:{fontSize:"1.5rem"},title:"Esikatselu",children:""})]})]}),p.jsx("div",{style:{padding:"15px"},children:p.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},children:[p.jsx("thead",{children:p.jsxs("tr",{style:{borderBottom:"1px solid #555",color:"#aaa",textAlign:"left"},children:[p.jsx("th",{style:{paddingBottom:"5px"},children:"Kuvaus"}),p.jsx("th",{style:{textAlign:"right"},children:"Yhteens"})]})}),p.jsx("tbody",{children:R.rows.map((F,rt)=>p.jsx("tr",{style:{borderBottom:F.type==="header"?"2px solid #444":"1px solid #2c2c2c",background:F.type==="header"?"#2c2c2c":"transparent"},children:F.type==="header"?p.jsx("td",{colSpan:"2",style:{padding:"15px 5px 5px 5px",fontWeight:"bold",color:"#2196f3",fontSize:"1rem"},children:F.text}):p.jsxs(p.Fragment,{children:[p.jsxs("td",{style:{padding:"8px 5px"},children:[F.text,p.jsx("br",{}),p.jsx("small",{style:{color:"#aaa"},children:F.details})]}),p.jsxs("td",{style:{textAlign:"right",fontWeight:"bold"},children:[F.total.toFixed(2)," "]})]})},rt))})]})})]},P)),l.length===0&&!f&&p.jsx("p",{style:{textAlign:"center",color:"#666",marginTop:"20px"},children:"Ei laskuja nkyviss."})]}),x&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{maxWidth:"800px"},children:[p.jsx("h3",{children:"Uusi Lasku (Manuaalinen)"}),p.jsx("p",{style:{fontSize:"0.9rem",color:"#aaa",marginBottom:"15px"},children:"Uusi asiakas tallentuu automaattisesti rekisteriin."}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Valitse asiakas (tai kirjoita uusi nimi)"}),p.jsxs("select",{value:Z.customer_id,onChange:_t,style:{marginBottom:"5px"},children:[p.jsx("option",{value:"",children:"-- LUO UUSI ASIAKAS --"}),J.map(R=>p.jsx("option",{value:R.id,children:R.name},R.id))]}),p.jsx("input",{placeholder:"Asiakkaan nimi...",value:Z.customer_name,onChange:R=>ut(P=>({...P,customer_name:R.target.value}))})]}),p.jsxs("div",{className:"form-group",style:{background:"#2c2c2c",padding:"10px",borderRadius:"6px",border:"1px solid #444"},children:[p.jsx("label",{style:{marginBottom:"5px"},children:"Asiakastyyppi"}),p.jsxs("div",{style:{display:"flex",gap:"20px"},children:[p.jsxs("label",{style:{cursor:"pointer",display:"flex",alignItems:"center"},children:[p.jsx("input",{type:"radio",checked:Z.type==="b2c",onChange:()=>ut(R=>({...R,type:"b2c"})),style:{width:"auto",marginRight:"5px"}}),"Yksityinen (Sis. ALV)"]}),p.jsxs("label",{style:{cursor:"pointer",display:"flex",alignItems:"center"},children:[p.jsx("input",{type:"radio",checked:Z.type!=="b2c",onChange:()=>ut(R=>({...R,type:"b2b"})),style:{width:"auto",marginRight:"5px"}}),"Yritys (+ ALV)"]})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Osoite"}),p.jsx("input",{value:Z.address,onChange:R=>ut(P=>({...P,address:R.target.value})),placeholder:"Katuosoite, Postinro Ptp"})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{children:[p.jsx("label",{children:"Laskun Pivys"}),p.jsx("input",{type:"date",value:Z.date,onChange:R=>Vt(R.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{children:"Maksuehto / Erpiv"}),p.jsxs("div",{style:{display:"flex",gap:"5px"},children:[p.jsxs("select",{value:Z.payment_term,onChange:R=>at(R.target.value),style:{flex:1},children:[p.jsx("option",{value:"7",children:"7 pv netto"}),p.jsx("option",{value:"14",children:"14 pv netto"}),p.jsx("option",{value:"30",children:"30 pv netto"})]}),p.jsx("input",{type:"date",value:Z.due_date,onChange:R=>ut(P=>({...P,due_date:R.target.value}))})]})]})]}),p.jsx("label",{children:"Laskurivit (Hinnat aina ALV 0%):"}),p.jsxs("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid #444",padding:"10px",borderRadius:"6px",marginBottom:"15px"},children:[Z.rows.map((R,P)=>p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"130px 2fr 100px 100px 40px",gap:"5px",marginBottom:"8px",alignItems:"end"},children:[p.jsxs("div",{children:[p.jsx("label",{style:{fontSize:"0.7em"},children:"Pvm"}),p.jsx("input",{type:"date",value:R.date,onChange:F=>k(P,"date",F.target.value),style:{fontSize:"0.9rem"}})]}),p.jsxs("div",{children:[p.jsx("label",{style:{fontSize:"0.7em"},children:"Kuvaus"}),p.jsx("input",{placeholder:"Mit tehtiin...",value:R.text,onChange:F=>k(P,"text",F.target.value),style:{fontSize:"0.9rem"}})]}),p.jsxs("div",{children:[p.jsx("label",{style:{fontSize:"0.7em"},children:"Ty  (0%)"}),p.jsx("input",{type:"number",placeholder:"0.00",value:R.price_work,onChange:F=>k(P,"price_work",F.target.value),style:{textAlign:"right",fontSize:"0.9rem"}})]}),p.jsxs("div",{children:[p.jsx("label",{style:{fontSize:"0.7em"},children:"Tarvike  (0%)"}),p.jsx("input",{type:"number",placeholder:"0.00",value:R.price_material,onChange:F=>k(P,"price_material",F.target.value),style:{textAlign:"right",fontSize:"0.9rem"}})]}),p.jsx("button",{onClick:()=>S(P),style:{background:"none",border:"none",color:"#ff5252",cursor:"pointer",padding:"10px"},children:""})]},P)),p.jsx("button",{onClick:bt,className:"back-btn",style:{width:"100%",marginTop:"5px",borderStyle:"dashed"},children:"+ Lis rivi"})]}),p.jsxs("div",{style:{textAlign:"right",fontWeight:"bold",fontSize:"1.2rem",marginBottom:"20px"},children:["Yhteens (sis. ALV ",b.alv_pros||25.5,"%): ",(Z.rows.reduce((R,P)=>R+C(P),0)*(1+parseFloat(b.alv_pros||25.5)/100)).toFixed(2)," "]}),p.jsxs("div",{style:{display:"flex",gap:"10px"},children:[p.jsx("button",{onClick:V,className:"save-btn",disabled:f,children:" Tallenna & Luo Lasku"}),p.jsx("button",{onClick:()=>U(!1),className:"back-btn",children:"Peruuta"})]})]})})]})},y2=({onBack:s,showNotification:t,requestConfirm:i})=>{const[r,l]=ht.useState([]),[u,f]=ht.useState(!0),[m,y]=ht.useState({}),[_,b]=ht.useState(!1),[w,x]=ht.useState(""),[U,J]=ht.useState(""),[W,X]=ht.useState({start:"",end:""}),[Z,ut]=ht.useState(null);ht.useEffect(()=>{(async()=>{const R=await eh(ce(xt,"settings","company_profile"));R.exists()&&y(R.data())})()},[]),ht.useEffect(()=>{f(!0);const B=gi(_e(xt,"invoices"),Yh("created_at","desc"),XR(100)),R=Hi(B,P=>{const F=P.docs.map(rt=>({id:rt.id,...rt.data()}));l(F),f(!1)},P=>{console.error("Virhe:",P),f(!1)});return()=>R()},[]);const _t=[...new Set(r.map(B=>B.customer_name))].sort(),Vt=B=>{const R=String(B).replace(/\D/g,""),P=[7,3,1];let F=0;for(let pt=0;pt<R.length;pt++)F+=parseInt(R.charAt(R.length-1-pt))*P[pt%3];const rt=(10-F%10)%10;return R+rt},at=B=>{if(B.due_date)return new Date(B.due_date).toLocaleDateString("fi-FI");const R=new Date(B.date);return R.setDate(R.getDate()+14),R.toLocaleDateString("fi-FI")},bt=(B,R,P,F)=>{if(!B||!R||!P||!F)return"";const rt=B.replace(/[^0-9]/g,"");if(rt.length<16)return"";const pt=rt.slice(0,16),O=parseFloat(R).toFixed(2);let[G,st]=O.split(".");G=G.padStart(6,"0").slice(-6);const ot=G+st,ft=P.replace(/[^0-9]/g,"").padStart(20,"0"),mt=new Date(F);mt.setDate(mt.getDate()+14);const St=mt.getFullYear().toString().slice(-2),ne=(mt.getMonth()+1).toString().padStart(2,"0"),Gt=mt.getDate().toString().padStart(2,"0"),He=St+ne+Gt;return`4${pt}${ot}000${ft}${He}`},k=B=>{i("Merkitnk lasku lhetetyksi? Tmn jlkeen muokkaus lukittuu.",async()=>{await qi(ce(xt,"invoices",B.id),{status:"sent"}),t("Merkitty lhetetyksi ja lukittu.","success")})},S=B=>{i("Merkitnk lasku maksetuksi?",async()=>{await qi(ce(xt,"invoices",B.id),{status:"paid"}),t("Merkitty maksetuksi.","success")})},C=B=>{i("Mittidnk lasku?",async()=>{await qi(ce(xt,"invoices",B.id),{status:"cancelled"}),t("Lasku mittity.","info")})},V=async()=>{if(!Z)return;const B=Z.rows.reduce((R,P)=>R+(P.type==="row"?parseFloat(P.total||0):0),0);await qi(ce(xt,"invoices",Z.id),{customer_name:Z.customer_name,billing_address:Z.billing_address,rows:Z.rows,total_sum:B}),ut(null),t("Lasku pivitetty!","success")},N=B=>{i(`VAROITUS: Haluatko poistaa laskun kokonaan?

- Lasku poistuu arkistosta.
- Tyt palautuvat "tekemttmiksi".`,async()=>{f(!0);try{const R=Pm(xt),P=gi(_e(xt,"work_entries"),Pn("invoice_id","==",B.id));(await sa(P)).docs.forEach(rt=>{const pt=rt.data();pt.origin==="contract_generated"||pt.origin==="fixed_fee"?R.delete(rt.ref):R.update(rt.ref,{invoiced:!1,invoice_id:null})}),R.delete(ce(xt,"invoices",B.id)),await R.commit(),t("Lasku poistettu ja tyt palautettu.","success")}catch(R){t("Virhe: "+R.message,"error")}finally{f(!1)}})},j=B=>{const R=B.invoice_number||"Luonnos",P=Vt(R);at(B);const F=new Date(B.date).toLocaleDateString("fi-FI"),rt=B.customer_type==="b2c",O=1+(m.alv_pros?parseFloat(m.alv_pros):25.5)/100;bt(m.iban,B.total_sum,P,B.date);const G=document.getElementById("printFrame");G&&G.remove();const st=document.createElement("iframe");st.id="printFrame",st.style.position="fixed",st.style.right="0",st.style.bottom="0",st.style.width="0",st.style.height="0",st.style.border="0",document.body.appendChild(st);const ot=st.contentWindow.document,ft=B.rows.map(mt=>{if(mt.type==="header")return`<tr class="row-header"><td colspan="2" style="background:#eee;font-weight:bold">${mt.text}</td></tr>`;let St=rt?mt.total:mt.total/O;return`<tr><td>${mt.text} ${mt.details?`<br><small style="color:#666">${mt.details}</small>`:""}</td><td style="text-align:right">${St.toFixed(2)} </td></tr>`}).join("");ot.open(),ot.write(`<html><head><style>body{font-family:Arial;font-size:12px;padding:20px}table{width:100%;border-collapse:collapse;margin-top:20px}td,th{border:1px solid #ccc;padding:8px}.header{display:flex;justify-content:space-between}.totals{text-align:right;font-weight:bold;margin-top:20px}</style></head><body>
            <div class="header"><div><b>${m.nimi||""}</b><br>${m.katu||""}</div><div>Pivys: ${F}<br>Lasku: ${R}</div></div>
            <div style="margin-top:20px"><b>Vastaanottaja:</b><br>${B.customer_name}</div>
            <table><thead><tr><th>Kuvaus</th><th style="text-align:right">Summa</th></tr></thead><tbody>${ft}</tbody></table>
            <div class="totals">YHTEENS: ${B.total_sum.toFixed(2)} </div>
            <script>window.onload = function() { window.print(); };<\/script></body></html>`),ot.close(),setTimeout(()=>{st.contentWindow.focus(),st.contentWindow.print()},500)},I=B=>{const R=new Date;let P=new Date;if(B==="thisMonth")P=new Date(R.getFullYear(),R.getMonth(),1);else if(B==="prevMonth")P=new Date(R.getFullYear(),R.getMonth()-1,1),R.setDate(0);else if(B==="3kk")P.setMonth(P.getMonth()-3);else if(B==="year")P.setFullYear(P.getFullYear()-1);else if(B==="clear"){X({start:"",end:""});return}const F=rt=>rt.toISOString().split("T")[0];X({start:F(P),end:F(R)})},Xt=r.filter(B=>{const R=w.toLowerCase(),P=!w||B.customer_name.toLowerCase().includes(R)||B.title.toLowerCase().includes(R)||B.invoice_number&&B.invoice_number.includes(R),F=!U||B.customer_name===U;let rt=!0;return W.start&&W.end&&(rt=B.date>=W.start&&B.date<=W.end),P&&F&&rt});return p.jsxs("div",{className:"admin-section",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[p.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),p.jsx("h2",{style:{margin:0},children:"Laskuarkisto"})]}),p.jsxs("div",{className:"card-box",style:{padding:"15px"},children:[p.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[p.jsxs("div",{style:{flex:1,position:"relative",display:"flex",alignItems:"center",background:"#2c2c2c",borderRadius:"6px",padding:"8px 12px",border:"1px solid #444"},children:[p.jsx("span",{style:{fontSize:"1.1rem",marginRight:"10px"},children:""}),p.jsx("input",{placeholder:"Hae asiakasta tai laskun numeroa...",value:w,onChange:B=>x(B.target.value),style:{border:"none",background:"transparent",color:"white",fontSize:"1rem",outline:"none",width:"100%"}}),w&&p.jsx("button",{onClick:()=>x(""),style:{background:"none",border:"none",color:"#888",cursor:"pointer",fontSize:"1.1rem"},children:""})]}),p.jsx("button",{onClick:()=>b(!_),className:"save-btn",style:{background:_?"#1976d2":"#333",minWidth:"120px"},children:_?"Piilota ":"Suodattimet "})]}),_&&p.jsxs("div",{style:{marginTop:"15px",borderTop:"1px solid #444",paddingTop:"15px",display:"flex",flexDirection:"column",gap:"15px"},children:[p.jsxs("div",{children:[p.jsx("label",{style:{marginBottom:"5px",color:"#aaa"},children:"Aikajakso:"}),p.jsxs("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:[p.jsx("button",{className:"back-btn",onClick:()=>I("thisMonth"),children:"Tm kuu"}),p.jsx("button",{className:"back-btn",onClick:()=>I("prevMonth"),children:"Edellinen"}),p.jsx("button",{className:"back-btn",onClick:()=>I("3kk"),children:"3 kk"}),p.jsx("button",{className:"back-btn",onClick:()=>I("year"),children:"Vuosi"}),p.jsx("button",{className:"back-btn",onClick:()=>I("clear"),style:{color:"#ff5252",borderColor:"#ff5252"},children:"Tyhjenn"})]})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{children:[p.jsx("label",{children:"Tarkka aikavli:"}),p.jsxs("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[p.jsx("input",{type:"date",value:W.start,onChange:B=>X({...W,start:B.target.value})}),p.jsx("span",{children:"-"}),p.jsx("input",{type:"date",value:W.end,onChange:B=>X({...W,end:B.target.value})})]})]}),p.jsxs("div",{children:[p.jsx("label",{children:"Asiakas:"}),p.jsxs("select",{value:U,onChange:B=>J(B.target.value),children:[p.jsx("option",{value:"",children:"-- Kaikki --"}),_t.map(B=>p.jsx("option",{value:B,children:B},B))]})]})]})]})]}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[u&&p.jsx("p",{style:{textAlign:"center",color:"#aaa"},children:"Ladataan laskuja..."}),Xt.map(B=>p.jsxs("div",{className:"card-box",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 15px",opacity:B.status==="cancelled"?.6:1},children:[p.jsxs("div",{style:{flex:1},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",flexWrap:"wrap"},children:[p.jsxs("span",{style:{fontWeight:"bold"},children:[B.customer_name," (#",B.invoice_number||"---",")"]}),B.status==="open"&&p.jsx("span",{style:{background:"#ff9800",color:"black",padding:"2px 5px",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"bold"},children:"AVOIN / LUONNOS"}),B.status==="sent"&&p.jsx("span",{style:{background:"#2196f3",color:"white",padding:"2px 5px",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"bold"},children:"LHETETTY"}),B.status==="paid"&&p.jsx("span",{style:{background:"#4caf50",color:"white",padding:"2px 5px",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"bold"},children:"MAKSETTU"})]}),p.jsxs("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:[B.date,"  ",B.total_sum.toFixed(2)," "]})]}),p.jsxs("div",{style:{display:"flex",gap:"5px"},children:[p.jsx("button",{onClick:()=>j(B),className:"icon-btn",children:""}),B.status==="open"&&p.jsx("button",{onClick:()=>ut(B),className:"icon-btn",style:{color:"#ff9800"},title:"Muokkaa",children:""}),B.status==="open"&&p.jsx("button",{onClick:()=>k(B),className:"icon-btn",style:{color:"#2196f3"},title:"Merkitse lhetetyksi",children:""}),B.status==="sent"&&p.jsx("button",{onClick:()=>S(B),className:"icon-btn",style:{color:"#4caf50"},title:"Merkitse maksetuksi",children:""}),B.status==="open"&&p.jsx("button",{onClick:()=>C(B),className:"icon-btn",style:{color:"#d32f2f"},title:"Mitti",children:""}),p.jsx("button",{onClick:()=>N(B),className:"icon-btn",style:{color:"#ff5252"},title:"Poista",children:""})]})]},B.id))]}),Z&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{maxWidth:"600px"},children:[p.jsxs("h3",{children:["Muokkaa laskua #",Z.invoice_number]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Asiakas"}),p.jsx("input",{value:Z.customer_name,onChange:B=>ut({...Z,customer_name:B.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Osoite"}),p.jsx("input",{value:Z.billing_address,onChange:B=>ut({...Z,billing_address:B.target.value})})]}),p.jsx("label",{children:"Rivit (Hinnat sis. ALV):"}),p.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid #444",padding:"10px",borderRadius:"6px",marginBottom:"15px"},children:Z.rows.map((B,R)=>B.type==="row"&&p.jsxs("div",{style:{display:"flex",gap:"5px",marginBottom:"5px",flexDirection:"column",borderBottom:"1px solid #333",paddingBottom:"10px"},children:[p.jsx("input",{value:B.text,onChange:P=>{const F=[...Z.rows];F[R].text=P.target.value,ut({...Z,rows:F})},style:{flex:3}}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsx("label",{style:{fontSize:"0.8rem"},children:"Summa ():"}),p.jsx("input",{type:"number",value:B.total.toFixed(2),onChange:P=>{const F=[...Z.rows];F[R].total=parseFloat(P.target.value)||0,ut({...Z,rows:F})},style:{width:"100px",textAlign:"right"}})]})]},R))}),p.jsxs("div",{style:{display:"flex",gap:"10px"},children:[p.jsx("button",{onClick:V,className:"save-btn",children:"Tallenna"}),p.jsx("button",{onClick:()=>ut(null),className:"back-btn",children:"Peruuta"})]})]})})]})},_2=({onBack:s})=>p.jsxs("div",{className:"admin-section",children:[p.jsx("button",{onClick:s,className:"back-btn",style:{marginBottom:"20px"},children:" Takaisin"}),p.jsxs("div",{className:"card-box",style:{textAlign:"left",lineHeight:"1.6"},children:[p.jsx("h1",{style:{textAlign:"center",color:"#2196f3"},children:" SOVELLUKSEN KYTTOPAS "}),p.jsx("p",{style:{textAlign:"center",fontStyle:"italic",color:"#aaa"},children:"Krkln Notar Oy - Versio 1.0"}),p.jsx("hr",{style:{borderColor:"#444",margin:"20px 0"}}),p.jsx("h2",{style:{color:"#4caf50"},children:"1. ASENNUS PUHELIMEEN (PWA)"}),p.jsx("p",{children:'Sovellusta kytetn suoraan selaimen kautta, mutta se on suunniteltu asennettavaksi "sovelluskuvakkeeksi" puhelimen kotinytlle.'}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("b",{children:"Android (Chrome):"}),p.jsx("br",{}),"1. Avaa sovellus Chromella.",p.jsx("br",{}),"2. Paina selaimen oikeasta ylkulmasta kolmea pistett.",p.jsx("br",{}),"3. Valitse ",p.jsx("b",{children:'"Asenna sovellus"'})," tai ",p.jsx("b",{children:'"Lis aloitusnyttn"'}),"."]}),p.jsxs("li",{children:[p.jsx("b",{children:"iPhone (Safari):"}),p.jsx("br",{}),"1. Avaa sovellus Safarilla.",p.jsx("br",{}),'2. Paina alareunan "Jaa"-painiketta (neli ja nuoli yls).',p.jsx("br",{}),"3. Rullaa valikkoa alaspin ja valitse ",p.jsx("b",{children:'"Lis kotivalikkoon"'}),"."]}),p.jsxs("li",{children:[p.jsx("b",{children:"Hyty:"})," Nin sovellus toimii ilman selaimen osoitepalkkeja ja on aina yhden painalluksen pss."]})]}),p.jsx("h2",{style:{color:"#4caf50"},children:"2. TYT-NKYM (KENTTTY)"}),p.jsx("p",{children:"Tm on kentttyntekijn pnkym. Joka kerta kun ty suoritetaan, se kuitataan tll reaaliajassa."}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("b",{children:"Tytehtvn valinta:"})," Valitse suoritettu ty (esim. Auraus tai Hiekoitus). Tehtvt nkyvt omina vrillisin painikkeinaan."]}),p.jsxs("li",{children:[p.jsx("b",{children:"Massakirjaus (Checkbox):"}),' Net listan vain niist kohteista, joilla on kyseinen ty sopimuksessaan. Valitse tehdyt kohteet ja paina "Tallenna valinnat".']}),p.jsxs("li",{children:[p.jsx("b",{children:"Mrperusteinen (kg):"})," Esimerkiksi hiekoituksessa sytetn kytetty mr kiloina suoraan kohteen kohdalle."]}),p.jsxs("li",{children:[p.jsx("b",{children:"Tsmkirjaus (Listyt & Liitetyt):"})," Jos tyt ei ole vakiosopimuksessa, valitse asiakas ja kohde, kirjoita selite ja mrittele hinta (Ty ja Tarvikkeet erikseen ALV 0%)."]}),p.jsxs("li",{children:[p.jsx("b",{children:"Selaa & Muokkaa:"})," Alareunan painikkeesta pset nkemn omat kirjauksesi. Voit korjata virheit tai poistaa turhia kirjauksia niin kauan kuin niit ei ole viel laskutettu."]})]}),p.jsx("h2",{style:{color:"#4caf50"},children:"3. TOIMISTON OHJAUSPANEELI"}),p.jsx("h3",{children:"A. Asiakasrekisteri"}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("b",{children:"Asiakaskortti:"})," Hallinnoi yhteystietoja, laskutusosoitetta ja maksuehtoa (7pv, 14pv, 30pv tai kiinte erpiv)."]}),p.jsxs("li",{children:[p.jsx("b",{children:"Kohteet ja ryhmt:"})," Voit luoda asiakkaalle ryhmi (esim. eri taloyhtit isnnitsijn alla) ja list niihin kohteita (osoitteita)."]}),p.jsxs("li",{children:[p.jsx("b",{children:"Hinnoittelun hierarkia:"})," Sovellus tarkistaa hinnan ensin kohteelta. Jos kohteelle ei ole asetettu omaa hintaa, kytetn asiakkaan oletushinnastoa."]})]}),p.jsx("h3",{children:"B. Yrityksen Asetukset"}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("b",{children:"Tiedot:"})," Mrittele IBAN, Y-tunnus ja oletus-ALV% (esim. 25.5), joka vaikuttaa laskulaskentaan."]}),p.jsxs("li",{children:[p.jsx("b",{children:"Tytehtvien hallinta:"})," Voit luoda uusia tehtvi ja mritt niiden tyypin (Checkbox, Kerta, KK-sopimus, kg tai Tuntity)."]})]}),p.jsx("h3",{children:"C. Laskutus (Automaatio)"}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("b",{children:"Generointi:"}),' Valitse kuukausi ja paina "Hae laskutettavat". Sovellus ker kaikki kyseisen kuukauden kirjaukset ja yhdist ne asiakaskohtaisiksi laskuiksi.']}),p.jsxs("li",{children:[p.jsx("b",{children:"KK-sopimukset:"})," Sovellus huomioi automaattisesti kaikki kiintehintaiset kuukausisopimukset, vaikka tykirjausta ei olisi tehty."]}),p.jsxs("li",{children:[p.jsx("b",{children:"Hyvksynt:"}),' "Hyvksy & Merkitse" siirt laskut arkistoon, lukitsee tykirjaukset laskutetuiksi ja kasvattaa laskunumerointia.']})]}),p.jsx("h3",{children:"D. Pikalasku (Manuaalinen)"}),p.jsx("p",{children:"Kytetn erillisten laskujen tekoon ilman kenttkirjauksia."}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("b",{children:"Asiakkaan luonti:"})," Jos kirjoitat uuden nimen pikalaskuun, jrjestelm tallentaa sen automaattisesti asiakasrekisteriin myhemp kytt varten."]}),p.jsxs("li",{children:[p.jsx("b",{children:"ALV-ksittely:"})," Syt hinnat aina ALV 0%. Sovellus laskee loppusumman verollisena yrityksen asetusten mukaan."]}),p.jsxs("li",{children:[p.jsx("b",{children:"Maksuehdot:"})," Pikalaskulle voi valita laskukohtaisen maksuehdon ja erpivn."]})]}),p.jsx("h2",{style:{color:"#4caf50"},children:"4. LASKUARKISTO JA LUKITUS"}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("b",{children:"Tilat:"}),p.jsx("br",{}),"-  ",p.jsx("b",{children:"Avoin/Luonnos:"})," Laskua voi viel muokata () tai poistaa kokonaan.",p.jsx("br",{}),"-  ",p.jsx("b",{children:"Lhetetty ():"})," Lukitsee laskun sislln. Merkitse lasku lhetetyksi, kun olet toimittanut sen asiakkaalle.",p.jsx("br",{}),"-  ",p.jsx("b",{children:"Maksettu ():"})," Kuittaa laskun hoidetuksi."]}),p.jsxs("li",{children:[p.jsx("b",{children:"Tulostus ():"})," Luo virallisen A4-laskun esikatselun, joka sislt viivakoodin, viitenumeron ja eritellyt rivit."]})]}),p.jsx("h2",{style:{color:"#4caf50"},children:"5. TIETOTURVA"}),p.jsx("p",{children:"Sovellus vaatii kirjautumisen shkpostilla ja salasanalla. Istunto silyy laitteella, joten sisnkirjautumista ei tarvitse tehd jatkuvasti uudelleen, ellei kyttj kirjaudu ulos ohjauspaneelista."})]})]}),v2=()=>{const[s,t]=ht.useState(""),[i,r]=ht.useState(""),[l,u]=ht.useState(!1),[f,m]=ht.useState(""),y=async _=>{_.preventDefault(),m("");try{l?await WC(xh,s,i):await JC(xh,s,i)}catch(b){console.error("Login error:",b),b.code==="auth/invalid-credential"?m("Vr shkposti tai salasana."):b.code==="auth/email-already-in-use"?m("Shkposti on jo kytss."):b.code==="auth/weak-password"?m("Salasanan pit olla vhintn 6 merkki."):m("Virhe: "+b.message)}};return p.jsx("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px"},children:p.jsxs("div",{className:"card-box",style:{maxWidth:"400px",width:"100%",textAlign:"center"},children:[p.jsx("h2",{style:{marginTop:0},children:l?"Luo tunnus":"Kirjaudu sisn"}),p.jsx("p",{style:{color:"#aaa",marginBottom:"20px"},children:"Krkln Notar Oy"}),p.jsxs("form",{onSubmit:y,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{style:{textAlign:"left"},children:"Shkposti"}),p.jsx("input",{type:"email",value:s,onChange:_=>t(_.target.value),required:!0,placeholder:"esim. posti@firma.fi"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{style:{textAlign:"left"},children:"Salasana"}),p.jsx("input",{type:"password",value:i,onChange:_=>r(_.target.value),required:!0,placeholder:"******"})]}),f&&p.jsx("div",{style:{backgroundColor:"rgba(211, 47, 47, 0.1)",color:"#ff5252",padding:"10px",borderRadius:"6px",marginBottom:"15px",border:"1px solid #d32f2f"},children:f}),p.jsx("button",{type:"submit",className:"save-btn",style:{width:"100%",padding:"15px"},children:l?"Rekisteridy":"Kirjaudu"})]}),p.jsx("div",{style:{marginTop:"20px",borderTop:"1px solid #444",paddingTop:"15px"},children:p.jsx("button",{onClick:()=>{u(!l),m("")},className:"back-btn",style:{border:"none",color:"#2196f3",textDecoration:"underline"},children:l?"Onko sinulla jo tunnus? Kirjaudu":"Eik tunnusta? Rekisteridy"})})]})})},E2="/notar-app/assets/logo-D7EU7HDK.jpeg",T2=({msg:s,type:t})=>s?p.jsxs("div",{className:`notification-toast ${t}`,children:[t==="success"?"":""," ",s]}):null,b2=({isOpen:s,message:t,onConfirm:i,onCancel:r})=>s?p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{textAlign:"center"},children:[p.jsx("h3",{children:"Vahvistus"}),p.jsx("p",{style:{whiteSpace:"pre-wrap"},children:t}),p.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center",marginTop:"20px"},children:[p.jsx("button",{onClick:i,className:"save-btn",children:"Kyll"}),p.jsx("button",{onClick:r,className:"back-btn",children:"Peruuta"})]})]})}):null,YE=({task:s,contractData:t,onToggle:i,onPriceChange:r,isOverridden:l=!1})=>{const u=t?.active||!1,f=t?.price||"";let m="",y="0";return s.type==="kg"?m=" / kg":s.type==="hourly"?m=" / h":s.type==="fixed"?m=" (Kerta)":s.type==="fixed_monthly"?m=" / kk":(s.type==="extra"||s.type==="material")&&(m="",y="0"),p.jsxs("div",{style:{marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #333",paddingBottom:"8px",backgroundColor:l?"#2e2e10":"transparent",padding:l?"5px":"0",borderRadius:"4px"},children:[p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",fontWeight:u?"bold":"normal",flex:1,color:"white"},children:[p.jsx("input",{type:"checkbox",className:"big-checkbox",checked:u,onChange:i}),s.label,l&&p.jsx("span",{style:{fontSize:"0.7em",color:"#ffb74d"},children:"(Kohdekohtainen)"})]}),u&&p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[p.jsx("input",{type:"number",placeholder:y,value:f,onChange:r,style:{width:"90px",padding:"8px",textAlign:"right"}}),p.jsx("span",{style:{fontSize:"0.8em",color:"#aaa"},children:m})]})]})},S2=({currentView:s,setCurrentView:t})=>{const[i,r]=ht.useState(new Date),[l,u]=ht.useState(null),[f,m]=ht.useState("Paikannetaan..."),[y,_]=ht.useState(null);ht.useEffect(()=>{const W=setInterval(()=>r(new Date),1e3);return()=>clearInterval(W)},[]),ht.useEffect(()=>{if(!navigator.geolocation){m("Ei paikannusta");return}navigator.geolocation.getCurrentPosition(async W=>{const X=W.coords.latitude,Z=W.coords.longitude;_({lat:X.toFixed(3),lon:Z.toFixed(3)});try{const _t=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${X}&longitude=${Z}&current_weather=true`)).json();u(_t.current_weather);const at=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${X}&lon=${Z}`)).json(),bt=at.address.city||at.address.town||at.address.village||at.address.municipality||"Tuntematon",k=at.address.road||"";m(k?`${k}, ${bt}`:bt)}catch(ut){console.error("Stietojen haku eponnistui",ut),m("S ei saatavilla")}},W=>{console.error("Sijaintivirhe",W),m("Lahti (Oletus)")})},[]);const b=W=>W===void 0?"":W<=1?"":W<=3?"":W<=48?"":W<=67?"":W<=77?"":W<=82?"":W<=86?"":W<=99?"":"",x=["SU","MA","TI","KE","TO","PE","LA"][i.getDay()],U=i.toLocaleDateString("fi-FI"),J=i.toLocaleTimeString("fi-FI",{hour:"2-digit",minute:"2-digit"}).replace(".",".");return p.jsxs("div",{className:"info-bar-container",children:[p.jsxs("div",{className:"info-left",children:[p.jsxs("div",{className:"weather-box",children:[p.jsx("span",{className:"weather-icon",children:l?b(l.weathercode):"..."}),p.jsx("span",{className:"weather-temp",children:l?`${l.temperature>0?"+":""}${l.temperature}C`:"--"})]}),p.jsxs("div",{className:"location-box",children:[p.jsx("div",{children:f}),y&&p.jsxs("div",{className:"coords",children:["N ",y.lat," E ",y.lon]})]})]}),p.jsx("div",{className:"info-right",children:p.jsxs("div",{className:"time-box",children:[p.jsx("div",{className:"clock-time",children:J}),p.jsxs("div",{className:"clock-date",children:[x," ",U]})]})}),p.jsxs("div",{className:"info-center",children:[p.jsx("button",{className:`nav-btn ${s==="tyot"||s==="log"?"active":""}`,onClick:()=>t("tyot"),children:" Tyt"}),p.jsx("button",{className:`nav-btn ${s!=="tyot"&&s!=="log"?"active":""}`,onClick:()=>t("admin"),children:" Toimisto"})]})]})},A2=({onBack:s,showNotification:t,requestConfirm:i})=>{const[r,l]=ht.useState([]),[u,f]=ht.useState(""),[m,y]=ht.useState(null);ht.useEffect(()=>{const x=gi(_e(xt,"work_entries"),Pn("invoiced","==",!1)),U=Hi(x,J=>{const W=J.docs.map(X=>({id:X.id,...X.data()}));W.sort((X,Z)=>X.date<Z.date?1:-1),l(W)});return()=>U()},[]);const _=x=>{i("Poistetaanko tm kirjaus pysyvsti?",async()=>{await Lm(ce(xt,"work_entries",x)),t("Kirjaus poistettu","success")})},b=async()=>{if(m)try{await qi(ce(xt,"work_entries",m.id),{date:m.date,description:m.description||"",value:m.value||!0,price_work:m.price_work||"0",price_material:m.price_material||"0"}),t("Muutokset tallennettu!","success"),y(null)}catch(x){t("Virhe: "+x.message,"error")}},w=r.filter(x=>x.customer_name&&x.customer_name.toLowerCase().includes(u.toLowerCase())||x.property_address&&x.property_address.toLowerCase().includes(u.toLowerCase())||x.task_name&&x.task_name.toLowerCase().includes(u.toLowerCase()));return p.jsxs("div",{className:"admin-section",children:[p.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),p.jsx("h2",{children:"Tyhistoria"}),p.jsxs("div",{className:"card-box",children:[p.jsx("input",{placeholder:" Etsi...",value:u,onChange:x=>f(x.target.value),style:{marginBottom:"10px"}}),p.jsxs("p",{style:{fontSize:"0.9em",color:"#aaa"},children:["Yhteens: ",w.length," kirjausta"]})]}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[w.map(x=>p.jsxs("div",{style:{background:"#1e1e1e",padding:"15px",borderRadius:"8px",border:"1px solid #333",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[p.jsxs("div",{children:[p.jsxs("div",{style:{fontWeight:"bold",color:"#2196f3",fontSize:"1.1rem"},children:[x.task_name," ",p.jsxs("span",{style:{color:"white",fontSize:"0.9rem"},children:["- ",x.date]})]}),p.jsx("div",{style:{fontWeight:"bold",marginTop:"5px"},children:x.customer_name}),p.jsx("div",{style:{fontSize:"0.9rem"},children:x.property_address}),p.jsxs("div",{style:{marginTop:"5px",fontSize:"0.9rem",color:"#ccc"},children:[x.task_type==="kg"&&p.jsxs("span",{children:["Mr: ",p.jsxs("b",{children:[x.value," kg"]})," | "]}),p.jsxs("span",{children:["Hinta: ",p.jsxs("b",{children:[x.price_work," "]})]}),x.price_material>0&&p.jsxs("span",{children:[" + Tarvike ",x.price_material," "]}),x.description&&p.jsx("div",{style:{marginTop:"3px"},children:p.jsxs("i",{children:['"',x.description,'"']})})]})]}),p.jsxs("div",{style:{display:"flex",gap:"10px"},children:[p.jsx("button",{onClick:()=>y(x),className:"icon-btn edit-btn",title:"Muokkaa",children:""}),p.jsx("button",{onClick:()=>_(x.id),className:"icon-btn delete-btn",title:"Poista",children:""})]})]},x.id)),w.length===0&&p.jsx("p",{children:"Ei kirjauksia."})]}),m&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsx("h3",{children:"Muokkaa kirjausta"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Pivmr"}),p.jsx("input",{type:"date",value:m.date,onChange:x=>y({...m,date:x.target.value})})]}),m.task_type==="kg"&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Mr (kg)"}),p.jsx("input",{type:"number",value:m.value,onChange:x=>y({...m,value:x.target.value})})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{children:[p.jsx("label",{children:"Ty Hinta ()"}),p.jsx("input",{type:"number",value:m.price_work,onChange:x=>y({...m,price_work:x.target.value})})]}),m.task_type==="material"&&p.jsxs("div",{children:[p.jsx("label",{children:"Tarvike ()"}),p.jsx("input",{type:"number",value:m.price_material,onChange:x=>y({...m,price_material:x.target.value})})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Selite"}),p.jsx("input",{value:m.description||"",onChange:x=>y({...m,description:x.target.value}),placeholder:"Listiedot..."})]}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[p.jsx("button",{onClick:b,className:"save-btn",children:"Tallenna"}),p.jsx("button",{onClick:()=>y(null),className:"back-btn",children:"Peruuta"})]})]})})]})},w2=({availableTasks:s,onOpenLog:t,showNotification:i})=>{const[r,l]=ht.useState(null),u=s.filter(B=>B.showInWorkView!==!1),[f,m]=ht.useState(new Date().toISOString().slice(0,10)),[y,_]=ht.useState([]),[b,w]=ht.useState({}),[x,U]=ht.useState("all"),[J,W]=ht.useState([]),[X,Z]=ht.useState(""),[ut,_t]=ht.useState(""),[Vt,at]=ht.useState([]),[bt,k]=ht.useState(""),[S,C]=ht.useState(""),[V,N]=ht.useState("");ht.useEffect(()=>{if(!r)return;if(["checkbox","fixed","kg","hourly"].includes(r.type))Hi(_e(xt,"customers"),R=>{const P=R.docs.map(F=>({id:F.id,...F.data()}));Hi(_e(xt,"properties"),F=>{const rt=F.docs.map(G=>({id:G.id,...G.data()}));let pt=[];rt.forEach(G=>{const st=P.find(St=>St.id===G.customer_id);if(!st)return;const ot=G.contracts?.[r.id],ft=st.contracts?.[r.id];if(ot?.active||ft?.active){const St=ot?.active?ot.price:ft?.price||"0";pt.push({id:G.id,type:"property",name:G.address,group:G.group||"Ei ryhm",customerName:st.name,customerType:st.type,parentId:st.id,contractPrice:St})}}),P.forEach(G=>{const st=G.contracts?.[r.id];G.type==="b2c"&&st?.active&&pt.push({id:G.id,type:"customer",name:G.street?`${G.name} (${G.street})`:G.name,group:"Yksityiset",customerName:G.name,customerType:"b2c",parentId:G.id,contractPrice:st.price||"0"})}),_(pt);const O={};pt.forEach(G=>O[G.id]=r.type==="kg"?"":!0),w(O)})});else{const R=gi(_e(xt,"customers"),Yh("name"));Hi(R,P=>W(P.docs.map(F=>({id:F.id,...F.data()}))))}},[r]),ht.useEffect(()=>{if(X){const B=gi(_e(xt,"properties"),Pn("customer_id","==",X));Hi(B,R=>at(R.docs.map(P=>({id:P.id,...P.data()}))))}},[X]);const j=async()=>{const B=[];for(const[R,P]of Object.entries(b)){if(!P)continue;const F=y.find(rt=>rt.id===R);F&&B.push(So(_e(xt,"work_entries"),{date:f,task_id:r.id,task_name:r.label,task_type:r.type,property_id:R,property_address:F.name,customer_name:F.customerName,group:F.group,customer_id:F.parentId,value:P,price_work:F.contractPrice,invoiced:!1,created_at:new Date}))}await Promise.all(B),i(`Tallennettu ${B.length} kirjausta!`,"success"),l(null)},I=async()=>{if(!X||!S)return i("Tyt pakolliset kentt!","error");const B=J.find(P=>P.id===X);let R={id:X,address:B.street||B.name,group:"Yksityinen"};if(ut){const P=Vt.find(F=>F.id===ut);P&&(R={id:P.id,address:P.address,group:P.group})}else if(B.type!=="b2c")return i("Valitse kohde listasta!","error");await So(_e(xt,"work_entries"),{date:f,task_id:r.id,task_name:r.label,task_type:r.type,property_id:R.id,property_address:R.address,group:R.group,customer_id:X,customer_name:B.name,description:bt,price_work:S,price_material:V,invoiced:!1,created_at:new Date}),i("Kirjaus tallennettu!","success"),l(null),k(""),C(""),N("")};if(!r)return p.jsxs("div",{children:[p.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"Valitse tytehtv:"}),p.jsx("div",{className:"button-grid",children:u.map(B=>p.jsx("button",{className:"work-button",style:{backgroundColor:B.color||"#2196f3"},onClick:()=>l(B),children:B.label},B.id))}),p.jsx("div",{style:{textAlign:"center",marginTop:"30px"},children:p.jsx("button",{onClick:t,className:"back-btn",style:{padding:"15px",width:"100%",fontSize:"1rem"},children:" Selaa & Muokkaa kirjauksia "})})]});const Xt=["checkbox","fixed","kg","hourly"].includes(r.type);return p.jsxs("div",{className:"admin-section",children:[p.jsx("button",{onClick:()=>l(null),className:"back-btn",style:{marginBottom:"20px"},children:" Takaisin"}),p.jsx("h2",{style:{borderBottom:`4px solid ${r.color}`,display:"inline-block",paddingBottom:"5px"},children:r.label}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Pivmr:"}),p.jsx("input",{type:"date",value:f,onChange:B=>m(B.target.value),style:{maxWidth:"200px"}})]}),Xt&&p.jsxs("div",{children:[p.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",flexWrap:"wrap"},children:[p.jsx("button",{className:`nav-btn ${x==="isannointi"?"active":""}`,onClick:()=>U("isannointi"),style:{flex:1,fontSize:"0.8rem"},children:" Isnn."}),p.jsx("button",{className:`nav-btn ${x==="b2b"?"active":""}`,onClick:()=>U("b2b"),style:{flex:1,fontSize:"0.8rem"},children:" Yritys"}),p.jsx("button",{className:`nav-btn ${x==="b2c"?"active":""}`,onClick:()=>U("b2c"),style:{flex:1,fontSize:"0.8rem"},children:" Yksity."}),p.jsx("button",{className:`nav-btn ${x==="all"?"active":""}`,onClick:()=>U("all"),style:{flex:1,fontSize:"0.8rem"},children:"Kaikki"})]}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[Array.from(new Set(y.filter(B=>x==="all"||B.customerType===x).map(B=>`${B.customerName}::${B.group}`))).map(B=>{const[R,P]=B.split("::"),F=y.filter(rt=>rt.customerName===R&&rt.group===P);return p.jsxs("div",{className:"card-box",style:{padding:"10px"},children:[p.jsx("h4",{style:{margin:"0 0 5px 0",color:"#fff"},children:R}),p.jsx("div",{style:{fontSize:"0.9em",color:"#2196f3",marginBottom:"10px",fontWeight:"bold"},children:P}),F.map(rt=>p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #333",alignItems:"center"},children:[p.jsx("span",{children:rt.name}),r.type==="kg"?p.jsx("input",{type:"number",placeholder:"kg",value:b[rt.id]||"",onChange:pt=>w({...b,[rt.id]:pt.target.value}),style:{width:"80px",padding:"5px"}}):p.jsx("input",{type:"checkbox",className:"big-checkbox",checked:!!b[rt.id],onChange:pt=>w({...b,[rt.id]:pt.target.checked})})]},rt.id))]},B)}),y.length===0&&p.jsx("p",{children:"Ei kohteita."})]}),p.jsx("button",{onClick:j,className:"save-btn",style:{width:"100%",marginTop:"20px",padding:"15px"},children:"Tallenna Valinnat "})]}),!Xt&&p.jsxs("div",{className:"card-box",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Asiakas:"}),p.jsxs("select",{value:X,onChange:B=>{Z(B.target.value),_t("")},children:[p.jsx("option",{value:"",children:"-- Valitse --"}),J.map(B=>p.jsx("option",{value:B.id,children:B.name},B.id))]})]}),(Vt.length>0||X&&J.find(B=>B.id===X)?.type!=="b2c")&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Kohde:"}),p.jsxs("select",{value:ut,onChange:B=>_t(B.target.value),children:[p.jsx("option",{value:"",children:"-- Valitse --"}),Vt.map(B=>p.jsx("option",{value:B.id,children:B.address},B.id))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Selite:"}),p.jsx("input",{value:bt,onChange:B=>k(B.target.value),placeholder:"Mit tehtiin..."})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{children:[p.jsx("label",{children:"Ty ()"}),p.jsx("input",{type:"number",value:S,onChange:B=>C(B.target.value)})]}),r.type==="material"&&p.jsxs("div",{children:[p.jsx("label",{children:"Tarvike ()"}),p.jsx("input",{type:"number",value:V,onChange:B=>N(B.target.value)})]})]}),p.jsx("button",{onClick:I,className:"save-btn",style:{width:"100%",marginTop:"20px"},children:"Tallenna Kirjaus "})]})]})},x2=({onBack:s,showNotification:t,requestConfirm:i})=>{const[r,l]=ht.useState({nimi:"",y_tunnus:"",alv_pros:"25.5",katu:"",postinro:"",toimipaikka:"",email:"",puhelin:"",iban:"",invoice_start_number:"1000",tasks:[]}),[u,f]=ht.useState(!1),[m,y]=ht.useState(null),[_,b]=ht.useState(""),[w,x]=ht.useState("checkbox"),[U,J]=ht.useState("#2196f3"),[W,X]=ht.useState(!0);ht.useEffect(()=>{const at=Hi(ce(xt,"settings","company_profile"),bt=>{bt.exists()&&l({...bt.data(),tasks:bt.data().tasks||[]})});return()=>at()},[]);const Z=async()=>{if(!_)return t("Nimi puuttuu!","error");if(r.tasks.some(k=>k.color===U&&k.id!==m))return t("Vri kytss!","error");let at=[...r.tasks];const bt={label:_,type:w,color:U,showInWorkView:W};m?at=at.map(k=>k.id===m?{...k,...bt}:k):at.push({id:_.toLowerCase().replace(/[^a-z0-9]/g,"_")+"_"+Date.now(),...bt}),await cm(ce(xt,"settings","company_profile"),{...r,tasks:at}),f(!1),t("Tehtv tallennettu!","success")},ut=at=>i("Poistetaanko tehtv?",async()=>await cm(ce(xt,"settings","company_profile"),{...r,tasks:r.tasks.filter(bt=>bt.id!==at)})),_t=async()=>{await cm(ce(xt,"settings","company_profile"),r),t("Tiedot tallennettu!","success")},Vt=at=>{y(at.id),b(at.label),x(at.type||"checkbox"),J(at.color||"#2196f3"),X(at.showInWorkView!==!1),f(!0)};return p.jsxs("div",{className:"admin-section",children:[p.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),p.jsx("h2",{children:"Yrityksen Asetukset"}),p.jsxs("div",{className:"card-box",children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[p.jsx("h3",{children:"1. Tytehtvt"}),p.jsx("button",{onClick:()=>{y(null),b(""),J("#2196f3"),f(!0)},className:"save-btn",children:"+ Lis"})]}),p.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:r.tasks.map(at=>p.jsxs("div",{className:"task-pill",style:{borderLeft:`5px solid ${at.color}`,opacity:at.showInWorkView===!1?.6:1},children:[p.jsxs("span",{style:{flex:1},children:[p.jsx("strong",{children:at.label})," ",p.jsxs("small",{children:["(",at.type==="fixed_monthly"?"KK-sopimus":at.type,")"]})]}),p.jsxs("div",{style:{display:"flex",gap:"5px"},children:[p.jsx("button",{onClick:()=>Vt(at),className:"icon-btn edit-btn",title:"Muokkaa",children:""}),p.jsx("button",{onClick:()=>ut(at.id),className:"icon-btn delete-btn",title:"Poista",children:""})]})]},at.id))})]}),p.jsxs("div",{className:"card-box",children:[p.jsx("h3",{children:"2. Yrityksen tiedot"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Nimi"}),p.jsx("input",{value:r.nimi,onChange:at=>l({...r,nimi:at.target.value})})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{children:[p.jsx("label",{children:"Y-tunnus"}),p.jsx("input",{value:r.y_tunnus,onChange:at=>l({...r,y_tunnus:at.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{children:"ALV %"}),p.jsx("input",{value:r.alv_pros,onChange:at=>l({...r,alv_pros:at.target.value})})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Katuosoite"}),p.jsx("input",{value:r.katu,onChange:at=>l({...r,katu:at.target.value})})]}),p.jsxs("div",{className:"form-row three-col",children:[p.jsxs("div",{children:[p.jsx("label",{children:"Postinro"}),p.jsx("input",{value:r.postinro,onChange:at=>l({...r,postinro:at.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{children:"Ptp"}),p.jsx("input",{value:r.toimipaikka,onChange:at=>l({...r,toimipaikka:at.target.value})})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Puhelin"}),p.jsx("input",{value:r.puhelin,onChange:at=>l({...r,puhelin:at.target.value})})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Email"}),p.jsx("input",{value:r.email,onChange:at=>l({...r,email:at.target.value})})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{children:[p.jsx("label",{children:"IBAN"}),p.jsx("input",{value:r.iban,onChange:at=>l({...r,iban:at.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{style:{color:"#ff9800"},children:"Seuraavan laskun nro"}),p.jsx("input",{type:"number",value:r.invoice_start_number||"",onChange:at=>l({...r,invoice_start_number:at.target.value}),style:{textAlign:"center",fontWeight:"bold"}})]})]}),p.jsx("button",{className:"save-btn",onClick:_t,children:"Tallenna"})]}),u&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsx("h3",{children:m?"Muokkaa":"Lis"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Nimi"}),p.jsx("input",{value:_,onChange:at=>b(at.target.value)})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{children:[p.jsx("label",{children:"Tyyppi"}),p.jsxs("select",{value:w,onChange:at=>x(at.target.value),children:[p.jsx("option",{value:"checkbox",children:"Perus (Tehty/Ei)"}),p.jsx("option",{value:"fixed",children:"Kntt (Kertakorvaus)"}),p.jsx("option",{value:"fixed_monthly",children:"Kiinte KK-sopimus"}),p.jsx("option",{value:"kg",children:"Mr (kg)"}),p.jsx("option",{value:"hourly",children:"Tuntity"}),p.jsx("option",{value:"extra",children:"Listy"}),p.jsx("option",{value:"material",children:"Liitety"})]})]}),p.jsxs("div",{children:[p.jsx("label",{children:"Vri"}),p.jsx("input",{type:"color",value:U,onChange:at=>J(at.target.value),style:{height:"45px",width:"100%"}})]})]}),p.jsx("div",{className:"form-group",children:p.jsxs("label",{style:{display:"flex",alignItems:"center"},children:[p.jsx("input",{type:"checkbox",className:"big-checkbox",checked:W,onChange:at=>X(at.target.checked),style:{marginRight:"10px"}}),"Nyt etusivulla"]})}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[p.jsx("button",{onClick:Z,className:"save-btn",children:"Tallenna"}),p.jsx("button",{onClick:()=>f(!1),className:"back-btn",children:"Peruuta"})]})]})})]})},R2=({asiakas:s,onBack:t,onDeleted:i,availableTasks:r,showNotification:l,requestConfirm:u})=>{const[f,m]=ht.useState({...s,contracts:s.contracts||{},group_names:s.group_names||[],street:s.street||"",zip:s.zip||"",city:s.city||"",phone:s.phone||"",email:s.email||"",payment_term_type:s.payment_term_type||"14pv",fixed_due_day:s.fixed_due_day||""}),[y,_]=ht.useState([]),[b,w]=ht.useState(""),[x,U]=ht.useState(null),[J,W]=ht.useState({isOpen:!1,mode:"add",group:null,id:null,address:"",cost_center:""});ht.useEffect(()=>{const S=gi(_e(xt,"properties"),Pn("customer_id","==",s.id));return Hi(S,C=>{_(C.docs.map(V=>({id:V.id,...V.data()})))})},[s.id]);const X=async()=>{await qi(ce(xt,"customers",s.id),f),l("Tiedot tallennettu!","success")},Z=()=>u("Poistetaanko asiakas?",async()=>{await Lm(ce(xt,"customers",s.id)),i()}),ut=(S,C,V)=>{m(N=>({...N,contracts:{...N.contracts,[S]:{...N.contracts[S],[C]:V}}}))},_t=async()=>{b&&(await qi(ce(xt,"customers",s.id),{group_names:ZR(b)}),m({...f,group_names:[...f.group_names,b]}),w(""))},Vt=async()=>{const{mode:S,group:C,id:V,address:N,cost_center:j}=J;if(!N)return l("Osoite vaaditaan!","error");S==="add"?await So(_e(xt,"properties"),{customer_id:s.id,group:C,address:N,cost_center:j,contracts:{}}):await qi(ce(xt,"properties",V),{address:N,cost_center:j}),W({...J,isOpen:!1})},at=S=>u("Poistetaanko kohde?",async()=>await Lm(ce(xt,"properties",S.id))),bt=async()=>{x&&(await qi(ce(xt,"properties",x.id),{contracts:x.contracts}),U(null),l("Hinnat tallennettu!","success"))},k=()=>{const S=new Date;if(f.payment_term_type==="fixed"){const C=parseInt(f.fixed_due_day);if(!C)return"??.??.????";let V=new Date(S.getFullYear(),S.getMonth(),C);return S.getDate()>C&&V.setMonth(V.getMonth()+1),V.toLocaleDateString("fi-FI")}else{const C=parseInt(f.payment_term_type)||14,V=new Date(S);return V.setDate(V.getDate()+C),V.toLocaleDateString("fi-FI")}};return p.jsxs("div",{className:"admin-section",children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[p.jsx("button",{onClick:t,className:"back-btn",children:" Takaisin"}),p.jsx("button",{onClick:Z,className:"save-btn",style:{background:"#d32f2f"},children:"Poista Asiakas"})]}),p.jsx("h2",{children:f.name}),p.jsxs("div",{className:"card-box",children:[p.jsx("h3",{children:"Perustiedot"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Nimi"}),p.jsx("input",{value:f.name,onChange:S=>m({...f,name:S.target.value})})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{children:[p.jsx("label",{children:"Y-tunnus"}),p.jsx("input",{value:f.y_tunnus||"",onChange:S=>m({...f,y_tunnus:S.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{children:"Tyyppi"}),p.jsxs("select",{value:f.type||"b2b",onChange:S=>m({...f,type:S.target.value}),children:[p.jsx("option",{value:"isannointi",children:"Isnninti"}),p.jsx("option",{value:"b2b",children:"Yritys"}),p.jsx("option",{value:"b2c",children:"Yksityinen"})]})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Katuosoite (Laskutus)"}),p.jsx("input",{value:f.street||"",onChange:S=>m({...f,street:S.target.value})})]}),p.jsxs("div",{className:"form-row three-col",children:[p.jsxs("div",{children:[p.jsx("label",{children:"Postinro"}),p.jsx("input",{value:f.zip||"",onChange:S=>m({...f,zip:S.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{children:"Ptp"}),p.jsx("input",{value:f.city||"",onChange:S=>m({...f,city:S.target.value})})]})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{children:[p.jsx("label",{children:"Puhelin"}),p.jsx("input",{value:f.phone||"",onChange:S=>m({...f,phone:S.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{children:"Email"}),p.jsx("input",{value:f.email||"",onChange:S=>m({...f,email:S.target.value})})]})]}),p.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#2c2c2c",borderRadius:"8px",border:"1px solid #444"},children:[p.jsx("label",{style:{color:"#ff9800",marginBottom:"10px"},children:"Maksuehto / Erpiv"}),p.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[p.jsxs("select",{value:f.payment_term_type||"14pv",onChange:S=>m({...f,payment_term_type:S.target.value}),style:{flex:1},children:[p.jsx("option",{value:"14pv",children:"14 pv netto (Yleinen)"}),p.jsx("option",{value:"7pv",children:"7 pv netto (Nopea)"}),p.jsx("option",{value:"30pv",children:"30 pv netto (Yritys)"}),p.jsx("option",{value:"fixed",children:"Kiinte erpiv"})]}),f.payment_term_type==="fixed"&&p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[p.jsx("span",{style:{fontSize:"0.9rem"},children:"Piv:"}),p.jsx("input",{type:"number",placeholder:"PP",value:f.fixed_due_day||"",onChange:S=>m({...f,fixed_due_day:S.target.value}),style:{width:"60px",textAlign:"center"},min:"1",max:"31"})]})]}),p.jsxs("p",{style:{fontSize:"0.8em",color:"#aaa",marginTop:"8px",fontStyle:"italic"},children:["Jos lasku tehdn tnn, erpivksi tulee: ",p.jsx("strong",{style:{color:"#4caf50"},children:k()})]})]}),p.jsx("button",{onClick:X,className:"save-btn",style:{marginTop:"20px",width:"100%"},children:"Tallenna muutokset"})]}),p.jsxs("div",{className:"card-box",children:[p.jsx("h3",{children:"Oletushinnasto"}),r.map(S=>p.jsx(YE,{task:S,contractData:f.contracts?.[S.id],onToggle:C=>ut(S.id,"active",C.target.checked),onPriceChange:C=>ut(S.id,"price",C.target.value)},S.id)),p.jsx("button",{onClick:X,className:"save-btn",style:{marginTop:"15px"},children:"Tallenna muutokset"})]}),p.jsxs("div",{style:{marginTop:"30px"},children:[p.jsx("h3",{children:"Kohteet ja Ryhmittely"}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[p.jsx("input",{placeholder:"Uusi Ryhm...",value:b,onChange:S=>w(S.target.value),style:{flex:1}}),p.jsx("button",{onClick:_t,className:"save-btn",children:"+ Luo Ryhm"})]}),f.group_names.map((S,C)=>{const V=y.filter(N=>N.group===S);return p.jsxs("div",{style:{border:"1px solid #444",borderRadius:"8px",marginBottom:"15px",background:"#252525"},children:[p.jsxs("div",{style:{background:"#333",padding:"10px",display:"flex",justifyContent:"space-between",borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},children:[p.jsxs("strong",{children:[" ",S]}),p.jsx("button",{onClick:()=>W({isOpen:!0,mode:"add",group:S,id:null,address:"",cost_center:""}),style:{fontSize:"0.9em",cursor:"pointer",background:"none",color:"#2196f3"},children:"+ Lis kohde"})]}),V.map(N=>p.jsxs("div",{style:{padding:"10px",borderBottom:"1px solid #333"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"bold"},children:N.address}),p.jsx("div",{style:{fontSize:"0.9em",color:"#aaa"},children:N.cost_center?`KP: ${N.cost_center}`:""})]}),p.jsxs("div",{style:{display:"flex",gap:"5px"},children:[p.jsx("button",{onClick:()=>W({isOpen:!0,mode:"edit",group:S,id:N.id,address:N.address,cost_center:N.cost_center}),className:"icon-btn edit-btn",children:""}),p.jsx("button",{onClick:()=>U(N),className:"icon-btn",style:{color:"#f57c00"},children:""}),p.jsx("button",{onClick:()=>at(N),className:"icon-btn delete-btn",children:""})]})]}),p.jsx("div",{style:{marginTop:"8px",display:"flex",gap:"5px",flexWrap:"wrap"},children:N.contracts&&r.map(j=>{const I=N.contracts[j.id];return I&&I.active?p.jsxs("span",{style:{fontSize:"0.75em",background:"#2e2e10",padding:"3px 8px",borderRadius:"4px",border:"1px solid #ffb74d",color:"#ffb74d"},children:[j.label,": ",I.price,""]},j.id):null})})]},N.id))]},C)})]}),J.isOpen&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsx("h3",{children:J.mode==="add"?"Lis kohde":"Muokkaa"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Osoite"}),p.jsx("input",{value:J.address,onChange:S=>W({...J,address:S.target.value}),autoFocus:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Kustannuspaikka (KP)"}),p.jsx("input",{value:J.cost_center,onChange:S=>W({...J,cost_center:S.target.value})})]}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[p.jsx("button",{onClick:Vt,className:"save-btn",children:"Tallenna"}),p.jsx("button",{onClick:()=>W({...J,isOpen:!1}),className:"back-btn",children:"Peruuta"})]})]})}),x&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsxs("h3",{children:["Hinnasto: ",x.address]}),p.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto"},children:r.map(S=>S.type==="extra"||S.type==="material"?null:p.jsx("div",{style:{marginBottom:"10px"},children:p.jsx(YE,{task:S,isOverridden:!0,contractData:x.contracts?.[S.id],onToggle:C=>{const V={...x.contracts};V[S.id]||(V[S.id]={}),V[S.id].active=C.target.checked,U({...x,contracts:V})},onPriceChange:C=>{const V={...x.contracts};V[S.id].price=C.target.value,U({...x,contracts:V})}})},S.id))}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[p.jsx("button",{onClick:bt,className:"save-btn",children:"Tallenna"}),p.jsx("button",{onClick:()=>U(null),className:"back-btn",children:"Peruuta"})]})]})})]})},C2=({onBack:s,availableTasks:t,showNotification:i,requestConfirm:r})=>{const[l,u]=ht.useState([]),[f,m]=ht.useState(null);ht.useEffect(()=>{const U=gi(_e(xt,"customers"),Yh("name"));return Hi(U,J=>u(J.docs.map(W=>({id:W.id,...W.data()}))))},[]);const y=async()=>{const U=await So(_e(xt,"customers"),{name:"Uusi Asiakas",type:"b2b",created_at:new Date,contracts:{},group_names:[]});m({id:U.id,name:"",type:"b2b",contracts:{},group_names:[]})};if(f)return p.jsx(R2,{asiakas:f,onBack:()=>m(null),onDeleted:()=>m(null),availableTasks:t,showNotification:i,requestConfirm:r});const _=l.filter(U=>U.type==="isannointi"),b=l.filter(U=>U.type==="b2b"),w=l.filter(U=>U.type==="b2c"),x=(U,J,W)=>p.jsxs("div",{style:{marginBottom:"20px"},children:[p.jsxs("h3",{style:{color:"#aaa",fontSize:"1rem",borderBottom:"1px solid #333",paddingBottom:"5px",marginBottom:"10px"},children:[W," ",U," (",J.length,")"]}),J.length===0&&p.jsx("p",{style:{color:"#666",fontStyle:"italic"},children:"Ei asiakkaita."}),J.map(X=>p.jsxs("div",{className:"card-box",onClick:()=>m(X),style:{cursor:"pointer",display:"flex",justifyContent:"space-between",padding:"15px",marginBottom:"8px",borderLeft:`4px solid ${U==="Isnninti"?"#2196f3":U==="Yritykset"?"#ff9800":"#4caf50"}`},children:[p.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:X.name}),p.jsx("span",{style:{color:"#2196f3"},children:"Avaa "})]},X.id))]});return p.jsxs("div",{className:"admin-section",children:[p.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"20px 0"},children:[p.jsx("h2",{children:"Asiakasrekisteri"}),p.jsx("button",{onClick:y,className:"save-btn",children:"+ Uusi Asiakas"})]}),x("Isnninti",_,""),x("Yritykset",b,""),x("Yksityiset",w,"")]})};function I2(){const[s,t]=ht.useState(null),[i,r]=ht.useState(!0),[l,u]=ht.useState("tyot"),[f,m]=ht.useState([]),[y,_]=ht.useState(null),[b,w]=ht.useState({isOpen:!1,message:"",onConfirm:null});ht.useEffect(()=>{const X=eI(xh,Z=>{t(Z),r(!1)});return()=>X()},[]);const x=(X,Z="success")=>{_({msg:X,type:Z}),setTimeout(()=>_(null),3e3)},U=(X,Z)=>{w({isOpen:!0,message:X,onConfirm:()=>{Z(),w({isOpen:!1,message:"",onConfirm:null})}})};ht.useEffect(()=>{if(!s)return;const X=Hi(ce(xt,"settings","company_profile"),Z=>{Z.exists()&&Z.data().tasks?m(Z.data().tasks):m([])});return()=>X()},[s]);const J=async()=>{await nI(xh),u("tyot")},W=()=>p.jsxs("div",{className:"admin-section",style:{textAlign:"center"},children:[p.jsx("h2",{children:"Toimiston Ohjauspaneeli"}),p.jsxs("div",{className:"button-grid",style:{marginTop:"30px"},children:[p.jsx("div",{className:"work-button",style:{backgroundColor:"#455a64"},onClick:()=>u("settings"),children:p.jsx("h3",{children:" Omat Tiedot & Tyt"})}),p.jsx("div",{className:"work-button",style:{backgroundColor:"#00695c"},onClick:()=>u("customers"),children:p.jsx("h3",{children:" Asiakasrekisteri"})}),p.jsx("div",{className:"work-button",style:{backgroundColor:"#795548"},onClick:()=>u("invoicing"),children:p.jsx("h3",{children:" Laskutus"})}),p.jsx("div",{className:"work-button",style:{backgroundColor:"#37474f"},onClick:()=>u("archive"),children:p.jsx("h3",{children:" Laskuarkisto"})}),p.jsx("div",{className:"work-button",style:{backgroundColor:"#607d8b"},onClick:()=>u("instructions"),children:p.jsx("h3",{children:" Ohjekirja"})})]}),p.jsxs("button",{onClick:J,className:"back-btn",style:{marginTop:"40px",borderColor:"#d32f2f",color:"#d32f2f"},children:["Kirjaudu ulos (",s.email,")"]})]});return i?p.jsx("div",{style:{color:"white",textAlign:"center",marginTop:"50px"},children:"Ladataan..."}):s?p.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"10px"},children:[p.jsx("div",{className:"logo-container",children:p.jsx("img",{src:E2,alt:"Krkln Notar Oy",className:"app-logo"})}),p.jsx(T2,{msg:y?.msg,type:y?.type}),p.jsx(b2,{isOpen:b.isOpen,message:b.message,onConfirm:b.onConfirm,onCancel:()=>w({...b,isOpen:!1})}),p.jsx(S2,{currentView:l,setCurrentView:u}),l==="tyot"&&p.jsx(w2,{availableTasks:f,onOpenLog:()=>u("log"),showNotification:x}),l==="log"&&p.jsx(A2,{onBack:()=>u("tyot"),showNotification:x,requestConfirm:U}),l==="admin"&&p.jsx(W,{}),l==="settings"&&p.jsx(x2,{onBack:()=>u("admin"),showNotification:x,requestConfirm:U}),l==="customers"&&p.jsx(C2,{onBack:()=>u("admin"),availableTasks:f,showNotification:x,requestConfirm:U}),l==="invoicing"&&p.jsx(g2,{onBack:()=>u("admin"),showNotification:x}),l==="archive"&&p.jsx(y2,{onBack:()=>u("admin"),showNotification:x,requestConfirm:U}),l==="instructions"&&p.jsx(_2,{onBack:()=>u("admin")})]}):p.jsx(v2,{})}sA.createRoot(document.getElementById("root")).render(p.jsx(ht.StrictMode,{children:p.jsx(I2,{})}));
