(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=i(l);fetch(l.href,u)}})();var Qd={exports:{}},Dl={};var ov;function XS(){if(ov)return Dl;ov=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:r,key:f,ref:l!==void 0?l:null,props:u}}return Dl.Fragment=t,Dl.jsx=i,Dl.jsxs=i,Dl}var lv;function JS(){return lv||(lv=1,Qd.exports=XS()),Qd.exports}var m=JS(),$d={exports:{}},Nt={};var uv;function WS(){if(uv)return Nt;uv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),R=Symbol.iterator;function z(C){return C===null||typeof C!="object"?null:(C=R&&C[R]||C["@@iterator"],typeof C=="function"?C:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,Q={};function W(C,L,nt){this.props=C,this.context=L,this.refs=Q,this.updater=nt||Z}W.prototype.isReactComponent={},W.prototype.setState=function(C,L){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,L,"setState")},W.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function ut(){}ut.prototype=W.prototype;function gt(C,L,nt){this.props=C,this.context=L,this.refs=Q,this.updater=nt||Z}var Mt=gt.prototype=new ut;Mt.constructor=gt,J(Mt,W.prototype),Mt.isPureReactComponent=!0;var jt=Array.isArray;function Ct(){}var N={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function A(C,L,nt){var ot=nt.ref;return{$$typeof:s,type:C,key:L,ref:ot!==void 0?ot:null,props:nt}}function O(C,L){return A(C.type,L,C.props)}function k(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function j(C){var L={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(nt){return L[nt]})}var I=/\/+/g;function Ut(C,L){return typeof C=="object"&&C!==null&&C.key!=null?j(""+C.key):L.toString(36)}function B(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(Ct,Ct):(C.status="pending",C.then(function(L){C.status==="pending"&&(C.status="fulfilled",C.value=L)},function(L){C.status==="pending"&&(C.status="rejected",C.reason=L)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function M(C,L,nt,ot,ct){var ht=typeof C;(ht==="undefined"||ht==="boolean")&&(C=null);var vt=!1;if(C===null)vt=!0;else switch(ht){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(C.$$typeof){case s:case t:vt=!0;break;case b:return vt=C._init,M(vt(C._payload),L,nt,ot,ct)}}if(vt)return ct=ct(C),vt=ot===""?"."+Ut(C,0):ot,jt(ct)?(nt="",vt!=null&&(nt=vt.replace(I,"$&/")+"/"),M(ct,L,nt,"",function(Jt){return Jt})):ct!=null&&(k(ct)&&(ct=O(ct,nt+(ct.key==null||C&&C.key===ct.key?"":(""+ct.key).replace(I,"$&/")+"/")+vt)),L.push(ct)),1;vt=0;var At=ot===""?".":ot+":";if(jt(C))for(var Et=0;Et<C.length;Et++)ot=C[Et],ht=At+Ut(ot,Et),vt+=M(ot,L,nt,ht,ct);else if(Et=z(C),typeof Et=="function")for(C=Et.call(C),Et=0;!(ot=C.next()).done;)ot=ot.value,ht=At+Ut(ot,Et++),vt+=M(ot,L,nt,ht,ct);else if(ht==="object"){if(typeof C.then=="function")return M(B(C),L,nt,ot,ct);throw L=String(C),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return vt}function $(C,L,nt){if(C==null)return C;var ot=[],ct=0;return M(C,ot,"","",function(ht){return L.call(nt,ht,ct++)}),ot}function at(C){if(C._status===-1){var L=C._result;L=L(),L.then(function(nt){(C._status===0||C._status===-1)&&(C._status=1,C._result=nt)},function(nt){(C._status===0||C._status===-1)&&(C._status=2,C._result=nt)}),C._status===-1&&(C._status=0,C._result=L)}if(C._status===1)return C._result.default;throw C._result}var U=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},rt={map:$,forEach:function(C,L,nt){$(C,function(){L.apply(this,arguments)},nt)},count:function(C){var L=0;return $(C,function(){L++}),L},toArray:function(C){return $(C,function(L){return L})||[]},only:function(C){if(!k(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Nt.Activity=x,Nt.Children=rt,Nt.Component=W,Nt.Fragment=i,Nt.Profiler=l,Nt.PureComponent=gt,Nt.StrictMode=r,Nt.Suspense=y,Nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Nt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return N.H.useMemoCache(C)}},Nt.cache=function(C){return function(){return C.apply(null,arguments)}},Nt.cacheSignal=function(){return null},Nt.cloneElement=function(C,L,nt){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var ot=J({},C.props),ct=C.key;if(L!=null)for(ht in L.key!==void 0&&(ct=""+L.key),L)!S.call(L,ht)||ht==="key"||ht==="__self"||ht==="__source"||ht==="ref"&&L.ref===void 0||(ot[ht]=L[ht]);var ht=arguments.length-2;if(ht===1)ot.children=nt;else if(1<ht){for(var vt=Array(ht),At=0;At<ht;At++)vt[At]=arguments[At+2];ot.children=vt}return A(C.type,ct,ot)},Nt.createContext=function(C){return C={$$typeof:f,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},Nt.createElement=function(C,L,nt){var ot,ct={},ht=null;if(L!=null)for(ot in L.key!==void 0&&(ht=""+L.key),L)S.call(L,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(ct[ot]=L[ot]);var vt=arguments.length-2;if(vt===1)ct.children=nt;else if(1<vt){for(var At=Array(vt),Et=0;Et<vt;Et++)At[Et]=arguments[Et+2];ct.children=At}if(C&&C.defaultProps)for(ot in vt=C.defaultProps,vt)ct[ot]===void 0&&(ct[ot]=vt[ot]);return A(C,ht,ct)},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(C){return{$$typeof:p,render:C}},Nt.isValidElement=k,Nt.lazy=function(C){return{$$typeof:b,_payload:{_status:-1,_result:C},_init:at}},Nt.memo=function(C,L){return{$$typeof:_,type:C,compare:L===void 0?null:L}},Nt.startTransition=function(C){var L=N.T,nt={};N.T=nt;try{var ot=C(),ct=N.S;ct!==null&&ct(nt,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(Ct,U)}catch(ht){U(ht)}finally{L!==null&&nt.types!==null&&(L.types=nt.types),N.T=L}},Nt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Nt.use=function(C){return N.H.use(C)},Nt.useActionState=function(C,L,nt){return N.H.useActionState(C,L,nt)},Nt.useCallback=function(C,L){return N.H.useCallback(C,L)},Nt.useContext=function(C){return N.H.useContext(C)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(C,L){return N.H.useDeferredValue(C,L)},Nt.useEffect=function(C,L){return N.H.useEffect(C,L)},Nt.useEffectEvent=function(C){return N.H.useEffectEvent(C)},Nt.useId=function(){return N.H.useId()},Nt.useImperativeHandle=function(C,L,nt){return N.H.useImperativeHandle(C,L,nt)},Nt.useInsertionEffect=function(C,L){return N.H.useInsertionEffect(C,L)},Nt.useLayoutEffect=function(C,L){return N.H.useLayoutEffect(C,L)},Nt.useMemo=function(C,L){return N.H.useMemo(C,L)},Nt.useOptimistic=function(C,L){return N.H.useOptimistic(C,L)},Nt.useReducer=function(C,L,nt){return N.H.useReducer(C,L,nt)},Nt.useRef=function(C){return N.H.useRef(C)},Nt.useState=function(C){return N.H.useState(C)},Nt.useSyncExternalStore=function(C,L,nt){return N.H.useSyncExternalStore(C,L,nt)},Nt.useTransition=function(){return N.H.useTransition()},Nt.version="19.2.3",Nt}var cv;function Hm(){return cv||(cv=1,$d.exports=WS()),$d.exports}var dt=Hm(),Xd={exports:{}},Ol={},Jd={exports:{}},Wd={};var hv;function ZS(){return hv||(hv=1,(function(s){function t(M,$){var at=M.length;M.push($);t:for(;0<at;){var U=at-1>>>1,rt=M[U];if(0<l(rt,$))M[U]=$,M[at]=rt,at=U;else break t}}function i(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var $=M[0],at=M.pop();if(at!==$){M[0]=at;t:for(var U=0,rt=M.length,C=rt>>>1;U<C;){var L=2*(U+1)-1,nt=M[L],ot=L+1,ct=M[ot];if(0>l(nt,at))ot<rt&&0>l(ct,nt)?(M[U]=ct,M[ot]=at,U=ot):(M[U]=nt,M[L]=at,U=L);else if(ot<rt&&0>l(ct,at))M[U]=ct,M[ot]=at,U=ot;else break t}}return $}function l(M,$){var at=M.sortIndex-$.sortIndex;return at!==0?at:M.id-$.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var y=[],_=[],b=1,x=null,R=3,z=!1,Z=!1,J=!1,Q=!1,W=typeof setTimeout=="function"?setTimeout:null,ut=typeof clearTimeout=="function"?clearTimeout:null,gt=typeof setImmediate<"u"?setImmediate:null;function Mt(M){for(var $=i(_);$!==null;){if($.callback===null)r(_);else if($.startTime<=M)r(_),$.sortIndex=$.expirationTime,t(y,$);else break;$=i(_)}}function jt(M){if(J=!1,Mt(M),!Z)if(i(y)!==null)Z=!0,Ct||(Ct=!0,j());else{var $=i(_);$!==null&&B(jt,$.startTime-M)}}var Ct=!1,N=-1,S=5,A=-1;function O(){return Q?!0:!(s.unstable_now()-A<S)}function k(){if(Q=!1,Ct){var M=s.unstable_now();A=M;var $=!0;try{t:{Z=!1,J&&(J=!1,ut(N),N=-1),z=!0;var at=R;try{e:{for(Mt(M),x=i(y);x!==null&&!(x.expirationTime>M&&O());){var U=x.callback;if(typeof U=="function"){x.callback=null,R=x.priorityLevel;var rt=U(x.expirationTime<=M);if(M=s.unstable_now(),typeof rt=="function"){x.callback=rt,Mt(M),$=!0;break e}x===i(y)&&r(y),Mt(M)}else r(y);x=i(y)}if(x!==null)$=!0;else{var C=i(_);C!==null&&B(jt,C.startTime-M),$=!1}}break t}finally{x=null,R=at,z=!1}$=void 0}}finally{$?j():Ct=!1}}}var j;if(typeof gt=="function")j=function(){gt(k)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ut=I.port2;I.port1.onmessage=k,j=function(){Ut.postMessage(null)}}else j=function(){W(k,0)};function B(M,$){N=W(function(){M(s.unstable_now())},$)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(M){M.callback=null},s.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<M?Math.floor(1e3/M):5},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_next=function(M){switch(R){case 1:case 2:case 3:var $=3;break;default:$=R}var at=R;R=$;try{return M()}finally{R=at}},s.unstable_requestPaint=function(){Q=!0},s.unstable_runWithPriority=function(M,$){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var at=R;R=M;try{return $()}finally{R=at}},s.unstable_scheduleCallback=function(M,$,at){var U=s.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?U+at:U):at=U,M){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=at+rt,M={id:b++,callback:$,priorityLevel:M,startTime:at,expirationTime:rt,sortIndex:-1},at>U?(M.sortIndex=at,t(_,M),i(y)===null&&M===i(_)&&(J?(ut(N),N=-1):J=!0,B(jt,at-U))):(M.sortIndex=rt,t(y,M),Z||z||(Z=!0,Ct||(Ct=!0,j()))),M},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(M){var $=R;return function(){var at=R;R=$;try{return M.apply(this,arguments)}finally{R=at}}}})(Wd)),Wd}var fv;function tA(){return fv||(fv=1,Jd.exports=ZS()),Jd.exports}var Zd={exports:{}},hn={};var dv;function eA(){if(dv)return hn;dv=1;var s=Hm();function t(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)_+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(y,_,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:x==null?null:""+x,children:y,containerInfo:_,implementation:b}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hn.createPortal=function(y,_){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(y,_,null,b)},hn.flushSync=function(y){var _=f.T,b=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=_,r.p=b,r.d.f()}},hn.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(y,_))},hn.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},hn.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var b=_.as,x=p(b,_.crossOrigin),R=typeof _.integrity=="string"?_.integrity:void 0,z=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;b==="style"?r.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:x,integrity:R,fetchPriority:z}):b==="script"&&r.d.X(y,{crossOrigin:x,integrity:R,fetchPriority:z,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},hn.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var b=p(_.as,_.crossOrigin);r.d.M(y,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(y)},hn.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var b=_.as,x=p(b,_.crossOrigin);r.d.L(y,b,{crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},hn.preloadModule=function(y,_){if(typeof y=="string")if(_){var b=p(_.as,_.crossOrigin);r.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(y)},hn.requestFormReset=function(y){r.d.r(y)},hn.unstable_batchedUpdates=function(y,_){return y(_)},hn.useFormState=function(y,_,b){return f.H.useFormState(y,_,b)},hn.useFormStatus=function(){return f.H.useHostTransitionStatus()},hn.version="19.2.3",hn}var mv;function nA(){if(mv)return Zd.exports;mv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Zd.exports=eA(),Zd.exports}var pv;function iA(){if(pv)return Ol;pv=1;var s=tA(),t=Hm(),i=nA();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function y(e){if(u(e)!==e)throw Error(r(188))}function _(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,o=n;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return y(h),e;if(d===o)return y(h),n;d=d.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=d;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,o=d;break}if(T===o){v=!0,o=h,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,o=h;break}if(T===o){v=!0,o=d,a=h;break}T=T.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function b(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=b(e),n!==null)return n;e=e.sibling}return null}var x=Object.assign,R=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),Z=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),ut=Symbol.for("react.consumer"),gt=Symbol.for("react.context"),Mt=Symbol.for("react.forward_ref"),jt=Symbol.for("react.suspense"),Ct=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function j(e){return e===null||typeof e!="object"?null:(e=k&&e[k]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function Ut(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case J:return"Fragment";case W:return"Profiler";case Q:return"StrictMode";case jt:return"Suspense";case Ct:return"SuspenseList";case A:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Z:return"Portal";case gt:return e.displayName||"Context";case ut:return(e._context.displayName||"Context")+".Consumer";case Mt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case N:return n=e.displayName||null,n!==null?n:Ut(e.type)||"Memo";case S:n=e._payload,e=e._init;try{return Ut(e(n))}catch{}}return null}var B=Array.isArray,M=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at={pending:!1,data:null,method:null,action:null},U=[],rt=-1;function C(e){return{current:e}}function L(e){0>rt||(e.current=U[rt],U[rt]=null,rt--)}function nt(e,n){rt++,U[rt]=e.current,e.current=n}var ot=C(null),ct=C(null),ht=C(null),vt=C(null);function At(e,n){switch(nt(ht,n),nt(ct,e),nt(ot,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?k_(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=k_(n),e=N_(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(ot),nt(ot,e)}function Et(){L(ot),L(ct),L(ht)}function Jt(e){e.memoizedState!==null&&nt(vt,e);var n=ot.current,a=N_(n,e.type);n!==a&&(nt(ct,e),nt(ot,a))}function Ke(e){ct.current===e&&(L(ot),L(ct)),vt.current===e&&(L(vt),Cl._currentValue=at)}var tn,fe;function xe(e){if(tn===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);tn=n&&n[1]||"",fe=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tn+e+fe}var vi=!1;function Ei(e,n){if(!e||vi)return"";vi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(Y){var G=Y}Reflect.construct(e,[],it)}else{try{it.call()}catch(Y){G=Y}e.call(it.prototype)}}else{try{throw Error()}catch(Y){G=Y}(it=e())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var D=v.split(`
`),F=T.split(`
`);for(h=o=0;o<D.length&&!D[o].includes("DetermineComponentFrameRoot");)o++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(o===D.length||h===F.length)for(o=D.length-1,h=F.length-1;1<=o&&0<=h&&D[o]!==F[h];)h--;for(;1<=o&&0<=h;o--,h--)if(D[o]!==F[h]){if(o!==1||h!==1)do if(o--,h--,0>h||D[o]!==F[h]){var X=`
`+D[o].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=o&&0<=h);break}}}finally{vi=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?xe(a):""}function Zi(e,n){switch(e.tag){case 26:case 27:case 5:return xe(e.type);case 16:return xe("Lazy");case 13:return e.child!==n&&n!==null?xe("Suspense Fallback"):xe("Suspense");case 19:return xe("SuspenseList");case 0:case 15:return Ei(e.type,!1);case 11:return Ei(e.type.render,!1);case 1:return Ei(e.type,!0);case 31:return xe("Activity");default:return""}}function Is(e){try{var n="",a=null;do n+=Zi(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var de=Object.prototype.hasOwnProperty,De=s.unstable_scheduleCallback,qn=s.unstable_cancelCallback,ya=s.unstable_shouldYield,It=s.unstable_requestPaint,_t=s.unstable_now,ee=s.unstable_getCurrentPriorityLevel,Oe=s.unstable_ImmediatePriority,$e=s.unstable_UserBlockingPriority,en=s.unstable_NormalPriority,gn=s.unstable_LowPriority,Hn=s.unstable_IdlePriority,Tn=s.log,kr=s.unstable_setDisableYieldValue,Pt=null,_e=null;function Ve(e){if(typeof Tn=="function"&&kr(e),_e&&typeof _e.setStrictMode=="function")try{_e.setStrictMode(Pt,e)}catch{}}var me=Math.clz32?Math.clz32:Eu,vu=Math.log,_a=Math.LN2;function Eu(e){return e>>>=0,e===0?32:31-(vu(e)/_a|0)|0}var Ti=256,Nr=262144,Me=4194304;function bi(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Si(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var T=o&134217727;return T!==0?(o=T&~d,o!==0?h=bi(o):(v&=T,v!==0?h=bi(v):a||(a=T&~e,a!==0&&(h=bi(a))))):(T=o&~d,T!==0?h=bi(T):v!==0?h=bi(v):a||(a=o&~e,a!==0&&(h=bi(a)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:h}function ri(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Jh(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tu(){var e=Me;return Me<<=1,(Me&62914560)===0&&(Me=4194304),e}function Ai(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Dr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Wh(e,n,a,o,h,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var T=e.entanglements,D=e.expirationTimes,F=e.hiddenUpdates;for(a=v&~a;0<a;){var X=31-me(a),it=1<<X;T[X]=0,D[X]=-1;var G=F[X];if(G!==null)for(F[X]=null,X=0;X<G.length;X++){var Y=G[X];Y!==null&&(Y.lane&=-536870913)}a&=~it}o!==0&&Or(e,o,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~n))}function Or(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-me(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function Oo(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-me(a),h=1<<o;h&n|e[o]&n&&(e[o]|=n),a&=~h}}function Vo(e,n){var a=n&-n;return a=(a&42)!==0?1:Vr(a),(a&(e.suspendedLanes|n))!==0?0:a}function Vr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ts(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function bu(){var e=$.p;return e!==0?e:(e=window.event,e===void 0?32:tv(e.type))}function ai(e,n){var a=$.p;try{return $.p=e,n()}finally{$.p=a}}var oi=Math.random().toString(36).slice(2),je="__reactFiber$"+oi,Xe="__reactProps$"+oi,wi="__reactContainer$"+oi,va="__reactEvents$"+oi,Zh="__reactListeners$"+oi,Su="__reactHandles$"+oi,Au="__reactResources$"+oi,xi="__reactMarker$"+oi;function Ea(e){delete e[je],delete e[Xe],delete e[va],delete e[Zh],delete e[Su]}function Ri(e){var n=e[je];if(n)return n;for(var a=e.parentNode;a;){if(n=a[wi]||a[je]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=P_(e);e!==null;){if(a=e[je])return a;e=P_(e)}return n}e=a,a=e.parentNode}return null}function Fn(e){if(e=e[je]||e[wi]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Nn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function Ci(e){var n=e[Au];return n||(n=e[Au]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Le(e){e[xi]=!0}var Mo=new Set,jo={};function Ii(e,n){ki(e,n),ki(e+"Capture",n)}function ki(e,n){for(jo[e]=n,e=0;e<n.length;e++)Mo.add(n[e])}var Lo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Po={},Uo={};function wu(e){return de.call(Uo,e)?!0:de.call(Po,e)?!1:Lo.test(e)?Uo[e]=!0:(Po[e]=!0,!1)}function Ta(e,n,a){if(wu(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Dn(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Pe(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function Je(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ks(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function zo(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ne(e){if(!e._valueTracker){var n=ks(e)?"checked":"value";e._valueTracker=zo(e,n,""+e[n])}}function Mr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=ks(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function Ni(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var jr=/[\n"\\]/g;function bn(e){return e.replace(jr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ba(e,n,a,o,h,d,v,T){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Je(n)):e.value!==""+Je(n)&&(e.value=""+Je(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?Bo(e,v,Je(n)):a!=null?Bo(e,v,Je(a)):o!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+Je(T):e.removeAttribute("name")}function xu(e,n,a,o,h,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){ne(e);return}a=a!=null?""+Je(a):"",n=n!=null?""+Je(n):a,T||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=T?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),ne(e)}function Bo(e,n,a){n==="number"&&Ni(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ns(e,n,a,o){if(e=e.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=n.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Je(a),n=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function Ru(e,n,a){if(n!=null&&(n=""+Je(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Je(a):""}function Ds(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(r(92));if(B(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=Je(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),ne(e)}function Sn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Cu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qo(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||Cu.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Ho(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&qo(e,h,o)}else for(var d in n)n.hasOwnProperty(d)&&qo(e,d,n[d])}function Sa(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Os=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Aa(e){return Os.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function li(){}var Fo=null;function Gn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vs=null,Di=null;function Lr(e){var n=Fn(e);if(n&&(e=n.stateNode)){var a=e[Xe]||null;t:switch(e=n.stateNode,n.type){case"input":if(ba(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+bn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var h=o[Xe]||null;if(!h)throw Error(r(90));ba(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&Mr(o)}break t;case"textarea":Ru(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Ns(e,!!a.multiple,n,!1)}}}var wa=!1;function Ms(e,n,a){if(wa)return e(n,a);wa=!0;try{var o=e(n);return o}finally{if(wa=!1,(Vs!==null||Di!==null)&&(bc(),Vs&&(n=Vs,e=Di,Di=Vs=null,Lr(n),e)))for(n=0;n<e.length;n++)Lr(e[n])}}function ui(e,n){var a=e.stateNode;if(a===null)return null;var o=a[Xe]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pr=!1;if(Kn)try{var re={};Object.defineProperty(re,"passive",{get:function(){Pr=!0}}),window.addEventListener("test",re,re),window.removeEventListener("test",re,re)}catch{Pr=!1}var Oi=null,Go=null,Ur=null;function Ko(){if(Ur)return Ur;var e,n=Go,a=n.length,o,h="value"in Oi?Oi.value:Oi.textContent,d=h.length;for(e=0;e<a&&n[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&n[a-o]===h[d-o];o++);return Ur=h.slice(e,1<o?1-o:void 0)}function zr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function es(){return!0}function ci(){return!1}function nn(e){function n(a,o,h,d,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(a=e[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?es:ci,this.isPropagationStopped=ci,this}return x(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),n}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=nn(ns),js=x({},ns,{view:0,detail:0}),Yo=nn(js),Ls,xa,Mi,Ra=x({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mi&&(Mi&&e.type==="mousemove"?(Ls=e.screenX-Mi.screenX,xa=e.screenY-Mi.screenY):xa=Ls=0,Mi=e),Ls)},movementY:function(e){return"movementY"in e?e.movementY:xa}}),Qo=nn(Ra),Br=x({},Ra,{dataTransfer:0}),ku=nn(Br),Nu=x({},js,{relatedTarget:0}),qr=nn(Nu),$o=x({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),Du=nn($o),Ca=x({},ns,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ou=nn(Ca),Vu=x({},ns,{data:0}),ji=nn(Vu),Mu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pu(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Lu[e])?!!n[e]:!1}function Ps(){return Pu}var yn=x({},js,{key:function(e){if(e.key){var n=Mu[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=zr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ju[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(e){return e.type==="keypress"?zr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Uu=nn(yn),zu=x({},Ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),is=nn(zu),c=x({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),g=nn(c),E=x({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=nn(E),q=x({},Ra,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),K=nn(q),lt=x({},ns,{newState:0,oldState:0}),Ot=nn(lt),Re=[9,13,27,32],Wt=Kn&&"CompositionEvent"in window,ve=null;Kn&&"documentMode"in document&&(ve=document.documentMode);var Yn=Kn&&"TextEvent"in window&&!ve,Li=Kn&&(!Wt||ve&&8<ve&&11>=ve),hi=" ",fi=!1;function Hr(e,n){switch(e){case"keyup":return Re.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ia(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ka=!1;function Eb(e,n){switch(e){case"compositionend":return Ia(n);case"keypress":return n.which!==32?null:(fi=!0,hi);case"textInput":return e=n.data,e===hi&&fi?null:e;default:return null}}function Tb(e,n){if(ka)return e==="compositionend"||!Wt&&Hr(e,n)?(e=Ko(),Ur=Go=Oi=null,ka=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Li&&n.locale!=="ko"?null:n.data;default:return null}}var bb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bp(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!bb[e.type]:n==="textarea"}function qp(e,n,a,o){Vs?Di?Di.push(o):Di=[o]:Vs=o,n=Ic(n,"onChange"),0<n.length&&(a=new Vi("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var Xo=null,Jo=null;function Sb(e){A_(e,0)}function Bu(e){var n=Nn(e);if(Mr(n))return e}function Hp(e,n){if(e==="change")return n}var Fp=!1;if(Kn){var tf;if(Kn){var ef="oninput"in document;if(!ef){var Gp=document.createElement("div");Gp.setAttribute("oninput","return;"),ef=typeof Gp.oninput=="function"}tf=ef}else tf=!1;Fp=tf&&(!document.documentMode||9<document.documentMode)}function Kp(){Xo&&(Xo.detachEvent("onpropertychange",Yp),Jo=Xo=null)}function Yp(e){if(e.propertyName==="value"&&Bu(Jo)){var n=[];qp(n,Jo,e,Gn(e)),Ms(Sb,n)}}function Ab(e,n,a){e==="focusin"?(Kp(),Xo=n,Jo=a,Xo.attachEvent("onpropertychange",Yp)):e==="focusout"&&Kp()}function wb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bu(Jo)}function xb(e,n){if(e==="click")return Bu(n)}function Rb(e,n){if(e==="input"||e==="change")return Bu(n)}function Cb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var On=typeof Object.is=="function"?Object.is:Cb;function Wo(e,n){if(On(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!de.call(n,h)||!On(e[h],n[h]))return!1}return!0}function Qp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $p(e,n){var a=Qp(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Qp(a)}}function Xp(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Xp(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Jp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ni(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Ni(e.document)}return n}function nf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Ib=Kn&&"documentMode"in document&&11>=document.documentMode,Na=null,sf=null,Zo=null,rf=!1;function Wp(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;rf||Na==null||Na!==Ni(o)||(o=Na,"selectionStart"in o&&nf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Zo&&Wo(Zo,o)||(Zo=o,o=Ic(sf,"onSelect"),0<o.length&&(n=new Vi("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=Na)))}function Fr(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Da={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},af={},Zp={};Kn&&(Zp=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function Gr(e){if(af[e])return af[e];if(!Da[e])return e;var n=Da[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Zp)return af[e]=n[a];return e}var tg=Gr("animationend"),eg=Gr("animationiteration"),ng=Gr("animationstart"),kb=Gr("transitionrun"),Nb=Gr("transitionstart"),Db=Gr("transitioncancel"),ig=Gr("transitionend"),sg=new Map,of="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");of.push("scrollEnd");function di(e,n){sg.set(e,n),Ii(n,[e])}var qu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Qn=[],Oa=0,lf=0;function Hu(){for(var e=Oa,n=lf=Oa=0;n<e;){var a=Qn[n];Qn[n++]=null;var o=Qn[n];Qn[n++]=null;var h=Qn[n];Qn[n++]=null;var d=Qn[n];if(Qn[n++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&rg(a,h,d)}}function Fu(e,n,a,o){Qn[Oa++]=e,Qn[Oa++]=n,Qn[Oa++]=a,Qn[Oa++]=o,lf|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function uf(e,n,a,o){return Fu(e,n,a,o),Gu(e)}function Kr(e,n){return Fu(e,null,null,n),Gu(e)}function rg(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&n!==null&&(h=31-me(a),e=d.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=a|536870912),d):null}function Gu(e){if(50<Tl)throw Tl=0,_d=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Va={};function Ob(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(e,n,a,o){return new Ob(e,n,a,o)}function cf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ss(e,n){var a=e.alternate;return a===null?(a=Vn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ag(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Ku(e,n,a,o,h,d){var v=0;if(o=e,typeof e=="function")cf(e)&&(v=1);else if(typeof e=="string")v=PS(e,a,ot.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case A:return e=Vn(31,a,n,h),e.elementType=A,e.lanes=d,e;case J:return Yr(a.children,h,d,n);case Q:v=8,h|=24;break;case W:return e=Vn(12,a,n,h|2),e.elementType=W,e.lanes=d,e;case jt:return e=Vn(13,a,n,h),e.elementType=jt,e.lanes=d,e;case Ct:return e=Vn(19,a,n,h),e.elementType=Ct,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gt:v=10;break t;case ut:v=9;break t;case Mt:v=11;break t;case N:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(r(130,e===null?"null":typeof e,"")),o=null}return n=Vn(v,a,n,h),n.elementType=e,n.type=o,n.lanes=d,n}function Yr(e,n,a,o){return e=Vn(7,e,o,n),e.lanes=a,e}function hf(e,n,a){return e=Vn(6,e,null,n),e.lanes=a,e}function og(e){var n=Vn(18,null,null,0);return n.stateNode=e,n}function ff(e,n,a){return n=Vn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var lg=new WeakMap;function $n(e,n){if(typeof e=="object"&&e!==null){var a=lg.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Is(n)},lg.set(e,n),n)}return{value:e,source:n,stack:Is(n)}}var Ma=[],ja=0,Yu=null,tl=0,Xn=[],Jn=0,Us=null,Pi=1,Ui="";function rs(e,n){Ma[ja++]=tl,Ma[ja++]=Yu,Yu=e,tl=n}function ug(e,n,a){Xn[Jn++]=Pi,Xn[Jn++]=Ui,Xn[Jn++]=Us,Us=e;var o=Pi;e=Ui;var h=32-me(o)-1;o&=~(1<<h),a+=1;var d=32-me(n)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Pi=1<<32-me(n)+h|a<<h|o,Ui=d+e}else Pi=1<<d|a<<h|o,Ui=e}function df(e){e.return!==null&&(rs(e,1),ug(e,1,0))}function mf(e){for(;e===Yu;)Yu=Ma[--ja],Ma[ja]=null,tl=Ma[--ja],Ma[ja]=null;for(;e===Us;)Us=Xn[--Jn],Xn[Jn]=null,Ui=Xn[--Jn],Xn[Jn]=null,Pi=Xn[--Jn],Xn[Jn]=null}function cg(e,n){Xn[Jn++]=Pi,Xn[Jn++]=Ui,Xn[Jn++]=Us,Pi=n.id,Ui=n.overflow,Us=e}var sn=null,pe=null,Yt=!1,zs=null,Wn=!1,pf=Error(r(519));function Bs(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw el($n(n,e)),pf}function hg(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[je]=e,n[Xe]=o,a){case"dialog":Bt("cancel",n),Bt("close",n);break;case"iframe":case"object":case"embed":Bt("load",n);break;case"video":case"audio":for(a=0;a<Sl.length;a++)Bt(Sl[a],n);break;case"source":Bt("error",n);break;case"img":case"image":case"link":Bt("error",n),Bt("load",n);break;case"details":Bt("toggle",n);break;case"input":Bt("invalid",n),xu(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Bt("invalid",n);break;case"textarea":Bt("invalid",n),Ds(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||C_(n.textContent,a)?(o.popover!=null&&(Bt("beforetoggle",n),Bt("toggle",n)),o.onScroll!=null&&Bt("scroll",n),o.onScrollEnd!=null&&Bt("scrollend",n),o.onClick!=null&&(n.onclick=li),n=!0):n=!1,n||Bs(e,!0)}function fg(e){for(sn=e.return;sn;)switch(sn.tag){case 5:case 31:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:sn=sn.return}}function La(e){if(e!==sn)return!1;if(!Yt)return fg(e),Yt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Od(e.type,e.memoizedProps)),a=!a),a&&pe&&Bs(e),fg(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));pe=L_(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));pe=L_(e)}else n===27?(n=pe,er(e.type)?(e=Pd,Pd=null,pe=e):pe=n):pe=sn?ti(e.stateNode.nextSibling):null;return!0}function Qr(){pe=sn=null,Yt=!1}function gf(){var e=zs;return e!==null&&(Rn===null?Rn=e:Rn.push.apply(Rn,e),zs=null),e}function el(e){zs===null?zs=[e]:zs.push(e)}var yf=C(null),$r=null,as=null;function qs(e,n,a){nt(yf,n._currentValue),n._currentValue=a}function os(e){e._currentValue=yf.current,L(yf)}function _f(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function vf(e,n,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=h;for(var D=0;D<n.length;D++)if(T.context===n[D]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),_f(d.return,a,e),o||(v=null);break t}d=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),_f(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Pa(e,n,a,o){e=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=h.type;On(h.pendingProps.value,v.value)||(e!==null?e.push(T):e=[T])}}else if(h===vt.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Cl):e=[Cl])}h=h.return}e!==null&&vf(n,e,a,o),n.flags|=262144}function Qu(e){for(e=e.firstContext;e!==null;){if(!On(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Xr(e){$r=e,as=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function rn(e){return dg($r,e)}function $u(e,n){return $r===null&&Xr(e),dg(e,n)}function dg(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},as===null){if(e===null)throw Error(r(308));as=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else as=as.next=n;return a}var Vb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Mb=s.unstable_scheduleCallback,jb=s.unstable_NormalPriority,Ue={$$typeof:gt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ef(){return{controller:new Vb,data:new Map,refCount:0}}function nl(e){e.refCount--,e.refCount===0&&Mb(jb,function(){e.controller.abort()})}var il=null,Tf=0,Ua=0,za=null;function Lb(e,n){if(il===null){var a=il=[];Tf=0,Ua=Ad(),za={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Tf++,n.then(mg,mg),n}function mg(){if(--Tf===0&&il!==null){za!==null&&(za.status="fulfilled");var e=il;il=null,Ua=0,za=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Pb(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var pg=M.S;M.S=function(e,n){Wy=_t(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Lb(e,n),pg!==null&&pg(e,n)};var Jr=C(null);function bf(){var e=Jr.current;return e!==null?e:ue.pooledCache}function Xu(e,n){n===null?nt(Jr,Jr.current):nt(Jr,n.pool)}function gg(){var e=bf();return e===null?null:{parent:Ue._currentValue,pool:e}}var Ba=Error(r(460)),Sf=Error(r(474)),Ju=Error(r(542)),Wu={then:function(){}};function yg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function _g(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(li,li),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Eg(e),e;default:if(typeof n.status=="string")n.then(li,li);else{if(e=ue,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Eg(e),e}throw Zr=n,Ba}}function Wr(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Zr=a,Ba):a}}var Zr=null;function vg(){if(Zr===null)throw Error(r(459));var e=Zr;return Zr=null,e}function Eg(e){if(e===Ba||e===Ju)throw Error(r(483))}var qa=null,sl=0;function Zu(e){var n=sl;return sl+=1,qa===null&&(qa=[]),_g(qa,e,n)}function rl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function tc(e,n){throw n.$$typeof===R?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Tg(e){function n(P,V){if(e){var H=P.deletions;H===null?(P.deletions=[V],P.flags|=16):H.push(V)}}function a(P,V){if(!e)return null;for(;V!==null;)n(P,V),V=V.sibling;return null}function o(P){for(var V=new Map;P!==null;)P.key!==null?V.set(P.key,P):V.set(P.index,P),P=P.sibling;return V}function h(P,V){return P=ss(P,V),P.index=0,P.sibling=null,P}function d(P,V,H){return P.index=H,e?(H=P.alternate,H!==null?(H=H.index,H<V?(P.flags|=67108866,V):H):(P.flags|=67108866,V)):(P.flags|=1048576,V)}function v(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function T(P,V,H,tt){return V===null||V.tag!==6?(V=hf(H,P.mode,tt),V.return=P,V):(V=h(V,H),V.return=P,V)}function D(P,V,H,tt){var Tt=H.type;return Tt===J?X(P,V,H.props.children,tt,H.key):V!==null&&(V.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===S&&Wr(Tt)===V.type)?(V=h(V,H.props),rl(V,H),V.return=P,V):(V=Ku(H.type,H.key,H.props,null,P.mode,tt),rl(V,H),V.return=P,V)}function F(P,V,H,tt){return V===null||V.tag!==4||V.stateNode.containerInfo!==H.containerInfo||V.stateNode.implementation!==H.implementation?(V=ff(H,P.mode,tt),V.return=P,V):(V=h(V,H.children||[]),V.return=P,V)}function X(P,V,H,tt,Tt){return V===null||V.tag!==7?(V=Yr(H,P.mode,tt,Tt),V.return=P,V):(V=h(V,H),V.return=P,V)}function it(P,V,H){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=hf(""+V,P.mode,H),V.return=P,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case z:return H=Ku(V.type,V.key,V.props,null,P.mode,H),rl(H,V),H.return=P,H;case Z:return V=ff(V,P.mode,H),V.return=P,V;case S:return V=Wr(V),it(P,V,H)}if(B(V)||j(V))return V=Yr(V,P.mode,H,null),V.return=P,V;if(typeof V.then=="function")return it(P,Zu(V),H);if(V.$$typeof===gt)return it(P,$u(P,V),H);tc(P,V)}return null}function G(P,V,H,tt){var Tt=V!==null?V.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Tt!==null?null:T(P,V,""+H,tt);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case z:return H.key===Tt?D(P,V,H,tt):null;case Z:return H.key===Tt?F(P,V,H,tt):null;case S:return H=Wr(H),G(P,V,H,tt)}if(B(H)||j(H))return Tt!==null?null:X(P,V,H,tt,null);if(typeof H.then=="function")return G(P,V,Zu(H),tt);if(H.$$typeof===gt)return G(P,V,$u(P,H),tt);tc(P,H)}return null}function Y(P,V,H,tt,Tt){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return P=P.get(H)||null,T(V,P,""+tt,Tt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case z:return P=P.get(tt.key===null?H:tt.key)||null,D(V,P,tt,Tt);case Z:return P=P.get(tt.key===null?H:tt.key)||null,F(V,P,tt,Tt);case S:return tt=Wr(tt),Y(P,V,H,tt,Tt)}if(B(tt)||j(tt))return P=P.get(H)||null,X(V,P,tt,Tt,null);if(typeof tt.then=="function")return Y(P,V,H,Zu(tt),Tt);if(tt.$$typeof===gt)return Y(P,V,H,$u(V,tt),Tt);tc(V,tt)}return null}function pt(P,V,H,tt){for(var Tt=null,$t=null,yt=V,Lt=V=0,Ht=null;yt!==null&&Lt<H.length;Lt++){yt.index>Lt?(Ht=yt,yt=null):Ht=yt.sibling;var Xt=G(P,yt,H[Lt],tt);if(Xt===null){yt===null&&(yt=Ht);break}e&&yt&&Xt.alternate===null&&n(P,yt),V=d(Xt,V,Lt),$t===null?Tt=Xt:$t.sibling=Xt,$t=Xt,yt=Ht}if(Lt===H.length)return a(P,yt),Yt&&rs(P,Lt),Tt;if(yt===null){for(;Lt<H.length;Lt++)yt=it(P,H[Lt],tt),yt!==null&&(V=d(yt,V,Lt),$t===null?Tt=yt:$t.sibling=yt,$t=yt);return Yt&&rs(P,Lt),Tt}for(yt=o(yt);Lt<H.length;Lt++)Ht=Y(yt,P,Lt,H[Lt],tt),Ht!==null&&(e&&Ht.alternate!==null&&yt.delete(Ht.key===null?Lt:Ht.key),V=d(Ht,V,Lt),$t===null?Tt=Ht:$t.sibling=Ht,$t=Ht);return e&&yt.forEach(function(ar){return n(P,ar)}),Yt&&rs(P,Lt),Tt}function St(P,V,H,tt){if(H==null)throw Error(r(151));for(var Tt=null,$t=null,yt=V,Lt=V=0,Ht=null,Xt=H.next();yt!==null&&!Xt.done;Lt++,Xt=H.next()){yt.index>Lt?(Ht=yt,yt=null):Ht=yt.sibling;var ar=G(P,yt,Xt.value,tt);if(ar===null){yt===null&&(yt=Ht);break}e&&yt&&ar.alternate===null&&n(P,yt),V=d(ar,V,Lt),$t===null?Tt=ar:$t.sibling=ar,$t=ar,yt=Ht}if(Xt.done)return a(P,yt),Yt&&rs(P,Lt),Tt;if(yt===null){for(;!Xt.done;Lt++,Xt=H.next())Xt=it(P,Xt.value,tt),Xt!==null&&(V=d(Xt,V,Lt),$t===null?Tt=Xt:$t.sibling=Xt,$t=Xt);return Yt&&rs(P,Lt),Tt}for(yt=o(yt);!Xt.done;Lt++,Xt=H.next())Xt=Y(yt,P,Lt,Xt.value,tt),Xt!==null&&(e&&Xt.alternate!==null&&yt.delete(Xt.key===null?Lt:Xt.key),V=d(Xt,V,Lt),$t===null?Tt=Xt:$t.sibling=Xt,$t=Xt);return e&&yt.forEach(function($S){return n(P,$S)}),Yt&&rs(P,Lt),Tt}function le(P,V,H,tt){if(typeof H=="object"&&H!==null&&H.type===J&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case z:t:{for(var Tt=H.key;V!==null;){if(V.key===Tt){if(Tt=H.type,Tt===J){if(V.tag===7){a(P,V.sibling),tt=h(V,H.props.children),tt.return=P,P=tt;break t}}else if(V.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===S&&Wr(Tt)===V.type){a(P,V.sibling),tt=h(V,H.props),rl(tt,H),tt.return=P,P=tt;break t}a(P,V);break}else n(P,V);V=V.sibling}H.type===J?(tt=Yr(H.props.children,P.mode,tt,H.key),tt.return=P,P=tt):(tt=Ku(H.type,H.key,H.props,null,P.mode,tt),rl(tt,H),tt.return=P,P=tt)}return v(P);case Z:t:{for(Tt=H.key;V!==null;){if(V.key===Tt)if(V.tag===4&&V.stateNode.containerInfo===H.containerInfo&&V.stateNode.implementation===H.implementation){a(P,V.sibling),tt=h(V,H.children||[]),tt.return=P,P=tt;break t}else{a(P,V);break}else n(P,V);V=V.sibling}tt=ff(H,P.mode,tt),tt.return=P,P=tt}return v(P);case S:return H=Wr(H),le(P,V,H,tt)}if(B(H))return pt(P,V,H,tt);if(j(H)){if(Tt=j(H),typeof Tt!="function")throw Error(r(150));return H=Tt.call(H),St(P,V,H,tt)}if(typeof H.then=="function")return le(P,V,Zu(H),tt);if(H.$$typeof===gt)return le(P,V,$u(P,H),tt);tc(P,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,V!==null&&V.tag===6?(a(P,V.sibling),tt=h(V,H),tt.return=P,P=tt):(a(P,V),tt=hf(H,P.mode,tt),tt.return=P,P=tt),v(P)):a(P,V)}return function(P,V,H,tt){try{sl=0;var Tt=le(P,V,H,tt);return qa=null,Tt}catch(yt){if(yt===Ba||yt===Ju)throw yt;var $t=Vn(29,yt,null,P.mode);return $t.lanes=tt,$t.return=P,$t}}}var ta=Tg(!0),bg=Tg(!1),Hs=!1;function Af(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Fs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Gs(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Zt&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=Gu(e),rg(e,null,a),n}return Fu(e,o,n,a),Gu(e)}function al(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Oo(e,a)}}function xf(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=n:d=d.next=n}else h=d=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Rf=!1;function ol(){if(Rf){var e=za;if(e!==null)throw e}}function ll(e,n,a,o){Rf=!1;var h=e.updateQueue;Hs=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var D=T,F=D.next;D.next=null,v===null?d=F:v.next=F,v=D;var X=e.alternate;X!==null&&(X=X.updateQueue,T=X.lastBaseUpdate,T!==v&&(T===null?X.firstBaseUpdate=F:T.next=F,X.lastBaseUpdate=D))}if(d!==null){var it=h.baseState;v=0,X=F=D=null,T=d;do{var G=T.lane&-536870913,Y=G!==T.lane;if(Y?(qt&G)===G:(o&G)===G){G!==0&&G===Ua&&(Rf=!0),X!==null&&(X=X.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var pt=e,St=T;G=n;var le=a;switch(St.tag){case 1:if(pt=St.payload,typeof pt=="function"){it=pt.call(le,it,G);break t}it=pt;break t;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=St.payload,G=typeof pt=="function"?pt.call(le,it,G):pt,G==null)break t;it=x({},it,G);break t;case 2:Hs=!0}}G=T.callback,G!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=h.callbacks,Y===null?h.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},X===null?(F=X=Y,D=it):X=X.next=Y,v|=G;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;Y=T,T=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);X===null&&(D=it),h.baseState=D,h.firstBaseUpdate=F,h.lastBaseUpdate=X,d===null&&(h.shared.lanes=0),Xs|=v,e.lanes=v,e.memoizedState=it}}function Sg(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function Ag(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Sg(a[e],n)}var Ha=C(null),ec=C(0);function wg(e,n){e=gs,nt(ec,e),nt(Ha,n),gs=e|n.baseLanes}function Cf(){nt(ec,gs),nt(Ha,Ha.current)}function If(){gs=ec.current,L(Ha),L(ec)}var Mn=C(null),Zn=null;function Ks(e){var n=e.alternate;nt(Ce,Ce.current&1),nt(Mn,e),Zn===null&&(n===null||Ha.current!==null||n.memoizedState!==null)&&(Zn=e)}function kf(e){nt(Ce,Ce.current),nt(Mn,e),Zn===null&&(Zn=e)}function xg(e){e.tag===22?(nt(Ce,Ce.current),nt(Mn,e),Zn===null&&(Zn=e)):Ys()}function Ys(){nt(Ce,Ce.current),nt(Mn,Mn.current)}function jn(e){L(Mn),Zn===e&&(Zn=null),L(Ce)}var Ce=C(0);function nc(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||jd(a)||Ld(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ls=0,Vt=null,ae=null,ze=null,ic=!1,Fa=!1,ea=!1,sc=0,ul=0,Ga=null,Ub=0;function Se(){throw Error(r(321))}function Nf(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!On(e[a],n[a]))return!1;return!0}function Df(e,n,a,o,h,d){return ls=d,Vt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,M.H=e===null||e.memoizedState===null?uy:Yf,ea=!1,d=a(o,h),ea=!1,Fa&&(d=Cg(n,a,o,h)),Rg(e),d}function Rg(e){M.H=fl;var n=ae!==null&&ae.next!==null;if(ls=0,ze=ae=Vt=null,ic=!1,ul=0,Ga=null,n)throw Error(r(300));e===null||Be||(e=e.dependencies,e!==null&&Qu(e)&&(Be=!0))}function Cg(e,n,a,o){Vt=e;var h=0;do{if(Fa&&(Ga=null),ul=0,Fa=!1,25<=h)throw Error(r(301));if(h+=1,ze=ae=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}M.H=cy,d=n(a,o)}while(Fa);return d}function zb(){var e=M.H,n=e.useState()[0];return n=typeof n.then=="function"?cl(n):n,e=e.useState()[0],(ae!==null?ae.memoizedState:null)!==e&&(Vt.flags|=1024),n}function Of(){var e=sc!==0;return sc=0,e}function Vf(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Mf(e){if(ic){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}ic=!1}ls=0,ze=ae=Vt=null,Fa=!1,ul=sc=0,Ga=null}function _n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Vt.memoizedState=ze=e:ze=ze.next=e,ze}function Ie(){if(ae===null){var e=Vt.alternate;e=e!==null?e.memoizedState:null}else e=ae.next;var n=ze===null?Vt.memoizedState:ze.next;if(n!==null)ze=n,ae=e;else{if(e===null)throw Vt.alternate===null?Error(r(467)):Error(r(310));ae=e,e={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},ze===null?Vt.memoizedState=ze=e:ze=ze.next=e}return ze}function rc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cl(e){var n=ul;return ul+=1,Ga===null&&(Ga=[]),e=_g(Ga,e,n),n=Vt,(ze===null?n.memoizedState:ze.next)===null&&(n=n.alternate,M.H=n===null||n.memoizedState===null?uy:Yf),e}function ac(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return cl(e);if(e.$$typeof===gt)return rn(e)}throw Error(r(438,String(e)))}function jf(e){var n=null,a=Vt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Vt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=rc(),Vt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=O;return n.index++,a}function us(e,n){return typeof n=="function"?n(e):n}function oc(e){var n=Ie();return Lf(n,ae,e)}function Lf(e,n,a){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=e.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}n.baseQueue=h=d,o.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{n=h.next;var T=v=null,D=null,F=n,X=!1;do{var it=F.lane&-536870913;if(it!==F.lane?(qt&it)===it:(ls&it)===it){var G=F.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),it===Ua&&(X=!0);else if((ls&G)===G){F=F.next,G===Ua&&(X=!0);continue}else it={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=it,v=d):D=D.next=it,Vt.lanes|=G,Xs|=G;it=F.action,ea&&a(d,it),d=F.hasEagerState?F.eagerState:a(d,it)}else G={lane:it,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=G,v=d):D=D.next=G,Vt.lanes|=it,Xs|=it;F=F.next}while(F!==null&&F!==n);if(D===null?v=d:D.next=T,!On(d,e.memoizedState)&&(Be=!0,X&&(a=za,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=D,o.lastRenderedState=d}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Pf(e){var n=Ie(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,d=n.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);On(d,n.memoizedState)||(Be=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,o]}function Ig(e,n,a){var o=Vt,h=Ie(),d=Yt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=n();var v=!On((ae||h).memoizedState,a);if(v&&(h.memoizedState=a,Be=!0),h=h.queue,Bf(Dg.bind(null,o,h,e),[e]),h.getSnapshot!==n||v||ze!==null&&ze.memoizedState.tag&1){if(o.flags|=2048,Ka(9,{destroy:void 0},Ng.bind(null,o,h,a,n),null),ue===null)throw Error(r(349));d||(ls&127)!==0||kg(o,n,a)}return a}function kg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=Vt.updateQueue,n===null?(n=rc(),Vt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Ng(e,n,a,o){n.value=a,n.getSnapshot=o,Og(n)&&Vg(e)}function Dg(e,n,a){return a(function(){Og(n)&&Vg(e)})}function Og(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!On(e,a)}catch{return!0}}function Vg(e){var n=Kr(e,2);n!==null&&Cn(n,e,2)}function Uf(e){var n=_n();if(typeof e=="function"){var a=e;if(e=a(),ea){Ve(!0);try{a()}finally{Ve(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:e},n}function Mg(e,n,a,o){return e.baseState=a,Lf(e,ae,typeof o=="function"?o:us)}function Bb(e,n,a,o,h){if(cc(e))throw Error(r(485));if(e=n.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};M.T!==null?a(!0):d.isTransition=!1,o(d),a=n.pending,a===null?(d.next=n.pending=d,jg(n,d)):(d.next=a.next,n.pending=a.next=d)}}function jg(e,n){var a=n.action,o=n.payload,h=e.state;if(n.isTransition){var d=M.T,v={};M.T=v;try{var T=a(h,o),D=M.S;D!==null&&D(v,T),Lg(e,n,T)}catch(F){zf(e,n,F)}finally{d!==null&&v.types!==null&&(d.types=v.types),M.T=d}}else try{d=a(h,o),Lg(e,n,d)}catch(F){zf(e,n,F)}}function Lg(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Pg(e,n,o)},function(o){return zf(e,n,o)}):Pg(e,n,a)}function Pg(e,n,a){n.status="fulfilled",n.value=a,Ug(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,jg(e,a)))}function zf(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Ug(n),n=n.next;while(n!==o)}e.action=null}function Ug(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function zg(e,n){return n}function Bg(e,n){if(Yt){var a=ue.formState;if(a!==null){t:{var o=Vt;if(Yt){if(pe){e:{for(var h=pe,d=Wn;h.nodeType!==8;){if(!d){h=null;break e}if(h=ti(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){pe=ti(h.nextSibling),o=h.data==="F!";break t}}Bs(o)}o=!1}o&&(n=a[0])}}return a=_n(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zg,lastRenderedState:n},a.queue=o,a=ay.bind(null,Vt,o),o.dispatch=a,o=Uf(!1),d=Kf.bind(null,Vt,!1,o.queue),o=_n(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,a=Bb.bind(null,Vt,h,d,a),h.dispatch=a,o.memoizedState=e,[n,a,!1]}function qg(e){var n=Ie();return Hg(n,ae,e)}function Hg(e,n,a){if(n=Lf(e,n,zg)[0],e=oc(us)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=cl(n)}catch(v){throw v===Ba?Ju:v}else o=n;n=Ie();var h=n.queue,d=h.dispatch;return a!==n.memoizedState&&(Vt.flags|=2048,Ka(9,{destroy:void 0},qb.bind(null,h,a),null)),[o,d,e]}function qb(e,n){e.action=n}function Fg(e){var n=Ie(),a=ae;if(a!==null)return Hg(n,a,e);Ie(),n=n.memoizedState,a=Ie();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function Ka(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=Vt.updateQueue,n===null&&(n=rc(),Vt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Gg(){return Ie().memoizedState}function lc(e,n,a,o){var h=_n();Vt.flags|=e,h.memoizedState=Ka(1|n,{destroy:void 0},a,o===void 0?null:o)}function uc(e,n,a,o){var h=Ie();o=o===void 0?null:o;var d=h.memoizedState.inst;ae!==null&&o!==null&&Nf(o,ae.memoizedState.deps)?h.memoizedState=Ka(n,d,a,o):(Vt.flags|=e,h.memoizedState=Ka(1|n,d,a,o))}function Kg(e,n){lc(8390656,8,e,n)}function Bf(e,n){uc(2048,8,e,n)}function Hb(e){Vt.flags|=4;var n=Vt.updateQueue;if(n===null)n=rc(),Vt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Yg(e){var n=Ie().memoizedState;return Hb({ref:n,nextImpl:e}),function(){if((Zt&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function Qg(e,n){return uc(4,2,e,n)}function $g(e,n){return uc(4,4,e,n)}function Xg(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Jg(e,n,a){a=a!=null?a.concat([e]):null,uc(4,4,Xg.bind(null,n,e),a)}function qf(){}function Wg(e,n){var a=Ie();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&Nf(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Zg(e,n){var a=Ie();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&Nf(n,o[1]))return o[0];if(o=e(),ea){Ve(!0);try{e()}finally{Ve(!1)}}return a.memoizedState=[o,n],o}function Hf(e,n,a){return a===void 0||(ls&1073741824)!==0&&(qt&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=t_(),Vt.lanes|=e,Xs|=e,a)}function ty(e,n,a,o){return On(a,n)?a:Ha.current!==null?(e=Hf(e,a,o),On(e,n)||(Be=!0),e):(ls&42)===0||(ls&1073741824)!==0&&(qt&261930)===0?(Be=!0,e.memoizedState=a):(e=t_(),Vt.lanes|=e,Xs|=e,n)}function ey(e,n,a,o,h){var d=$.p;$.p=d!==0&&8>d?d:8;var v=M.T,T={};M.T=T,Kf(e,!1,n,a);try{var D=h(),F=M.S;if(F!==null&&F(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var X=Pb(D,o);hl(e,n,X,Un(e))}else hl(e,n,o,Un(e))}catch(it){hl(e,n,{then:function(){},status:"rejected",reason:it},Un())}finally{$.p=d,v!==null&&T.types!==null&&(v.types=T.types),M.T=v}}function Fb(){}function Ff(e,n,a,o){if(e.tag!==5)throw Error(r(476));var h=ny(e).queue;ey(e,h,n,at,a===null?Fb:function(){return iy(e),a(o)})}function ny(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:at,baseState:at,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:at},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function iy(e){var n=ny(e);n.next===null&&(n=e.alternate.memoizedState),hl(e,n.next.queue,{},Un())}function Gf(){return rn(Cl)}function sy(){return Ie().memoizedState}function ry(){return Ie().memoizedState}function Gb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Un();e=Fs(a);var o=Gs(n,e,a);o!==null&&(Cn(o,n,a),al(o,n,a)),n={cache:Ef()},e.payload=n;return}n=n.return}}function Kb(e,n,a){var o=Un();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},cc(e)?oy(n,a):(a=uf(e,n,a,o),a!==null&&(Cn(a,e,o),ly(a,n,o)))}function ay(e,n,a){var o=Un();hl(e,n,a,o)}function hl(e,n,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(cc(e))oy(n,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var v=n.lastRenderedState,T=d(v,a);if(h.hasEagerState=!0,h.eagerState=T,On(T,v))return Fu(e,n,h,0),ue===null&&Hu(),!1}catch{}if(a=uf(e,n,h,o),a!==null)return Cn(a,e,o),ly(a,n,o),!0}return!1}function Kf(e,n,a,o){if(o={lane:2,revertLane:Ad(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},cc(e)){if(n)throw Error(r(479))}else n=uf(e,a,o,2),n!==null&&Cn(n,e,2)}function cc(e){var n=e.alternate;return e===Vt||n!==null&&n===Vt}function oy(e,n){Fa=ic=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function ly(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Oo(e,a)}}var fl={readContext:rn,use:ac,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useLayoutEffect:Se,useInsertionEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useSyncExternalStore:Se,useId:Se,useHostTransitionStatus:Se,useFormState:Se,useActionState:Se,useOptimistic:Se,useMemoCache:Se,useCacheRefresh:Se};fl.useEffectEvent=Se;var uy={readContext:rn,use:ac,useCallback:function(e,n){return _n().memoizedState=[e,n===void 0?null:n],e},useContext:rn,useEffect:Kg,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,lc(4194308,4,Xg.bind(null,n,e),a)},useLayoutEffect:function(e,n){return lc(4194308,4,e,n)},useInsertionEffect:function(e,n){lc(4,2,e,n)},useMemo:function(e,n){var a=_n();n=n===void 0?null:n;var o=e();if(ea){Ve(!0);try{e()}finally{Ve(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=_n();if(a!==void 0){var h=a(n);if(ea){Ve(!0);try{a(n)}finally{Ve(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=Kb.bind(null,Vt,e),[o.memoizedState,e]},useRef:function(e){var n=_n();return e={current:e},n.memoizedState=e},useState:function(e){e=Uf(e);var n=e.queue,a=ay.bind(null,Vt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:qf,useDeferredValue:function(e,n){var a=_n();return Hf(a,e,n)},useTransition:function(){var e=Uf(!1);return e=ey.bind(null,Vt,e.queue,!0,!1),_n().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=Vt,h=_n();if(Yt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),ue===null)throw Error(r(349));(qt&127)!==0||kg(o,n,a)}h.memoizedState=a;var d={value:a,getSnapshot:n};return h.queue=d,Kg(Dg.bind(null,o,d,e),[e]),o.flags|=2048,Ka(9,{destroy:void 0},Ng.bind(null,o,d,a,n),null),a},useId:function(){var e=_n(),n=ue.identifierPrefix;if(Yt){var a=Ui,o=Pi;a=(o&~(1<<32-me(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=sc++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Ub++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Gf,useFormState:Bg,useActionState:Bg,useOptimistic:function(e){var n=_n();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Kf.bind(null,Vt,!0,a),a.dispatch=n,[e,n]},useMemoCache:jf,useCacheRefresh:function(){return _n().memoizedState=Gb.bind(null,Vt)},useEffectEvent:function(e){var n=_n(),a={impl:e};return n.memoizedState=a,function(){if((Zt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Yf={readContext:rn,use:ac,useCallback:Wg,useContext:rn,useEffect:Bf,useImperativeHandle:Jg,useInsertionEffect:Qg,useLayoutEffect:$g,useMemo:Zg,useReducer:oc,useRef:Gg,useState:function(){return oc(us)},useDebugValue:qf,useDeferredValue:function(e,n){var a=Ie();return ty(a,ae.memoizedState,e,n)},useTransition:function(){var e=oc(us)[0],n=Ie().memoizedState;return[typeof e=="boolean"?e:cl(e),n]},useSyncExternalStore:Ig,useId:sy,useHostTransitionStatus:Gf,useFormState:qg,useActionState:qg,useOptimistic:function(e,n){var a=Ie();return Mg(a,ae,e,n)},useMemoCache:jf,useCacheRefresh:ry};Yf.useEffectEvent=Yg;var cy={readContext:rn,use:ac,useCallback:Wg,useContext:rn,useEffect:Bf,useImperativeHandle:Jg,useInsertionEffect:Qg,useLayoutEffect:$g,useMemo:Zg,useReducer:Pf,useRef:Gg,useState:function(){return Pf(us)},useDebugValue:qf,useDeferredValue:function(e,n){var a=Ie();return ae===null?Hf(a,e,n):ty(a,ae.memoizedState,e,n)},useTransition:function(){var e=Pf(us)[0],n=Ie().memoizedState;return[typeof e=="boolean"?e:cl(e),n]},useSyncExternalStore:Ig,useId:sy,useHostTransitionStatus:Gf,useFormState:Fg,useActionState:Fg,useOptimistic:function(e,n){var a=Ie();return ae!==null?Mg(a,ae,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:jf,useCacheRefresh:ry};cy.useEffectEvent=Yg;function Qf(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:x({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var $f={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=Un(),h=Fs(o);h.payload=n,a!=null&&(h.callback=a),n=Gs(e,h,o),n!==null&&(Cn(n,e,o),al(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=Un(),h=Fs(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Gs(e,h,o),n!==null&&(Cn(n,e,o),al(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Un(),o=Fs(a);o.tag=2,n!=null&&(o.callback=n),n=Gs(e,o,a),n!==null&&(Cn(n,e,a),al(n,e,a))}};function hy(e,n,a,o,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,v):n.prototype&&n.prototype.isPureReactComponent?!Wo(a,o)||!Wo(h,d):!0}function fy(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&$f.enqueueReplaceState(n,n.state,null)}function na(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=x({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function dy(e){qu(e)}function my(e){console.error(e)}function py(e){qu(e)}function hc(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function gy(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Xf(e,n,a){return a=Fs(a),a.tag=3,a.payload={element:null},a.callback=function(){hc(e,n)},a}function yy(e){return e=Fs(e),e.tag=3,e}function _y(e,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;e.payload=function(){return h(d)},e.callback=function(){gy(n,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){gy(n,a,o),typeof h!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function Yb(e,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Pa(n,a,h,!0),a=Mn.current,a!==null){switch(a.tag){case 31:case 13:return Zn===null?Sc():a.alternate===null&&Ae===0&&(Ae=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Wu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Td(e,o,h)),!1;case 22:return a.flags|=65536,o===Wu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Td(e,o,h)),!1}throw Error(r(435,a.tag))}return Td(e,o,h),Sc(),!1}if(Yt)return n=Mn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==pf&&(e=Error(r(422),{cause:o}),el($n(e,a)))):(o!==pf&&(n=Error(r(423),{cause:o}),el($n(n,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=$n(o,a),h=Xf(e.stateNode,o,h),xf(e,h),Ae!==4&&(Ae=2)),!1;var d=Error(r(520),{cause:o});if(d=$n(d,a),El===null?El=[d]:El.push(d),Ae!==4&&(Ae=2),n===null)return!0;o=$n(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Xf(a.stateNode,o,e),xf(a,e),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Js===null||!Js.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=yy(h),_y(h,e,a,o),xf(a,h),!1}a=a.return}while(a!==null);return!1}var Jf=Error(r(461)),Be=!1;function an(e,n,a,o){n.child=e===null?bg(n,null,a,o):ta(n,e.child,a,o)}function vy(e,n,a,o,h){a=a.render;var d=n.ref;if("ref"in o){var v={};for(var T in o)T!=="ref"&&(v[T]=o[T])}else v=o;return Xr(n),o=Df(e,n,a,v,d,h),T=Of(),e!==null&&!Be?(Vf(e,n,h),cs(e,n,h)):(Yt&&T&&df(n),n.flags|=1,an(e,n,o,h),n.child)}function Ey(e,n,a,o,h){if(e===null){var d=a.type;return typeof d=="function"&&!cf(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,Ty(e,n,d,o,h)):(e=Ku(a.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!rd(e,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Wo,a(v,o)&&e.ref===n.ref)return cs(e,n,h)}return n.flags|=1,e=ss(d,o),e.ref=n.ref,e.return=n,n.child=e}function Ty(e,n,a,o,h){if(e!==null){var d=e.memoizedProps;if(Wo(d,o)&&e.ref===n.ref)if(Be=!1,n.pendingProps=o=d,rd(e,h))(e.flags&131072)!==0&&(Be=!0);else return n.lanes=e.lanes,cs(e,n,h)}return Wf(e,n,a,o,h)}function by(e,n,a,o){var h=o.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(o=n.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,n.child=null;return Sy(e,n,d,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Xu(n,d!==null?d.cachePool:null),d!==null?wg(n,d):Cf(),xg(n);else return o=n.lanes=536870912,Sy(e,n,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(Xu(n,d.cachePool),wg(n,d),Ys(),n.memoizedState=null):(e!==null&&Xu(n,null),Cf(),Ys());return an(e,n,h,a),n.child}function dl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Sy(e,n,a,o,h){var d=bf();return d=d===null?null:{parent:Ue._currentValue,pool:d},n.memoizedState={baseLanes:a,cachePool:d},e!==null&&Xu(n,null),Cf(),xg(n),e!==null&&Pa(e,n,o,!0),n.childLanes=h,null}function fc(e,n){return n=mc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Ay(e,n,a){return ta(n,e.child,null,a),e=fc(n,n.pendingProps),e.flags|=2,jn(n),n.memoizedState=null,e}function Qb(e,n,a){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Yt){if(o.mode==="hidden")return e=fc(n,o),n.lanes=536870912,dl(null,e);if(kf(n),(e=pe)?(e=j_(e,Wn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Us!==null?{id:Pi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},a=og(e),a.return=n,n.child=a,sn=n,pe=null)):e=null,e===null)throw Bs(n);return n.lanes=536870912,null}return fc(n,o)}var d=e.memoizedState;if(d!==null){var v=d.dehydrated;if(kf(n),h)if(n.flags&256)n.flags&=-257,n=Ay(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(Be||Pa(e,n,a,!1),h=(a&e.childLanes)!==0,Be||h){if(o=ue,o!==null&&(v=Vo(o,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Kr(e,v),Cn(o,e,v),Jf;Sc(),n=Ay(e,n,a)}else e=d.treeContext,pe=ti(v.nextSibling),sn=n,Yt=!0,zs=null,Wn=!1,e!==null&&cg(n,e),n=fc(n,o),n.flags|=4096;return n}return e=ss(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function dc(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Wf(e,n,a,o,h){return Xr(n),a=Df(e,n,a,o,void 0,h),o=Of(),e!==null&&!Be?(Vf(e,n,h),cs(e,n,h)):(Yt&&o&&df(n),n.flags|=1,an(e,n,a,h),n.child)}function wy(e,n,a,o,h,d){return Xr(n),n.updateQueue=null,a=Cg(n,o,a,h),Rg(e),o=Of(),e!==null&&!Be?(Vf(e,n,d),cs(e,n,d)):(Yt&&o&&df(n),n.flags|=1,an(e,n,a,d),n.child)}function xy(e,n,a,o,h){if(Xr(n),n.stateNode===null){var d=Va,v=a.contextType;typeof v=="object"&&v!==null&&(d=rn(v)),d=new a(o,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=$f,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=o,d.state=n.memoizedState,d.refs={},Af(n),v=a.contextType,d.context=typeof v=="object"&&v!==null?rn(v):Va,d.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Qf(n,a,v,o),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&$f.enqueueReplaceState(d,d.state,null),ll(n,o,d,h),ol(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){d=n.stateNode;var T=n.memoizedProps,D=na(a,T);d.props=D;var F=d.context,X=a.contextType;v=Va,typeof X=="object"&&X!==null&&(v=rn(X));var it=a.getDerivedStateFromProps;X=typeof it=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,X||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||F!==v)&&fy(n,d,o,v),Hs=!1;var G=n.memoizedState;d.state=G,ll(n,o,d,h),ol(),F=n.memoizedState,T||G!==F||Hs?(typeof it=="function"&&(Qf(n,a,it,o),F=n.memoizedState),(D=Hs||hy(n,a,D,o,G,F,v))?(X||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=F),d.props=o,d.state=F,d.context=v,o=D):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{d=n.stateNode,wf(e,n),v=n.memoizedProps,X=na(a,v),d.props=X,it=n.pendingProps,G=d.context,F=a.contextType,D=Va,typeof F=="object"&&F!==null&&(D=rn(F)),T=a.getDerivedStateFromProps,(F=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==it||G!==D)&&fy(n,d,o,D),Hs=!1,G=n.memoizedState,d.state=G,ll(n,o,d,h),ol();var Y=n.memoizedState;v!==it||G!==Y||Hs||e!==null&&e.dependencies!==null&&Qu(e.dependencies)?(typeof T=="function"&&(Qf(n,a,T,o),Y=n.memoizedState),(X=Hs||hy(n,a,X,o,G,Y,D)||e!==null&&e.dependencies!==null&&Qu(e.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,Y,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,Y,D)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&G===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&G===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=Y),d.props=o,d.state=Y,d.context=D,o=X):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&G===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&G===e.memoizedState||(n.flags|=1024),o=!1)}return d=o,dc(e,n),o=(n.flags&128)!==0,d||o?(d=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&o?(n.child=ta(n,e.child,null,h),n.child=ta(n,null,a,h)):an(e,n,a,h),n.memoizedState=d.state,e=n.child):e=cs(e,n,h),e}function Ry(e,n,a,o){return Qr(),n.flags|=256,an(e,n,a,o),n.child}var Zf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function td(e){return{baseLanes:e,cachePool:gg()}}function ed(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Pn),e}function Cy(e,n,a){var o=n.pendingProps,h=!1,d=(n.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Ce.current&2)!==0),v&&(h=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Yt){if(h?Ks(n):Ys(),(e=pe)?(e=j_(e,Wn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Us!==null?{id:Pi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},a=og(e),a.return=n,n.child=a,sn=n,pe=null)):e=null,e===null)throw Bs(n);return Ld(e)?n.lanes=32:n.lanes=536870912,null}var T=o.children;return o=o.fallback,h?(Ys(),h=n.mode,T=mc({mode:"hidden",children:T},h),o=Yr(o,h,a,null),T.return=n,o.return=n,T.sibling=o,n.child=T,o=n.child,o.memoizedState=td(a),o.childLanes=ed(e,v,a),n.memoizedState=Zf,dl(null,o)):(Ks(n),nd(n,T))}var D=e.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(d)n.flags&256?(Ks(n),n.flags&=-257,n=id(e,n,a)):n.memoizedState!==null?(Ys(),n.child=e.child,n.flags|=128,n=null):(Ys(),T=o.fallback,h=n.mode,o=mc({mode:"visible",children:o.children},h),T=Yr(T,h,a,null),T.flags|=2,o.return=n,T.return=n,o.sibling=T,n.child=o,ta(n,e.child,null,a),o=n.child,o.memoizedState=td(a),o.childLanes=ed(e,v,a),n.memoizedState=Zf,n=dl(null,o));else if(Ks(n),Ld(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var F=v.dgst;v=F,o=Error(r(419)),o.stack="",o.digest=v,el({value:o,source:null,stack:null}),n=id(e,n,a)}else if(Be||Pa(e,n,a,!1),v=(a&e.childLanes)!==0,Be||v){if(v=ue,v!==null&&(o=Vo(v,a),o!==0&&o!==D.retryLane))throw D.retryLane=o,Kr(e,o),Cn(v,e,o),Jf;jd(T)||Sc(),n=id(e,n,a)}else jd(T)?(n.flags|=192,n.child=e.child,n=null):(e=D.treeContext,pe=ti(T.nextSibling),sn=n,Yt=!0,zs=null,Wn=!1,e!==null&&cg(n,e),n=nd(n,o.children),n.flags|=4096);return n}return h?(Ys(),T=o.fallback,h=n.mode,D=e.child,F=D.sibling,o=ss(D,{mode:"hidden",children:o.children}),o.subtreeFlags=D.subtreeFlags&65011712,F!==null?T=ss(F,T):(T=Yr(T,h,a,null),T.flags|=2),T.return=n,o.return=n,o.sibling=T,n.child=o,dl(null,o),o=n.child,T=e.child.memoizedState,T===null?T=td(a):(h=T.cachePool,h!==null?(D=Ue._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=gg(),T={baseLanes:T.baseLanes|a,cachePool:h}),o.memoizedState=T,o.childLanes=ed(e,v,a),n.memoizedState=Zf,dl(e.child,o)):(Ks(n),a=e.child,e=a.sibling,a=ss(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function nd(e,n){return n=mc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function mc(e,n){return e=Vn(22,e,null,n),e.lanes=0,e}function id(e,n,a){return ta(n,e.child,null,a),e=nd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Iy(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),_f(e.return,n,a)}function sd(e,n,a,o,h,d){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:d}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=h,v.treeForkCount=d)}function ky(e,n,a){var o=n.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var v=Ce.current,T=(v&2)!==0;if(T?(v=v&1|2,n.flags|=128):v&=1,nt(Ce,v),an(e,n,o,a),o=Yt?tl:0,!T&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Iy(e,a,n);else if(e.tag===19)Iy(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)e=a.alternate,e!==null&&nc(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),sd(n,!1,h,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&nc(e)===null){n.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}sd(n,!0,a,null,d,o);break;case"together":sd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function cs(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Xs|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Pa(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=ss(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=ss(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function rd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Qu(e)))}function $b(e,n,a){switch(n.tag){case 3:At(n,n.stateNode.containerInfo),qs(n,Ue,e.memoizedState.cache),Qr();break;case 27:case 5:Jt(n);break;case 4:At(n,n.stateNode.containerInfo);break;case 10:qs(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,kf(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ks(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Cy(e,n,a):(Ks(n),e=cs(e,n,a),e!==null?e.sibling:null);Ks(n);break;case 19:var h=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Pa(e,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return ky(e,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),nt(Ce,Ce.current),o)break;return null;case 22:return n.lanes=0,by(e,n,a,n.pendingProps);case 24:qs(n,Ue,e.memoizedState.cache)}return cs(e,n,a)}function Ny(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)Be=!0;else{if(!rd(e,a)&&(n.flags&128)===0)return Be=!1,$b(e,n,a);Be=(e.flags&131072)!==0}else Be=!1,Yt&&(n.flags&1048576)!==0&&ug(n,tl,n.index);switch(n.lanes=0,n.tag){case 16:t:{var o=n.pendingProps;if(e=Wr(n.elementType),n.type=e,typeof e=="function")cf(e)?(o=na(e,o),n.tag=1,n=xy(null,n,e,o,a)):(n.tag=0,n=Wf(null,n,e,o,a));else{if(e!=null){var h=e.$$typeof;if(h===Mt){n.tag=11,n=vy(null,n,e,o,a);break t}else if(h===N){n.tag=14,n=Ey(null,n,e,o,a);break t}}throw n=Ut(e)||e,Error(r(306,n,""))}}return n;case 0:return Wf(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=na(o,n.pendingProps),xy(e,n,o,h,a);case 3:t:{if(At(n,n.stateNode.containerInfo),e===null)throw Error(r(387));o=n.pendingProps;var d=n.memoizedState;h=d.element,wf(e,n),ll(n,o,null,a);var v=n.memoizedState;if(o=v.cache,qs(n,Ue,o),o!==d.cache&&vf(n,[Ue],a,!0),ol(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=Ry(e,n,o,a);break t}else if(o!==h){h=$n(Error(r(424)),n),el(h),n=Ry(e,n,o,a);break t}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,pe=ti(e.firstChild),sn=n,Yt=!0,zs=null,Wn=!0,a=bg(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Qr(),o===h){n=cs(e,n,a);break t}an(e,n,o,a)}n=n.child}return n;case 26:return dc(e,n),e===null?(a=q_(n.type,null,n.pendingProps,null))?n.memoizedState=a:Yt||(a=n.type,e=n.pendingProps,o=kc(ht.current).createElement(a),o[je]=n,o[Xe]=e,on(o,a,e),Le(o),n.stateNode=o):n.memoizedState=q_(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Jt(n),e===null&&Yt&&(o=n.stateNode=U_(n.type,n.pendingProps,ht.current),sn=n,Wn=!0,h=pe,er(n.type)?(Pd=h,pe=ti(o.firstChild)):pe=h),an(e,n,n.pendingProps.children,a),dc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Yt&&((h=o=pe)&&(o=wS(o,n.type,n.pendingProps,Wn),o!==null?(n.stateNode=o,sn=n,pe=ti(o.firstChild),Wn=!1,h=!0):h=!1),h||Bs(n)),Jt(n),h=n.type,d=n.pendingProps,v=e!==null?e.memoizedProps:null,o=d.children,Od(h,d)?o=null:v!==null&&Od(h,v)&&(n.flags|=32),n.memoizedState!==null&&(h=Df(e,n,zb,null,null,a),Cl._currentValue=h),dc(e,n),an(e,n,o,a),n.child;case 6:return e===null&&Yt&&((e=a=pe)&&(a=xS(a,n.pendingProps,Wn),a!==null?(n.stateNode=a,sn=n,pe=null,e=!0):e=!1),e||Bs(n)),null;case 13:return Cy(e,n,a);case 4:return At(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=ta(n,null,o,a):an(e,n,o,a),n.child;case 11:return vy(e,n,n.type,n.pendingProps,a);case 7:return an(e,n,n.pendingProps,a),n.child;case 8:return an(e,n,n.pendingProps.children,a),n.child;case 12:return an(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,qs(n,n.type,o.value),an(e,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,Xr(n),h=rn(h),o=o(h),n.flags|=1,an(e,n,o,a),n.child;case 14:return Ey(e,n,n.type,n.pendingProps,a);case 15:return Ty(e,n,n.type,n.pendingProps,a);case 19:return ky(e,n,a);case 31:return Qb(e,n,a);case 22:return by(e,n,a,n.pendingProps);case 24:return Xr(n),o=rn(Ue),e===null?(h=bf(),h===null&&(h=ue,d=Ef(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),n.memoizedState={parent:o,cache:h},Af(n),qs(n,Ue,h)):((e.lanes&a)!==0&&(wf(e,n),ll(n,null,null,a),ol()),h=e.memoizedState,d=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),qs(n,Ue,o)):(o=d.cache,qs(n,Ue,o),o!==h.cache&&vf(n,[Ue],a,!0))),an(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function hs(e){e.flags|=4}function ad(e,n,a,o,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(s_())e.flags|=8192;else throw Zr=Wu,Sf}else e.flags&=-16777217}function Dy(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Y_(n))if(s_())e.flags|=8192;else throw Zr=Wu,Sf}function pc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Tu():536870912,e.lanes|=n,Xa|=n)}function ml(e,n){if(!Yt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ge(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function Xb(e,n,a){var o=n.pendingProps;switch(mf(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ge(n),null;case 1:return ge(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),os(Ue),Et(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(La(n)?hs(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gf())),ge(n),null;case 26:var h=n.type,d=n.memoizedState;return e===null?(hs(n),d!==null?(ge(n),Dy(n,d)):(ge(n),ad(n,h,null,o,a))):d?d!==e.memoizedState?(hs(n),ge(n),Dy(n,d)):(ge(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&hs(n),ge(n),ad(n,h,e,o,a)),null;case 27:if(Ke(n),a=ht.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&hs(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return ge(n),null}e=ot.current,La(n)?hg(n):(e=U_(h,o,a),n.stateNode=e,hs(n))}return ge(n),null;case 5:if(Ke(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&hs(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return ge(n),null}if(d=ot.current,La(n))hg(n);else{var v=kc(ht.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?v.createElement(h,{is:o.is}):v.createElement(h)}}d[je]=n,d[Xe]=o;t:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break t;for(;v.sibling===null;){if(v.return===null||v.return===n)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=d;t:switch(on(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&hs(n)}}return ge(n),ad(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&hs(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(r(166));if(e=ht.current,La(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,h=sn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[je]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||C_(e.nodeValue,a)),e||Bs(n,!0)}else e=kc(e).createTextNode(o),e[je]=n,n.stateNode=e}return ge(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=La(n),a!==null){if(e===null){if(!o)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[je]=n}else Qr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ge(n),e=!1}else a=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(jn(n),n):(jn(n),null);if((n.flags&128)!==0)throw Error(r(558))}return ge(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=La(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[je]=n}else Qr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ge(n),h=!1}else h=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(jn(n),n):(jn(n),null)}return jn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),pc(n,n.updateQueue),ge(n),null);case 4:return Et(),e===null&&Cd(n.stateNode.containerInfo),ge(n),null;case 10:return os(n.type),ge(n),null;case 19:if(L(Ce),o=n.memoizedState,o===null)return ge(n),null;if(h=(n.flags&128)!==0,d=o.rendering,d===null)if(h)ml(o,!1);else{if(Ae!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=nc(e),d!==null){for(n.flags|=128,ml(o,!1),e=d.updateQueue,n.updateQueue=e,pc(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)ag(a,e),a=a.sibling;return nt(Ce,Ce.current&1|2),Yt&&rs(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&_t()>Ec&&(n.flags|=128,h=!0,ml(o,!1),n.lanes=4194304)}else{if(!h)if(e=nc(d),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,pc(n,e),ml(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Yt)return ge(n),null}else 2*_t()-o.renderingStartTime>Ec&&a!==536870912&&(n.flags|=128,h=!0,ml(o,!1),n.lanes=4194304);o.isBackwards?(d.sibling=n.child,n.child=d):(e=o.last,e!==null?e.sibling=d:n.child=d,o.last=d)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=_t(),e.sibling=null,a=Ce.current,nt(Ce,h?a&1|2:a&1),Yt&&rs(n,o.treeForkCount),e):(ge(n),null);case 22:case 23:return jn(n),If(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(ge(n),n.subtreeFlags&6&&(n.flags|=8192)):ge(n),a=n.updateQueue,a!==null&&pc(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&L(Jr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),os(Ue),ge(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function Jb(e,n){switch(mf(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return os(Ue),Et(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ke(n),null;case 31:if(n.memoizedState!==null){if(jn(n),n.alternate===null)throw Error(r(340));Qr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(jn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Qr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return L(Ce),null;case 4:return Et(),null;case 10:return os(n.type),null;case 22:case 23:return jn(n),If(),e!==null&&L(Jr),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return os(Ue),null;case 25:return null;default:return null}}function Oy(e,n){switch(mf(n),n.tag){case 3:os(Ue),Et();break;case 26:case 27:case 5:Ke(n);break;case 4:Et();break;case 31:n.memoizedState!==null&&jn(n);break;case 13:jn(n);break;case 19:L(Ce);break;case 10:os(n.type);break;case 22:case 23:jn(n),If(),e!==null&&L(Jr);break;case 24:os(Ue)}}function pl(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var d=a.create,v=a.inst;o=d(),v.destroy=o}a=a.next}while(a!==h)}}catch(T){se(n,n.return,T)}}function Qs(e,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&e)===e){var v=o.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=n;var D=a,F=T;try{F()}catch(X){se(h,D,X)}}}o=o.next}while(o!==d)}}catch(X){se(n,n.return,X)}}function Vy(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Ag(n,a)}catch(o){se(e,e.return,o)}}}function My(e,n,a){a.props=na(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){se(e,n,o)}}function gl(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){se(e,n,h)}}function zi(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){se(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){se(e,n,h)}else a.current=null}function jy(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){se(e,e.return,h)}}function od(e,n,a){try{var o=e.stateNode;vS(o,e.type,a,n),o[Xe]=n}catch(h){se(e,e.return,h)}}function Ly(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&er(e.type)||e.tag===4}function ld(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Ly(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&er(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ud(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=li));else if(o!==4&&(o===27&&er(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(ud(e,n,a),e=e.sibling;e!==null;)ud(e,n,a),e=e.sibling}function gc(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&er(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(gc(e,n,a),e=e.sibling;e!==null;)gc(e,n,a),e=e.sibling}function Py(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);on(n,o,a),n[je]=e,n[Xe]=a}catch(d){se(e,e.return,d)}}var fs=!1,qe=!1,cd=!1,Uy=typeof WeakSet=="function"?WeakSet:Set,We=null;function Wb(e,n){if(e=e.containerInfo,Nd=Lc,e=Jp(e),nf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,T=-1,D=-1,F=0,X=0,it=e,G=null;e:for(;;){for(var Y;it!==a||h!==0&&it.nodeType!==3||(T=v+h),it!==d||o!==0&&it.nodeType!==3||(D=v+o),it.nodeType===3&&(v+=it.nodeValue.length),(Y=it.firstChild)!==null;)G=it,it=Y;for(;;){if(it===e)break e;if(G===a&&++F===h&&(T=v),G===d&&++X===o&&(D=v),(Y=it.nextSibling)!==null)break;it=G,G=it.parentNode}it=Y}a=T===-1||D===-1?null:{start:T,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dd={focusedElem:e,selectionRange:a},Lc=!1,We=n;We!==null;)if(n=We,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,We=e;else for(;We!==null;){switch(n=We,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=n,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var pt=na(a.type,h);e=o.getSnapshotBeforeUpdate(pt,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(St){se(a,a.return,St)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Md(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Md(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,We=e;break}We=n.return}}function zy(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:ms(e,a),o&4&&pl(5,a);break;case 1:if(ms(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){se(a,a.return,v)}else{var h=na(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){se(a,a.return,v)}}o&64&&Vy(a),o&512&&gl(a,a.return);break;case 3:if(ms(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Ag(e,n)}catch(v){se(a,a.return,v)}}break;case 27:n===null&&o&4&&Py(a);case 26:case 5:ms(e,a),n===null&&o&4&&jy(a),o&512&&gl(a,a.return);break;case 12:ms(e,a);break;case 31:ms(e,a),o&4&&Hy(e,a);break;case 13:ms(e,a),o&4&&Fy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=oS.bind(null,a),RS(e,a))));break;case 22:if(o=a.memoizedState!==null||fs,!o){n=n!==null&&n.memoizedState!==null||qe,h=fs;var d=qe;fs=o,(qe=n)&&!d?ps(e,a,(a.subtreeFlags&8772)!==0):ms(e,a),fs=h,qe=d}break;case 30:break;default:ms(e,a)}}function By(e){var n=e.alternate;n!==null&&(e.alternate=null,By(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ea(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ee=null,An=!1;function ds(e,n,a){for(a=a.child;a!==null;)qy(e,n,a),a=a.sibling}function qy(e,n,a){if(_e&&typeof _e.onCommitFiberUnmount=="function")try{_e.onCommitFiberUnmount(Pt,a)}catch{}switch(a.tag){case 26:qe||zi(a,n),ds(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:qe||zi(a,n);var o=Ee,h=An;er(a.type)&&(Ee=a.stateNode,An=!1),ds(e,n,a),wl(a.stateNode),Ee=o,An=h;break;case 5:qe||zi(a,n);case 6:if(o=Ee,h=An,Ee=null,ds(e,n,a),Ee=o,An=h,Ee!==null)if(An)try{(Ee.nodeType===9?Ee.body:Ee.nodeName==="HTML"?Ee.ownerDocument.body:Ee).removeChild(a.stateNode)}catch(d){se(a,n,d)}else try{Ee.removeChild(a.stateNode)}catch(d){se(a,n,d)}break;case 18:Ee!==null&&(An?(e=Ee,V_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),so(e)):V_(Ee,a.stateNode));break;case 4:o=Ee,h=An,Ee=a.stateNode.containerInfo,An=!0,ds(e,n,a),Ee=o,An=h;break;case 0:case 11:case 14:case 15:Qs(2,a,n),qe||Qs(4,a,n),ds(e,n,a);break;case 1:qe||(zi(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&My(a,n,o)),ds(e,n,a);break;case 21:ds(e,n,a);break;case 22:qe=(o=qe)||a.memoizedState!==null,ds(e,n,a),qe=o;break;default:ds(e,n,a)}}function Hy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{so(e)}catch(a){se(n,n.return,a)}}}function Fy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{so(e)}catch(a){se(n,n.return,a)}}function Zb(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Uy),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Uy),n;default:throw Error(r(435,e.tag))}}function yc(e,n){var a=Zb(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var h=lS.bind(null,e,o);o.then(h,h)}})}function wn(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=e,v=n,T=v;t:for(;T!==null;){switch(T.tag){case 27:if(er(T.type)){Ee=T.stateNode,An=!1;break t}break;case 5:Ee=T.stateNode,An=!1;break t;case 3:case 4:Ee=T.stateNode.containerInfo,An=!0;break t}T=T.return}if(Ee===null)throw Error(r(160));qy(d,v,h),Ee=null,An=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Gy(n,e),n=n.sibling}var mi=null;function Gy(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:wn(n,e),xn(e),o&4&&(Qs(3,e,e.return),pl(3,e),Qs(5,e,e.return));break;case 1:wn(n,e),xn(e),o&512&&(qe||a===null||zi(a,a.return)),o&64&&fs&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=mi;if(wn(n,e),xn(e),o&512&&(qe||a===null||zi(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[xi]||d[je]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),on(d,o,a),d[je]=e,Le(d),o=d;break t;case"link":var v=G_("link","href",h).get(o+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break e}}d=h.createElement(o),on(d,o,a),h.head.appendChild(d);break;case"meta":if(v=G_("meta","content",h).get(o+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break e}}d=h.createElement(o),on(d,o,a),h.head.appendChild(d);break;default:throw Error(r(468,o))}d[je]=e,Le(d),o=d}e.stateNode=o}else K_(h,e.type,e.stateNode);else e.stateNode=F_(h,o,e.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?K_(h,e.type,e.stateNode):F_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&od(e,e.memoizedProps,a.memoizedProps)}break;case 27:wn(n,e),xn(e),o&512&&(qe||a===null||zi(a,a.return)),a!==null&&o&4&&od(e,e.memoizedProps,a.memoizedProps);break;case 5:if(wn(n,e),xn(e),o&512&&(qe||a===null||zi(a,a.return)),e.flags&32){h=e.stateNode;try{Sn(h,"")}catch(pt){se(e,e.return,pt)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,od(e,h,a!==null?a.memoizedProps:h)),o&1024&&(cd=!0);break;case 6:if(wn(n,e),xn(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(pt){se(e,e.return,pt)}}break;case 3:if(Oc=null,h=mi,mi=Nc(n.containerInfo),wn(n,e),mi=h,xn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{so(n.containerInfo)}catch(pt){se(e,e.return,pt)}cd&&(cd=!1,Ky(e));break;case 4:o=mi,mi=Nc(e.stateNode.containerInfo),wn(n,e),xn(e),mi=o;break;case 12:wn(n,e),xn(e);break;case 31:wn(n,e),xn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,yc(e,o)));break;case 13:wn(n,e),xn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(vc=_t()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,yc(e,o)));break;case 22:h=e.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,F=fs,X=qe;if(fs=F||h,qe=X||D,wn(n,e),qe=X,fs=F,xn(e),o&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||D||fs||qe||ia(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){D=a=n;try{if(d=D.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=D.stateNode;var it=D.memoizedProps.style,G=it!=null&&it.hasOwnProperty("display")?it.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(pt){se(D,D.return,pt)}}}else if(n.tag===6){if(a===null){D=n;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(pt){se(D,D.return,pt)}}}else if(n.tag===18){if(a===null){D=n;try{var Y=D.stateNode;h?M_(Y,!0):M_(D.stateNode,!1)}catch(pt){se(D,D.return,pt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,yc(e,a))));break;case 19:wn(n,e),xn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,yc(e,o)));break;case 30:break;case 21:break;default:wn(n,e),xn(e)}}function xn(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(Ly(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=ld(e);gc(e,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(Sn(v,""),a.flags&=-33);var T=ld(e);gc(e,T,v);break;case 3:case 4:var D=a.stateNode.containerInfo,F=ld(e);ud(e,F,D);break;default:throw Error(r(161))}}catch(X){se(e,e.return,X)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Ky(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Ky(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ms(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)zy(e,n.alternate,n),n=n.sibling}function ia(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Qs(4,n,n.return),ia(n);break;case 1:zi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&My(n,n.return,a),ia(n);break;case 27:wl(n.stateNode);case 26:case 5:zi(n,n.return),ia(n);break;case 22:n.memoizedState===null&&ia(n);break;case 30:ia(n);break;default:ia(n)}e=e.sibling}}function ps(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,d=n,v=d.flags;switch(d.tag){case 0:case 11:case 15:ps(h,d,a),pl(4,d);break;case 1:if(ps(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){se(o,o.return,F)}if(o=d,h=o.updateQueue,h!==null){var T=o.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)Sg(D[h],T)}catch(F){se(o,o.return,F)}}a&&v&64&&Vy(d),gl(d,d.return);break;case 27:Py(d);case 26:case 5:ps(h,d,a),a&&o===null&&v&4&&jy(d),gl(d,d.return);break;case 12:ps(h,d,a);break;case 31:ps(h,d,a),a&&v&4&&Hy(h,d);break;case 13:ps(h,d,a),a&&v&4&&Fy(h,d);break;case 22:d.memoizedState===null&&ps(h,d,a),gl(d,d.return);break;case 30:break;default:ps(h,d,a)}n=n.sibling}}function hd(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&nl(a))}function fd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&nl(e))}function pi(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Yy(e,n,a,o),n=n.sibling}function Yy(e,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:pi(e,n,a,o),h&2048&&pl(9,n);break;case 1:pi(e,n,a,o);break;case 3:pi(e,n,a,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&nl(e)));break;case 12:if(h&2048){pi(e,n,a,o),e=n.stateNode;try{var d=n.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){se(n,n.return,D)}}else pi(e,n,a,o);break;case 31:pi(e,n,a,o);break;case 13:pi(e,n,a,o);break;case 23:break;case 22:d=n.stateNode,v=n.alternate,n.memoizedState!==null?d._visibility&2?pi(e,n,a,o):yl(e,n):d._visibility&2?pi(e,n,a,o):(d._visibility|=2,Ya(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&hd(v,n);break;case 24:pi(e,n,a,o),h&2048&&fd(n.alternate,n);break;default:pi(e,n,a,o)}}function Ya(e,n,a,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,v=n,T=a,D=o,F=v.flags;switch(v.tag){case 0:case 11:case 15:Ya(d,v,T,D,h),pl(8,v);break;case 23:break;case 22:var X=v.stateNode;v.memoizedState!==null?X._visibility&2?Ya(d,v,T,D,h):yl(d,v):(X._visibility|=2,Ya(d,v,T,D,h)),h&&F&2048&&hd(v.alternate,v);break;case 24:Ya(d,v,T,D,h),h&&F&2048&&fd(v.alternate,v);break;default:Ya(d,v,T,D,h)}n=n.sibling}}function yl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,h=o.flags;switch(o.tag){case 22:yl(a,o),h&2048&&hd(o.alternate,o);break;case 24:yl(a,o),h&2048&&fd(o.alternate,o);break;default:yl(a,o)}n=n.sibling}}var _l=8192;function Qa(e,n,a){if(e.subtreeFlags&_l)for(e=e.child;e!==null;)Qy(e,n,a),e=e.sibling}function Qy(e,n,a){switch(e.tag){case 26:Qa(e,n,a),e.flags&_l&&e.memoizedState!==null&&US(a,mi,e.memoizedState,e.memoizedProps);break;case 5:Qa(e,n,a);break;case 3:case 4:var o=mi;mi=Nc(e.stateNode.containerInfo),Qa(e,n,a),mi=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=_l,_l=16777216,Qa(e,n,a),_l=o):Qa(e,n,a));break;default:Qa(e,n,a)}}function $y(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function vl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];We=o,Jy(o,e)}$y(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xy(e),e=e.sibling}function Xy(e){switch(e.tag){case 0:case 11:case 15:vl(e),e.flags&2048&&Qs(9,e,e.return);break;case 3:vl(e);break;case 12:vl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,_c(e)):vl(e);break;default:vl(e)}}function _c(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];We=o,Jy(o,e)}$y(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Qs(8,n,n.return),_c(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,_c(n));break;default:_c(n)}e=e.sibling}}function Jy(e,n){for(;We!==null;){var a=We;switch(a.tag){case 0:case 11:case 15:Qs(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:nl(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,We=o;else t:for(a=e;We!==null;){o=We;var h=o.sibling,d=o.return;if(By(o),o===a){We=null;break t}if(h!==null){h.return=d,We=h;break t}We=d}}}var tS={getCacheForType:function(e){var n=rn(Ue),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return rn(Ue).controller.signal}},eS=typeof WeakMap=="function"?WeakMap:Map,Zt=0,ue=null,zt=null,qt=0,ie=0,Ln=null,$s=!1,$a=!1,dd=!1,gs=0,Ae=0,Xs=0,sa=0,md=0,Pn=0,Xa=0,El=null,Rn=null,pd=!1,vc=0,Wy=0,Ec=1/0,Tc=null,Js=null,Ye=0,Ws=null,Ja=null,ys=0,gd=0,yd=null,Zy=null,Tl=0,_d=null;function Un(){return(Zt&2)!==0&&qt!==0?qt&-qt:M.T!==null?Ad():bu()}function t_(){if(Pn===0)if((qt&536870912)===0||Yt){var e=Nr;Nr<<=1,(Nr&3932160)===0&&(Nr=262144),Pn=e}else Pn=536870912;return e=Mn.current,e!==null&&(e.flags|=32),Pn}function Cn(e,n,a){(e===ue&&(ie===2||ie===9)||e.cancelPendingCommit!==null)&&(Wa(e,0),Zs(e,qt,Pn,!1)),Dr(e,a),((Zt&2)===0||e!==ue)&&(e===ue&&((Zt&2)===0&&(sa|=a),Ae===4&&Zs(e,qt,Pn,!1)),Bi(e))}function e_(e,n,a){if((Zt&6)!==0)throw Error(r(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||ri(e,n),h=o?sS(e,n):Ed(e,n,!0),d=o;do{if(h===0){$a&&!o&&Zs(e,n,0,!1);break}else{if(a=e.current.alternate,d&&!nS(a)){h=Ed(e,n,!1),d=!1;continue}if(h===2){if(d=n,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var T=e;h=El;var D=T.current.memoizedState.isDehydrated;if(D&&(Wa(T,v).flags|=256),v=Ed(T,v,!1),v!==2){if(dd&&!D){T.errorRecoveryDisabledLanes|=d,sa|=d,h=4;break t}d=Rn,Rn=h,d!==null&&(Rn===null?Rn=d:Rn.push.apply(Rn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Wa(e,0),Zs(e,n,0,!0);break}t:{switch(o=e,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Zs(o,n,Pn,!$s);break t;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=vc+300-_t(),10<h)){if(Zs(o,n,Pn,!$s),Si(o,0,!0)!==0)break t;ys=n,o.timeoutHandle=D_(n_.bind(null,o,a,Rn,Tc,pd,n,Pn,sa,Xa,$s,d,"Throttled",-0,0),h);break t}n_(o,a,Rn,Tc,pd,n,Pn,sa,Xa,$s,d,null,-0,0)}}break}while(!0);Bi(e)}function n_(e,n,a,o,h,d,v,T,D,F,X,it,G,Y){if(e.timeoutHandle=-1,it=n.subtreeFlags,it&8192||(it&16785408)===16785408){it={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},Qy(n,d,it);var pt=(d&62914560)===d?vc-_t():(d&4194048)===d?Wy-_t():0;if(pt=zS(it,pt),pt!==null){ys=d,e.cancelPendingCommit=pt(c_.bind(null,e,n,d,a,o,h,v,T,D,X,it,null,G,Y)),Zs(e,d,v,!F);return}}c_(e,n,d,a,o,h,v,T,D)}function nS(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!On(d(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Zs(e,n,a,o){n&=~md,n&=~sa,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var d=31-me(h),v=1<<d;o[d]=-1,h&=~v}a!==0&&Or(e,a,n)}function bc(){return(Zt&6)===0?(bl(0),!1):!0}function vd(){if(zt!==null){if(ie===0)var e=zt.return;else e=zt,as=$r=null,Mf(e),qa=null,sl=0,e=zt;for(;e!==null;)Oy(e.alternate,e),e=e.return;zt=null}}function Wa(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,bS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ys=0,vd(),ue=e,zt=a=ss(e.current,null),qt=n,ie=0,Ln=null,$s=!1,$a=ri(e,n),dd=!1,Xa=Pn=md=sa=Xs=Ae=0,Rn=El=null,pd=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-me(o),d=1<<h;n|=e[h],o&=~d}return gs=n,Hu(),a}function i_(e,n){Vt=null,M.H=fl,n===Ba||n===Ju?(n=vg(),ie=3):n===Sf?(n=vg(),ie=4):ie=n===Jf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ln=n,zt===null&&(Ae=1,hc(e,$n(n,e.current)))}function s_(){var e=Mn.current;return e===null?!0:(qt&4194048)===qt?Zn===null:(qt&62914560)===qt||(qt&536870912)!==0?e===Zn:!1}function r_(){var e=M.H;return M.H=fl,e===null?fl:e}function a_(){var e=M.A;return M.A=tS,e}function Sc(){Ae=4,$s||(qt&4194048)!==qt&&Mn.current!==null||($a=!0),(Xs&134217727)===0&&(sa&134217727)===0||ue===null||Zs(ue,qt,Pn,!1)}function Ed(e,n,a){var o=Zt;Zt|=2;var h=r_(),d=a_();(ue!==e||qt!==n)&&(Tc=null,Wa(e,n)),n=!1;var v=Ae;t:do try{if(ie!==0&&zt!==null){var T=zt,D=Ln;switch(ie){case 8:vd(),v=6;break t;case 3:case 2:case 9:case 6:Mn.current===null&&(n=!0);var F=ie;if(ie=0,Ln=null,Za(e,T,D,F),a&&$a){v=0;break t}break;default:F=ie,ie=0,Ln=null,Za(e,T,D,F)}}iS(),v=Ae;break}catch(X){i_(e,X)}while(!0);return n&&e.shellSuspendCounter++,as=$r=null,Zt=o,M.H=h,M.A=d,zt===null&&(ue=null,qt=0,Hu()),v}function iS(){for(;zt!==null;)o_(zt)}function sS(e,n){var a=Zt;Zt|=2;var o=r_(),h=a_();ue!==e||qt!==n?(Tc=null,Ec=_t()+500,Wa(e,n)):$a=ri(e,n);t:do try{if(ie!==0&&zt!==null){n=zt;var d=Ln;e:switch(ie){case 1:ie=0,Ln=null,Za(e,n,d,1);break;case 2:case 9:if(yg(d)){ie=0,Ln=null,l_(n);break}n=function(){ie!==2&&ie!==9||ue!==e||(ie=7),Bi(e)},d.then(n,n);break t;case 3:ie=7;break t;case 4:ie=5;break t;case 7:yg(d)?(ie=0,Ln=null,l_(n)):(ie=0,Ln=null,Za(e,n,d,7));break;case 5:var v=null;switch(zt.tag){case 26:v=zt.memoizedState;case 5:case 27:var T=zt;if(v?Y_(v):T.stateNode.complete){ie=0,Ln=null;var D=T.sibling;if(D!==null)zt=D;else{var F=T.return;F!==null?(zt=F,Ac(F)):zt=null}break e}}ie=0,Ln=null,Za(e,n,d,5);break;case 6:ie=0,Ln=null,Za(e,n,d,6);break;case 8:vd(),Ae=6;break t;default:throw Error(r(462))}}rS();break}catch(X){i_(e,X)}while(!0);return as=$r=null,M.H=o,M.A=h,Zt=a,zt!==null?0:(ue=null,qt=0,Hu(),Ae)}function rS(){for(;zt!==null&&!ya();)o_(zt)}function o_(e){var n=Ny(e.alternate,e,gs);e.memoizedProps=e.pendingProps,n===null?Ac(e):zt=n}function l_(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=wy(a,n,n.pendingProps,n.type,void 0,qt);break;case 11:n=wy(a,n,n.pendingProps,n.type.render,n.ref,qt);break;case 5:Mf(n);default:Oy(a,n),n=zt=ag(n,gs),n=Ny(a,n,gs)}e.memoizedProps=e.pendingProps,n===null?Ac(e):zt=n}function Za(e,n,a,o){as=$r=null,Mf(n),qa=null,sl=0;var h=n.return;try{if(Yb(e,h,n,a,qt)){Ae=1,hc(e,$n(a,e.current)),zt=null;return}}catch(d){if(h!==null)throw zt=h,d;Ae=1,hc(e,$n(a,e.current)),zt=null;return}n.flags&32768?(Yt||o===1?e=!0:$a||(qt&536870912)!==0?e=!1:($s=e=!0,(o===2||o===9||o===3||o===6)&&(o=Mn.current,o!==null&&o.tag===13&&(o.flags|=16384))),u_(n,e)):Ac(n)}function Ac(e){var n=e;do{if((n.flags&32768)!==0){u_(n,$s);return}e=n.return;var a=Xb(n.alternate,n,gs);if(a!==null){zt=a;return}if(n=n.sibling,n!==null){zt=n;return}zt=n=e}while(n!==null);Ae===0&&(Ae=5)}function u_(e,n){do{var a=Jb(e.alternate,e);if(a!==null){a.flags&=32767,zt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){zt=e;return}zt=e=a}while(e!==null);Ae=6,zt=null}function c_(e,n,a,o,h,d,v,T,D){e.cancelPendingCommit=null;do wc();while(Ye!==0);if((Zt&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(d=n.lanes|n.childLanes,d|=lf,Wh(e,a,d,v,T,D),e===ue&&(zt=ue=null,qt=0),Ja=n,Ws=e,ys=a,gd=d,yd=h,Zy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,uS(en,function(){return p_(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=M.T,M.T=null,h=$.p,$.p=2,v=Zt,Zt|=4;try{Wb(e,n,a)}finally{Zt=v,$.p=h,M.T=o}}Ye=1,h_(),f_(),d_()}}function h_(){if(Ye===1){Ye=0;var e=Ws,n=Ja,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=M.T,M.T=null;var o=$.p;$.p=2;var h=Zt;Zt|=4;try{Gy(n,e);var d=Dd,v=Jp(e.containerInfo),T=d.focusedElem,D=d.selectionRange;if(v!==T&&T&&T.ownerDocument&&Xp(T.ownerDocument.documentElement,T)){if(D!==null&&nf(T)){var F=D.start,X=D.end;if(X===void 0&&(X=F),"selectionStart"in T)T.selectionStart=F,T.selectionEnd=Math.min(X,T.value.length);else{var it=T.ownerDocument||document,G=it&&it.defaultView||window;if(G.getSelection){var Y=G.getSelection(),pt=T.textContent.length,St=Math.min(D.start,pt),le=D.end===void 0?St:Math.min(D.end,pt);!Y.extend&&St>le&&(v=le,le=St,St=v);var P=$p(T,St),V=$p(T,le);if(P&&V&&(Y.rangeCount!==1||Y.anchorNode!==P.node||Y.anchorOffset!==P.offset||Y.focusNode!==V.node||Y.focusOffset!==V.offset)){var H=it.createRange();H.setStart(P.node,P.offset),Y.removeAllRanges(),St>le?(Y.addRange(H),Y.extend(V.node,V.offset)):(H.setEnd(V.node,V.offset),Y.addRange(H))}}}}for(it=[],Y=T;Y=Y.parentNode;)Y.nodeType===1&&it.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<it.length;T++){var tt=it[T];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}Lc=!!Nd,Dd=Nd=null}finally{Zt=h,$.p=o,M.T=a}}e.current=n,Ye=2}}function f_(){if(Ye===2){Ye=0;var e=Ws,n=Ja,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=M.T,M.T=null;var o=$.p;$.p=2;var h=Zt;Zt|=4;try{zy(e,n.alternate,n)}finally{Zt=h,$.p=o,M.T=a}}Ye=3}}function d_(){if(Ye===4||Ye===3){Ye=0,It();var e=Ws,n=Ja,a=ys,o=Zy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ye=5:(Ye=0,Ja=Ws=null,m_(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Js=null),ts(a),n=n.stateNode,_e&&typeof _e.onCommitFiberRoot=="function")try{_e.onCommitFiberRoot(Pt,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=M.T,h=$.p,$.p=2,M.T=null;try{for(var d=e.onRecoverableError,v=0;v<o.length;v++){var T=o[v];d(T.value,{componentStack:T.stack})}}finally{M.T=n,$.p=h}}(ys&3)!==0&&wc(),Bi(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===_d?Tl++:(Tl=0,_d=e):Tl=0,bl(0)}}function m_(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,nl(n)))}function wc(){return h_(),f_(),d_(),p_()}function p_(){if(Ye!==5)return!1;var e=Ws,n=gd;gd=0;var a=ts(ys),o=M.T,h=$.p;try{$.p=32>a?32:a,M.T=null,a=yd,yd=null;var d=Ws,v=ys;if(Ye=0,Ja=Ws=null,ys=0,(Zt&6)!==0)throw Error(r(331));var T=Zt;if(Zt|=4,Xy(d.current),Yy(d,d.current,v,a),Zt=T,bl(0,!1),_e&&typeof _e.onPostCommitFiberRoot=="function")try{_e.onPostCommitFiberRoot(Pt,d)}catch{}return!0}finally{$.p=h,M.T=o,m_(e,n)}}function g_(e,n,a){n=$n(a,n),n=Xf(e.stateNode,n,2),e=Gs(e,n,2),e!==null&&(Dr(e,2),Bi(e))}function se(e,n,a){if(e.tag===3)g_(e,e,a);else for(;n!==null;){if(n.tag===3){g_(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Js===null||!Js.has(o))){e=$n(a,e),a=yy(2),o=Gs(n,a,2),o!==null&&(_y(a,o,n,e),Dr(o,2),Bi(o));break}}n=n.return}}function Td(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new eS;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(dd=!0,h.add(a),e=aS.bind(null,e,n,a),n.then(e,e))}function aS(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ue===e&&(qt&a)===a&&(Ae===4||Ae===3&&(qt&62914560)===qt&&300>_t()-vc?(Zt&2)===0&&Wa(e,0):md|=a,Xa===qt&&(Xa=0)),Bi(e)}function y_(e,n){n===0&&(n=Tu()),e=Kr(e,n),e!==null&&(Dr(e,n),Bi(e))}function oS(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),y_(e,a)}function lS(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(n),y_(e,a)}function uS(e,n){return De(e,n)}var xc=null,to=null,bd=!1,Rc=!1,Sd=!1,tr=0;function Bi(e){e!==to&&e.next===null&&(to===null?xc=to=e:to=to.next=e),Rc=!0,bd||(bd=!0,hS())}function bl(e,n){if(!Sd&&Rc){Sd=!0;do for(var a=!1,o=xc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,T=o.pingedLanes;d=(1<<31-me(42|e)+1)-1,d&=h&~(v&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,T_(o,d))}else d=qt,d=Si(o,o===ue?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||ri(o,d)||(a=!0,T_(o,d));o=o.next}while(a);Sd=!1}}function cS(){__()}function __(){Rc=bd=!1;var e=0;tr!==0&&TS()&&(e=tr);for(var n=_t(),a=null,o=xc;o!==null;){var h=o.next,d=v_(o,n);d===0?(o.next=null,a===null?xc=h:a.next=h,h===null&&(to=a)):(a=o,(e!==0||(d&3)!==0)&&(Rc=!0)),o=h}Ye!==0&&Ye!==5||bl(e),tr!==0&&(tr=0)}function v_(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-me(d),T=1<<v,D=h[v];D===-1?((T&a)===0||(T&o)!==0)&&(h[v]=Jh(T,n)):D<=n&&(e.expiredLanes|=T),d&=~T}if(n=ue,a=qt,a=Si(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(ie===2||ie===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&qn(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ri(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&qn(o),ts(a)){case 2:case 8:a=$e;break;case 32:a=en;break;case 268435456:a=Hn;break;default:a=en}return o=E_.bind(null,e),a=De(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&qn(o),e.callbackPriority=2,e.callbackNode=null,2}function E_(e,n){if(Ye!==0&&Ye!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(wc()&&e.callbackNode!==a)return null;var o=qt;return o=Si(e,e===ue?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(e_(e,o,n),v_(e,_t()),e.callbackNode!=null&&e.callbackNode===a?E_.bind(null,e):null)}function T_(e,n){if(wc())return null;e_(e,n,!0)}function hS(){SS(function(){(Zt&6)!==0?De(Oe,cS):__()})}function Ad(){if(tr===0){var e=Ua;e===0&&(e=Ti,Ti<<=1,(Ti&261888)===0&&(Ti=256)),tr=e}return tr}function b_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Aa(""+e)}function S_(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function fS(e,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var d=b_((h[Xe]||null).action),v=o.submitter;v&&(n=(n=v[Xe]||null)?b_(n.formAction):v.getAttribute("formAction"),n!==null&&(d=n,v=null));var T=new Vi("action","action",null,o,h);e.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(tr!==0){var D=v?S_(h,v):new FormData(h);Ff(a,{pending:!0,data:D,method:h.method,action:d},null,D)}}else typeof d=="function"&&(T.preventDefault(),D=v?S_(h,v):new FormData(h),Ff(a,{pending:!0,data:D,method:h.method,action:d},d,D))},currentTarget:h}]})}}for(var wd=0;wd<of.length;wd++){var xd=of[wd],dS=xd.toLowerCase(),mS=xd[0].toUpperCase()+xd.slice(1);di(dS,"on"+mS)}di(tg,"onAnimationEnd"),di(eg,"onAnimationIteration"),di(ng,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(kb,"onTransitionRun"),di(Nb,"onTransitionStart"),di(Db,"onTransitionCancel"),di(ig,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sl));function A_(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var d=void 0;if(n)for(var v=o.length-1;0<=v;v--){var T=o[v],D=T.instance,F=T.currentTarget;if(T=T.listener,D!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=F;try{d(h)}catch(X){qu(X)}h.currentTarget=null,d=D}else for(v=0;v<o.length;v++){if(T=o[v],D=T.instance,F=T.currentTarget,T=T.listener,D!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=F;try{d(h)}catch(X){qu(X)}h.currentTarget=null,d=D}}}}function Bt(e,n){var a=n[va];a===void 0&&(a=n[va]=new Set);var o=e+"__bubble";a.has(o)||(w_(n,e,2,!1),a.add(o))}function Rd(e,n,a){var o=0;n&&(o|=4),w_(a,e,o,n)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function Cd(e){if(!e[Cc]){e[Cc]=!0,Mo.forEach(function(a){a!=="selectionchange"&&(pS.has(a)||Rd(a,!1,e),Rd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Cc]||(n[Cc]=!0,Rd("selectionchange",!1,n))}}function w_(e,n,a,o){switch(tv(n)){case 2:var h=HS;break;case 8:h=FS;break;default:h=Hd}a=h.bind(null,n,a,e),h=void 0,!Pr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,a,{capture:!0,passive:h}):e.addEventListener(n,a,!0):h!==void 0?e.addEventListener(n,a,{passive:h}):e.addEventListener(n,a,!1)}function Id(e,n,a,o,h){var d=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var T=o.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=o.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=Ri(T),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){o=d=v;continue t}T=T.parentNode}}o=o.return}Ms(function(){var F=d,X=Gn(a),it=[];t:{var G=sg.get(e);if(G!==void 0){var Y=Vi,pt=e;switch(e){case"keypress":if(zr(a)===0)break t;case"keydown":case"keyup":Y=Uu;break;case"focusin":pt="focus",Y=qr;break;case"focusout":pt="blur",Y=qr;break;case"beforeblur":case"afterblur":Y=qr;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=g;break;case tg:case eg:case ng:Y=Du;break;case ig:Y=w;break;case"scroll":case"scrollend":Y=Yo;break;case"wheel":Y=K;break;case"copy":case"cut":case"paste":Y=Ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=is;break;case"toggle":case"beforetoggle":Y=Ot}var St=(n&4)!==0,le=!St&&(e==="scroll"||e==="scrollend"),P=St?G!==null?G+"Capture":null:G;St=[];for(var V=F,H;V!==null;){var tt=V;if(H=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||H===null||P===null||(tt=ui(V,P),tt!=null&&St.push(Al(V,tt,H))),le)break;V=V.return}0<St.length&&(G=new Y(G,pt,null,a,X),it.push({event:G,listeners:St}))}}if((n&7)===0){t:{if(G=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",G&&a!==Fo&&(pt=a.relatedTarget||a.fromElement)&&(Ri(pt)||pt[wi]))break t;if((Y||G)&&(G=X.window===X?X:(G=X.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(pt=a.relatedTarget||a.toElement,Y=F,pt=pt?Ri(pt):null,pt!==null&&(le=u(pt),St=pt.tag,pt!==le||St!==5&&St!==27&&St!==6)&&(pt=null)):(Y=null,pt=F),Y!==pt)){if(St=Qo,tt="onMouseLeave",P="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(St=is,tt="onPointerLeave",P="onPointerEnter",V="pointer"),le=Y==null?G:Nn(Y),H=pt==null?G:Nn(pt),G=new St(tt,V+"leave",Y,a,X),G.target=le,G.relatedTarget=H,tt=null,Ri(X)===F&&(St=new St(P,V+"enter",pt,a,X),St.target=H,St.relatedTarget=le,tt=St),le=tt,Y&&pt)e:{for(St=gS,P=Y,V=pt,H=0,tt=P;tt;tt=St(tt))H++;tt=0;for(var Tt=V;Tt;Tt=St(Tt))tt++;for(;0<H-tt;)P=St(P),H--;for(;0<tt-H;)V=St(V),tt--;for(;H--;){if(P===V||V!==null&&P===V.alternate){St=P;break e}P=St(P),V=St(V)}St=null}else St=null;Y!==null&&x_(it,G,Y,St,!1),pt!==null&&le!==null&&x_(it,le,pt,St,!0)}}t:{if(G=F?Nn(F):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var $t=Hp;else if(Bp(G))if(Fp)$t=Rb;else{$t=wb;var yt=Ab}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&Sa(F.elementType)&&($t=Hp):$t=xb;if($t&&($t=$t(e,F))){qp(it,$t,a,X);break t}yt&&yt(e,G,F),e==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&Bo(G,"number",G.value)}switch(yt=F?Nn(F):window,e){case"focusin":(Bp(yt)||yt.contentEditable==="true")&&(Na=yt,sf=F,Zo=null);break;case"focusout":Zo=sf=Na=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,Wp(it,a,X);break;case"selectionchange":if(Ib)break;case"keydown":case"keyup":Wp(it,a,X)}var Lt;if(Wt)t:{switch(e){case"compositionstart":var Ht="onCompositionStart";break t;case"compositionend":Ht="onCompositionEnd";break t;case"compositionupdate":Ht="onCompositionUpdate";break t}Ht=void 0}else ka?Hr(e,a)&&(Ht="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ht="onCompositionStart");Ht&&(Li&&a.locale!=="ko"&&(ka||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&ka&&(Lt=Ko()):(Oi=X,Go="value"in Oi?Oi.value:Oi.textContent,ka=!0)),yt=Ic(F,Ht),0<yt.length&&(Ht=new ji(Ht,e,null,a,X),it.push({event:Ht,listeners:yt}),Lt?Ht.data=Lt:(Lt=Ia(a),Lt!==null&&(Ht.data=Lt)))),(Lt=Yn?Eb(e,a):Tb(e,a))&&(Ht=Ic(F,"onBeforeInput"),0<Ht.length&&(yt=new ji("onBeforeInput","beforeinput",null,a,X),it.push({event:yt,listeners:Ht}),yt.data=Lt)),fS(it,e,F,a,X)}A_(it,n)})}function Al(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Ic(e,n){for(var a=n+"Capture",o=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ui(e,a),h!=null&&o.unshift(Al(e,h,d)),h=ui(e,n),h!=null&&o.push(Al(e,h,d))),e.tag===3)return o;e=e.return}return[]}function gS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function x_(e,n,a,o,h){for(var d=n._reactName,v=[];a!==null&&a!==o;){var T=a,D=T.alternate,F=T.stateNode;if(T=T.tag,D!==null&&D===o)break;T!==5&&T!==26&&T!==27||F===null||(D=F,h?(F=ui(a,d),F!=null&&v.unshift(Al(a,F,D))):h||(F=ui(a,d),F!=null&&v.push(Al(a,F,D)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var yS=/\r\n?/g,_S=/\u0000|\uFFFD/g;function R_(e){return(typeof e=="string"?e:""+e).replace(yS,`
`).replace(_S,"")}function C_(e,n){return n=R_(n),R_(e)===n}function oe(e,n,a,o,h,d){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Sn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Sn(e,""+o);break;case"className":Dn(e,"class",o);break;case"tabIndex":Dn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Dn(e,a,o);break;case"style":Ho(e,o,d);break;case"data":if(n!=="object"){Dn(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Aa(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&oe(e,n,"name",h.name,h,null),oe(e,n,"formEncType",h.formEncType,h,null),oe(e,n,"formMethod",h.formMethod,h,null),oe(e,n,"formTarget",h.formTarget,h,null)):(oe(e,n,"encType",h.encType,h,null),oe(e,n,"method",h.method,h,null),oe(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Aa(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=li);break;case"onScroll":o!=null&&Bt("scroll",e);break;case"onScrollEnd":o!=null&&Bt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Aa(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Bt("beforetoggle",e),Bt("toggle",e),Ta(e,"popover",o);break;case"xlinkActuate":Pe(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Pe(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Pe(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Pe(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Pe(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Pe(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Pe(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Pe(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Pe(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ta(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Iu.get(a)||a,Ta(e,a,o))}}function kd(e,n,a,o,h,d){switch(a){case"style":Ho(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Sn(e,o):(typeof o=="number"||typeof o=="bigint")&&Sn(e,""+o);break;case"onScroll":o!=null&&Bt("scroll",e);break;case"onScrollEnd":o!=null&&Bt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jo.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),d=e[Xe]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(n,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):Ta(e,a,o)}}}function on(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",e),Bt("load",e);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:oe(e,n,d,v,a,null)}}h&&oe(e,n,"srcSet",a.srcSet,a,null),o&&oe(e,n,"src",a.src,a,null);return;case"input":Bt("invalid",e);var T=d=v=h=null,D=null,F=null;for(o in a)if(a.hasOwnProperty(o)){var X=a[o];if(X!=null)switch(o){case"name":h=X;break;case"type":v=X;break;case"checked":D=X;break;case"defaultChecked":F=X;break;case"value":d=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,n));break;default:oe(e,n,o,X,a,null)}}xu(e,d,T,D,F,v,h,!1);return;case"select":Bt("invalid",e),o=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":o=T;default:oe(e,n,h,T,a,null)}n=d,a=v,e.multiple=!!o,n!=null?Ns(e,!!o,n,!1):a!=null&&Ns(e,!!o,a,!0);return;case"textarea":Bt("invalid",e),d=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":o=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:oe(e,n,v,T,a,null)}Ds(e,o,h,d);return;case"option":for(D in a)a.hasOwnProperty(D)&&(o=a[D],o!=null)&&(D==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":oe(e,n,D,o,a,null));return;case"dialog":Bt("beforetoggle",e),Bt("toggle",e),Bt("cancel",e),Bt("close",e);break;case"iframe":case"object":Bt("load",e);break;case"video":case"audio":for(o=0;o<Sl.length;o++)Bt(Sl[o],e);break;case"image":Bt("error",e),Bt("load",e);break;case"details":Bt("toggle",e);break;case"embed":case"source":case"link":Bt("error",e),Bt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(o=a[F],o!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:oe(e,n,F,o,a,null)}return;default:if(Sa(n)){for(X in a)a.hasOwnProperty(X)&&(o=a[X],o!==void 0&&kd(e,n,X,o,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(o=a[T],o!=null&&oe(e,n,T,o,a,null))}function vS(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,T=null,D=null,F=null,X=null;for(Y in a){var it=a[Y];if(a.hasOwnProperty(Y)&&it!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=it;default:o.hasOwnProperty(Y)||oe(e,n,Y,null,o,it)}}for(var G in o){var Y=o[G];if(it=a[G],o.hasOwnProperty(G)&&(Y!=null||it!=null))switch(G){case"type":d=Y;break;case"name":h=Y;break;case"checked":F=Y;break;case"defaultChecked":X=Y;break;case"value":v=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,n));break;default:Y!==it&&oe(e,n,G,Y,o,it)}}ba(e,v,T,D,F,X,d,h);return;case"select":Y=v=T=G=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":Y=D;default:o.hasOwnProperty(d)||oe(e,n,d,null,o,D)}for(h in o)if(d=o[h],D=a[h],o.hasOwnProperty(h)&&(d!=null||D!=null))switch(h){case"value":G=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==D&&oe(e,n,h,d,o,D)}n=T,a=v,o=Y,G!=null?Ns(e,!!a,G,!1):!!o!=!!a&&(n!=null?Ns(e,!!a,n,!0):Ns(e,!!a,a?[]:"",!1));return;case"textarea":Y=G=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:oe(e,n,T,null,o,h)}for(v in o)if(h=o[v],d=a[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":G=h;break;case"defaultValue":Y=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&oe(e,n,v,h,o,d)}Ru(e,G,Y);return;case"option":for(var pt in a)G=a[pt],a.hasOwnProperty(pt)&&G!=null&&!o.hasOwnProperty(pt)&&(pt==="selected"?e.selected=!1:oe(e,n,pt,null,o,G));for(D in o)G=o[D],Y=a[D],o.hasOwnProperty(D)&&G!==Y&&(G!=null||Y!=null)&&(D==="selected"?e.selected=G&&typeof G!="function"&&typeof G!="symbol":oe(e,n,D,G,o,Y));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var St in a)G=a[St],a.hasOwnProperty(St)&&G!=null&&!o.hasOwnProperty(St)&&oe(e,n,St,null,o,G);for(F in o)if(G=o[F],Y=a[F],o.hasOwnProperty(F)&&G!==Y&&(G!=null||Y!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,n));break;default:oe(e,n,F,G,o,Y)}return;default:if(Sa(n)){for(var le in a)G=a[le],a.hasOwnProperty(le)&&G!==void 0&&!o.hasOwnProperty(le)&&kd(e,n,le,void 0,o,G);for(X in o)G=o[X],Y=a[X],!o.hasOwnProperty(X)||G===Y||G===void 0&&Y===void 0||kd(e,n,X,G,o,Y);return}}for(var P in a)G=a[P],a.hasOwnProperty(P)&&G!=null&&!o.hasOwnProperty(P)&&oe(e,n,P,null,o,G);for(it in o)G=o[it],Y=a[it],!o.hasOwnProperty(it)||G===Y||G==null&&Y==null||oe(e,n,it,G,o,Y)}function I_(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ES(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],d=h.transferSize,v=h.initiatorType,T=h.duration;if(d&&T&&I_(v)){for(v=0,T=h.responseEnd,o+=1;o<a.length;o++){var D=a[o],F=D.startTime;if(F>T)break;var X=D.transferSize,it=D.initiatorType;X&&I_(it)&&(D=D.responseEnd,v+=X*(D<T?1:(T-F)/(D-F)))}if(--o,n+=8*(d+v)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Nd=null,Dd=null;function kc(e){return e.nodeType===9?e:e.ownerDocument}function k_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function N_(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Od(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Vd=null;function TS(){var e=window.event;return e&&e.type==="popstate"?e===Vd?!1:(Vd=e,!0):(Vd=null,!1)}var D_=typeof setTimeout=="function"?setTimeout:void 0,bS=typeof clearTimeout=="function"?clearTimeout:void 0,O_=typeof Promise=="function"?Promise:void 0,SS=typeof queueMicrotask=="function"?queueMicrotask:typeof O_<"u"?function(e){return O_.resolve(null).then(e).catch(AS)}:D_;function AS(e){setTimeout(function(){throw e})}function er(e){return e==="head"}function V_(e,n){var a=n,o=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(h),so(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")wl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,wl(a);for(var d=a.firstChild;d;){var v=d.nextSibling,T=d.nodeName;d[xi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&wl(e.ownerDocument.body);a=h}while(a);so(n)}function M_(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function Md(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Md(a),Ea(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function wS(e,n,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[xi])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=ti(e.nextSibling),e===null)break}return null}function xS(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ti(e.nextSibling),e===null))return null;return e}function j_(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ti(e.nextSibling),e===null))return null;return e}function jd(e){return e.data==="$?"||e.data==="$~"}function Ld(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function RS(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function ti(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Pd=null;function L_(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return ti(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function P_(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function U_(e,n,a){switch(n=kc(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function wl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ea(e)}var ei=new Map,z_=new Set;function Nc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var _s=$.d;$.d={f:CS,r:IS,D:kS,C:NS,L:DS,m:OS,X:MS,S:VS,M:jS};function CS(){var e=_s.f(),n=bc();return e||n}function IS(e){var n=Fn(e);n!==null&&n.tag===5&&n.type==="form"?iy(n):_s.r(e)}var eo=typeof document>"u"?null:document;function B_(e,n,a){var o=eo;if(o&&typeof n=="string"&&n){var h=bn(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),z_.has(h)||(z_.add(h),e={rel:e,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),on(n,"link",e),Le(n),o.head.appendChild(n)))}}function kS(e){_s.D(e),B_("dns-prefetch",e,null)}function NS(e,n){_s.C(e,n),B_("preconnect",e,n)}function DS(e,n,a){_s.L(e,n,a);var o=eo;if(o&&e&&n){var h='link[rel="preload"][as="'+bn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+bn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+bn(a.imageSizes)+'"]')):h+='[href="'+bn(e)+'"]';var d=h;switch(n){case"style":d=no(e);break;case"script":d=io(e)}ei.has(d)||(e=x({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),ei.set(d,e),o.querySelector(h)!==null||n==="style"&&o.querySelector(xl(d))||n==="script"&&o.querySelector(Rl(d))||(n=o.createElement("link"),on(n,"link",e),Le(n),o.head.appendChild(n)))}}function OS(e,n){_s.m(e,n);var a=eo;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+bn(o)+'"][href="'+bn(e)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=io(e)}if(!ei.has(d)&&(e=x({rel:"modulepreload",href:e},n),ei.set(d,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Rl(d)))return}o=a.createElement("link"),on(o,"link",e),Le(o),a.head.appendChild(o)}}}function VS(e,n,a){_s.S(e,n,a);var o=eo;if(o&&e){var h=Ci(o).hoistableStyles,d=no(e);n=n||"default";var v=h.get(d);if(!v){var T={loading:0,preload:null};if(v=o.querySelector(xl(d)))T.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":n},a),(a=ei.get(d))&&Ud(e,a);var D=v=o.createElement("link");Le(D),on(D,"link",e),D._p=new Promise(function(F,X){D.onload=F,D.onerror=X}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Dc(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(d,v)}}}function MS(e,n){_s.X(e,n);var a=eo;if(a&&e){var o=Ci(a).hoistableScripts,h=io(e),d=o.get(h);d||(d=a.querySelector(Rl(h)),d||(e=x({src:e,async:!0},n),(n=ei.get(h))&&zd(e,n),d=a.createElement("script"),Le(d),on(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function jS(e,n){_s.M(e,n);var a=eo;if(a&&e){var o=Ci(a).hoistableScripts,h=io(e),d=o.get(h);d||(d=a.querySelector(Rl(h)),d||(e=x({src:e,async:!0,type:"module"},n),(n=ei.get(h))&&zd(e,n),d=a.createElement("script"),Le(d),on(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function q_(e,n,a,o){var h=(h=ht.current)?Nc(h):null;if(!h)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=no(a.href),a=Ci(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=no(a.href);var d=Ci(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(xl(e)))&&!d._p&&(v.instance=d,v.state.loading=5),ei.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ei.set(e,a),d||LS(h,e,a,v.state))),n&&o===null)throw Error(r(528,""));return v}if(n&&o!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=io(a),a=Ci(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function no(e){return'href="'+bn(e)+'"'}function xl(e){return'link[rel="stylesheet"]['+e+"]"}function H_(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function LS(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),on(n,"link",a),Le(n),e.head.appendChild(n))}function io(e){return'[src="'+bn(e)+'"]'}function Rl(e){return"script[async]"+e}function F_(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+bn(a.href)+'"]');if(o)return n.instance=o,Le(o),o;var h=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Le(o),on(o,"style",h),Dc(o,a.precedence,e),n.instance=o;case"stylesheet":h=no(a.href);var d=e.querySelector(xl(h));if(d)return n.state.loading|=4,n.instance=d,Le(d),d;o=H_(a),(h=ei.get(h))&&Ud(o,h),d=(e.ownerDocument||e).createElement("link"),Le(d);var v=d;return v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),on(d,"link",o),n.state.loading|=4,Dc(d,a.precedence,e),n.instance=d;case"script":return d=io(a.src),(h=e.querySelector(Rl(d)))?(n.instance=h,Le(h),h):(o=a,(h=ei.get(d))&&(o=x({},a),zd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),Le(h),on(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Dc(o,a.precedence,e));return n.instance}function Dc(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var T=o[v];if(T.dataset.precedence===n)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Ud(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function zd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Oc=null;function G_(e,n,a){if(Oc===null){var o=new Map,h=Oc=new Map;h.set(a,o)}else h=Oc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[xi]||d[je]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(n)||"";v=e+v;var T=o.get(v);T?T.push(d):o.set(v,[d])}}return o}function K_(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function PS(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Y_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function US(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=no(o.href),d=n.querySelector(xl(h));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Vc.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=d,Le(d);return}d=n.ownerDocument||n,o=H_(o),(h=ei.get(h))&&Ud(o,h),d=d.createElement("link"),Le(d);var v=d;v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),on(d,"link",o),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Vc.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Bd=0;function zS(e,n){return e.stylesheets&&e.count===0&&jc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&jc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&Bd===0&&(Bd=62500*ES());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&jc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Bd?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Vc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Mc=null;function jc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Mc=new Map,n.forEach(BS,e),Mc=null,Vc.call(e))}function BS(e,n){if(!(n.state.loading&4)){var a=Mc.get(e);if(a)var o=a.get(null);else{a=new Map,Mc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=n.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||o,d===o&&a.set(null,h),a.set(v,h),this.count++,o=Vc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var Cl={$$typeof:gt,Provider:null,Consumer:null,_currentValue:at,_currentValue2:at,_threadCount:0};function qS(e,n,a,o,h,d,v,T,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Q_(e,n,a,o,h,d,v,T,D,F,X,it){return e=new qS(e,n,a,v,D,F,X,it,T),n=1,d===!0&&(n|=24),d=Vn(3,null,null,n),e.current=d,d.stateNode=e,n=Ef(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:n},Af(d),e}function $_(e){return e?(e=Va,e):Va}function X_(e,n,a,o,h,d){h=$_(h),o.context===null?o.context=h:o.pendingContext=h,o=Fs(n),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=Gs(e,o,n),a!==null&&(Cn(a,e,n),al(a,e,n))}function J_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function qd(e,n){J_(e,n),(e=e.alternate)&&J_(e,n)}function W_(e){if(e.tag===13||e.tag===31){var n=Kr(e,67108864);n!==null&&Cn(n,e,67108864),qd(e,67108864)}}function Z_(e){if(e.tag===13||e.tag===31){var n=Un();n=Vr(n);var a=Kr(e,n);a!==null&&Cn(a,e,n),qd(e,n)}}var Lc=!0;function HS(e,n,a,o){var h=M.T;M.T=null;var d=$.p;try{$.p=2,Hd(e,n,a,o)}finally{$.p=d,M.T=h}}function FS(e,n,a,o){var h=M.T;M.T=null;var d=$.p;try{$.p=8,Hd(e,n,a,o)}finally{$.p=d,M.T=h}}function Hd(e,n,a,o){if(Lc){var h=Fd(o);if(h===null)Id(e,n,o,Pc,a),ev(e,o);else if(KS(h,e,n,a,o))o.stopPropagation();else if(ev(e,o),n&4&&-1<GS.indexOf(e)){for(;h!==null;){var d=Fn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=bi(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var D=1<<31-me(v);T.entanglements[1]|=D,v&=~D}Bi(d),(Zt&6)===0&&(Ec=_t()+500,bl(0))}}break;case 31:case 13:T=Kr(d,2),T!==null&&Cn(T,d,2),bc(),qd(d,2)}if(d=Fd(o),d===null&&Id(e,n,o,Pc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else Id(e,n,o,null,a)}}function Fd(e){return e=Gn(e),Gd(e)}var Pc=null;function Gd(e){if(Pc=null,e=Ri(e),e!==null){var n=u(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=f(n),e!==null)return e;e=null}else if(a===31){if(e=p(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Pc=e,null}function tv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ee()){case Oe:return 2;case $e:return 8;case en:case gn:return 32;case Hn:return 268435456;default:return 32}default:return 32}}var Kd=!1,nr=null,ir=null,sr=null,Il=new Map,kl=new Map,rr=[],GS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ev(e,n){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":Il.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(n.pointerId)}}function Nl(e,n,a,o,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},n!==null&&(n=Fn(n),n!==null&&W_(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function KS(e,n,a,o,h){switch(n){case"focusin":return nr=Nl(nr,e,n,a,o,h),!0;case"dragenter":return ir=Nl(ir,e,n,a,o,h),!0;case"mouseover":return sr=Nl(sr,e,n,a,o,h),!0;case"pointerover":var d=h.pointerId;return Il.set(d,Nl(Il.get(d)||null,e,n,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,kl.set(d,Nl(kl.get(d)||null,e,n,a,o,h)),!0}return!1}function nv(e){var n=Ri(e.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){e.blockedOn=n,ai(e.priority,function(){Z_(a)});return}}else if(n===31){if(n=p(a),n!==null){e.blockedOn=n,ai(e.priority,function(){Z_(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Uc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Fd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Fo=o,a.target.dispatchEvent(o),Fo=null}else return n=Fn(a),n!==null&&W_(n),e.blockedOn=a,!1;n.shift()}return!0}function iv(e,n,a){Uc(e)&&a.delete(n)}function YS(){Kd=!1,nr!==null&&Uc(nr)&&(nr=null),ir!==null&&Uc(ir)&&(ir=null),sr!==null&&Uc(sr)&&(sr=null),Il.forEach(iv),kl.forEach(iv)}function zc(e,n){e.blockedOn===n&&(e.blockedOn=null,Kd||(Kd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,YS)))}var Bc=null;function sv(e){Bc!==e&&(Bc=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Bc===e&&(Bc=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(Gd(o||a)===null)continue;break}var d=Fn(a);d!==null&&(e.splice(n,3),n-=3,Ff(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function so(e){function n(D){return zc(D,e)}nr!==null&&zc(nr,e),ir!==null&&zc(ir,e),sr!==null&&zc(sr,e),Il.forEach(n),kl.forEach(n);for(var a=0;a<rr.length;a++){var o=rr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<rr.length&&(a=rr[0],a.blockedOn===null);)nv(a),a.blockedOn===null&&rr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],v=h[Xe]||null;if(typeof d=="function")v||sv(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Xe]||null)T=v.formAction;else if(Gd(h)!==null)continue}else T=v.action;typeof T=="function"?a[o+1]=T:(a.splice(o,3),o-=3),sv(a)}}}function rv(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Yd(e){this._internalRoot=e}qc.prototype.render=Yd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,o=Un();X_(a,o,e,n,null,null)},qc.prototype.unmount=Yd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;X_(e.current,2,null,e,null,null),bc(),n[wi]=null}};function qc(e){this._internalRoot=e}qc.prototype.unstable_scheduleHydration=function(e){if(e){var n=bu();e={blockedOn:null,target:e,priority:n};for(var a=0;a<rr.length&&n!==0&&n<rr[a].priority;a++);rr.splice(a,0,e),a===0&&nv(e)}};var av=t.version;if(av!=="19.2.3")throw Error(r(527,av,"19.2.3"));$.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=_(n),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var QS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{Pt=Hc.inject(QS),_e=Hc}catch{}}return Ol.createRoot=function(e,n){if(!l(e))throw Error(r(299));var a=!1,o="",h=dy,d=my,v=py;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Q_(e,1,!1,null,null,a,o,null,h,d,v,rv),e[wi]=n.current,Cd(e),new Yd(n)},Ol.hydrateRoot=function(e,n,a){if(!l(e))throw Error(r(299));var o=!1,h="",d=dy,v=my,T=py,D=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),n=Q_(e,1,!0,n,a??null,o,h,D,d,v,T,rv),n.context=$_(null),a=n.current,o=Un(),o=Vr(o),h=Fs(o),h.callback=null,Gs(a,h,o),a=o,n.current.lanes=a,Dr(n,a),Bi(n),e[wi]=n.current,Cd(e),new qc(n)},Ol.version="19.2.3",Ol}var gv;function sA(){if(gv)return Xd.exports;gv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Xd.exports=iA(),Xd.exports}var rA=sA();const aA=()=>{};var yv={};const $E=function(s){const t=[];let i=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},oA=function(s){const t=[];let i=0,r=0;for(;i<s.length;){const l=s[i++];if(l<128)t[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[i++];t[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[i++],f=s[i++],p=s[i++],y=((l&7)<<18|(u&63)<<12|(f&63)<<6|p&63)-65536;t[r++]=String.fromCharCode(55296+(y>>10)),t[r++]=String.fromCharCode(56320+(y&1023))}else{const u=s[i++],f=s[i++];t[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return t.join("")},XE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const u=s[l],f=l+1<s.length,p=f?s[l+1]:0,y=l+2<s.length,_=y?s[l+2]:0,b=u>>2,x=(u&3)<<4|p>>4;let R=(p&15)<<2|_>>6,z=_&63;y||(z=64,f||(R=64)),r.push(i[b],i[x],i[R],i[z])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray($E(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):oA(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const u=i[s.charAt(l++)],p=l<s.length?i[s.charAt(l)]:0;++l;const _=l<s.length?i[s.charAt(l)]:64;++l;const x=l<s.length?i[s.charAt(l)]:64;if(++l,u==null||p==null||_==null||x==null)throw new lA;const R=u<<2|p>>4;if(r.push(R),_!==64){const z=p<<4&240|_>>2;if(r.push(z),x!==64){const Z=_<<6&192|x;r.push(Z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class lA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uA=function(s){const t=$E(s);return XE.encodeByteArray(t,!0)},oh=function(s){return uA(s).replace(/\./g,"")},JE=function(s){try{return XE.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function cA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const hA=()=>cA().__FIREBASE_DEFAULTS__,fA=()=>{if(typeof process>"u"||typeof yv>"u")return;const s=yv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},dA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&JE(s[1]);return t&&JSON.parse(t)},Rh=()=>{try{return aA()||hA()||fA()||dA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},WE=s=>Rh()?.emulatorHosts?.[s],mA=s=>{const t=WE(s);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},ZE=()=>Rh()?.config,tT=s=>Rh()?.[`_${s}`];class pA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}function Ao(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eT(s){return(await fetch(s,{credentials:"include"})).ok}function gA(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[oh(JSON.stringify(i)),oh(JSON.stringify(f)),""].join(".")}const zl={};function yA(){const s={prod:[],emulator:[]};for(const t of Object.keys(zl))zl[t]?s.emulator.push(t):s.prod.push(t);return s}function _A(s){let t=document.getElementById(s),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),i=!0),{created:i,element:t}}let _v=!1;function nT(s,t){if(typeof window>"u"||typeof document>"u"||!Ao(window.location.host)||zl[s]===t||zl[s]||_v)return;zl[s]=t;function i(R){return`__firebase__banner__${R}`}const r="__firebase__banner",u=yA().prod.length>0;function f(){const R=document.getElementById(r);R&&R.remove()}function p(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function y(R,z){R.setAttribute("width","24"),R.setAttribute("id",z),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function _(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{_v=!0,f()},R}function b(R,z){R.setAttribute("id",z),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function x(){const R=_A(r),z=i("text"),Z=document.getElementById(z)||document.createElement("span"),J=i("learnmore"),Q=document.getElementById(J)||document.createElement("a"),W=i("preprendIcon"),ut=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const gt=R.element;p(gt),b(Q,J);const Mt=_();y(ut,W),gt.append(ut,Z,Q,Mt),document.body.appendChild(gt)}u?(Z.innerText="Preview backend disconnected.",ut.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ut.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function EA(){const s=Rh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function SA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AA(){const s=pn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function wA(){return!EA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xA(){try{return typeof indexedDB=="object"}catch{return!1}}function RA(){return new Promise((s,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(i){t(i)}})}const CA="FirebaseError";class Rs extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=CA,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,iu.prototype.create)}}class iu{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},l=`${this.service}/${t}`,u=this.errors[t],f=u?IA(u,r):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new Rs(l,p,r)}}function IA(s,t){return s.replace(kA,(i,r)=>{const l=t[r];return l!=null?String(l):`<${r}?>`})}const kA=/\{\$([^}]+)}/g;function NA(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function vr(s,t){if(s===t)return!0;const i=Object.keys(s),r=Object.keys(t);for(const l of i){if(!r.includes(l))return!1;const u=s[l],f=t[l];if(vv(u)&&vv(f)){if(!vr(u,f))return!1}else if(u!==f)return!1}for(const l of r)if(!i.includes(l))return!1;return!0}function vv(s){return s!==null&&typeof s=="object"}function su(s){const t=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Vl(s){const t={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");t[decodeURIComponent(l)]=decodeURIComponent(u)}}),t}function Ml(s){const t=s.indexOf("?");if(!t)return"";const i=s.indexOf("#",t);return s.substring(t,i>0?i:void 0)}function DA(s,t){const i=new OA(s,t);return i.subscribe.bind(i)}class OA{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,r){let l;if(t===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");VA(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:r},l.next===void 0&&(l.next=tm),l.error===void 0&&(l.error=tm),l.complete===void 0&&(l.complete=tm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VA(s,t){if(typeof s!="object"||s===null)return!1;for(const i of t)if(i in s&&typeof s[i]=="function")return!0;return!1}function tm(){}function Ne(s){return s&&s._delegate?s._delegate:s}class ua{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ra="[DEFAULT]";class MA{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new pA;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(LA(t))try{this.getOrInitializeService({instanceIdentifier:ra})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(t=ra){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ra){return this.instances.has(t)}getOptions(t=ra){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[u,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&f.resolve(l)}return l}onInit(t,i){const r=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(r)??new Set;l.add(t),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&t(u,r),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const l of r)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jA(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ra){return this.component?this.component.multipleInstances?t:ra:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jA(s){return s===ra?void 0:s}function LA(s){return s.instantiationMode==="EAGER"}class PA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new MA(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}var Ft;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ft||(Ft={}));const UA={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},zA=Ft.INFO,BA={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},qA=(s,t,...i)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),l=BA[t];if(l)console[l](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Fm{constructor(t){this.name=t,this._logLevel=zA,this._logHandler=qA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ft))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?UA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...t),this._logHandler(this,Ft.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...t),this._logHandler(this,Ft.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...t),this._logHandler(this,Ft.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...t),this._logHandler(this,Ft.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...t),this._logHandler(this,Ft.ERROR,...t)}}const HA=(s,t)=>t.some(i=>s instanceof i);let Ev,Tv;function FA(){return Ev||(Ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GA(){return Tv||(Tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iT=new WeakMap,pm=new WeakMap,sT=new WeakMap,em=new WeakMap,Gm=new WeakMap;function KA(s){const t=new Promise((i,r)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{i(mr(s.result)),l()},f=()=>{r(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",f)});return t.then(i=>{i instanceof IDBCursor&&iT.set(i,s)}).catch(()=>{}),Gm.set(t,s),t}function YA(s){if(pm.has(s))return;const t=new Promise((i,r)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{i(),l()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});pm.set(s,t)}let gm={get(s,t,i){if(s instanceof IDBTransaction){if(t==="done")return pm.get(s);if(t==="objectStoreNames")return s.objectStoreNames||sT.get(s);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return mr(s[t])},set(s,t,i){return s[t]=i,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function QA(s){gm=s(gm)}function $A(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=s.call(nm(this),t,...i);return sT.set(r,t.sort?t.sort():[t]),mr(r)}:GA().includes(s)?function(...t){return s.apply(nm(this),t),mr(iT.get(this))}:function(...t){return mr(s.apply(nm(this),t))}}function XA(s){return typeof s=="function"?$A(s):(s instanceof IDBTransaction&&YA(s),HA(s,FA())?new Proxy(s,gm):s)}function mr(s){if(s instanceof IDBRequest)return KA(s);if(em.has(s))return em.get(s);const t=XA(s);return t!==s&&(em.set(s,t),Gm.set(t,s)),t}const nm=s=>Gm.get(s);function JA(s,t,{blocked:i,upgrade:r,blocking:l,terminated:u}={}){const f=indexedDB.open(s,t),p=mr(f);return r&&f.addEventListener("upgradeneeded",y=>{r(mr(f.result),y.oldVersion,y.newVersion,mr(f.transaction),y)}),i&&f.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),p.then(y=>{u&&y.addEventListener("close",()=>u()),l&&y.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),p}const WA=["get","getKey","getAll","getAllKeys","count"],ZA=["put","add","delete","clear"],im=new Map;function bv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(im.get(t))return im.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,l=ZA.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(l||WA.includes(i)))return;const u=async function(f,...p){const y=this.transaction(f,l?"readwrite":"readonly");let _=y.store;return r&&(_=_.index(p.shift())),(await Promise.all([_[i](...p),l&&y.done]))[0]};return im.set(t,u),u}QA(s=>({...s,get:(t,i,r)=>bv(t,i)||s.get(t,i,r),has:(t,i)=>!!bv(t,i)||s.has(t,i)}));class t1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(e1(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function e1(s){return s.getComponent()?.type==="VERSION"}const ym="@firebase/app",Sv="0.14.6";const Ss=new Fm("@firebase/app"),n1="@firebase/app-compat",i1="@firebase/analytics-compat",s1="@firebase/analytics",r1="@firebase/app-check-compat",a1="@firebase/app-check",o1="@firebase/auth",l1="@firebase/auth-compat",u1="@firebase/database",c1="@firebase/data-connect",h1="@firebase/database-compat",f1="@firebase/functions",d1="@firebase/functions-compat",m1="@firebase/installations",p1="@firebase/installations-compat",g1="@firebase/messaging",y1="@firebase/messaging-compat",_1="@firebase/performance",v1="@firebase/performance-compat",E1="@firebase/remote-config",T1="@firebase/remote-config-compat",b1="@firebase/storage",S1="@firebase/storage-compat",A1="@firebase/firestore",w1="@firebase/ai",x1="@firebase/firestore-compat",R1="firebase",C1="12.6.0";const _m="[DEFAULT]",I1={[ym]:"fire-core",[n1]:"fire-core-compat",[s1]:"fire-analytics",[i1]:"fire-analytics-compat",[a1]:"fire-app-check",[r1]:"fire-app-check-compat",[o1]:"fire-auth",[l1]:"fire-auth-compat",[u1]:"fire-rtdb",[c1]:"fire-data-connect",[h1]:"fire-rtdb-compat",[f1]:"fire-fn",[d1]:"fire-fn-compat",[m1]:"fire-iid",[p1]:"fire-iid-compat",[g1]:"fire-fcm",[y1]:"fire-fcm-compat",[_1]:"fire-perf",[v1]:"fire-perf-compat",[E1]:"fire-rc",[T1]:"fire-rc-compat",[b1]:"fire-gcs",[S1]:"fire-gcs-compat",[A1]:"fire-fst",[x1]:"fire-fst-compat",[w1]:"fire-vertex","fire-js":"fire-js",[R1]:"fire-js-all"};const lh=new Map,k1=new Map,vm=new Map;function Av(s,t){try{s.container.addComponent(t)}catch(i){Ss.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,i)}}function po(s){const t=s.name;if(vm.has(t))return Ss.debug(`There were multiple attempts to register component ${t}.`),!1;vm.set(t,s);for(const i of lh.values())Av(i,s);for(const i of k1.values())Av(i,s);return!0}function Km(s,t){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(t)}function ni(s){return s==null?!1:s.settings!==void 0}const N1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new iu("app","Firebase",N1);class D1{constructor(t,i,r){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ua("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}const wo=C1;function rT(s,t={}){let i=s;typeof t!="object"&&(t={name:t});const r={name:_m,automaticDataCollectionEnabled:!0,...t},l=r.name;if(typeof l!="string"||!l)throw pr.create("bad-app-name",{appName:String(l)});if(i||(i=ZE()),!i)throw pr.create("no-options");const u=lh.get(l);if(u){if(vr(i,u.options)&&vr(r,u.config))return u;throw pr.create("duplicate-app",{appName:l})}const f=new PA(l);for(const y of vm.values())f.addComponent(y);const p=new D1(i,r,f);return lh.set(l,p),p}function aT(s=_m){const t=lh.get(s);if(!t&&s===_m&&ZE())return rT();if(!t)throw pr.create("no-app",{appName:s});return t}function gr(s,t,i){let r=I1[s]??s;i&&(r+=`-${i}`);const l=r.match(/\s|\//),u=t.match(/\s|\//);if(l||u){const f=[`Unable to register library "${r}" with version "${t}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ss.warn(f.join(" "));return}po(new ua(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const O1="firebase-heartbeat-database",V1=1,Yl="firebase-heartbeat-store";let sm=null;function oT(){return sm||(sm=JA(O1,V1,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Yl)}catch(i){console.warn(i)}}}}).catch(s=>{throw pr.create("idb-open",{originalErrorMessage:s.message})})),sm}async function M1(s){try{const i=(await oT()).transaction(Yl),r=await i.objectStore(Yl).get(lT(s));return await i.done,r}catch(t){if(t instanceof Rs)Ss.warn(t.message);else{const i=pr.create("idb-get",{originalErrorMessage:t?.message});Ss.warn(i.message)}}}async function wv(s,t){try{const r=(await oT()).transaction(Yl,"readwrite");await r.objectStore(Yl).put(t,lT(s)),await r.done}catch(i){if(i instanceof Rs)Ss.warn(i.message);else{const r=pr.create("idb-set",{originalErrorMessage:i?.message});Ss.warn(r.message)}}}function lT(s){return`${s.name}!${s.options.appId}`}const j1=1024,L1=30;class P1{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new z1(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>L1){const l=B1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Ss.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xv(),{heartbeatsToSend:i,unsentEntries:r}=U1(this._heartbeatsCache.heartbeats),l=oh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ss.warn(t),""}}}function xv(){return new Date().toISOString().substring(0,10)}function U1(s,t=j1){const i=[];let r=s.slice();for(const l of s){const u=i.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),Rv(i)>t){u.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),Rv(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class z1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xA()?RA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await M1(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return wv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return wv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Rv(s){return oh(JSON.stringify({version:2,heartbeats:s})).length}function B1(s){if(s.length===0)return-1;let t=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,t=r);return t}function q1(s){po(new ua("platform-logger",t=>new t1(t),"PRIVATE")),po(new ua("heartbeat",t=>new P1(t),"PRIVATE")),gr(ym,Sv,s),gr(ym,Sv,"esm2020"),gr("fire-js","")}q1("");var H1="firebase",F1="12.7.0";gr(H1,F1,"app");var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var yr,uT;(function(){var s;function t(N,S){function A(){}A.prototype=S.prototype,N.F=S.prototype,N.prototype=new A,N.prototype.constructor=N,N.D=function(O,k,j){for(var I=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)I[Ut-2]=arguments[Ut];return S.prototype[k].apply(O,I)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,i),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(N,S,A){A||(A=0);const O=Array(16);if(typeof S=="string")for(var k=0;k<16;++k)O[k]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(k=0;k<16;++k)O[k]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=N.g[0],A=N.g[1],k=N.g[2];let j=N.g[3],I;I=S+(j^A&(k^j))+O[0]+3614090360&4294967295,S=A+(I<<7&4294967295|I>>>25),I=j+(k^S&(A^k))+O[1]+3905402710&4294967295,j=S+(I<<12&4294967295|I>>>20),I=k+(A^j&(S^A))+O[2]+606105819&4294967295,k=j+(I<<17&4294967295|I>>>15),I=A+(S^k&(j^S))+O[3]+3250441966&4294967295,A=k+(I<<22&4294967295|I>>>10),I=S+(j^A&(k^j))+O[4]+4118548399&4294967295,S=A+(I<<7&4294967295|I>>>25),I=j+(k^S&(A^k))+O[5]+1200080426&4294967295,j=S+(I<<12&4294967295|I>>>20),I=k+(A^j&(S^A))+O[6]+2821735955&4294967295,k=j+(I<<17&4294967295|I>>>15),I=A+(S^k&(j^S))+O[7]+4249261313&4294967295,A=k+(I<<22&4294967295|I>>>10),I=S+(j^A&(k^j))+O[8]+1770035416&4294967295,S=A+(I<<7&4294967295|I>>>25),I=j+(k^S&(A^k))+O[9]+2336552879&4294967295,j=S+(I<<12&4294967295|I>>>20),I=k+(A^j&(S^A))+O[10]+4294925233&4294967295,k=j+(I<<17&4294967295|I>>>15),I=A+(S^k&(j^S))+O[11]+2304563134&4294967295,A=k+(I<<22&4294967295|I>>>10),I=S+(j^A&(k^j))+O[12]+1804603682&4294967295,S=A+(I<<7&4294967295|I>>>25),I=j+(k^S&(A^k))+O[13]+4254626195&4294967295,j=S+(I<<12&4294967295|I>>>20),I=k+(A^j&(S^A))+O[14]+2792965006&4294967295,k=j+(I<<17&4294967295|I>>>15),I=A+(S^k&(j^S))+O[15]+1236535329&4294967295,A=k+(I<<22&4294967295|I>>>10),I=S+(k^j&(A^k))+O[1]+4129170786&4294967295,S=A+(I<<5&4294967295|I>>>27),I=j+(A^k&(S^A))+O[6]+3225465664&4294967295,j=S+(I<<9&4294967295|I>>>23),I=k+(S^A&(j^S))+O[11]+643717713&4294967295,k=j+(I<<14&4294967295|I>>>18),I=A+(j^S&(k^j))+O[0]+3921069994&4294967295,A=k+(I<<20&4294967295|I>>>12),I=S+(k^j&(A^k))+O[5]+3593408605&4294967295,S=A+(I<<5&4294967295|I>>>27),I=j+(A^k&(S^A))+O[10]+38016083&4294967295,j=S+(I<<9&4294967295|I>>>23),I=k+(S^A&(j^S))+O[15]+3634488961&4294967295,k=j+(I<<14&4294967295|I>>>18),I=A+(j^S&(k^j))+O[4]+3889429448&4294967295,A=k+(I<<20&4294967295|I>>>12),I=S+(k^j&(A^k))+O[9]+568446438&4294967295,S=A+(I<<5&4294967295|I>>>27),I=j+(A^k&(S^A))+O[14]+3275163606&4294967295,j=S+(I<<9&4294967295|I>>>23),I=k+(S^A&(j^S))+O[3]+4107603335&4294967295,k=j+(I<<14&4294967295|I>>>18),I=A+(j^S&(k^j))+O[8]+1163531501&4294967295,A=k+(I<<20&4294967295|I>>>12),I=S+(k^j&(A^k))+O[13]+2850285829&4294967295,S=A+(I<<5&4294967295|I>>>27),I=j+(A^k&(S^A))+O[2]+4243563512&4294967295,j=S+(I<<9&4294967295|I>>>23),I=k+(S^A&(j^S))+O[7]+1735328473&4294967295,k=j+(I<<14&4294967295|I>>>18),I=A+(j^S&(k^j))+O[12]+2368359562&4294967295,A=k+(I<<20&4294967295|I>>>12),I=S+(A^k^j)+O[5]+4294588738&4294967295,S=A+(I<<4&4294967295|I>>>28),I=j+(S^A^k)+O[8]+2272392833&4294967295,j=S+(I<<11&4294967295|I>>>21),I=k+(j^S^A)+O[11]+1839030562&4294967295,k=j+(I<<16&4294967295|I>>>16),I=A+(k^j^S)+O[14]+4259657740&4294967295,A=k+(I<<23&4294967295|I>>>9),I=S+(A^k^j)+O[1]+2763975236&4294967295,S=A+(I<<4&4294967295|I>>>28),I=j+(S^A^k)+O[4]+1272893353&4294967295,j=S+(I<<11&4294967295|I>>>21),I=k+(j^S^A)+O[7]+4139469664&4294967295,k=j+(I<<16&4294967295|I>>>16),I=A+(k^j^S)+O[10]+3200236656&4294967295,A=k+(I<<23&4294967295|I>>>9),I=S+(A^k^j)+O[13]+681279174&4294967295,S=A+(I<<4&4294967295|I>>>28),I=j+(S^A^k)+O[0]+3936430074&4294967295,j=S+(I<<11&4294967295|I>>>21),I=k+(j^S^A)+O[3]+3572445317&4294967295,k=j+(I<<16&4294967295|I>>>16),I=A+(k^j^S)+O[6]+76029189&4294967295,A=k+(I<<23&4294967295|I>>>9),I=S+(A^k^j)+O[9]+3654602809&4294967295,S=A+(I<<4&4294967295|I>>>28),I=j+(S^A^k)+O[12]+3873151461&4294967295,j=S+(I<<11&4294967295|I>>>21),I=k+(j^S^A)+O[15]+530742520&4294967295,k=j+(I<<16&4294967295|I>>>16),I=A+(k^j^S)+O[2]+3299628645&4294967295,A=k+(I<<23&4294967295|I>>>9),I=S+(k^(A|~j))+O[0]+4096336452&4294967295,S=A+(I<<6&4294967295|I>>>26),I=j+(A^(S|~k))+O[7]+1126891415&4294967295,j=S+(I<<10&4294967295|I>>>22),I=k+(S^(j|~A))+O[14]+2878612391&4294967295,k=j+(I<<15&4294967295|I>>>17),I=A+(j^(k|~S))+O[5]+4237533241&4294967295,A=k+(I<<21&4294967295|I>>>11),I=S+(k^(A|~j))+O[12]+1700485571&4294967295,S=A+(I<<6&4294967295|I>>>26),I=j+(A^(S|~k))+O[3]+2399980690&4294967295,j=S+(I<<10&4294967295|I>>>22),I=k+(S^(j|~A))+O[10]+4293915773&4294967295,k=j+(I<<15&4294967295|I>>>17),I=A+(j^(k|~S))+O[1]+2240044497&4294967295,A=k+(I<<21&4294967295|I>>>11),I=S+(k^(A|~j))+O[8]+1873313359&4294967295,S=A+(I<<6&4294967295|I>>>26),I=j+(A^(S|~k))+O[15]+4264355552&4294967295,j=S+(I<<10&4294967295|I>>>22),I=k+(S^(j|~A))+O[6]+2734768916&4294967295,k=j+(I<<15&4294967295|I>>>17),I=A+(j^(k|~S))+O[13]+1309151649&4294967295,A=k+(I<<21&4294967295|I>>>11),I=S+(k^(A|~j))+O[4]+4149444226&4294967295,S=A+(I<<6&4294967295|I>>>26),I=j+(A^(S|~k))+O[11]+3174756917&4294967295,j=S+(I<<10&4294967295|I>>>22),I=k+(S^(j|~A))+O[2]+718787259&4294967295,k=j+(I<<15&4294967295|I>>>17),I=A+(j^(k|~S))+O[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+j&4294967295}r.prototype.v=function(N,S){S===void 0&&(S=N.length);const A=S-this.blockSize,O=this.C;let k=this.h,j=0;for(;j<S;){if(k==0)for(;j<=A;)l(this,N,j),j+=this.blockSize;if(typeof N=="string"){for(;j<S;)if(O[k++]=N.charCodeAt(j++),k==this.blockSize){l(this,O),k=0;break}}else for(;j<S;)if(O[k++]=N[j++],k==this.blockSize){l(this,O),k=0;break}}this.h=k,this.o+=S},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;S=this.o*8;for(var A=N.length-8;A<N.length;++A)N[A]=S&255,S/=256;for(this.v(N),N=Array(16),S=0,A=0;A<4;++A)for(let O=0;O<32;O+=8)N[S++]=this.g[A]>>>O&255;return N};function u(N,S){var A=p;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=S(N)}function f(N,S){this.h=S;const A=[];let O=!0;for(let k=N.length-1;k>=0;k--){const j=N[k]|0;O&&j==S||(A[k]=j,O=!1)}this.g=A}var p={};function y(N){return-128<=N&&N<128?u(N,function(S){return new f([S|0],S<0?-1:0)}):new f([N|0],N<0?-1:0)}function _(N){if(isNaN(N)||!isFinite(N))return x;if(N<0)return Q(_(-N));const S=[];let A=1;for(let O=0;N>=A;O++)S[O]=N/A|0,A*=4294967296;return new f(S,0)}function b(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return Q(b(N.substring(1),S));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=_(Math.pow(S,8));let O=x;for(let j=0;j<N.length;j+=8){var k=Math.min(8,N.length-j);const I=parseInt(N.substring(j,j+k),S);k<8?(k=_(Math.pow(S,k)),O=O.j(k).add(_(I))):(O=O.j(A),O=O.add(_(I)))}return O}var x=y(0),R=y(1),z=y(16777216);s=f.prototype,s.m=function(){if(J(this))return-Q(this).m();let N=0,S=1;for(let A=0;A<this.g.length;A++){const O=this.i(A);N+=(O>=0?O:4294967296+O)*S,S*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(Z(this))return"0";if(J(this))return"-"+Q(this).toString(N);const S=_(Math.pow(N,6));var A=this;let O="";for(;;){const k=Mt(A,S).g;A=W(A,k.j(S));let j=((A.g.length>0?A.g[0]:A.h)>>>0).toString(N);if(A=k,Z(A))return j+O;for(;j.length<6;)j="0"+j;O=j+O}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function Z(N){if(N.h!=0)return!1;for(let S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function J(N){return N.h==-1}s.l=function(N){return N=W(this,N),J(N)?-1:Z(N)?0:1};function Q(N){const S=N.g.length,A=[];for(let O=0;O<S;O++)A[O]=~N.g[O];return new f(A,~N.h).add(R)}s.abs=function(){return J(this)?Q(this):this},s.add=function(N){const S=Math.max(this.g.length,N.g.length),A=[];let O=0;for(let k=0;k<=S;k++){let j=O+(this.i(k)&65535)+(N.i(k)&65535),I=(j>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);O=I>>>16,j&=65535,I&=65535,A[k]=I<<16|j}return new f(A,A[A.length-1]&-2147483648?-1:0)};function W(N,S){return N.add(Q(S))}s.j=function(N){if(Z(this)||Z(N))return x;if(J(this))return J(N)?Q(this).j(Q(N)):Q(Q(this).j(N));if(J(N))return Q(this.j(Q(N)));if(this.l(z)<0&&N.l(z)<0)return _(this.m()*N.m());const S=this.g.length+N.g.length,A=[];for(var O=0;O<2*S;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(let k=0;k<N.g.length;k++){const j=this.i(O)>>>16,I=this.i(O)&65535,Ut=N.i(k)>>>16,B=N.i(k)&65535;A[2*O+2*k]+=I*B,ut(A,2*O+2*k),A[2*O+2*k+1]+=j*B,ut(A,2*O+2*k+1),A[2*O+2*k+1]+=I*Ut,ut(A,2*O+2*k+1),A[2*O+2*k+2]+=j*Ut,ut(A,2*O+2*k+2)}for(N=0;N<S;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=S;N<2*S;N++)A[N]=0;return new f(A,0)};function ut(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function gt(N,S){this.g=N,this.h=S}function Mt(N,S){if(Z(S))throw Error("division by zero");if(Z(N))return new gt(x,x);if(J(N))return S=Mt(Q(N),S),new gt(Q(S.g),Q(S.h));if(J(S))return S=Mt(N,Q(S)),new gt(Q(S.g),S.h);if(N.g.length>30){if(J(N)||J(S))throw Error("slowDivide_ only works with positive integers.");for(var A=R,O=S;O.l(N)<=0;)A=jt(A),O=jt(O);var k=Ct(A,1),j=Ct(O,1);for(O=Ct(O,2),A=Ct(A,2);!Z(O);){var I=j.add(O);I.l(N)<=0&&(k=k.add(A),j=I),O=Ct(O,1),A=Ct(A,1)}return S=W(N,k.j(S)),new gt(k,S)}for(k=x;N.l(S)>=0;){for(A=Math.max(1,Math.floor(N.m()/S.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),j=_(A),I=j.j(S);J(I)||I.l(N)>0;)A-=O,j=_(A),I=j.j(S);Z(j)&&(j=R),k=k.add(j),N=W(N,I)}return new gt(k,N)}s.B=function(N){return Mt(this,N).h},s.and=function(N){const S=Math.max(this.g.length,N.g.length),A=[];for(let O=0;O<S;O++)A[O]=this.i(O)&N.i(O);return new f(A,this.h&N.h)},s.or=function(N){const S=Math.max(this.g.length,N.g.length),A=[];for(let O=0;O<S;O++)A[O]=this.i(O)|N.i(O);return new f(A,this.h|N.h)},s.xor=function(N){const S=Math.max(this.g.length,N.g.length),A=[];for(let O=0;O<S;O++)A[O]=this.i(O)^N.i(O);return new f(A,this.h^N.h)};function jt(N){const S=N.g.length+1,A=[];for(let O=0;O<S;O++)A[O]=N.i(O)<<1|N.i(O-1)>>>31;return new f(A,N.h)}function Ct(N,S){const A=S>>5;S%=32;const O=N.g.length-A,k=[];for(let j=0;j<O;j++)k[j]=S>0?N.i(j+A)>>>S|N.i(j+A+1)<<32-S:N.i(j+A);return new f(k,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,uT=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=b,yr=f}).apply(typeof Cv<"u"?Cv:typeof self<"u"?self:typeof window<"u"?window:{});var Fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var cT,jl,hT,Xc,Em,fT,dT,mT;(function(){var s,t=Object.defineProperty;function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fc=="object"&&Fc];for(var g=0;g<c.length;++g){var E=c[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=i(this);function l(c,g){if(g)t:{var E=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var q=c[w];if(!(q in E))break t;E=E[q]}c=c[c.length-1],w=E[c],g=g(w),g!=w&&g!=null&&t(E,c,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(g){var E=[],w;for(w in g)Object.prototype.hasOwnProperty.call(g,w)&&E.push([w,g[w]]);return E}});var u=u||{},f=this||self;function p(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function y(c,g,E){return c.call.apply(c.bind,arguments)}function _(c,g,E){return _=y,_.apply(null,arguments)}function b(c,g){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function x(c,g){function E(){}E.prototype=g.prototype,c.Z=g.prototype,c.prototype=new E,c.prototype.constructor=c,c.Ob=function(w,q,K){for(var lt=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)lt[Ot-2]=arguments[Ot];return g.prototype[q].apply(w,lt)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function z(c){const g=c.length;if(g>0){const E=Array(g);for(let w=0;w<g;w++)E[w]=c[w];return E}return[]}function Z(c,g){for(let w=1;w<arguments.length;w++){const q=arguments[w];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=c.length||0;const K=q.length||0;c.length=E+K;for(let lt=0;lt<K;lt++)c[E+lt]=q[lt]}else c.push(q)}}class J{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function Q(c){f.setTimeout(()=>{throw c},0)}function W(){var c=N;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ut{constructor(){this.h=this.g=null}add(g,E){const w=gt.get();w.set(g,E),this.h?this.h.next=w:this.g=w,this.h=w}}var gt=new J(()=>new Mt,c=>c.reset());class Mt{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let jt,Ct=!1,N=new ut,S=()=>{const c=Promise.resolve(void 0);jt=()=>{c.then(A)}};function A(){for(var c;c=W();){try{c.h.call(c.g)}catch(E){Q(E)}var g=gt;g.j(c),g.h<100&&(g.h++,c.next=g.g,g.g=c)}Ct=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};f.addEventListener("test",E,g),f.removeEventListener("test",E,g)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function Ut(c,g){k.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,g)}x(Ut,k),Ut.prototype.init=function(c,g){const E=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget,g||(E=="mouseover"?g=c.fromElement:E=="mouseout"&&(g=c.toElement)),this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ut.Z.h.call(this)},Ut.prototype.h=function(){Ut.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var B="closure_listenable_"+(Math.random()*1e6|0),M=0;function $(c,g,E,w,q){this.listener=c,this.proxy=null,this.src=g,this.type=E,this.capture=!!w,this.ha=q,this.key=++M,this.da=this.fa=!1}function at(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function U(c,g,E){for(const w in c)g.call(E,c[w],w,c)}function rt(c,g){for(const E in c)g.call(void 0,c[E],E,c)}function C(c){const g={};for(const E in c)g[E]=c[E];return g}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nt(c,g){let E,w;for(let q=1;q<arguments.length;q++){w=arguments[q];for(E in w)c[E]=w[E];for(let K=0;K<L.length;K++)E=L[K],Object.prototype.hasOwnProperty.call(w,E)&&(c[E]=w[E])}}function ot(c){this.src=c,this.g={},this.h=0}ot.prototype.add=function(c,g,E,w,q){const K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);const lt=ht(c,g,w,q);return lt>-1?(g=c[lt],E||(g.fa=!1)):(g=new $(g,this.src,K,!!w,q),g.fa=E,c.push(g)),g};function ct(c,g){const E=g.type;if(E in c.g){var w=c.g[E],q=Array.prototype.indexOf.call(w,g,void 0),K;(K=q>=0)&&Array.prototype.splice.call(w,q,1),K&&(at(g),c.g[E].length==0&&(delete c.g[E],c.h--))}}function ht(c,g,E,w){for(let q=0;q<c.length;++q){const K=c[q];if(!K.da&&K.listener==g&&K.capture==!!E&&K.ha==w)return q}return-1}var vt="closure_lm_"+(Math.random()*1e6|0),At={};function Et(c,g,E,w,q){if(Array.isArray(g)){for(let K=0;K<g.length;K++)Et(c,g[K],E,w,q);return null}return E=Is(E),c&&c[B]?c.J(g,E,p(w)?!!w.capture:!1,q):Jt(c,g,E,!1,w,q)}function Jt(c,g,E,w,q,K){if(!g)throw Error("Invalid event type");const lt=p(q)?!!q.capture:!!q;let Ot=Ei(c);if(Ot||(c[vt]=Ot=new ot(c)),E=Ot.add(g,E,w,lt,K),E.proxy)return E;if(w=Ke(),E.proxy=w,w.src=c,w.listener=E,c.addEventListener)j||(q=lt),q===void 0&&(q=!1),c.addEventListener(g.toString(),w,q);else if(c.attachEvent)c.attachEvent(xe(g.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ke(){function c(E){return g.call(c.src,c.listener,E)}const g=vi;return c}function tn(c,g,E,w,q){if(Array.isArray(g))for(var K=0;K<g.length;K++)tn(c,g[K],E,w,q);else w=p(w)?!!w.capture:!!w,E=Is(E),c&&c[B]?(c=c.i,K=String(g).toString(),K in c.g&&(g=c.g[K],E=ht(g,E,w,q),E>-1&&(at(g[E]),Array.prototype.splice.call(g,E,1),g.length==0&&(delete c.g[K],c.h--)))):c&&(c=Ei(c))&&(g=c.g[g.toString()],c=-1,g&&(c=ht(g,E,w,q)),(E=c>-1?g[c]:null)&&fe(E))}function fe(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[B])ct(g.i,c);else{var E=c.type,w=c.proxy;g.removeEventListener?g.removeEventListener(E,w,c.capture):g.detachEvent?g.detachEvent(xe(E),w):g.addListener&&g.removeListener&&g.removeListener(w),(E=Ei(g))?(ct(E,c),E.h==0&&(E.src=null,g[vt]=null)):at(c)}}}function xe(c){return c in At?At[c]:At[c]="on"+c}function vi(c,g){if(c.da)c=!0;else{g=new Ut(g,this);const E=c.listener,w=c.ha||c.src;c.fa&&fe(c),c=E.call(w,g)}return c}function Ei(c){return c=c[vt],c instanceof ot?c:null}var Zi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Is(c){return typeof c=="function"?c:(c[Zi]||(c[Zi]=function(g){return c.handleEvent(g)}),c[Zi])}function de(){O.call(this),this.i=new ot(this),this.M=this,this.G=null}x(de,O),de.prototype[B]=!0,de.prototype.removeEventListener=function(c,g,E,w){tn(this,c,g,E,w)};function De(c,g){var E,w=c.G;if(w)for(E=[];w;w=w.G)E.push(w);if(c=c.M,w=g.type||g,typeof g=="string")g=new k(g,c);else if(g instanceof k)g.target=g.target||c;else{var q=g;g=new k(w,c),nt(g,q)}q=!0;let K,lt;if(E)for(lt=E.length-1;lt>=0;lt--)K=g.g=E[lt],q=qn(K,w,!0,g)&&q;if(K=g.g=c,q=qn(K,w,!0,g)&&q,q=qn(K,w,!1,g)&&q,E)for(lt=0;lt<E.length;lt++)K=g.g=E[lt],q=qn(K,w,!1,g)&&q}de.prototype.N=function(){if(de.Z.N.call(this),this.i){var c=this.i;for(const g in c.g){const E=c.g[g];for(let w=0;w<E.length;w++)at(E[w]);delete c.g[g],c.h--}}this.G=null},de.prototype.J=function(c,g,E,w){return this.i.add(String(c),g,!1,E,w)},de.prototype.K=function(c,g,E,w){return this.i.add(String(c),g,!0,E,w)};function qn(c,g,E,w){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();let q=!0;for(let K=0;K<g.length;++K){const lt=g[K];if(lt&&!lt.da&&lt.capture==E){const Ot=lt.listener,Re=lt.ha||lt.src;lt.fa&&ct(c.i,lt),q=Ot.call(Re,w)!==!1&&q}}return q&&!w.defaultPrevented}function ya(c,g){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=_(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(c,g||0)}function It(c){c.g=ya(()=>{c.g=null,c.i&&(c.i=!1,It(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class _t extends O{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:It(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ee(c){O.call(this),this.h=c,this.g={}}x(ee,O);var Oe=[];function $e(c){U(c.g,function(g,E){this.g.hasOwnProperty(E)&&fe(g)},c),c.g={}}ee.prototype.N=function(){ee.Z.N.call(this),$e(this)},ee.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var en=f.JSON.stringify,gn=f.JSON.parse,Hn=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function Tn(){}function kr(){}var Pt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _e(){k.call(this,"d")}x(_e,k);function Ve(){k.call(this,"c")}x(Ve,k);var me={},vu=null;function _a(){return vu=vu||new de}me.Ia="serverreachability";function Eu(c){k.call(this,me.Ia,c)}x(Eu,k);function Ti(c){const g=_a();De(g,new Eu(g))}me.STAT_EVENT="statevent";function Nr(c,g){k.call(this,me.STAT_EVENT,c),this.stat=g}x(Nr,k);function Me(c){const g=_a();De(g,new Nr(g,c))}me.Ja="timingevent";function bi(c,g){k.call(this,me.Ja,c),this.size=g}x(bi,k);function Si(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},g)}function ri(){this.g=!0}ri.prototype.ua=function(){this.g=!1};function Jh(c,g,E,w,q,K){c.info(function(){if(c.g)if(K){var lt="",Ot=K.split("&");for(let Wt=0;Wt<Ot.length;Wt++){var Re=Ot[Wt].split("=");if(Re.length>1){const ve=Re[0];Re=Re[1];const Yn=ve.split("_");lt=Yn.length>=2&&Yn[1]=="type"?lt+(ve+"="+Re+"&"):lt+(ve+"=redacted&")}}}else lt=null;else lt=K;return"XMLHTTP REQ ("+w+") [attempt "+q+"]: "+g+`
`+E+`
`+lt})}function Tu(c,g,E,w,q,K,lt){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+q+"]: "+g+`
`+E+`
`+K+" "+lt})}function Ai(c,g,E,w){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Wh(c,E)+(w?" "+w:"")})}function Dr(c,g){c.info(function(){return"TIMEOUT: "+g})}ri.prototype.info=function(){};function Wh(c,g){if(!c.g)return g;if(!g)return null;try{const K=JSON.parse(g);if(K){for(c=0;c<K.length;c++)if(Array.isArray(K[c])){var E=K[c];if(!(E.length<2)){var w=E[1];if(Array.isArray(w)&&!(w.length<1)){var q=w[0];if(q!="noop"&&q!="stop"&&q!="close")for(let lt=1;lt<w.length;lt++)w[lt]=""}}}}return en(K)}catch{return g}}var Or={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Oo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vo;function Vr(){}x(Vr,Tn),Vr.prototype.g=function(){return new XMLHttpRequest},Vo=new Vr;function ts(c){return encodeURIComponent(String(c))}function bu(c){var g=1;c=c.split(":");const E=[];for(;g>0&&c.length;)E.push(c.shift()),g--;return c.length&&E.push(c.join(":")),E}function ai(c,g,E,w){this.j=c,this.i=g,this.l=E,this.S=w||1,this.V=new ee(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new oi}function oi(){this.i=null,this.g="",this.h=!1}var je={},Xe={};function wi(c,g,E){c.M=1,c.A=Mr(Pe(g)),c.u=E,c.R=!0,va(c,null)}function va(c,g){c.F=Date.now(),xi(c),c.B=Pe(c.A);var E=c.B,w=c.S;Array.isArray(w)||(w=[String(w)]),Sa(E.i,"t",w),c.C=0,E=c.j.L,c.h=new oi,c.g=Lu(c.j,E?g:null,!c.u),c.P>0&&(c.O=new _t(_(c.Y,c,c.g),c.P)),g=c.V,E=c.g,w=c.ba;var q="readystatechange";Array.isArray(q)||(q&&(Oe[0]=q.toString()),q=Oe);for(let K=0;K<q.length;K++){const lt=Et(E,q[K],w||g.handleEvent,!1,g.h||g);if(!lt)break;g.g[lt.key]=lt}g=c.J?C(c.J):{},c.u?(c.v||(c.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,g)):(c.v="GET",c.g.ea(c.B,c.v,null,g)),Ti(),Jh(c.i,c.v,c.B,c.l,c.S,c.u)}ai.prototype.ba=function(c){c=c.target;const g=this.O;g&&ci(c)==3?g.j():this.Y(c)},ai.prototype.Y=function(c){try{if(c==this.g)t:{const Ot=ci(this.g),Re=this.g.ya(),Wt=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||nn(this.g)))){this.K||Ot!=4||Re==7||(Re==8||Wt<=0?Ti(3):Ti(2)),Ri(this);var g=this.g.ca();this.X=g;var E=Zh(this);if(this.o=g==200,Tu(this.i,this.v,this.B,this.l,this.S,Ot,g),this.o){if(this.U&&!this.L){e:{if(this.g){var w,q=this.g;if((w=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(w)){var K=w;break e}}K=null}if(c=K)Ai(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ci(this,c);else{this.o=!1,this.m=3,Me(12),Nn(this),Fn(this);break t}}if(this.R){c=!0;let ve;for(;!this.K&&this.C<E.length;)if(ve=Au(this,E),ve==Xe){Ot==4&&(this.m=4,Me(14),c=!1),Ai(this.i,this.l,null,"[Incomplete Response]");break}else if(ve==je){this.m=4,Me(15),Ai(this.i,this.l,E,"[Invalid Chunk]"),c=!1;break}else Ai(this.i,this.l,ve,null),Ci(this,ve);if(Su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||E.length!=0||this.h.h||(this.m=1,Me(16),c=!1),this.o=this.o&&c,!c)Ai(this.i,this.l,E,"[Invalid Chunked Response]"),Nn(this),Fn(this);else if(E.length>0&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.aa&&!lt.P&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),$o(lt),lt.P=!0,Me(11))}}else Ai(this.i,this.l,E,null),Ci(this,E);Ot==4&&Nn(this),this.o&&!this.K&&(Ot==4?Ou(this.j,this):(this.o=!1,xi(this)))}else ns(this.g),g==400&&E.indexOf("Unknown SID")>0?(this.m=3,Me(12)):(this.m=0,Me(13)),Nn(this),Fn(this)}}}catch{}};function Zh(c){if(!Su(c))return c.g.la();const g=nn(c.g);if(g==="")return"";let E="";const w=g.length,q=ci(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Nn(c),Fn(c),"";c.h.i=new f.TextDecoder}for(let K=0;K<w;K++)c.h.h=!0,E+=c.h.i.decode(g[K],{stream:!(q&&K==w-1)});return g.length=0,c.h.g+=E,c.C=0,c.h.g}function Su(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Au(c,g){var E=c.C,w=g.indexOf(`
`,E);return w==-1?Xe:(E=Number(g.substring(E,w)),isNaN(E)?je:(w+=1,w+E>g.length?Xe:(g=g.slice(w,w+E),c.C=w+E,g)))}ai.prototype.cancel=function(){this.K=!0,Nn(this)};function xi(c){c.T=Date.now()+c.H,Ea(c,c.H)}function Ea(c,g){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Si(_(c.aa,c),g)}function Ri(c){c.D&&(f.clearTimeout(c.D),c.D=null)}ai.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Dr(this.i,this.B),this.M!=2&&(Ti(),Me(17)),Nn(this),this.m=2,Fn(this)):Ea(this,this.T-c)};function Fn(c){c.j.I==0||c.K||Ou(c.j,c)}function Nn(c){Ri(c);var g=c.O;g&&typeof g.dispose=="function"&&g.dispose(),c.O=null,$e(c.V),c.g&&(g=c.g,c.g=null,g.abort(),g.dispose())}function Ci(c,g){try{var E=c.j;if(E.I!=0&&(E.g==c||ki(E.h,c))){if(!c.L&&ki(E.h,c)&&E.I==3){try{var w=E.Ba.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var q=w;if(q[0]==0){t:if(!E.v){if(E.g)if(E.g.F+3e3<c.F)Ca(E),Ls(E);else break t;qr(E),Me(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Si(_(E.Va,E),6e3));Ii(E.h)<=1&&E.ta&&(E.ta=void 0)}else ji(E,11)}else if((c.L||E.g==c)&&Ca(E),!I(g))for(q=E.Ba.g.parse(g),g=0;g<q.length;g++){let Wt=q[g];const ve=Wt[0];if(!(ve<=E.K))if(E.K=ve,Wt=Wt[1],E.I==2)if(Wt[0]=="c"){E.M=Wt[1],E.ba=Wt[2];const Yn=Wt[3];Yn!=null&&(E.ka=Yn,E.j.info("VER="+E.ka));const Li=Wt[4];Li!=null&&(E.za=Li,E.j.info("SVER="+E.za));const hi=Wt[5];hi!=null&&typeof hi=="number"&&hi>0&&(w=1.5*hi,E.O=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const fi=c.g;if(fi){const Hr=fi.g?fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hr){var K=w.h;K.g||Hr.indexOf("spdy")==-1&&Hr.indexOf("quic")==-1&&Hr.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Lo(K,K.h),K.h=null))}if(w.G){const Ia=fi.g?fi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(w.wa=Ia,ne(w.J,w.G,Ia))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-c.F,E.j.info("Handshake RTT: "+E.T+"ms")),w=E;var lt=c;if(w.na=ju(w,w.L?w.ba:null,w.W),lt.L){Po(w.h,lt);var Ot=lt,Re=w.O;Re&&(Ot.H=Re),Ot.D&&(Ri(Ot),xi(Ot)),w.g=lt}else Nu(w);E.i.length>0&&Mi(E)}else Wt[0]!="stop"&&Wt[0]!="close"||ji(E,7);else E.I==3&&(Wt[0]=="stop"||Wt[0]=="close"?Wt[0]=="stop"?ji(E,7):Yo(E):Wt[0]!="noop"&&E.l&&E.l.qa(Wt),E.A=0)}}Ti(4)}catch{}}var Le=class{constructor(c,g){this.g=c,this.map=g}};function Mo(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ii(c){return c.h?1:c.g?c.g.size:0}function ki(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Lo(c,g){c.g?c.g.add(g):c.h=g}function Po(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Mo.prototype.cancel=function(){if(this.i=Uo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Uo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const E of c.g.values())g=g.concat(E.G);return g}return z(c.i)}var wu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(c,g){if(c){c=c.split("&");for(let E=0;E<c.length;E++){const w=c[E].indexOf("=");let q,K=null;w>=0?(q=c[E].substring(0,w),K=c[E].substring(w+1)):q=c[E],g(q,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Dn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;c instanceof Dn?(this.l=c.l,Je(this,c.j),this.o=c.o,this.g=c.g,ks(this,c.u),this.h=c.h,zo(this,Iu(c.i)),this.m=c.m):c&&(g=String(c).match(wu))?(this.l=!1,Je(this,g[1]||"",!0),this.o=Ni(g[2]||""),this.g=Ni(g[3]||"",!0),ks(this,g[4]),this.h=Ni(g[5]||"",!0),zo(this,g[6]||"",!0),this.m=Ni(g[7]||"")):(this.l=!1,this.i=new Ds(null,this.l))}Dn.prototype.toString=function(){const c=[];var g=this.j;g&&c.push(jr(g,ba,!0),":");var E=this.g;return(E||g=="file")&&(c.push("//"),(g=this.o)&&c.push(jr(g,ba,!0),"@"),c.push(ts(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&c.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(jr(E,E.charAt(0)=="/"?Bo:xu,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",jr(E,Ru)),c.join("")},Dn.prototype.resolve=function(c){const g=Pe(this);let E=!!c.j;E?Je(g,c.j):E=!!c.o,E?g.o=c.o:E=!!c.g,E?g.g=c.g:E=c.u!=null;var w=c.h;if(E)ks(g,c.u);else if(E=!!c.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var q=g.h.lastIndexOf("/");q!=-1&&(w=g.h.slice(0,q+1)+w)}if(q=w,q==".."||q==".")w="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){w=q.lastIndexOf("/",0)==0,q=q.split("/");const K=[];for(let lt=0;lt<q.length;){const Ot=q[lt++];Ot=="."?w&&lt==q.length&&K.push(""):Ot==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),w&&lt==q.length&&K.push("")):(K.push(Ot),w=!0)}w=K.join("/")}else w=q}return E?g.h=w:E=c.i.toString()!=="",E?zo(g,Iu(c.i)):E=!!c.m,E&&(g.m=c.m),g};function Pe(c){return new Dn(c)}function Je(c,g,E){c.j=E?Ni(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ks(c,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);c.u=g}else c.u=null}function zo(c,g,E){g instanceof Ds?(c.i=g,Aa(c.i,c.l)):(E||(g=jr(g,Ns)),c.i=new Ds(g,c.l))}function ne(c,g,E){c.i.set(g,E)}function Mr(c){return ne(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ni(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function jr(c,g,E){return typeof c=="string"?(c=encodeURI(c).replace(g,bn),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function bn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ba=/[#\/\?@]/g,xu=/[#\?:]/g,Bo=/[#\?]/g,Ns=/[#\?@]/g,Ru=/#/g;function Ds(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Sn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ta(c.i,function(g,E){c.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}s=Ds.prototype,s.add=function(c,g){Sn(this),this.i=null,c=Os(this,c);let E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(g),this.h+=1,this};function Cu(c,g){Sn(c),g=Os(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function qo(c,g){return Sn(c),g=Os(c,g),c.g.has(g)}s.forEach=function(c,g){Sn(this),this.g.forEach(function(E,w){E.forEach(function(q){c.call(g,q,w,this)},this)},this)};function Ho(c,g){Sn(c);let E=[];if(typeof g=="string")qo(c,g)&&(E=E.concat(c.g.get(Os(c,g))));else for(c=Array.from(c.g.values()),g=0;g<c.length;g++)E=E.concat(c[g]);return E}s.set=function(c,g){return Sn(this),this.i=null,c=Os(this,c),qo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},s.get=function(c,g){return c?(c=Ho(this,c),c.length>0?String(c[0]):g):g};function Sa(c,g,E){Cu(c,g),E.length>0&&(c.i=null,c.g.set(Os(c,g),z(E)),c.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(let w=0;w<g.length;w++){var E=g[w];const q=ts(E);E=Ho(this,E);for(let K=0;K<E.length;K++){let lt=q;E[K]!==""&&(lt+="="+ts(E[K])),c.push(lt)}}return this.i=c.join("&")};function Iu(c){const g=new Ds;return g.i=c.i,c.g&&(g.g=new Map(c.g),g.h=c.h),g}function Os(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Aa(c,g){g&&!c.j&&(Sn(c),c.i=null,c.g.forEach(function(E,w){const q=w.toLowerCase();w!=q&&(Cu(this,w),Sa(this,q,E))},c)),c.j=g}function li(c,g){const E=new ri;if(f.Image){const w=new Image;w.onload=b(Gn,E,"TestLoadImage: loaded",!0,g,w),w.onerror=b(Gn,E,"TestLoadImage: error",!1,g,w),w.onabort=b(Gn,E,"TestLoadImage: abort",!1,g,w),w.ontimeout=b(Gn,E,"TestLoadImage: timeout",!1,g,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else g(!1)}function Fo(c,g){const E=new ri,w=new AbortController,q=setTimeout(()=>{w.abort(),Gn(E,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:w.signal}).then(K=>{clearTimeout(q),K.ok?Gn(E,"TestPingServer: ok",!0,g):Gn(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(q),Gn(E,"TestPingServer: error",!1,g)})}function Gn(c,g,E,w,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),w(E)}catch{}}function Vs(){this.g=new Hn}function Di(c){this.i=c.Sb||null,this.h=c.ab||!1}x(Di,Tn),Di.prototype.g=function(){return new Lr(this.i,this.h)};function Lr(c,g){de.call(this),this.H=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Lr,de),s=Lr.prototype,s.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=g,this.readyState=1,ui(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(g.body=c),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ms(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function wa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Ms(this):ui(this),this.readyState==3&&wa(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,Ms(this))},s.Na=function(c){this.g&&(this.response=c,Ms(this))},s.ga=function(){this.g&&Ms(this)};function Ms(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ui(c)}s.setRequestHeader=function(c,g){this.A.append(c,g)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=g.next();return c.join(`\r
`)};function ui(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Lr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Kn(c){let g="";return U(c,function(E,w){g+=w,g+=":",g+=E,g+=`\r
`}),g}function Pr(c,g,E){t:{for(w in E){var w=!1;break t}w=!0}w||(E=Kn(E),typeof c=="string"?E!=null&&ts(E):ne(c,g,E))}function re(c){de.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(re,de);var Oi=/^https?$/i,Go=["POST","PUT"];s=re.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,g,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vo.g(),this.g.onreadystatechange=R(_(this.Ca,this));try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(K){Ur(this,K);return}if(c=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var q in w)E.set(q,w[q]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const K of w.keys())E.set(K,w.get(K));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find(K=>K.toLowerCase()=="content-type"),q=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Go,g,void 0)>=0)||w||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,lt]of E)this.g.setRequestHeader(K,lt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(K){Ur(this,K)}};function Ur(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.o=5,Ko(c),es(c)}function Ko(c){c.A||(c.A=!0,De(c,"complete"),De(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,De(this,"complete"),De(this,"abort"),es(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),es(this,!0)),re.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?zr(this):this.Xa())},s.Xa=function(){zr(this)};function zr(c){if(c.h&&typeof u<"u"){if(c.v&&ci(c)==4)setTimeout(c.Ca.bind(c),0);else if(De(c,"readystatechange"),ci(c)==4){c.h=!1;try{const K=c.ca();t:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break t;default:g=!1}var E;if(!(E=g)){var w;if(w=K===0){let lt=String(c.D).match(wu)[1]||null;!lt&&f.self&&f.self.location&&(lt=f.self.location.protocol.slice(0,-1)),w=!Oi.test(lt?lt.toLowerCase():"")}E=w}if(E)De(c,"complete"),De(c,"success");else{c.o=6;try{var q=ci(c)>2?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.ca()+"]",Ko(c)}}finally{es(c)}}}}function es(c,g){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const E=c.g;c.g=null,g||De(c,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ci(c){return c.g?c.g.readyState:0}s.ca=function(){try{return ci(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),gn(g)}};function nn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(c){const g={};c=(c.g&&ci(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(I(c[w]))continue;var E=bu(c[w]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const K=g[q]||[];g[q]=K,K.push(E)}rt(g,function(w){return w.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(c,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||g}function js(c){this.za=0,this.i=[],this.j=new ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vi("baseRetryDelayMs",5e3,c),this.Za=Vi("retryDelaySeedMs",1e4,c),this.Ta=Vi("forwardChannelMaxRetries",2,c),this.va=Vi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Mo(c&&c.concurrentRequestLimit),this.Ba=new Vs,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=js.prototype,s.ka=8,s.I=1,s.connect=function(c,g,E,w){Me(0),this.W=c,this.H=g||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.J=ju(this,null,this.W),Mi(this)};function Yo(c){if(xa(c),c.I==3){var g=c.V++,E=Pe(c.J);if(ne(E,"SID",c.M),ne(E,"RID",g),ne(E,"TYPE","terminate"),Br(c,E),g=new ai(c,c.j,g),g.M=2,g.A=Mr(Pe(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!E&&f.Image&&(new Image().src=g.A,E=!0),E||(g.g=Lu(g.j,null),g.g.ea(g.A)),g.F=Date.now(),xi(g)}Mu(c)}function Ls(c){c.g&&($o(c),c.g.cancel(),c.g=null)}function xa(c){Ls(c),c.v&&(f.clearTimeout(c.v),c.v=null),Ca(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function Mi(c){if(!jo(c.h)&&!c.m){c.m=!0;var g=c.Ea;jt||S(),Ct||(jt(),Ct=!0),N.add(g,c),c.D=0}}function Ra(c,g){return Ii(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=g.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Si(_(c.Ea,c,g),Vu(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const q=new ai(this,this.j,c);let K=this.o;if(this.U&&(K?(K=C(K),nt(K,this.U)):K=this.U),this.u!==null||this.R||(q.J=K,K=null),this.S)t:{for(var g=0,E=0;E<this.i.length;E++){e:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(g+=w,g>4096){g=E;break t}if(g===4096||E===this.i.length-1){g=E+1;break t}}g=1e3}else g=1e3;g=ku(this,q,g),E=Pe(this.J),ne(E,"RID",c),ne(E,"CVER",22),this.G&&ne(E,"X-HTTP-Session-Id",this.G),Br(this,E),K&&(this.R?g="headers="+ts(Kn(K))+"&"+g:this.u&&Pr(E,this.u,K)),Lo(this.h,q),this.Ra&&ne(E,"TYPE","init"),this.S?(ne(E,"$req",g),ne(E,"SID","null"),q.U=!0,wi(q,E,null)):wi(q,E,g),this.I=2}}else this.I==3&&(c?Qo(this,c):this.i.length==0||jo(this.h)||Qo(this))};function Qo(c,g){var E;g?E=g.l:E=c.V++;const w=Pe(c.J);ne(w,"SID",c.M),ne(w,"RID",E),ne(w,"AID",c.K),Br(c,w),c.u&&c.o&&Pr(w,c.u,c.o),E=new ai(c,c.j,E,c.D+1),c.u===null&&(E.J=c.o),g&&(c.i=g.G.concat(c.i)),g=ku(c,E,1e3),E.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Lo(c.h,E),wi(E,w,g)}function Br(c,g){c.H&&U(c.H,function(E,w){ne(g,w,E)}),c.l&&U({},function(E,w){ne(g,w,E)})}function ku(c,g,E){E=Math.min(c.i.length,E);const w=c.l?_(c.l.Ka,c.l,c):null;t:{var q=c.i;let Ot=-1;for(;;){const Re=["count="+E];Ot==-1?E>0?(Ot=q[0].g,Re.push("ofs="+Ot)):Ot=0:Re.push("ofs="+Ot);let Wt=!0;for(let ve=0;ve<E;ve++){var K=q[ve].g;const Yn=q[ve].map;if(K-=Ot,K<0)Ot=Math.max(0,q[ve].g-100),Wt=!1;else try{K="req"+K+"_"||"";try{var lt=Yn instanceof Map?Yn:Object.entries(Yn);for(const[Li,hi]of lt){let fi=hi;p(hi)&&(fi=en(hi)),Re.push(K+Li+"="+encodeURIComponent(fi))}}catch(Li){throw Re.push(K+"type="+encodeURIComponent("_badmap")),Li}}catch{w&&w(Yn)}}if(Wt){lt=Re.join("&");break t}}lt=void 0}return c=c.i.splice(0,E),g.G=c,lt}function Nu(c){if(!c.g&&!c.v){c.Y=1;var g=c.Da;jt||S(),Ct||(jt(),Ct=!0),N.add(g,c),c.A=0}}function qr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Si(_(c.Da,c),Vu(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,Du(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Si(_(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Me(10),Ls(this),Du(this))};function $o(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Du(c){c.g=new ai(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var g=Pe(c.na);ne(g,"RID","rpc"),ne(g,"SID",c.M),ne(g,"AID",c.K),ne(g,"CI",c.F?"0":"1"),!c.F&&c.ia&&ne(g,"TO",c.ia),ne(g,"TYPE","xmlhttp"),Br(c,g),c.u&&c.o&&Pr(g,c.u,c.o),c.O&&(c.g.H=c.O);var E=c.g;c=c.ba,E.M=1,E.A=Mr(Pe(g)),E.u=null,E.R=!0,va(E,c)}s.Va=function(){this.C!=null&&(this.C=null,Ls(this),qr(this),Me(19))};function Ca(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Ou(c,g){var E=null;if(c.g==g){Ca(c),$o(c),c.g=null;var w=2}else if(ki(c.h,g))E=g.G,Po(c.h,g),w=1;else return;if(c.I!=0){if(g.o)if(w==1){E=g.u?g.u.length:0,g=Date.now()-g.F;var q=c.D;w=_a(),De(w,new bi(w,E)),Mi(c)}else Nu(c);else if(q=g.m,q==3||q==0&&g.X>0||!(w==1&&Ra(c,g)||w==2&&qr(c)))switch(E&&E.length>0&&(g=c.h,g.i=g.i.concat(E)),q){case 1:ji(c,5);break;case 4:ji(c,10);break;case 3:ji(c,6);break;default:ji(c,2)}}}function Vu(c,g){let E=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(E*=2),E*g}function ji(c,g){if(c.j.info("Error code "+g),g==2){var E=_(c.bb,c),w=c.Ua;const q=!w;w=new Dn(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Je(w,"https"),Mr(w),q?li(w.toString(),E):Fo(w.toString(),E)}else Me(2);c.I=0,c.l&&c.l.pa(g),Mu(c),xa(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function Mu(c){if(c.I=0,c.ja=[],c.l){const g=Uo(c.h);(g.length!=0||c.i.length!=0)&&(Z(c.ja,g),Z(c.ja,c.i),c.h.i.length=0,z(c.i),c.i.length=0),c.l.oa()}}function ju(c,g,E){var w=E instanceof Dn?Pe(E):new Dn(E);if(w.g!="")g&&(w.g=g+"."+w.g),ks(w,w.u);else{var q=f.location;w=q.protocol,g=g?g+"."+q.hostname:q.hostname,q=+q.port;const K=new Dn(null);w&&Je(K,w),g&&(K.g=g),q&&ks(K,q),E&&(K.h=E),w=K}return E=c.G,g=c.wa,E&&g&&ne(w,E,g),ne(w,"VER",c.ka),Br(c,w),w}function Lu(c,g,E){if(g&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Aa&&!c.ma?new re(new Di({ab:E})):new re(c.ma),g.Fa(c.L),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pu(){}s=Pu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ps(){}Ps.prototype.g=function(c,g){return new yn(c,g)};function yn(c,g){de.call(this),this.g=new js(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(c?c["X-WebChannel-Client-Profile"]=g.sa:c={"X-WebChannel-Client-Profile":g.sa}),this.g.U=c,(c=g&&g.Qb)&&!I(c)&&(this.g.u=c),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new is(this)}x(yn,de),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Yo(this.g)},yn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.v&&(E={},E.__data__=en(c),c=E);g.i.push(new Le(g.Ya++,c)),g.I==3&&Mi(g)},yn.prototype.N=function(){this.g.l=null,delete this.j,Yo(this.g),delete this.g,yn.Z.N.call(this)};function Uu(c){_e.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){t:{for(const E in g){c=E;break t}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}x(Uu,_e);function zu(){Ve.call(this),this.status=1}x(zu,Ve);function is(c){this.g=c}x(is,Pu),is.prototype.ra=function(){De(this.g,"a")},is.prototype.qa=function(c){De(this.g,new Uu(c))},is.prototype.pa=function(c){De(this.g,new zu)},is.prototype.oa=function(){De(this.g,"b")},Ps.prototype.createWebChannel=Ps.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,mT=function(){return new Ps},dT=function(){return _a()},fT=me,Em={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Or.NO_ERROR=0,Or.TIMEOUT=8,Or.HTTP_ERROR=6,Xc=Or,Oo.COMPLETE="complete",hT=Oo,kr.EventType=Pt,Pt.OPEN="a",Pt.CLOSE="b",Pt.ERROR="c",Pt.MESSAGE="d",de.prototype.listen=de.prototype.J,jl=kr,re.prototype.listenOnce=re.prototype.K,re.prototype.getLastError=re.prototype.Ha,re.prototype.getLastErrorCode=re.prototype.ya,re.prototype.getStatus=re.prototype.ca,re.prototype.getResponseJson=re.prototype.La,re.prototype.getResponseText=re.prototype.la,re.prototype.send=re.prototype.ea,re.prototype.setWithCredentials=re.prototype.Fa,cT=re}).apply(typeof Fc<"u"?Fc:typeof self<"u"?self:typeof window<"u"?window:{});const Iv="@firebase/firestore",kv="4.9.3";class dn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");let xo="12.7.0";const ca=new Fm("@firebase/firestore");function ro(){return ca.logLevel}function mt(s,...t){if(ca.logLevel<=Ft.DEBUG){const i=t.map(Ym);ca.debug(`Firestore (${xo}): ${s}`,...i)}}function As(s,...t){if(ca.logLevel<=Ft.ERROR){const i=t.map(Ym);ca.error(`Firestore (${xo}): ${s}`,...i)}}function go(s,...t){if(ca.logLevel<=Ft.WARN){const i=t.map(Ym);ca.warn(`Firestore (${xo}): ${s}`,...i)}}function Ym(s){if(typeof s=="string")return s;try{return(function(i){return JSON.stringify(i)})(s)}catch{return s}}function Rt(s,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,pT(s,r,i)}function pT(s,t,i){let r=`FIRESTORE (${xo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw As(r),new Error(r)}function te(s,t,i,r){let l="Unexpected state";typeof i=="string"?l=i:r=i,s||pT(t,l,r)}function Dt(s,t){return s}const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends Rs{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ts{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}}class gT{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class G1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable((()=>i(dn.UNAUTHENTICATED)))}shutdown(){}}class K1{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class Y1{constructor(t){this.t=t,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){te(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,i(y)):Promise.resolve();let u=new Ts;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ts,t.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const y=u;t.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ts)}}),0),f()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((r=>this.i!==t?(mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(te(typeof r.accessToken=="string",31837,{l:r}),new gT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return te(t===null||typeof t=="string",2055,{h:t}),new dn(t)}}class Q1{constructor(t,i,r){this.P=t,this.T=i,this.I=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $1{constructor(t,i,r){this.P=t,this.T=i,this.I=r}getToken(){return Promise.resolve(new Q1(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable((()=>i(dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Nv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X1{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ni(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){te(this.o===void 0,3512);const r=u=>{u.error!=null&&mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,mt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const l=u=>{mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Nv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((i=>i?(te(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new Nv(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function J1(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<s;r++)i[r]=Math.floor(256*Math.random());return i}class Qm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=J1(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<i&&(r+=t.charAt(l[u]%62))}return r}}function Gt(s,t){return s<t?-1:s>t?1:0}function Tm(s,t){const i=Math.min(s.length,t.length);for(let r=0;r<i;r++){const l=s.charAt(r),u=t.charAt(r);if(l!==u)return rm(l)===rm(u)?Gt(l,u):rm(l)?1:-1}return Gt(s.length,t.length)}const W1=55296,Z1=57343;function rm(s){const t=s.charCodeAt(0);return t>=W1&&t<=Z1}function yo(s,t,i){return s.length===t.length&&s.every(((r,l)=>i(r,t[l])))}const Dv="__name__";class qi{constructor(t,i,r){i===void 0?i=0:i>t.length&&Rt(637,{offset:i,range:t.length}),r===void 0?r=t.length-i:r>t.length-i&&Rt(1746,{length:r,range:t.length-i}),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return qi.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof qi?t.forEach((r=>{i.push(r)})):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let l=0;l<r;l++){const u=qi.compareSegments(t.get(l),i.get(l));if(u!==0)return u}return Gt(t.length,i.length)}static compareSegments(t,i){const r=qi.isNumericId(t),l=qi.isNumericId(i);return r&&!l?-1:!r&&l?1:r&&l?qi.extractNumericId(t).compare(qi.extractNumericId(i)):Tm(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return yr.fromString(t.substring(4,t.length-2))}}class ce extends qi{construct(t,i,r){return new ce(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new ft(et.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter((l=>l.length>0)))}return new ce(i)}static emptyPath(){return new ce([])}}const tw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends qi{construct(t,i,r){return new un(t,i,r)}static isValidIdentifier(t){return tw.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dv}static keyField(){return new un([Dv])}static fromServerFormat(t){const i=[];let r="",l=0;const u=()=>{if(r.length===0)throw new ft(et.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let f=!1;for(;l<t.length;){const p=t[l];if(p==="\\"){if(l+1===t.length)throw new ft(et.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ft(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=y,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(r+=p,l++):(u(),l++)}if(u(),f)throw new ft(et.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new un(i)}static emptyPath(){return new un([])}}class bt{constructor(t){this.path=t}static fromPath(t){return new bt(ce.fromString(t))}static fromName(t){return new bt(ce.fromString(t).popFirst(5))}static empty(){return new bt(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ce.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return ce.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new bt(new ce(t.slice()))}}function yT(s,t,i){if(!i)throw new ft(et.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function ew(s,t,i,r){if(t===!0&&r===!0)throw new ft(et.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function Ov(s){if(!bt.isDocumentKey(s))throw new ft(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Vv(s){if(bt.isDocumentKey(s))throw new ft(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function _T(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ch(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":Rt(12329,{type:typeof s})}function vn(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new ft(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Ch(s);throw new ft(et.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return s}function Ge(s,t){const i={typeString:s};return t&&(i.value=t),i}function ru(s,t){if(!_T(s))throw new ft(et.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in t)if(t[r]){const l=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){i=`JSON missing required field: '${r}'`;break}const f=s[r];if(l&&typeof f!==l){i=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){i=`Expected '${r}' field to equal '${u.value}'`;break}}if(i)throw new ft(et.INVALID_ARGUMENT,i);return!0}const Mv=-62135596800,jv=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(t){return ye.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor((t-1e3*i)*jv);return new ye(i,r)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new ft(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ft(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<Mv)throw new ft(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ft(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jv}_compareTo(t){return this.seconds===t.seconds?Gt(this.nanoseconds,t.nanoseconds):Gt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ru(t,ye._jsonSchema))return new ye(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Mv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:Ge("string",ye._jsonSchemaVersion),seconds:Ge("number"),nanoseconds:Ge("number")};class kt{static fromTimestamp(t){return new kt(t)}static min(){return new kt(new ye(0,0))}static max(){return new kt(new ye(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ql=-1;function nw(s,t){const i=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=kt.fromTimestamp(r===1e9?new ye(i+1,0):new ye(i,r));return new Er(l,bt.empty(),t)}function iw(s){return new Er(s.readTime,s.key,Ql)}class Er{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new Er(kt.min(),bt.empty(),Ql)}static max(){return new Er(kt.max(),bt.empty(),Ql)}}function sw(s,t){let i=s.readTime.compareTo(t.readTime);return i!==0?i:(i=bt.comparator(s.documentKey,t.documentKey),i!==0?i:Gt(s.largestBatchId,t.largestBatchId))}const rw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Ro(s){if(s.code!==et.FAILED_PRECONDITION||s.message!==rw)throw s;mt("LocalStore","Unexpectedly lost primary lease")}class st{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&Rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new st(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(i,u).next(r,l)}}))}toPromise(){return new Promise(((t,i)=>{this.next(t,i)}))}wrapUserFunction(t){try{const i=t();return i instanceof st?i:st.resolve(i)}catch(i){return st.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction((()=>t(i))):st.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction((()=>t(i))):st.reject(i)}static resolve(t){return new st(((i,r)=>{i(t)}))}static reject(t){return new st(((i,r)=>{r(t)}))}static waitFor(t){return new st(((i,r)=>{let l=0,u=0,f=!1;t.forEach((p=>{++l,p.next((()=>{++u,f&&u===l&&i()}),(y=>r(y)))})),f=!0,u===l&&i()}))}static or(t){let i=st.resolve(!1);for(const r of t)i=i.next((l=>l?st.resolve(l):r()));return i}static forEach(t,i){const r=[];return t.forEach(((l,u)=>{r.push(i.call(this,l,u))})),this.waitFor(r)}static mapArray(t,i){return new st(((r,l)=>{const u=t.length,f=new Array(u);let p=0;for(let y=0;y<u;y++){const _=y;i(t[_]).next((b=>{f[_]=b,++p,p===u&&r(f)}),(b=>l(b)))}}))}static doWhile(t,i){return new st(((r,l)=>{const u=()=>{t()===!0?i().next((()=>{u()}),l):r()};u()}))}}function ow(s){const t=s.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Co(s){return s.name==="IndexedDbTransactionError"}class Ih{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Ih.ce=-1;const $m=-1;function kh(s){return s==null}function uh(s){return s===0&&1/s==-1/0}function lw(s){return typeof s=="number"&&Number.isInteger(s)&&!uh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const vT="";function uw(s){let t="";for(let i=0;i<s.length;i++)t.length>0&&(t=Lv(t)),t=cw(s.get(i),t);return Lv(t)}function cw(s,t){let i=t;const r=s.length;for(let l=0;l<r;l++){const u=s.charAt(l);switch(u){case"\0":i+="";break;case vT:i+="";break;default:i+=u}}return i}function Lv(s){return s+vT+""}function Pv(s){let t=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t++;return t}function xr(s,t){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t(i,s[i])}function ET(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}class be{constructor(t,i){this.comparator=t,this.root=i||ln.EMPTY}insert(t,i){return new be(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(t){return new be(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ln.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(t,r.key);if(l===0)return i+r.left.size;l<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((i,r)=>(t(i,r),!1)))}toString(){const t=[];return this.inorderTraversal(((i,r)=>(t.push(`${i}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Gc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Gc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Gc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Gc(this.root,t,this.comparator,!0)}}class Gc{constructor(t,i,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=i?r(t.key,i):1,i&&l&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ln{constructor(t,i,r,l,u){this.key=t,this.value=i,this.color=r??ln.RED,this.left=l??ln.EMPTY,this.right=u??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,l,u){return new ln(t??this.key,i??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let l=this;const u=r(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,i,r),null):u===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return ln.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Rt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Rt(27949);return t+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Rt(57766)}get value(){throw Rt(16141)}get color(){throw Rt(16727)}get left(){throw Rt(29726)}get right(){throw Rt(36894)}copy(t,i,r,l,u){return this}insert(t,i,r){return new ln(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qe{constructor(t){this.comparator=t,this.data=new be(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((i,r)=>(t(i),!1)))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new Uv(this.data.getIterator())}getIteratorFrom(t){return new Uv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach((r=>{i=i.add(r)})),i}isEqual(t){if(!(t instanceof Qe)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((i=>{t.push(i)})),t}toString(){const t=[];return this.forEach((i=>t.push(i))),"SortedSet("+t.toString()+")"}copy(t){const i=new Qe(this.comparator);return i.data=t,i}}class Uv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Bn{constructor(t){this.fields=t,t.sort(un.comparator)}static empty(){return new Bn([])}unionWith(t){let i=new Qe(un.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new Bn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return yo(this.fields,t.fields,((i,r)=>i.isEqual(r)))}}class TT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class cn{constructor(t){this.binaryString=t}static fromBase64String(t){const i=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new TT("Invalid base64 string: "+u):u}})(t);return new cn(i)}static fromUint8Array(t){const i=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(t);return new cn(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const r=new Uint8Array(i.length);for(let l=0;l<i.length;l++)r[l]=i.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Gt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const hw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(s){if(te(!!s,39018),typeof s=="string"){let t=0;const i=hw.exec(s);if(te(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ke(s.seconds),nanos:ke(s.nanos)}}function ke(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function br(s){return typeof s=="string"?cn.fromBase64String(s):cn.fromUint8Array(s)}const bT="server_timestamp",ST="__type__",AT="__previous_value__",wT="__local_write_time__";function Xm(s){return(s?.mapValue?.fields||{})[ST]?.stringValue===bT}function Nh(s){const t=s.mapValue.fields[AT];return Xm(t)?Nh(t):t}function $l(s){const t=Tr(s.mapValue.fields[wT].timestampValue);return new ye(t.seconds,t.nanos)}class fw{constructor(t,i,r,l,u,f,p,y,_,b){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=b}}const ch="(default)";class Xl{constructor(t,i){this.projectId=t,this.database=i||ch}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database===ch}isEqual(t){return t instanceof Xl&&t.projectId===this.projectId&&t.database===this.database}}const xT="__type__",dw="__max__",Kc={mapValue:{}},RT="__vector__",hh="value";function Sr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Xm(s)?4:pw(s)?9007199254740991:mw(s)?10:11:Rt(28295,{value:s})}function Ji(s,t){if(s===t)return!0;const i=Sr(s);if(i!==Sr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return $l(s).isEqual($l(t));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=Tr(l.timestampValue),p=Tr(u.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(l,u){return br(l.bytesValue).isEqual(br(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(l,u){return ke(l.geoPointValue.latitude)===ke(u.geoPointValue.latitude)&&ke(l.geoPointValue.longitude)===ke(u.geoPointValue.longitude)})(s,t);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return ke(l.integerValue)===ke(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=ke(l.doubleValue),p=ke(u.doubleValue);return f===p?uh(f)===uh(p):isNaN(f)&&isNaN(p)}return!1})(s,t);case 9:return yo(s.arrayValue.values||[],t.arrayValue.values||[],Ji);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},p=u.mapValue.fields||{};if(Pv(f)!==Pv(p))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(p[y]===void 0||!Ji(f[y],p[y])))return!1;return!0})(s,t);default:return Rt(52216,{left:s})}}function Jl(s,t){return(s.values||[]).find((i=>Ji(i,t)))!==void 0}function _o(s,t){if(s===t)return 0;const i=Sr(s),r=Sr(t);if(i!==r)return Gt(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return Gt(s.booleanValue,t.booleanValue);case 2:return(function(u,f){const p=ke(u.integerValue||u.doubleValue),y=ke(f.integerValue||f.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(s,t);case 3:return zv(s.timestampValue,t.timestampValue);case 4:return zv($l(s),$l(t));case 5:return Tm(s.stringValue,t.stringValue);case 6:return(function(u,f){const p=br(u),y=br(f);return p.compareTo(y)})(s.bytesValue,t.bytesValue);case 7:return(function(u,f){const p=u.split("/"),y=f.split("/");for(let _=0;_<p.length&&_<y.length;_++){const b=Gt(p[_],y[_]);if(b!==0)return b}return Gt(p.length,y.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,f){const p=Gt(ke(u.latitude),ke(f.latitude));return p!==0?p:Gt(ke(u.longitude),ke(f.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return Bv(s.arrayValue,t.arrayValue);case 10:return(function(u,f){const p=u.fields||{},y=f.fields||{},_=p[hh]?.arrayValue,b=y[hh]?.arrayValue,x=Gt(_?.values?.length||0,b?.values?.length||0);return x!==0?x:Bv(_,b)})(s.mapValue,t.mapValue);case 11:return(function(u,f){if(u===Kc.mapValue&&f===Kc.mapValue)return 0;if(u===Kc.mapValue)return 1;if(f===Kc.mapValue)return-1;const p=u.fields||{},y=Object.keys(p),_=f.fields||{},b=Object.keys(_);y.sort(),b.sort();for(let x=0;x<y.length&&x<b.length;++x){const R=Tm(y[x],b[x]);if(R!==0)return R;const z=_o(p[y[x]],_[b[x]]);if(z!==0)return z}return Gt(y.length,b.length)})(s.mapValue,t.mapValue);default:throw Rt(23264,{he:i})}}function zv(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Gt(s,t);const i=Tr(s),r=Tr(t),l=Gt(i.seconds,r.seconds);return l!==0?l:Gt(i.nanos,r.nanos)}function Bv(s,t){const i=s.values||[],r=t.values||[];for(let l=0;l<i.length&&l<r.length;++l){const u=_o(i[l],r[l]);if(u)return u}return Gt(i.length,r.length)}function vo(s){return bm(s)}function bm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const r=Tr(i);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return br(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return bt.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let r="[",l=!0;for(const u of i.values||[])l?l=!1:r+=",",r+=bm(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(i){const r=Object.keys(i.fields||{}).sort();let l="{",u=!0;for(const f of r)u?u=!1:l+=",",l+=`${f}:${bm(i.fields[f])}`;return l+"}"})(s.mapValue):Rt(61005,{value:s})}function Jc(s){switch(Sr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Nh(s);return t?16+Jc(t):16;case 5:return 2*s.stringValue.length;case 6:return br(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+Jc(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return xr(r.fields,((u,f)=>{l+=u.length+Jc(f)})),l})(s.mapValue);default:throw Rt(13486,{value:s})}}function qv(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Sm(s){return!!s&&"integerValue"in s}function Jm(s){return!!s&&"arrayValue"in s}function Hv(s){return!!s&&"nullValue"in s}function Fv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Wc(s){return!!s&&"mapValue"in s}function mw(s){return(s?.mapValue?.fields||{})[xT]?.stringValue===RT}function Bl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return xr(s.mapValue.fields,((i,r)=>t.mapValue.fields[i]=Bl(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Bl(s.arrayValue.values[i]);return t}return{...s}}function pw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===dw}class kn{constructor(t){this.value=t}static empty(){return new kn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!Wc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Bl(i)}setAll(t){let i=un.emptyPath(),r={},l=[];t.forEach(((f,p)=>{if(!i.isImmediateParentOf(p)){const y=this.getFieldsMap(i);this.applyChanges(y,r,l),r={},l=[],i=p.popLast()}f?r[p.lastSegment()]=Bl(f):l.push(p.lastSegment())}));const u=this.getFieldsMap(i);this.applyChanges(u,r,l)}delete(t){const i=this.field(t.popLast());Wc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Ji(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let l=i.mapValue.fields[t.get(r)];Wc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,r){xr(i,((l,u)=>t[l]=u));for(const l of r)delete t[l]}clone(){return new kn(Bl(this.value))}}function CT(s){const t=[];return xr(s.fields,((i,r)=>{const l=new un([i]);if(Wc(r)){const u=CT(r.mapValue).fields;if(u.length===0)t.push(l);else for(const f of u)t.push(l.child(f))}else t.push(l)})),new Bn(t)}class mn{constructor(t,i,r,l,u,f,p){this.key=t,this.documentType=i,this.version=r,this.readTime=l,this.createTime=u,this.data=f,this.documentState=p}static newInvalidDocument(t){return new mn(t,0,kt.min(),kt.min(),kt.min(),kn.empty(),0)}static newFoundDocument(t,i,r,l){return new mn(t,1,i,kt.min(),r,l,0)}static newNoDocument(t,i){return new mn(t,2,i,kt.min(),kt.min(),kn.empty(),0)}static newUnknownDocument(t,i){return new mn(t,3,i,kt.min(),kt.min(),kn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof mn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fh{constructor(t,i){this.position=t,this.inclusive=i}}function Gv(s,t,i){let r=0;for(let l=0;l<s.position.length;l++){const u=t[l],f=s.position[l];if(u.field.isKeyField()?r=bt.comparator(bt.fromName(f.referenceValue),i.key):r=_o(f,i.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kv(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Ji(s.position[i],t.position[i]))return!1;return!0}class Wl{constructor(t,i="asc"){this.field=t,this.dir=i}}function gw(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}class IT{}class Fe extends IT{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new _w(t,i,r):i==="array-contains"?new Tw(t,r):i==="in"?new bw(t,r):i==="not-in"?new Sw(t,r):i==="array-contains-any"?new Aw(t,r):new Fe(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new vw(t,r):new Ew(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(_o(i,this.value)):i!==null&&Sr(this.value)===Sr(i)&&this.matchesComparison(_o(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends IT{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new yi(t,i)}matches(t){return kT(this)?this.filters.find((i=>!i.matches(t)))===void 0:this.filters.find((i=>i.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,i)=>t.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kT(s){return s.op==="and"}function NT(s){return yw(s)&&kT(s)}function yw(s){for(const t of s.filters)if(t instanceof yi)return!1;return!0}function Am(s){if(s instanceof Fe)return s.field.canonicalString()+s.op.toString()+vo(s.value);if(NT(s))return s.filters.map((t=>Am(t))).join(",");{const t=s.filters.map((i=>Am(i))).join(",");return`${s.op}(${t})`}}function DT(s,t){return s instanceof Fe?(function(r,l){return l instanceof Fe&&r.op===l.op&&r.field.isEqual(l.field)&&Ji(r.value,l.value)})(s,t):s instanceof yi?(function(r,l){return l instanceof yi&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,f,p)=>u&&DT(f,l.filters[p])),!0):!1})(s,t):void Rt(19439)}function OT(s){return s instanceof Fe?(function(i){return`${i.field.canonicalString()} ${i.op} ${vo(i.value)}`})(s):s instanceof yi?(function(i){return i.op.toString()+" {"+i.getFilters().map(OT).join(" ,")+"}"})(s):"Filter"}class _w extends Fe{constructor(t,i,r){super(t,i,r),this.key=bt.fromName(r.referenceValue)}matches(t){const i=bt.comparator(t.key,this.key);return this.matchesComparison(i)}}class vw extends Fe{constructor(t,i){super(t,"in",i),this.keys=VT("in",i)}matches(t){return this.keys.some((i=>i.isEqual(t.key)))}}class Ew extends Fe{constructor(t,i){super(t,"not-in",i),this.keys=VT("not-in",i)}matches(t){return!this.keys.some((i=>i.isEqual(t.key)))}}function VT(s,t){return(t.arrayValue?.values||[]).map((i=>bt.fromName(i.referenceValue)))}class Tw extends Fe{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Jm(i)&&Jl(i.arrayValue,this.value)}}class bw extends Fe{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Jl(this.value.arrayValue,i)}}class Sw extends Fe{constructor(t,i){super(t,"not-in",i)}matches(t){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Jl(this.value.arrayValue,i)}}class Aw extends Fe{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Jm(i)||!i.arrayValue.values)&&i.arrayValue.values.some((r=>Jl(this.value.arrayValue,r)))}}class ww{constructor(t,i=null,r=[],l=[],u=null,f=null,p=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=f,this.endAt=p,this.Te=null}}function Yv(s,t=null,i=[],r=[],l=null,u=null,f=null){return new ww(s,t,i,r,l,u,f)}function Wm(s){const t=Dt(s);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map((r=>Am(r))).join(","),i+="|ob:",i+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),kh(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>vo(r))).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>vo(r))).join(",")),t.Te=i}return t.Te}function Zm(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!gw(s.orderBy[i],t.orderBy[i]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!DT(s.filters[i],t.filters[i]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!Kv(s.startAt,t.startAt)&&Kv(s.endAt,t.endAt)}function wm(s){return bt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Io{constructor(t,i=null,r=[],l=[],u=null,f="F",p=null,y=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=f,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xw(s,t,i,r,l,u,f,p){return new Io(s,t,i,r,l,u,f,p)}function Dh(s){return new Io(s)}function Qv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function MT(s){return s.collectionGroup!==null}function ql(s){const t=Dt(s);if(t.Ie===null){t.Ie=[];const i=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),i.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Qe(un.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((_=>{_.isInequality()&&(p=p.add(_.field))}))})),p})(t).forEach((u=>{i.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Wl(u,r))})),i.has(un.keyField().canonicalString())||t.Ie.push(new Wl(un.keyField(),r))}return t.Ie}function Gi(s){const t=Dt(s);return t.Ee||(t.Ee=Rw(t,ql(s))),t.Ee}function Rw(s,t){if(s.limitType==="F")return Yv(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Wl(l.field,u)}));const i=s.endAt?new fh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new fh(s.startAt.position,s.startAt.inclusive):null;return Yv(s.path,s.collectionGroup,t,s.filters,s.limit,i,r)}}function xm(s,t){const i=s.filters.concat([t]);return new Io(s.path,s.collectionGroup,s.explicitOrderBy.slice(),i,s.limit,s.limitType,s.startAt,s.endAt)}function dh(s,t,i){return new Io(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,i,s.startAt,s.endAt)}function Oh(s,t){return Zm(Gi(s),Gi(t))&&s.limitType===t.limitType}function jT(s){return`${Wm(Gi(s))}|lt:${s.limitType}`}function ao(s){return`Query(target=${(function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map((l=>OT(l))).join(", ")}]`),kh(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map((l=>vo(l))).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map((l=>vo(l))).join(",")),`Target(${r})`})(Gi(s))}; limitType=${s.limitType})`}function Vh(s,t){return t.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):bt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,l){for(const u of ql(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(s,t)&&(function(r,l){return!(r.startAt&&!(function(f,p,y){const _=Gv(f,p,y);return f.inclusive?_<=0:_<0})(r.startAt,ql(r),l)||r.endAt&&!(function(f,p,y){const _=Gv(f,p,y);return f.inclusive?_>=0:_>0})(r.endAt,ql(r),l))})(s,t)}function Cw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function LT(s){return(t,i)=>{let r=!1;for(const l of ql(s)){const u=Iw(l,t,i);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function Iw(s,t,i){const r=s.field.isKeyField()?bt.comparator(t.key,i.key):(function(u,f,p){const y=f.data.field(u),_=p.data.field(u);return y!==null&&_!==null?_o(y,_):Rt(42886)})(s.field,t,i);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Rt(19790,{direction:s.dir})}}class ma{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,t))return u}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),l=this.inner[r];if(l===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],t))return void(l[u]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return r.length===1?delete this.inner[i]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(t){xr(this.inner,((i,r)=>{for(const[l,u]of r)t(l,u)}))}isEmpty(){return ET(this.inner)}size(){return this.innerSize}}const kw=new be(bt.comparator);function ws(){return kw}const PT=new be(bt.comparator);function Ll(...s){let t=PT;for(const i of s)t=t.insert(i.key,i);return t}function UT(s){let t=PT;return s.forEach(((i,r)=>t=t.insert(i,r.overlayedDocument))),t}function aa(){return Hl()}function zT(){return Hl()}function Hl(){return new ma((s=>s.toString()),((s,t)=>s.isEqual(t)))}const Nw=new be(bt.comparator),Dw=new Qe(bt.comparator);function Kt(...s){let t=Dw;for(const i of s)t=t.add(i);return t}const Ow=new Qe(Gt);function Vw(){return Ow}function tp(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uh(t)?"-0":t}}function BT(s){return{integerValue:""+s}}function Mw(s,t){return lw(t)?BT(t):tp(s,t)}class Mh{constructor(){this._=void 0}}function jw(s,t,i){return s instanceof Zl?(function(l,u){const f={fields:{[ST]:{stringValue:bT},[wT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Xm(u)&&(u=Nh(u)),u&&(f.fields[AT]=u),{mapValue:f}})(i,t):s instanceof Eo?HT(s,t):s instanceof tu?FT(s,t):(function(l,u){const f=qT(l,u),p=$v(f)+$v(l.Ae);return Sm(f)&&Sm(l.Ae)?BT(p):tp(l.serializer,p)})(s,t)}function Lw(s,t,i){return s instanceof Eo?HT(s,t):s instanceof tu?FT(s,t):i}function qT(s,t){return s instanceof mh?(function(r){return Sm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class Zl extends Mh{}class Eo extends Mh{constructor(t){super(),this.elements=t}}function HT(s,t){const i=GT(t);for(const r of s.elements)i.some((l=>Ji(l,r)))||i.push(r);return{arrayValue:{values:i}}}class tu extends Mh{constructor(t){super(),this.elements=t}}function FT(s,t){let i=GT(t);for(const r of s.elements)i=i.filter((l=>!Ji(l,r)));return{arrayValue:{values:i}}}class mh extends Mh{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function $v(s){return ke(s.integerValue||s.doubleValue)}function GT(s){return Jm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class KT{constructor(t,i){this.field=t,this.transform=i}}function Pw(s,t){return s.field.isEqual(t.field)&&(function(r,l){return r instanceof Eo&&l instanceof Eo||r instanceof tu&&l instanceof tu?yo(r.elements,l.elements,Ji):r instanceof mh&&l instanceof mh?Ji(r.Ae,l.Ae):r instanceof Zl&&l instanceof Zl})(s.transform,t.transform)}class Uw{constructor(t,i){this.version=t,this.transformResults=i}}class En{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new En}static exists(t){return new En(void 0,t)}static updateTime(t){return new En(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Zc(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class jh{}function YT(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Lh(s.key,En.none()):new au(s.key,s.data,En.none());{const i=s.data,r=kn.empty();let l=new Qe(un.comparator);for(let u of t.fields)if(!l.has(u)){let f=i.field(u);f===null&&u.length>1&&(u=u.popLast(),f=i.field(u)),f===null?r.delete(u):r.set(u,f),l=l.add(u)}return new Rr(s.key,r,new Bn(l.toArray()),En.none())}}function zw(s,t,i){s instanceof au?(function(l,u,f){const p=l.value.clone(),y=Jv(l.fieldTransforms,u,f.transformResults);p.setAll(y),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,t,i):s instanceof Rr?(function(l,u,f){if(!Zc(l.precondition,u))return void u.convertToUnknownDocument(f.version);const p=Jv(l.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(QT(l)),y.setAll(p),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(s,t,i):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,i)}function Fl(s,t,i,r){return s instanceof au?(function(u,f,p,y){if(!Zc(u.precondition,f))return p;const _=u.value.clone(),b=Wv(u.fieldTransforms,y,f);return _.setAll(b),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(s,t,i,r):s instanceof Rr?(function(u,f,p,y){if(!Zc(u.precondition,f))return p;const _=Wv(u.fieldTransforms,y,f),b=f.data;return b.setAll(QT(u)),b.setAll(_),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((x=>x.field)))})(s,t,i,r):(function(u,f,p){return Zc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(s,t,i)}function Bw(s,t){let i=null;for(const r of s.fieldTransforms){const l=t.data.field(r.field),u=qT(r.transform,l||null);u!=null&&(i===null&&(i=kn.empty()),i.set(r.field,u))}return i||null}function Xv(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&yo(r,l,((u,f)=>Pw(u,f)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class au extends jh{constructor(t,i,r,l=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Rr extends jh{constructor(t,i,r,l,u=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function QT(s){const t=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const r=s.data.field(i);t.set(i,r)}})),t}function Jv(s,t,i){const r=new Map;te(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let l=0;l<i.length;l++){const u=s[l],f=u.transform,p=t.data.field(u.field);r.set(u.field,Lw(f,p,i[l]))}return r}function Wv(s,t,i){const r=new Map;for(const l of s){const u=l.transform,f=i.data.field(l.field);r.set(l.field,jw(u,f,t))}return r}class Lh extends jh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qw extends jh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Hw{constructor(t,i,r,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(t.key)&&zw(u,t,r[l])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=Fl(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=Fl(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=zT();return this.mutations.forEach((l=>{const u=t.get(l.key),f=u.overlayedDocument;let p=this.applyToLocalView(f,u.mutatedFields);p=i.has(l.key)?null:p;const y=YT(f,p);y!==null&&r.set(l.key,y),f.isValidDocument()||f.convertToNoDocument(kt.min())})),r}keys(){return this.mutations.reduce(((t,i)=>t.add(i.key)),Kt())}isEqual(t){return this.batchId===t.batchId&&yo(this.mutations,t.mutations,((i,r)=>Xv(i,r)))&&yo(this.baseMutations,t.baseMutations,((i,r)=>Xv(i,r)))}}class ep{constructor(t,i,r,l){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=l}static from(t,i,r){te(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let l=(function(){return Nw})();const u=t.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,r[f].version);return new ep(t,i,r,l)}}class Fw{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Gw{constructor(t,i){this.count=t,this.unchangedNames=i}}var He,Qt;function Kw(s){switch(s){case et.OK:return Rt(64938);case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0;default:return Rt(15467,{code:s})}}function $T(s){if(s===void 0)return As("GRPC error has no .code"),et.UNKNOWN;switch(s){case He.OK:return et.OK;case He.CANCELLED:return et.CANCELLED;case He.UNKNOWN:return et.UNKNOWN;case He.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case He.INTERNAL:return et.INTERNAL;case He.UNAVAILABLE:return et.UNAVAILABLE;case He.UNAUTHENTICATED:return et.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case He.NOT_FOUND:return et.NOT_FOUND;case He.ALREADY_EXISTS:return et.ALREADY_EXISTS;case He.PERMISSION_DENIED:return et.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case He.ABORTED:return et.ABORTED;case He.OUT_OF_RANGE:return et.OUT_OF_RANGE;case He.UNIMPLEMENTED:return et.UNIMPLEMENTED;case He.DATA_LOSS:return et.DATA_LOSS;default:return Rt(39323,{code:s})}}(Qt=He||(He={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";function Yw(){return new TextEncoder}const Qw=new yr([4294967295,4294967295],0);function Zv(s){const t=Yw().encode(s),i=new uT;return i.update(t),new Uint8Array(i.digest())}function tE(s){const t=new DataView(s.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),l=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new yr([i,r],0),new yr([l,u],0)]}class np{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new Pl(`Invalid padding: ${i}`);if(r<0)throw new Pl(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Pl(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new Pl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=yr.fromNumber(this.ge)}ye(t,i,r){let l=t.add(i.multiply(yr.fromNumber(r)));return l.compare(Qw)===1&&(l=new yr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=Zv(t),[r,l]=tE(i);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);if(!this.we(f))return!1}return!0}static create(t,i,r){const l=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new np(u,l,i);return r.forEach((p=>f.insert(p))),f}insert(t){if(this.ge===0)return;const i=Zv(t),[r,l]=tE(i);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);this.Se(f)}}Se(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class Pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ph{constructor(t,i,r,l,u){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const l=new Map;return l.set(t,ou.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new Ph(kt.min(),l,new be(Gt),ws(),Kt())}}class ou{constructor(t,i,r,l,u){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new ou(r,i,Kt(),Kt(),Kt())}}class th{constructor(t,i,r,l){this.be=t,this.removedTargetIds=i,this.key=r,this.De=l}}class XT{constructor(t,i){this.targetId=t,this.Ce=i}}class JT{constructor(t,i,r=cn.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=l}}class eE{constructor(){this.ve=0,this.Fe=nE(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Kt(),i=Kt(),r=Kt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:r=r.add(l);break;default:Rt(38017,{changeType:u})}})),new ou(this.Me,this.xe,t,i,r)}qe(){this.Oe=!1,this.Fe=nE()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,te(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $w{constructor(t){this.Ge=t,this.ze=new Map,this.je=ws(),this.Je=Yc(),this.He=Yc(),this.Ye=new be(Gt)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,(i=>{const r=this.nt(i);switch(t.state){case 0:this.rt(i)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),r.Le(t.resumeToken));break;default:Rt(56790,{state:t.state})}}))}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach(((r,l)=>{this.rt(l)&&i(l)}))}st(t){const i=t.targetId,r=t.Ce.count,l=this.ot(i);if(l){const u=l.target;if(wm(u))if(r===0){const f=new bt(u.path);this.et(i,f,mn.newNoDocument(f,kt.min()))}else te(r===1,20013,{expectedCount:r});else{const f=this._t(i);if(f!==r){const p=this.ut(t),y=p?this.ct(p,t,f):1;if(y!==0){this.it(i);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,_)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=i;let f,p;try{f=br(r).toUint8Array()}catch(y){if(y instanceof TT)return go("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new np(f,l,u)}catch(y){return go(y instanceof Pl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(t,i,r){return i.Ce.count===r-this.Pt(t,i.targetId)?0:2}Pt(t,i){const r=this.Ge.getRemoteKeysForTarget(i);let l=0;return r.forEach((u=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(p)||(this.et(i,u,null),l++)})),l}Tt(t){const i=new Map;this.ze.forEach(((u,f)=>{const p=this.ot(f);if(p){if(u.current&&wm(p.target)){const y=new bt(p.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,mn.newNoDocument(y,t))}u.Be&&(i.set(f,u.ke()),u.qe())}}));let r=Kt();this.He.forEach(((u,f)=>{let p=!0;f.forEachWhile((y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(t)));const l=new Ph(t,i,this.Ye,this.je,r);return this.je=ws(),this.Je=Yc(),this.He=Yc(),this.Ye=new be(Gt),l}Xe(t,i){if(!this.rt(t))return;const r=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,r),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,r){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),r&&(this.je=this.je.insert(i,r))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new eE,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new Qe(Gt),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new Qe(Gt),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||mt("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new eE),this.Ge.getRemoteKeysForTarget(t).forEach((i=>{this.et(t,i,null)}))}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function Yc(){return new be(bt.comparator)}function nE(){return new be(bt.comparator)}const Xw={asc:"ASCENDING",desc:"DESCENDING"},Jw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ww={and:"AND",or:"OR"};class Zw{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function Rm(s,t){return s.useProto3Json||kh(t)?t:{value:t}}function ph(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function WT(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function tx(s,t){return ph(s,t.toTimestamp())}function Ki(s){return te(!!s,49232),kt.fromTimestamp((function(i){const r=Tr(i);return new ye(r.seconds,r.nanos)})(s))}function ip(s,t){return Cm(s,t).canonicalString()}function Cm(s,t){const i=(function(l){return new ce(["projects",l.projectId,"databases",l.database])})(s).child("documents");return t===void 0?i:i.child(t)}function ZT(s){const t=ce.fromString(s);return te(s0(t),10190,{key:t.toString()}),t}function Im(s,t){return ip(s.databaseId,t.path)}function am(s,t){const i=ZT(t);if(i.get(1)!==s.databaseId.projectId)throw new ft(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new ft(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new bt(e0(i))}function t0(s,t){return ip(s.databaseId,t)}function ex(s){const t=ZT(s);return t.length===4?ce.emptyPath():e0(t)}function km(s){return new ce(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function e0(s){return te(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function iE(s,t,i){return{name:Im(s,t),fields:i.value.mapValue.fields}}function nx(s,t){let i;if("targetChange"in t){t.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Rt(39313,{state:_})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],u=(function(_,b){return _.useProto3Json?(te(b===void 0||typeof b=="string",58123),cn.fromBase64String(b||"")):(te(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),cn.fromUint8Array(b||new Uint8Array))})(s,t.targetChange.resumeToken),f=t.targetChange.cause,p=f&&(function(_){const b=_.code===void 0?et.UNKNOWN:$T(_.code);return new ft(b,_.message||"")})(f);i=new JT(r,l,u,p||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const l=am(s,r.document.name),u=Ki(r.document.updateTime),f=r.document.createTime?Ki(r.document.createTime):kt.min(),p=new kn({mapValue:{fields:r.document.fields}}),y=mn.newFoundDocument(l,u,f,p),_=r.targetIds||[],b=r.removedTargetIds||[];i=new th(_,b,y.key,y)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const l=am(s,r.document),u=r.readTime?Ki(r.readTime):kt.min(),f=mn.newNoDocument(l,u),p=r.removedTargetIds||[];i=new th([],p,f.key,f)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const l=am(s,r.document),u=r.removedTargetIds||[];i=new th([],u,l,null)}else{if(!("filter"in t))return Rt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,f=new Gw(l,u),p=r.targetId;i=new XT(p,f)}}return i}function ix(s,t){let i;if(t instanceof au)i={update:iE(s,t.key,t.value)};else if(t instanceof Lh)i={delete:Im(s,t.key)};else if(t instanceof Rr)i={update:iE(s,t.key,t.data),updateMask:fx(t.fieldMask)};else{if(!(t instanceof qw))return Rt(16599,{Vt:t.type});i={verify:Im(s,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map((r=>(function(u,f){const p=f.transform;if(p instanceof Zl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Eo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof tu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof mh)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw Rt(20930,{transform:f.transform})})(0,r)))),t.precondition.isNone||(i.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:tx(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Rt(27497)})(s,t.precondition)),i}function sx(s,t){return s&&s.length>0?(te(t!==void 0,14353),s.map((i=>(function(l,u){let f=l.updateTime?Ki(l.updateTime):Ki(u);return f.isEqual(kt.min())&&(f=Ki(u)),new Uw(f,l.transformResults||[])})(i,t)))):[]}function rx(s,t){return{documents:[t0(s,t.path)]}}function ax(s,t){const i={structuredQuery:{}},r=t.path;let l;t.collectionGroup!==null?(l=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=t0(s,l);const u=(function(_){if(_.length!==0)return i0(yi.create(_,"and"))})(t.filters);u&&(i.structuredQuery.where=u);const f=(function(_){if(_.length!==0)return _.map((b=>(function(R){return{field:oo(R.field),direction:ux(R.dir)}})(b)))})(t.orderBy);f&&(i.structuredQuery.orderBy=f);const p=Rm(s,t.limit);return p!==null&&(i.structuredQuery.limit=p),t.startAt&&(i.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(t.startAt)),t.endAt&&(i.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(t.endAt)),{ft:i,parent:l}}function ox(s){let t=ex(s.parent);const i=s.structuredQuery,r=i.from?i.from.length:0;let l=null;if(r>0){te(r===1,65062);const b=i.from[0];b.allDescendants?l=b.collectionId:t=t.child(b.collectionId)}let u=[];i.where&&(u=(function(x){const R=n0(x);return R instanceof yi&&NT(R)?R.getFilters():[R]})(i.where));let f=[];i.orderBy&&(f=(function(x){return x.map((R=>(function(Z){return new Wl(lo(Z.field),(function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Z.direction))})(R)))})(i.orderBy));let p=null;i.limit&&(p=(function(x){let R;return R=typeof x=="object"?x.value:x,kh(R)?null:R})(i.limit));let y=null;i.startAt&&(y=(function(x){const R=!!x.before,z=x.values||[];return new fh(z,R)})(i.startAt));let _=null;return i.endAt&&(_=(function(x){const R=!x.before,z=x.values||[];return new fh(z,R)})(i.endAt)),xw(t,l,f,u,p,"F",y,_)}function lx(s,t){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rt(28987,{purpose:l})}})(t.purpose);return i==null?null:{"goog-listen-tags":i}}function n0(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=lo(i.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=lo(i.unaryFilter.field);return Fe.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=lo(i.unaryFilter.field);return Fe.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=lo(i.unaryFilter.field);return Fe.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Rt(61313);default:return Rt(60726)}})(s):s.fieldFilter!==void 0?(function(i){return Fe.create(lo(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Rt(58110);default:return Rt(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return yi.create(i.compositeFilter.filters.map((r=>n0(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Rt(1026)}})(i.compositeFilter.op))})(s):Rt(30097,{filter:s})}function ux(s){return Xw[s]}function cx(s){return Jw[s]}function hx(s){return Ww[s]}function oo(s){return{fieldPath:s.canonicalString()}}function lo(s){return un.fromServerFormat(s.fieldPath)}function i0(s){return s instanceof Fe?(function(i){if(i.op==="=="){if(Fv(i.value))return{unaryFilter:{field:oo(i.field),op:"IS_NAN"}};if(Hv(i.value))return{unaryFilter:{field:oo(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Fv(i.value))return{unaryFilter:{field:oo(i.field),op:"IS_NOT_NAN"}};if(Hv(i.value))return{unaryFilter:{field:oo(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(i.field),op:cx(i.op),value:i.value}}})(s):s instanceof yi?(function(i){const r=i.getFilters().map((l=>i0(l)));return r.length===1?r[0]:{compositeFilter:{op:hx(i.op),filters:r}}})(s):Rt(54877,{filter:s})}function fx(s){const t=[];return s.fields.forEach((i=>t.push(i.canonicalString()))),{fieldPaths:t}}function s0(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class dr{constructor(t,i,r,l,u=kt.min(),f=kt.min(),p=cn.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(t){return new dr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class dx{constructor(t){this.yt=t}}function mx(s){const t=ox({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?dh(t,t.limit,"L"):t}class px{constructor(){this.Cn=new gx}addToCollectionParentIndex(t,i){return this.Cn.add(i),st.resolve()}getCollectionParents(t,i){return st.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return st.resolve()}deleteFieldIndex(t,i){return st.resolve()}deleteAllFieldIndexes(t){return st.resolve()}createTargetIndexes(t,i){return st.resolve()}getDocumentsMatchingTarget(t,i){return st.resolve(null)}getIndexType(t,i){return st.resolve(0)}getFieldIndexes(t,i){return st.resolve([])}getNextCollectionGroupToUpdate(t){return st.resolve(null)}getMinOffset(t,i){return st.resolve(Er.min())}getMinOffsetFromCollectionGroup(t,i){return st.resolve(Er.min())}updateCollectionGroup(t,i,r){return st.resolve()}updateIndexEntries(t,i){return st.resolve()}}class gx{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),l=this.index[i]||new Qe(ce.comparator),u=!l.has(r);return this.index[i]=l.add(r),u}has(t){const i=t.lastSegment(),r=t.popLast(),l=this.index[i];return l&&l.has(r)}getEntries(t){return(this.index[t]||new Qe(ce.comparator)).toArray()}}const sE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},r0=41943040;class In{static withCacheSize(t){return new In(t,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(r0,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);class To{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new To(0)}static cr(){return new To(-1)}}const rE="LruGarbageCollector",yx=1048576;function aE([s,t],[i,r]){const l=Gt(s,i);return l===0?Gt(t,r):l}class _x{constructor(t){this.Ir=t,this.buffer=new Qe(aE),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();aE(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class vx{constructor(t,i,r){this.garbageCollector=t,this.asyncQueue=i,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){mt(rE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Co(i)?mt(rE,"Ignoring IndexedDB error during garbage collection: ",i):await Ro(i)}await this.Vr(3e5)}))}}class Ex{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next((r=>Math.floor(i/100*r)))}nthSequenceNumber(t,i){if(i===0)return st.resolve(Ih.ce);const r=new _x(i);return this.mr.forEachTarget(t,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(t,i,r){return this.mr.removeTargets(t,i,r)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(mt("LruGarbageCollector","Garbage collection skipped; disabled"),st.resolve(sE)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(mt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sE):this.yr(t,i)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let r,l,u,f,p,y,_;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(mt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),l=this.params.maximumSequenceNumbersToCollect):l=x,f=Date.now(),this.nthSequenceNumber(t,l)))).next((x=>(r=x,p=Date.now(),this.removeTargets(t,r,i)))).next((x=>(u=x,y=Date.now(),this.removeOrphanedDocuments(t,r)))).next((x=>(_=Date.now(),ro()<=Ft.DEBUG&&mt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${u} targets in `+(y-p)+`ms
	Removed ${x} documents in `+(_-y)+`ms
Total Duration: ${_-b}ms`),st.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:x}))))}}function Tx(s,t){return new Ex(s,t)}class bx{constructor(){this.changes=new ma((t=>t.toString()),((t,i)=>t.isEqual(i))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,mn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?st.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Sx{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}class Ax{constructor(t,i,r,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=l}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next((l=>(r=l,this.remoteDocumentCache.getEntry(t,i)))).next((l=>(r!==null&&Fl(r.mutation,l,Bn.empty(),ye.now()),l)))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next((r=>this.getLocalViewOfDocuments(t,r,Kt()).next((()=>r))))}getLocalViewOfDocuments(t,i,r=Kt()){const l=aa();return this.populateOverlays(t,l,i).next((()=>this.computeViews(t,i,l,r).next((u=>{let f=Ll();return u.forEach(((p,y)=>{f=f.insert(p,y.overlayedDocument)})),f}))))}getOverlayedDocuments(t,i){const r=aa();return this.populateOverlays(t,r,i).next((()=>this.computeViews(t,i,r,Kt())))}populateOverlays(t,i,r){const l=[];return r.forEach((u=>{i.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(t,l).next((u=>{u.forEach(((f,p)=>{i.set(f,p)}))}))}computeViews(t,i,r,l){let u=ws();const f=Hl(),p=(function(){return Hl()})();return i.forEach(((y,_)=>{const b=r.get(_.key);l.has(_.key)&&(b===void 0||b.mutation instanceof Rr)?u=u.insert(_.key,_):b!==void 0?(f.set(_.key,b.mutation.getFieldMask()),Fl(b.mutation,_,b.mutation.getFieldMask(),ye.now())):f.set(_.key,Bn.empty())})),this.recalculateAndSaveOverlays(t,u).next((y=>(y.forEach(((_,b)=>f.set(_,b))),i.forEach(((_,b)=>p.set(_,new Sx(b,f.get(_)??null)))),p)))}recalculateAndSaveOverlays(t,i){const r=Hl();let l=new be(((f,p)=>f-p)),u=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next((f=>{for(const p of f)p.keys().forEach((y=>{const _=i.get(y);if(_===null)return;let b=r.get(y)||Bn.empty();b=p.applyToLocalView(_,b),r.set(y,b);const x=(l.get(p.batchId)||Kt()).add(y);l=l.insert(p.batchId,x)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),_=y.key,b=y.value,x=zT();b.forEach((R=>{if(!u.has(R)){const z=YT(i.get(R),r.get(R));z!==null&&x.set(R,z),u=u.add(R)}})),f.push(this.documentOverlayCache.saveOverlays(t,_,x))}return st.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,i,r,l){return(function(f){return bt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):MT(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,l):this.getDocumentsMatchingCollectionQuery(t,i,r,l)}getNextDocuments(t,i,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,l-u.size):st.resolve(aa());let p=Ql,y=u;return f.next((_=>st.forEach(_,((b,x)=>(p<x.largestBatchId&&(p=x.largestBatchId),u.get(b)?st.resolve():this.remoteDocumentCache.getEntry(t,b).next((R=>{y=y.insert(b,R)}))))).next((()=>this.populateOverlays(t,_,u))).next((()=>this.computeViews(t,y,_,Kt()))).next((b=>({batchId:p,changes:UT(b)})))))}))}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new bt(i)).next((r=>{let l=Ll();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(t,i,r,l){const u=i.collectionGroup;let f=Ll();return this.indexManager.getCollectionParents(t,u).next((p=>st.forEach(p,(y=>{const _=(function(x,R){return new Io(R,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(i,y.child(u));return this.getDocumentsMatchingCollectionQuery(t,_,r,l).next((b=>{b.forEach(((x,R)=>{f=f.insert(x,R)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,i,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,u,l)))).next((f=>{u.forEach(((y,_)=>{const b=_.getKey();f.get(b)===null&&(f=f.insert(b,mn.newInvalidDocument(b)))}));let p=Ll();return f.forEach(((y,_)=>{const b=u.get(y);b!==void 0&&Fl(b.mutation,_,Bn.empty(),ye.now()),Vh(i,_)&&(p=p.insert(y,_))})),p}))}}class wx{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return st.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Ki(l.createTime)}})(i)),st.resolve()}getNamedQuery(t,i){return st.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:mx(l.bundledQuery),readTime:Ki(l.readTime)}})(i)),st.resolve()}}class xx{constructor(){this.overlays=new be(bt.comparator),this.qr=new Map}getOverlay(t,i){return st.resolve(this.overlays.get(i))}getOverlays(t,i){const r=aa();return st.forEach(i,(l=>this.getOverlay(t,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(t,i,r){return r.forEach(((l,u)=>{this.St(t,i,u)})),st.resolve()}removeOverlaysForBatchId(t,i,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),st.resolve()}getOverlaysForCollection(t,i,r){const l=aa(),u=i.length+1,f=new bt(i.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const y=p.getNext().value,_=y.getKey();if(!i.isPrefixOf(_.path))break;_.path.length===u&&y.largestBatchId>r&&l.set(y.getKey(),y)}return st.resolve(l)}getOverlaysForCollectionGroup(t,i,r,l){let u=new be(((_,b)=>_-b));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===i&&_.largestBatchId>r){let b=u.get(_.largestBatchId);b===null&&(b=aa(),u=u.insert(_.largestBatchId,b)),b.set(_.getKey(),_)}}const p=aa(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((_,b)=>p.set(_,b))),!(p.size()>=l)););return st.resolve(p)}St(t,i,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new Fw(i,r));let u=this.qr.get(i);u===void 0&&(u=Kt(),this.qr.set(i,u)),this.qr.set(i,u.add(r.key))}}class Rx{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(t){return st.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,st.resolve()}}class sp{constructor(){this.Qr=new Qe(Ze.$r),this.Ur=new Qe(Ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const r=new Ze(t,i);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,i){t.forEach((r=>this.addReference(r,i)))}removeReference(t,i){this.Gr(new Ze(t,i))}zr(t,i){t.forEach((r=>this.removeReference(r,i)))}jr(t){const i=new bt(new ce([])),r=new Ze(i,t),l=new Ze(i,t+1),u=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new bt(new ce([])),r=new Ze(i,t),l=new Ze(i,t+1);let u=Kt();return this.Ur.forEachInRange([r,l],(f=>{u=u.add(f.key)})),u}containsKey(t){const i=new Ze(t,0),r=this.Qr.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class Ze{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return bt.comparator(t.key,i.key)||Gt(t.Yr,i.Yr)}static Kr(t,i){return Gt(t.Yr,i.Yr)||bt.comparator(t.key,i.key)}}class Cx{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Qe(Ze.$r)}checkEmpty(t){return st.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Hw(u,i,r,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new Ze(p.key,u)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return st.resolve(f)}lookupMutationBatch(t,i){return st.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,l=this.ei(r),u=l<0?0:l;return st.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return st.resolve(this.mutationQueue.length===0?$m:this.tr-1)}getAllMutationBatches(t){return st.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new Ze(i,0),l=new Ze(i,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,l],(f=>{const p=this.Xr(f.Yr);u.push(p)})),st.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new Qe(Gt);return i.forEach((l=>{const u=new Ze(l,0),f=new Ze(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(p=>{r=r.add(p.Yr)}))})),st.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,l=r.length+1;let u=r;bt.isDocumentKey(u)||(u=u.child(""));const f=new Ze(new bt(u),0);let p=new Qe(Gt);return this.Zr.forEachWhile((y=>{const _=y.key.path;return!!r.isPrefixOf(_)&&(_.length===l&&(p=p.add(y.Yr)),!0)}),f),st.resolve(this.ti(p))}ti(t){const i=[];return t.forEach((r=>{const l=this.Xr(r);l!==null&&i.push(l)})),i}removeMutationBatch(t,i){te(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return st.forEach(i.mutations,(l=>{const u=new Ze(l.key,i.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,i){const r=new Ze(i,0),l=this.Zr.firstAfterOrEqual(r);return st.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,st.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class Ix{constructor(t){this.ri=t,this.docs=(function(){return new be(bt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,l=this.docs.get(r),u=l?l.size:0,f=this.ri(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return st.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(i))}getEntries(t,i){let r=ws();return i.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():mn.newInvalidDocument(l))})),st.resolve(r)}getDocumentsMatchingQuery(t,i,r,l){let u=ws();const f=i.path,p=new bt(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:_,value:{document:b}}=y.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||sw(iw(b),r)<=0||(l.has(b.key)||Vh(i,b))&&(u=u.insert(b.key,b.mutableCopy()))}return st.resolve(u)}getAllFromCollectionGroup(t,i,r,l){Rt(9500)}ii(t,i){return st.forEach(this.docs,(r=>i(r)))}newChangeBuffer(t){return new kx(this)}getSize(t){return st.resolve(this.size)}}class kx extends bx{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(r)})),st.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}class Nx{constructor(t){this.persistence=t,this.si=new ma((i=>Wm(i)),Zm),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.oi=0,this._i=new sp,this.targetCount=0,this.ai=To.ur()}forEachTarget(t,i){return this.si.forEach(((r,l)=>i(l))),st.resolve()}getLastRemoteSnapshotVersion(t){return st.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return st.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),st.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.oi&&(this.oi=i),st.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new To(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,st.resolve()}updateTargetData(t,i){return this.Pr(i),st.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,st.resolve()}removeTargets(t,i,r){let l=0;const u=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=i&&r.get(p.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(t,p.targetId)),l++)})),st.waitFor(u).next((()=>l))}getTargetCount(t){return st.resolve(this.targetCount)}getTargetData(t,i){const r=this.si.get(i)||null;return st.resolve(r)}addMatchingKeys(t,i,r){return this._i.Wr(i,r),st.resolve()}removeMatchingKeys(t,i,r){this._i.zr(i,r);const l=this.persistence.referenceDelegate,u=[];return l&&i.forEach((f=>{u.push(l.markPotentiallyOrphaned(t,f))})),st.waitFor(u)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),st.resolve()}getMatchingKeysForTargetId(t,i){const r=this._i.Hr(i);return st.resolve(r)}containsKey(t,i){return st.resolve(this._i.containsKey(i))}}class a0{constructor(t,i){this.ui={},this.overlays={},this.ci=new Ih(0),this.li=!1,this.li=!0,this.hi=new Rx,this.referenceDelegate=t(this),this.Pi=new Nx(this),this.indexManager=new px,this.remoteDocumentCache=(function(l){return new Ix(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new dx(i),this.Ii=new wx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new xx,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.ui[t.toKey()];return r||(r=new Cx(i,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,r){mt("MemoryPersistence","Starting transaction:",t);const l=new Dx(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(t,i){return st.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,i))))}}class Dx extends aw{constructor(t){super(),this.currentSequenceNumber=t}}class rp{constructor(t){this.persistence=t,this.Ri=new sp,this.Vi=null}static mi(t){return new rp(t)}get fi(){if(this.Vi)return this.Vi;throw Rt(60996)}addReference(t,i,r){return this.Ri.addReference(r,i),this.fi.delete(r.toString()),st.resolve()}removeReference(t,i,r){return this.Ri.removeReference(r,i),this.fi.add(r.toString()),st.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),st.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,i)))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return st.forEach(this.fi,(r=>{const l=bt.fromPath(r);return this.gi(t,l).next((u=>{u||i.removeEntry(l,kt.min())}))})).next((()=>(this.Vi=null,i.apply(t))))}updateLimboDocument(t,i){return this.gi(t,i).next((r=>{r?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(t){return 0}gi(t,i){return st.or([()=>st.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class gh{constructor(t,i){this.persistence=t,this.pi=new ma((r=>uw(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=Tx(this,i)}static mi(t,i){return new gh(t,i)}Ei(){}di(t){return st.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>i.next((l=>r+l))))}wr(t){let i=0;return this.pr(t,(r=>{i++})).next((()=>i))}pr(t,i){return st.forEach(this.pi,((r,l)=>this.br(t,r,l).next((u=>u?st.resolve():i(l)))))}removeTargets(t,i,r){return this.persistence.getTargetCache().removeTargets(t,i,r)}removeOrphanedDocuments(t,i){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(t,(f=>this.br(t,f,i).next((p=>{p||(r++,u.removeEntry(f,kt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),st.resolve()}removeTarget(t,i){const r=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,i,r){return this.pi.set(r,t.currentSequenceNumber),st.resolve()}removeReference(t,i,r){return this.pi.set(r,t.currentSequenceNumber),st.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),st.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=Jc(t.data.value)),i}br(t,i,r){return st.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return st.resolve(l!==void 0&&l>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class ap{constructor(t,i,r,l){this.targetId=t,this.fromCache=i,this.Es=r,this.ds=l}static As(t,i){let r=Kt(),l=Kt();for(const u of i.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new ap(t,i.fromCache,r,l)}}class Ox{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Vx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return wA()?8:ow(pn())>0?6:4})()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,r,l){const u={result:null};return this.ys(t,i).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(t,i,l,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new Ox;return this.Ss(t,i,f).next((p=>{if(u.result=p,this.Vs)return this.bs(t,i,f,p.size)}))})).next((()=>u.result))}bs(t,i,r,l){return r.documentReadCount<this.fs?(ro()<=Ft.DEBUG&&mt("QueryEngine","SDK will not create cache indexes for query:",ao(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),st.resolve()):(ro()<=Ft.DEBUG&&mt("QueryEngine","Query:",ao(i),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(ro()<=Ft.DEBUG&&mt("QueryEngine","The SDK decides to create cache indexes for query:",ao(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Gi(i))):st.resolve())}ys(t,i){if(Qv(i))return st.resolve(null);let r=Gi(i);return this.indexManager.getIndexType(t,r).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=dh(i,null,"F"),r=Gi(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const f=Kt(...u);return this.ps.getDocuments(t,f).next((p=>this.indexManager.getMinOffset(t,r).next((y=>{const _=this.Ds(i,p);return this.Cs(i,_,f,y.readTime)?this.ys(t,dh(i,null,"F")):this.vs(t,_,i,y)}))))})))))}ws(t,i,r,l){return Qv(i)||l.isEqual(kt.min())?st.resolve(null):this.ps.getDocuments(t,r).next((u=>{const f=this.Ds(i,u);return this.Cs(i,f,r,l)?st.resolve(null):(ro()<=Ft.DEBUG&&mt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ao(i)),this.vs(t,f,i,nw(l,Ql)).next((p=>p)))}))}Ds(t,i){let r=new Qe(LT(t));return i.forEach(((l,u)=>{Vh(t,u)&&(r=r.add(u))})),r}Cs(t,i,r,l){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const u=t.limitType==="F"?i.last():i.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(t,i,r){return ro()<=Ft.DEBUG&&mt("QueryEngine","Using full collection scan to execute query:",ao(i)),this.ps.getDocumentsMatchingQuery(t,i,Er.min(),r)}vs(t,i,r,l){return this.ps.getDocumentsMatchingQuery(t,r,l).next((u=>(i.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const op="LocalStore",Mx=3e8;class jx{constructor(t,i,r,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new be(Gt),this.xs=new ma((u=>Wm(u)),Zm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ax(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>t.collect(i,this.Ms)))}}function Lx(s,t,i,r){return new jx(s,t,i,r)}async function o0(s,t){const i=Dt(s);return await i.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return i.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,i.Bs(t),i.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],p=[];let y=Kt();for(const _ of l){f.push(_.batchId);for(const b of _.mutations)y=y.add(b.key)}for(const _ of u){p.push(_.batchId);for(const b of _.mutations)y=y.add(b.key)}return i.localDocuments.getDocuments(r,y).next((_=>({Ls:_,removedBatchIds:f,addedBatchIds:p})))}))}))}function Px(s,t){const i=Dt(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=t.batch.keys(),u=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,_,b){const x=_.batch,R=x.keys();let z=st.resolve();return R.forEach((Z=>{z=z.next((()=>b.getEntry(y,Z))).next((J=>{const Q=_.docVersions.get(Z);te(Q!==null,48541),J.version.compareTo(Q)<0&&(x.applyToRemoteDocument(J,_),J.isValidDocument()&&(J.setReadTime(_.commitVersion),b.addEntry(J)))}))})),z.next((()=>p.mutationQueue.removeMutationBatch(y,x)))})(i,r,t,u).next((()=>u.apply(r))).next((()=>i.mutationQueue.performConsistencyCheck(r))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(r,l,t.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=Kt();for(let _=0;_<p.mutationResults.length;++_)p.mutationResults[_].transformResults.length>0&&(y=y.add(p.batch.mutations[_].key));return y})(t)))).next((()=>i.localDocuments.getDocuments(r,l)))}))}function l0(s){const t=Dt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>t.Pi.getLastRemoteSnapshotVersion(i)))}function Ux(s,t){const i=Dt(s),r=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const p=[];t.targetChanges.forEach(((b,x)=>{const R=l.get(x);if(!R)return;p.push(i.Pi.removeMatchingKeys(u,b.removedDocuments,x).next((()=>i.Pi.addMatchingKeys(u,b.addedDocuments,x))));let z=R.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(x)!==null?z=z.withResumeToken(cn.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):b.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(b.resumeToken,r)),l=l.insert(x,z),(function(J,Q,W){return J.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=Mx?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(R,z,b)&&p.push(i.Pi.updateTargetData(u,z))}));let y=ws(),_=Kt();if(t.documentUpdates.forEach((b=>{t.resolvedLimboDocuments.has(b)&&p.push(i.persistence.referenceDelegate.updateLimboDocument(u,b))})),p.push(zx(u,f,t.documentUpdates).next((b=>{y=b.ks,_=b.qs}))),!r.isEqual(kt.min())){const b=i.Pi.getLastRemoteSnapshotVersion(u).next((x=>i.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(b)}return st.waitFor(p).next((()=>f.apply(u))).next((()=>i.localDocuments.getLocalViewOfDocuments(u,y,_))).next((()=>y))})).then((u=>(i.Ms=l,u)))}function zx(s,t,i){let r=Kt(),l=Kt();return i.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let f=ws();return i.forEach(((p,y)=>{const _=u.get(p);y.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(kt.min())?(t.removeEntry(p,y.readTime),f=f.insert(p,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(y),f=f.insert(p,y)):mt(op,"Ignoring outdated watch update for ",p,". Current version:",_.version," Watch version:",y.version)})),{ks:f,qs:l}}))}function Bx(s,t){const i=Dt(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=$m),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function qx(s,t){const i=Dt(s);return i.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return i.Pi.getTargetData(r,t).next((u=>u?(l=u,st.resolve(l)):i.Pi.allocateTargetId(r).next((f=>(l=new dr(t,f,"TargetPurposeListen",r.currentSequenceNumber),i.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=i.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(r.targetId,r),i.xs.set(t,r.targetId)),r}))}async function Nm(s,t,i){const r=Dt(s),l=r.Ms.get(t),u=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!Co(f))throw f;mt(op,`Failed to update sequence numbers for target ${t}: ${f}`)}r.Ms=r.Ms.remove(t),r.xs.delete(l.target)}function oE(s,t,i){const r=Dt(s);let l=kt.min(),u=Kt();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,_,b){const x=Dt(y),R=x.xs.get(b);return R!==void 0?st.resolve(x.Ms.get(R)):x.Pi.getTargetData(_,b)})(r,f,Gi(t)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,p.targetId).next((y=>{u=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,t,i?l:kt.min(),i?u:Kt()))).next((p=>(Hx(r,Cw(t),p),{documents:p,Qs:u})))))}function Hx(s,t,i){let r=s.Os.get(t)||kt.min();i.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}class lE{constructor(){this.activeTargetIds=Vw()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Fx{constructor(){this.Mo=new lE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,r){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new lE,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Gx{Oo(t){}shutdown(){}}const uE="ConnectivityMonitor";class cE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){mt(uE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){mt(uE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Qc=null;function Dm(){return Qc===null?Qc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qc++,"0x"+Qc.toString(16)}const om="RestConnection",Kx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yx{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===ch?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(t,i,r,l,u){const f=Dm(),p=this.zo(t,i.toUriEncodedString());mt(om,`Sending RPC '${t}' ${f}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,u);const{host:_}=new URL(p),b=Ao(_);return this.Jo(t,p,y,r,b).then((x=>(mt(om,`Received RPC '${t}' ${f}: `,x),x)),(x=>{throw go(om,`RPC '${t}' ${f} failed with error: `,x,"url: ",p,"request:",r),x}))}Ho(t,i,r,l,u,f){return this.Go(t,i,r,l,u)}jo(t,i,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,u)=>t[u]=l)),r&&r.headers.forEach(((l,u)=>t[u]=l))}zo(t,i){const r=Kx[t];return`${this.Uo}/v1/${i}:${r}`}terminate(){}}class Qx{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const fn="WebChannelConnection";class $x extends Yx{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,r,l,u){const f=Dm();return new Promise(((p,y)=>{const _=new cT;_.setWithCredentials(!0),_.listenOnce(hT.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Xc.NO_ERROR:const x=_.getResponseJson();mt(fn,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(x)),p(x);break;case Xc.TIMEOUT:mt(fn,`RPC '${t}' ${f} timed out`),y(new ft(et.DEADLINE_EXCEEDED,"Request time out"));break;case Xc.HTTP_ERROR:const R=_.getStatus();if(mt(fn,`RPC '${t}' ${f} failed with status:`,R,"response text:",_.getResponseText()),R>0){let z=_.getResponseJson();Array.isArray(z)&&(z=z[0]);const Z=z?.error;if(Z&&Z.status&&Z.message){const J=(function(W){const ut=W.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(ut)>=0?ut:et.UNKNOWN})(Z.status);y(new ft(J,Z.message))}else y(new ft(et.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new ft(et.UNAVAILABLE,"Connection failed."));break;default:Rt(9055,{l_:t,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{mt(fn,`RPC '${t}' ${f} completed.`)}}));const b=JSON.stringify(l);mt(fn,`RPC '${t}' ${f} sending request:`,l),_.send(i,"POST",b,r,15)}))}T_(t,i,r){const l=Dm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=mT(),p=dT(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,i,r),y.encodeInitMessageHeaders=!0;const b=u.join("");mt(fn,`Creating RPC '${t}' stream ${l}: ${b}`,y);const x=f.createWebChannel(b,y);this.I_(x);let R=!1,z=!1;const Z=new Qx({Yo:Q=>{z?mt(fn,`Not sending because RPC '${t}' stream ${l} is closed:`,Q):(R||(mt(fn,`Opening RPC '${t}' stream ${l} transport.`),x.open(),R=!0),mt(fn,`RPC '${t}' stream ${l} sending:`,Q),x.send(Q))},Zo:()=>x.close()}),J=(Q,W,ut)=>{Q.listen(W,(gt=>{try{ut(gt)}catch(Mt){setTimeout((()=>{throw Mt}),0)}}))};return J(x,jl.EventType.OPEN,(()=>{z||(mt(fn,`RPC '${t}' stream ${l} transport opened.`),Z.o_())})),J(x,jl.EventType.CLOSE,(()=>{z||(z=!0,mt(fn,`RPC '${t}' stream ${l} transport closed`),Z.a_(),this.E_(x))})),J(x,jl.EventType.ERROR,(Q=>{z||(z=!0,go(fn,`RPC '${t}' stream ${l} transport errored. Name:`,Q.name,"Message:",Q.message),Z.a_(new ft(et.UNAVAILABLE,"The operation could not be completed")))})),J(x,jl.EventType.MESSAGE,(Q=>{if(!z){const W=Q.data[0];te(!!W,16349);const ut=W,gt=ut?.error||ut[0]?.error;if(gt){mt(fn,`RPC '${t}' stream ${l} received error:`,gt);const Mt=gt.status;let jt=(function(S){const A=He[S];if(A!==void 0)return $T(A)})(Mt),Ct=gt.message;jt===void 0&&(jt=et.INTERNAL,Ct="Unknown error status: "+Mt+" with message "+gt.message),z=!0,Z.a_(new ft(jt,Ct)),x.close()}else mt(fn,`RPC '${t}' stream ${l} received:`,W),Z.u_(W)}})),J(p,fT.STAT_EVENT,(Q=>{Q.stat===Em.PROXY?mt(fn,`RPC '${t}' stream ${l} detected buffering proxy`):Q.stat===Em.NOPROXY&&mt(fn,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Z.__()}),0),Z}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((i=>i===t))}}function lm(){return typeof document<"u"?document:null}function Uh(s){return new Zw(s,!0)}class u0{constructor(t,i,r=1e3,l=1.5,u=6e4){this.Mi=t,this.timerId=i,this.d_=r,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-r);l>0&&mt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const hE="PersistentStream";class c0{constructor(t,i,r,l,u,f,p,y){this.Mi=t,this.S_=r,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new u0(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===et.RESOURCE_EXHAUSTED?(As(i.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===i&&this.G_(r,l)}),(r=>{t((()=>{const l=new ft(et.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(t,i){const r=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return mt(hE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget((()=>this.D_===t?i():(mt(hE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Xx extends c0{constructor(t,i,r,l,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,l,f),this.serializer=u}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=nx(this.serializer,t),r=(function(u){if(!("targetChange"in u))return kt.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?kt.min():f.readTime?Ki(f.readTime):kt.min()})(t);return this.listener.H_(i,r)}Y_(t){const i={};i.database=km(this.serializer),i.addTarget=(function(u,f){let p;const y=f.target;if(p=wm(y)?{documents:rx(u,y)}:{query:ax(u,y).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=WT(u,f.resumeToken);const _=Rm(u,f.expectedCount);_!==null&&(p.expectedCount=_)}else if(f.snapshotVersion.compareTo(kt.min())>0){p.readTime=ph(u,f.snapshotVersion.toTimestamp());const _=Rm(u,f.expectedCount);_!==null&&(p.expectedCount=_)}return p})(this.serializer,t);const r=lx(this.serializer,t);r&&(i.labels=r),this.q_(i)}Z_(t){const i={};i.database=km(this.serializer),i.removeTarget=t,this.q_(i)}}class Jx extends c0{constructor(t,i,r,l,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return te(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,te(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){te(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=sx(t.writeResults,t.commitTime),r=Ki(t.commitTime);return this.listener.na(r,i)}ra(){const t={};t.database=km(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map((r=>ix(this.serializer,r)))};this.q_(i)}}class Wx{}class Zx extends Wx{constructor(t,i,r,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ft(et.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(t,Cm(i,r),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ft(et.UNKNOWN,u.toString())}))}Ho(t,i,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(t,Cm(i,r),l,f,p,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ft(et.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class tR{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(As(i),this.aa=!1):mt("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ha="RemoteStore";class eR{constructor(t,i,r,l,u){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{pa(this)&&(mt(ha,"Restarting streams for network reachability change."),await(async function(y){const _=Dt(y);_.Ea.add(4),await lu(_),_.Ra.set("Unknown"),_.Ea.delete(4),await zh(_)})(this))}))})),this.Ra=new tR(r,l)}}async function zh(s){if(pa(s))for(const t of s.da)await t(!0)}async function lu(s){for(const t of s.da)await t(!1)}function h0(s,t){const i=Dt(s);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),hp(i)?cp(i):ko(i).O_()&&up(i,t))}function lp(s,t){const i=Dt(s),r=ko(i);i.Ia.delete(t),r.O_()&&f0(i,t),i.Ia.size===0&&(r.O_()?r.L_():pa(i)&&i.Ra.set("Unknown"))}function up(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(kt.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}ko(s).Y_(t)}function f0(s,t){s.Va.Ue(t),ko(s).Z_(t)}function cp(s){s.Va=new $w({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),ko(s).start(),s.Ra.ua()}function hp(s){return pa(s)&&!ko(s).x_()&&s.Ia.size>0}function pa(s){return Dt(s).Ea.size===0}function d0(s){s.Va=void 0}async function nR(s){s.Ra.set("Online")}async function iR(s){s.Ia.forEach(((t,i)=>{up(s,t)}))}async function sR(s,t){d0(s),hp(s)?(s.Ra.ha(t),cp(s)):s.Ra.set("Unknown")}async function rR(s,t,i){if(s.Ra.set("Online"),t instanceof JT&&t.state===2&&t.cause)try{await(async function(l,u){const f=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(s,t)}catch(r){mt(ha,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await yh(s,r)}else if(t instanceof th?s.Va.Ze(t):t instanceof XT?s.Va.st(t):s.Va.tt(t),!i.isEqual(kt.min()))try{const r=await l0(s.localStore);i.compareTo(r)>=0&&await(function(u,f){const p=u.Va.Tt(f);return p.targetChanges.forEach(((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const b=u.Ia.get(_);b&&u.Ia.set(_,b.withResumeToken(y.resumeToken,f))}})),p.targetMismatches.forEach(((y,_)=>{const b=u.Ia.get(y);if(!b)return;u.Ia.set(y,b.withResumeToken(cn.EMPTY_BYTE_STRING,b.snapshotVersion)),f0(u,y);const x=new dr(b.target,y,_,b.sequenceNumber);up(u,x)})),u.remoteSyncer.applyRemoteEvent(p)})(s,i)}catch(r){mt(ha,"Failed to raise snapshot:",r),await yh(s,r)}}async function yh(s,t,i){if(!Co(t))throw t;s.Ea.add(1),await lu(s),s.Ra.set("Offline"),i||(i=()=>l0(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{mt(ha,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await zh(s)}))}function m0(s,t){return t().catch((i=>yh(s,i,t)))}async function Bh(s){const t=Dt(s),i=Ar(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:$m;for(;aR(t);)try{const l=await Bx(t.localStore,r);if(l===null){t.Ta.length===0&&i.L_();break}r=l.batchId,oR(t,l)}catch(l){await yh(t,l)}p0(t)&&g0(t)}function aR(s){return pa(s)&&s.Ta.length<10}function oR(s,t){s.Ta.push(t);const i=Ar(s);i.O_()&&i.X_&&i.ea(t.mutations)}function p0(s){return pa(s)&&!Ar(s).x_()&&s.Ta.length>0}function g0(s){Ar(s).start()}async function lR(s){Ar(s).ra()}async function uR(s){const t=Ar(s);for(const i of s.Ta)t.ea(i.mutations)}async function cR(s,t,i){const r=s.Ta.shift(),l=ep.from(r,t,i);await m0(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Bh(s)}async function hR(s,t){t&&Ar(s).X_&&await(async function(r,l){if((function(f){return Kw(f)&&f!==et.ABORTED})(l.code)){const u=r.Ta.shift();Ar(r).B_(),await m0(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Bh(r)}})(s,t),p0(s)&&g0(s)}async function fE(s,t){const i=Dt(s);i.asyncQueue.verifyOperationInProgress(),mt(ha,"RemoteStore received new credentials");const r=pa(i);i.Ea.add(3),await lu(i),r&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await zh(i)}async function fR(s,t){const i=Dt(s);t?(i.Ea.delete(2),await zh(i)):t||(i.Ea.add(2),await lu(i),i.Ra.set("Unknown"))}function ko(s){return s.ma||(s.ma=(function(i,r,l){const u=Dt(i);return u.sa(),new Xx(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:nR.bind(null,s),t_:iR.bind(null,s),r_:sR.bind(null,s),H_:rR.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),hp(s)?cp(s):s.Ra.set("Unknown")):(await s.ma.stop(),d0(s))}))),s.ma}function Ar(s){return s.fa||(s.fa=(function(i,r,l){const u=Dt(i);return u.sa(),new Jx(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:lR.bind(null,s),r_:hR.bind(null,s),ta:uR.bind(null,s),na:cR.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await Bh(s)):(await s.fa.stop(),s.Ta.length>0&&(mt(ha,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class fp{constructor(t,i,r,l,u){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new Ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,l,u){const f=Date.now()+r,p=new fp(t,i,f,l,u);return p.start(r),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ft(et.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dp(s,t){if(As("AsyncQueue",`${t}: ${s}`),Co(s))return new ft(et.UNAVAILABLE,`${t}: ${s}`);throw s}class co{static emptySet(t){return new co(t.comparator)}constructor(t){this.comparator=t?(i,r)=>t(i,r)||bt.comparator(i.key,r.key):(i,r)=>bt.comparator(i.key,r.key),this.keyedMap=Ll(),this.sortedSet=new be(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((i,r)=>(t(i),!1)))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof co)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((i=>{t.push(i.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new co;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}class dE{constructor(){this.ga=new be(bt.comparator)}track(t){const i=t.doc.key,r=this.ga.get(i);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(i,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(i):t.type===1&&r.type===2?this.ga=this.ga.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):Rt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal(((i,r)=>{t.push(r)})),t}}class bo{constructor(t,i,r,l,u,f,p,y,_){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(t,i,r,l,u){const f=[];return i.forEach((p=>{f.push({type:0,doc:p})})),new bo(t,i,co.emptySet(i),f,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Oh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==r[l].type||!i[l].doc.isEqual(r[l].doc))return!1;return!0}}class dR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class mR{constructor(){this.queries=mE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const l=Dt(i),u=l.queries;l.queries=mE(),u.forEach(((f,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new ft(et.ABORTED,"Firestore shutting down"))}}function mE(){return new ma((s=>jT(s)),Oh)}async function mp(s,t){const i=Dt(s);let r=3;const l=t.query;let u=i.queries.get(l);u?!u.ba()&&t.Da()&&(r=2):(u=new dR,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await i.onListen(l,!0);break;case 1:u.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(f){const p=dp(f,`Initialization of query '${ao(t.query)}' failed`);return void t.onError(p)}i.queries.set(l,u),u.Sa.push(t),t.va(i.onlineState),u.wa&&t.Fa(u.wa)&&gp(i)}async function pp(s,t){const i=Dt(s),r=t.query;let l=3;const u=i.queries.get(r);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=t.Da()?0:1:!u.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function pR(s,t){const i=Dt(s);let r=!1;for(const l of t){const u=l.query,f=i.queries.get(u);if(f){for(const p of f.Sa)p.Fa(l)&&(r=!0);f.wa=l}}r&&gp(i)}function gR(s,t,i){const r=Dt(s),l=r.queries.get(t);if(l)for(const u of l.Sa)u.onError(i);r.queries.delete(t)}function gp(s){s.Ca.forEach((t=>{t.next()}))}var Om,pE;(pE=Om||(Om={})).Ma="default",pE.Cache="cache";class yp{constructor(t,i,r){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const l of t.docChanges)l.type!==3&&r.push(l);t=new bo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const r=i!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=bo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Om.Cache}}class y0{constructor(t){this.key=t}}class _0{constructor(t){this.key=t}}class yR{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Kt(),this.mutatedKeys=Kt(),this.eu=LT(t),this.tu=new co(this.eu)}get nu(){return this.Ya}ru(t,i){const r=i?i.iu:new dE,l=i?i.tu:this.tu;let u=i?i.mutatedKeys:this.mutatedKeys,f=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((b,x)=>{const R=l.get(b),z=Vh(this.query,x)?x:null,Z=!!R&&this.mutatedKeys.has(R.key),J=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let Q=!1;R&&z?R.data.isEqual(z.data)?Z!==J&&(r.track({type:3,doc:z}),Q=!0):this.su(R,z)||(r.track({type:2,doc:z}),Q=!0,(y&&this.eu(z,y)>0||_&&this.eu(z,_)<0)&&(p=!0)):!R&&z?(r.track({type:0,doc:z}),Q=!0):R&&!z&&(r.track({type:1,doc:R}),Q=!0,(y||_)&&(p=!0)),Q&&(z?(f=f.add(z),u=J?u.add(b):u.delete(b)):(f=f.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{tu:f,iu:r,Cs:p,mutatedKeys:u}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,l){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((b,x)=>(function(z,Z){const J=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rt(20277,{Rt:Q})}};return J(z)-J(Z)})(b.type,x.type)||this.eu(b.doc,x.doc))),this.ou(r),l=l??!1;const p=i&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,_=y!==this.Za;return this.Za=y,f.length!==0||_?{snapshot:new bo(this.query,t.tu,u,f,t.mutatedKeys,y===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),t.modifiedDocuments.forEach((i=>{})),t.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Kt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const i=[];return t.forEach((r=>{this.Xa.has(r)||i.push(new _0(r))})),this.Xa.forEach((r=>{t.has(r)||i.push(new y0(r))})),i}cu(t){this.Ya=t.Qs,this.Xa=Kt();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _p="SyncEngine";class _R{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class vR{constructor(t){this.key=t,this.hu=!1}}class ER{constructor(t,i,r,l,u,f){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ma((p=>jT(p)),Oh),this.Iu=new Map,this.Eu=new Set,this.du=new be(bt.comparator),this.Au=new Map,this.Ru=new sp,this.Vu={},this.mu=new Map,this.fu=To.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TR(s,t,i=!0){const r=A0(s);let l;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await v0(r,t,i,!0),l}async function bR(s,t){const i=A0(s);await v0(i,t,!0,!1)}async function v0(s,t,i,r){const l=await qx(s.localStore,Gi(t)),u=l.targetId,f=s.sharedClientState.addLocalQueryTarget(u,i);let p;return r&&(p=await SR(s,t,u,f==="current",l.resumeToken)),s.isPrimaryClient&&i&&h0(s.remoteStore,l),p}async function SR(s,t,i,r,l){s.pu=(x,R,z)=>(async function(J,Q,W,ut){let gt=Q.view.ru(W);gt.Cs&&(gt=await oE(J.localStore,Q.query,!1).then((({documents:N})=>Q.view.ru(N,gt))));const Mt=ut&&ut.targetChanges.get(Q.targetId),jt=ut&&ut.targetMismatches.get(Q.targetId)!=null,Ct=Q.view.applyChanges(gt,J.isPrimaryClient,Mt,jt);return yE(J,Q.targetId,Ct.au),Ct.snapshot})(s,x,R,z);const u=await oE(s.localStore,t,!0),f=new yR(t,u.Qs),p=f.ru(u.documents),y=ou.createSynthesizedTargetChangeForCurrentChange(i,r&&s.onlineState!=="Offline",l),_=f.applyChanges(p,s.isPrimaryClient,y);yE(s,i,_.au);const b=new _R(t,i,f);return s.Tu.set(t,b),s.Iu.has(i)?s.Iu.get(i).push(t):s.Iu.set(i,[t]),_.snapshot}async function AR(s,t,i){const r=Dt(s),l=r.Tu.get(t),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((f=>!Oh(f,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Nm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),i&&lp(r.remoteStore,l.targetId),Vm(r,l.targetId)})).catch(Ro)):(Vm(r,l.targetId),await Nm(r.localStore,l.targetId,!0))}async function wR(s,t){const i=Dt(s),r=i.Tu.get(t),l=i.Iu.get(r.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),lp(i.remoteStore,r.targetId))}async function xR(s,t,i){const r=OR(s);try{const l=await(function(f,p){const y=Dt(f),_=ye.now(),b=p.reduce(((z,Z)=>z.add(Z.key)),Kt());let x,R;return y.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let Z=ws(),J=Kt();return y.Ns.getEntries(z,b).next((Q=>{Z=Q,Z.forEach(((W,ut)=>{ut.isValidDocument()||(J=J.add(W))}))})).next((()=>y.localDocuments.getOverlayedDocuments(z,Z))).next((Q=>{x=Q;const W=[];for(const ut of p){const gt=Bw(ut,x.get(ut.key).overlayedDocument);gt!=null&&W.push(new Rr(ut.key,gt,CT(gt.value.mapValue),En.exists(!0)))}return y.mutationQueue.addMutationBatch(z,_,W,p)})).next((Q=>{R=Q;const W=Q.applyToLocalDocumentSet(x,J);return y.documentOverlayCache.saveOverlays(z,Q.batchId,W)}))})).then((()=>({batchId:R.batchId,changes:UT(x)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(l.batchId),(function(f,p,y){let _=f.Vu[f.currentUser.toKey()];_||(_=new be(Gt)),_=_.insert(p,y),f.Vu[f.currentUser.toKey()]=_})(r,l.batchId,i),await uu(r,l.changes),await Bh(r.remoteStore)}catch(l){const u=dp(l,"Failed to persist write");i.reject(u)}}async function E0(s,t){const i=Dt(s);try{const r=await Ux(i.localStore,t);t.targetChanges.forEach(((l,u)=>{const f=i.Au.get(u);f&&(te(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?te(f.hu,14607):l.removedDocuments.size>0&&(te(f.hu,42227),f.hu=!1))})),await uu(i,r,t)}catch(r){await Ro(r)}}function gE(s,t,i){const r=Dt(s);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const l=[];r.Tu.forEach(((u,f)=>{const p=f.view.va(t);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const y=Dt(f);y.onlineState=p;let _=!1;y.queries.forEach(((b,x)=>{for(const R of x.Sa)R.va(p)&&(_=!0)})),_&&gp(y)})(r.eventManager,t),l.length&&r.Pu.H_(l),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function RR(s,t,i){const r=Dt(s);r.sharedClientState.updateQueryState(t,"rejected",i);const l=r.Au.get(t),u=l&&l.key;if(u){let f=new be(bt.comparator);f=f.insert(u,mn.newNoDocument(u,kt.min()));const p=Kt().add(u),y=new Ph(kt.min(),new Map,new be(Gt),f,p);await E0(r,y),r.du=r.du.remove(u),r.Au.delete(t),vp(r)}else await Nm(r.localStore,t,!1).then((()=>Vm(r,t,i))).catch(Ro)}async function CR(s,t){const i=Dt(s),r=t.batch.batchId;try{const l=await Px(i.localStore,t);b0(i,r,null),T0(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await uu(i,l)}catch(l){await Ro(l)}}async function IR(s,t,i){const r=Dt(s);try{const l=await(function(f,p){const y=Dt(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let b;return y.mutationQueue.lookupMutationBatch(_,p).next((x=>(te(x!==null,37113),b=x.keys(),y.mutationQueue.removeMutationBatch(_,x)))).next((()=>y.mutationQueue.performConsistencyCheck(_))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(_,b,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b))).next((()=>y.localDocuments.getDocuments(_,b)))}))})(r.localStore,t);b0(r,t,i),T0(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await uu(r,l)}catch(l){await Ro(l)}}function T0(s,t){(s.mu.get(t)||[]).forEach((i=>{i.resolve()})),s.mu.delete(t)}function b0(s,t,i){const r=Dt(s);let l=r.Vu[r.currentUser.toKey()];if(l){const u=l.get(t);u&&(i?u.reject(i):u.resolve(),l=l.remove(t)),r.Vu[r.currentUser.toKey()]=l}}function Vm(s,t,i=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),i&&s.Pu.yu(r,i);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||S0(s,r)}))}function S0(s,t){s.Eu.delete(t.path.canonicalString());const i=s.du.get(t);i!==null&&(lp(s.remoteStore,i),s.du=s.du.remove(t),s.Au.delete(i),vp(s))}function yE(s,t,i){for(const r of i)r instanceof y0?(s.Ru.addReference(r.key,t),kR(s,r)):r instanceof _0?(mt(_p,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||S0(s,r.key)):Rt(19791,{wu:r})}function kR(s,t){const i=t.key,r=i.path.canonicalString();s.du.get(i)||s.Eu.has(r)||(mt(_p,"New document in limbo: "+i),s.Eu.add(r),vp(s))}function vp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const i=new bt(ce.fromString(t)),r=s.fu.next();s.Au.set(r,new vR(i)),s.du=s.du.insert(i,r),h0(s.remoteStore,new dr(Gi(Dh(i.path)),r,"TargetPurposeLimboResolution",Ih.ce))}}async function uu(s,t,i){const r=Dt(s),l=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{f.push(r.pu(y,t,i).then((_=>{if((_||i)&&r.isPrimaryClient){const b=_?!_.fromCache:i?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,b?"current":"not-current")}if(_){l.push(_);const b=ap.As(y.targetId,_);u.push(b)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(y,_){const b=Dt(y);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>st.forEach(_,(R=>st.forEach(R.Es,(z=>b.persistence.referenceDelegate.addReference(x,R.targetId,z))).next((()=>st.forEach(R.ds,(z=>b.persistence.referenceDelegate.removeReference(x,R.targetId,z)))))))))}catch(x){if(!Co(x))throw x;mt(op,"Failed to update sequence numbers: "+x)}for(const x of _){const R=x.targetId;if(!x.fromCache){const z=b.Ms.get(R),Z=z.snapshotVersion,J=z.withLastLimboFreeSnapshotVersion(Z);b.Ms=b.Ms.insert(R,J)}}})(r.localStore,u))}async function NR(s,t){const i=Dt(s);if(!i.currentUser.isEqual(t)){mt(_p,"User change. New user:",t.toKey());const r=await o0(i.localStore,t);i.currentUser=t,(function(u,f){u.mu.forEach((p=>{p.forEach((y=>{y.reject(new ft(et.CANCELLED,f))}))})),u.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await uu(i,r.Ls)}}function DR(s,t){const i=Dt(s),r=i.Au.get(t);if(r&&r.hu)return Kt().add(r.key);{let l=Kt();const u=i.Iu.get(t);if(!u)return l;for(const f of u){const p=i.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function A0(s){const t=Dt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=E0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=DR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=RR.bind(null,t),t.Pu.H_=pR.bind(null,t.eventManager),t.Pu.yu=gR.bind(null,t.eventManager),t}function OR(s){const t=Dt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=CR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=IR.bind(null,t),t}class _h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Uh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return Lx(this.persistence,new Vx,t.initialUser,this.serializer)}Cu(t){return new a0(rp.mi,this.serializer)}Du(t){return new Fx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_h.provider={build:()=>new _h};class VR extends _h{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){te(this.persistence.referenceDelegate instanceof gh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vx(r,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new a0((r=>gh.mi(r,i)),this.serializer)}}class Mm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NR.bind(null,this.syncEngine),await fR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new mR})()}createDatastore(t){const i=Uh(t.databaseInfo.databaseId),r=(function(u){return new $x(u)})(t.databaseInfo);return(function(u,f,p,y){return new Zx(u,f,p,y)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,l,u,f,p){return new eR(r,l,u,f,p)})(this.localStore,this.datastore,t.asyncQueue,(i=>gE(this.syncEngine,i,0)),(function(){return cE.v()?new cE:new Gx})())}createSyncEngine(t,i){return(function(l,u,f,p,y,_,b){const x=new ER(l,u,f,p,y,_);return b&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const r=Dt(i);mt(ha,"RemoteStore shutting down."),r.Ea.add(5),await lu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mm.provider={build:()=>new Mm};class Ep{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):As("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout((()=>{this.muted||t(i)}),0)}}const wr="FirestoreClient";class MR{constructor(t,i,r,l,u){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=l,this.user=dn.UNAUTHENTICATED,this.clientId=Qm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{mt(wr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(mt(wr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=dp(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function um(s,t){s.asyncQueue.verifyOperationInProgress(),mt(wr,"Initializing OfflineComponentProvider");const i=s.configuration;await t.initialize(i);let r=i.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await o0(t.localStore,l),r=l)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function _E(s,t){s.asyncQueue.verifyOperationInProgress();const i=await jR(s);mt(wr,"Initializing OnlineComponentProvider"),await t.initialize(i,s.configuration),s.setCredentialChangeListener((r=>fE(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>fE(t.remoteStore,l))),s._onlineComponents=t}async function jR(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){mt(wr,"Using user provided OfflineComponentProvider");try{await um(s,s._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!(function(l){return l.name==="FirebaseError"?l.code===et.FAILED_PRECONDITION||l.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;go("Error using user provided cache. Falling back to memory cache: "+i),await um(s,new _h)}}else mt(wr,"Using default OfflineComponentProvider"),await um(s,new VR(void 0));return s._offlineComponents}async function w0(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(mt(wr,"Using user provided OnlineComponentProvider"),await _E(s,s._uninitializedComponentsProvider._online)):(mt(wr,"Using default OnlineComponentProvider"),await _E(s,new Mm))),s._onlineComponents}function LR(s){return w0(s).then((t=>t.syncEngine))}async function vh(s){const t=await w0(s),i=t.eventManager;return i.onListen=TR.bind(null,t.syncEngine),i.onUnlisten=AR.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=bR.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=wR.bind(null,t.syncEngine),i}function PR(s,t,i={}){const r=new Ts;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,y,_){const b=new Ep({next:R=>{b.Nu(),f.enqueueAndForget((()=>pp(u,x)));const z=R.docs.has(p);!z&&R.fromCache?_.reject(new ft(et.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&R.fromCache&&y&&y.source==="server"?_.reject(new ft(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(R)},error:R=>_.reject(R)}),x=new yp(Dh(p.path),b,{includeMetadataChanges:!0,qa:!0});return mp(u,x)})(await vh(s),s.asyncQueue,t,i,r))),r.promise}function UR(s,t,i={}){const r=new Ts;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,y,_){const b=new Ep({next:R=>{b.Nu(),f.enqueueAndForget((()=>pp(u,x))),R.fromCache&&y.source==="server"?_.reject(new ft(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(R)},error:R=>_.reject(R)}),x=new yp(p,b,{includeMetadataChanges:!0,qa:!0});return mp(u,x)})(await vh(s),s.asyncQueue,t,i,r))),r.promise}function x0(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}const vE=new Map;const R0="firestore.googleapis.com",EE=!0;class TE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ft(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=R0,this.ssl=EE}else this.host=t.host,this.ssl=t.ssl??EE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=r0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<yx)throw new ft(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ew("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x0(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ft(et.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ft(et.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ft(et.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class qh{constructor(t,i,r,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ft(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ft(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new G1;switch(r.type){case"firstParty":return new $1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ft(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const r=vE.get(i);r&&(mt("ComponentProvider","Removing Datastore"),vE.delete(i),r.terminate())})(this),Promise.resolve()}}function zR(s,t,i,r={}){s=vn(s,qh);const l=Ao(t),u=s._getSettings(),f={...u,emulatorOptions:s._getEmulatorOptions()},p=`${t}:${i}`;l&&(eT(`https://${p}`),nT("Firestore",!0)),u.host!==R0&&u.host!==p&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:p,ssl:l,emulatorOptions:r};if(!vr(y,f)&&(s._setSettings(y),r.mockUserToken)){let _,b;if(typeof r.mockUserToken=="string")_=r.mockUserToken,b=dn.MOCK_USER;else{_=gA(r.mockUserToken,s._app?.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new ft(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new dn(x)}s._authCredentials=new K1(new gT(_,b))}}class Cs{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Cs(this.firestore,t,this._query)}}class we{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _r(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new we(this.firestore,t,this._key)}toJSON(){return{type:we._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,r){if(ru(i,we._jsonSchema))return new we(t,r||null,new bt(ce.fromString(i.referencePath)))}}we._jsonSchemaVersion="firestore/documentReference/1.0",we._jsonSchema={type:Ge("string",we._jsonSchemaVersion),referencePath:Ge("string")};class _r extends Cs{constructor(t,i,r){super(t,i,Dh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new we(this.firestore,null,new bt(t))}withConverter(t){return new _r(this.firestore,t,this._path)}}function Te(s,t,...i){if(s=Ne(s),yT("collection","path",t),s instanceof qh){const r=ce.fromString(t,...i);return Vv(r),new _r(s,null,r)}{if(!(s instanceof we||s instanceof _r))throw new ft(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ce.fromString(t,...i));return Vv(r),new _r(s.firestore,null,r)}}function he(s,t,...i){if(s=Ne(s),arguments.length===1&&(t=Qm.newId()),yT("doc","path",t),s instanceof qh){const r=ce.fromString(t,...i);return Ov(r),new we(s,null,new bt(r))}{if(!(s instanceof we||s instanceof _r))throw new ft(et.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ce.fromString(t,...i));return Ov(r),new we(s.firestore,s instanceof _r?s.converter:null,new bt(r))}}const bE="AsyncQueue";class SE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new u0(this,"async_queue_retry"),this._c=()=>{const r=lm();r&&mt(bE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const i=lm();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=lm();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Ts;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Co(t))throw t;mt(bE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const i=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,As("INTERNAL UNHANDLED ERROR: ",AE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=i,i}enqueueAfterDelay(t,i,r){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=fp.createAndSchedule(this,t,i,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Rt(47125,{Pc:AE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((i,r)=>i.targetTimeMs-r.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function AE(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}function wE(s){return(function(i,r){if(typeof i!="object"||i===null)return!1;const l=i;for(const u of r)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class Wi extends qh{constructor(t,i,r,l){super(t,i,r,l),this.type="firestore",this._queue=new SE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new SE(t),this._firestoreClient=void 0,await t}}}function BR(s,t){const i=typeof s=="object"?s:aT(),r=typeof s=="string"?s:ch,l=Km(i,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=mA("firestore");u&&zR(l,...u)}return l}function cu(s){if(s._terminated)throw new ft(et.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||qR(s),s._firestoreClient}function qR(s){const t=s._freezeSettings(),i=(function(l,u,f,p){return new fw(l,u,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,x0(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new MR(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class ii{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ii(cn.fromBase64String(t))}catch(i){throw new ft(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new ii(cn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ii._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ru(t,ii._jsonSchema))return ii.fromBase64String(t.bytes)}}ii._jsonSchemaVersion="firestore/bytes/1.0",ii._jsonSchema={type:Ge("string",ii._jsonSchemaVersion),bytes:Ge("string")};class hu{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new ft(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class fu{constructor(t){this._methodName=t}}class Yi{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new ft(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new ft(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Gt(this._lat,t._lat)||Gt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yi._jsonSchemaVersion}}static fromJSON(t){if(ru(t,Yi._jsonSchema))return new Yi(t.latitude,t.longitude)}}Yi._jsonSchemaVersion="firestore/geoPoint/1.0",Yi._jsonSchema={type:Ge("string",Yi._jsonSchemaVersion),latitude:Ge("number"),longitude:Ge("number")};class Qi{constructor(t){this._values=(t||[]).map((i=>i))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Qi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ru(t,Qi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((i=>typeof i=="number")))return new Qi(t.vectorValues);throw new ft(et.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qi._jsonSchemaVersion="firestore/vectorValue/1.0",Qi._jsonSchema={type:Ge("string",Qi._jsonSchemaVersion),vectorValues:Ge("object")};const HR=/^__.*__$/;class FR{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new Rr(t,this.data,this.fieldMask,i,this.fieldTransforms):new au(t,this.data,i,this.fieldTransforms)}}class C0{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return new Rr(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function I0(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rt(40011,{Ac:s})}}class Hh{constructor(t,i,r,l,u,f){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Hh({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),r=this.Vc({path:i,fc:!1});return r.gc(t),r}yc(t){const i=this.path?.child(t),r=this.Vc({path:i,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Eh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((i=>t.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>t.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(I0(this.Ac)&&HR.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class GR{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||Uh(t)}Cc(t,i,r,l=!1){return new Hh({Ac:t,methodName:i,Dc:r,path:un.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function du(s){const t=s._freezeSettings(),i=Uh(s._databaseId);return new GR(s._databaseId,!!t.ignoreUndefinedProperties,i)}function Tp(s,t,i,r,l,u={}){const f=s.Cc(u.merge||u.mergeFields?2:0,t,i,l);Ap("Data must be an object, but it was:",f,r);const p=D0(r,f);let y,_;if(u.merge)y=new Bn(f.fieldMask),_=f.fieldTransforms;else if(u.mergeFields){const b=[];for(const x of u.mergeFields){const R=jm(t,x,i);if(!f.contains(R))throw new ft(et.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);V0(b,R)||b.push(R)}y=new Bn(b),_=f.fieldTransforms.filter((x=>y.covers(x.field)))}else y=null,_=f.fieldTransforms;return new FR(new kn(p),y,_)}class Fh extends fu{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Fh}}function KR(s,t,i){return new Hh({Ac:3,Dc:t.settings.Dc,methodName:s._methodName,fc:i},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class bp extends fu{_toFieldTransform(t){return new KT(t.path,new Zl)}isEqual(t){return t instanceof bp}}class Sp extends fu{constructor(t,i){super(t),this.vc=i}_toFieldTransform(t){const i=KR(this,t,!0),r=this.vc.map((u=>No(u,i))),l=new Eo(r);return new KT(t.path,l)}isEqual(t){return t instanceof Sp&&vr(this.vc,t.vc)}}function k0(s,t,i,r){const l=s.Cc(1,t,i);Ap("Data must be an object, but it was:",l,r);const u=[],f=kn.empty();xr(r,((y,_)=>{const b=wp(t,y,i);_=Ne(_);const x=l.yc(b);if(_ instanceof Fh)u.push(b);else{const R=No(_,x);R!=null&&(u.push(b),f.set(b,R))}}));const p=new Bn(u);return new C0(f,p,l.fieldTransforms)}function N0(s,t,i,r,l,u){const f=s.Cc(1,t,i),p=[jm(t,r,i)],y=[l];if(u.length%2!=0)throw new ft(et.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)p.push(jm(t,u[R])),y.push(u[R+1]);const _=[],b=kn.empty();for(let R=p.length-1;R>=0;--R)if(!V0(_,p[R])){const z=p[R];let Z=y[R];Z=Ne(Z);const J=f.yc(z);if(Z instanceof Fh)_.push(z);else{const Q=No(Z,J);Q!=null&&(_.push(z),b.set(z,Q))}}const x=new Bn(_);return new C0(b,x,f.fieldTransforms)}function YR(s,t,i,r=!1){return No(i,s.Cc(r?4:3,t))}function No(s,t){if(O0(s=Ne(s)))return Ap("Unsupported field value:",t,s),D0(s,t);if(s instanceof fu)return(function(r,l){if(!I0(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,l){const u=[];let f=0;for(const p of r){let y=No(p,l.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}})(s,t)}return(function(r,l){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Mw(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=ye.fromDate(r);return{timestampValue:ph(l.serializer,u)}}if(r instanceof ye){const u=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ph(l.serializer,u)}}if(r instanceof Yi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ii)return{bytesValue:WT(l.serializer,r._byteString)};if(r instanceof we){const u=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ip(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Qi)return(function(f,p){return{mapValue:{fields:{[xT]:{stringValue:RT},[hh]:{arrayValue:{values:f.toArray().map((_=>{if(typeof _!="number")throw p.Sc("VectorValues must only contain numeric values.");return tp(p.serializer,_)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Ch(r)}`)})(s,t)}function D0(s,t){const i={};return ET(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):xr(s,((r,l)=>{const u=No(l,t.mc(r));u!=null&&(i[r]=u)})),{mapValue:{fields:i}}}function O0(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ye||s instanceof Yi||s instanceof ii||s instanceof we||s instanceof fu||s instanceof Qi)}function Ap(s,t,i){if(!O0(i)||!_T(i)){const r=Ch(i);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function jm(s,t,i){if((t=Ne(t))instanceof hu)return t._internalPath;if(typeof t=="string")return wp(s,t);throw Eh("Field path arguments must be of type string or ",s,!1,void 0,i)}const QR=new RegExp("[~\\*/\\[\\]]");function wp(s,t,i){if(t.search(QR)>=0)throw Eh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new hu(...t.split("."))._internalPath}catch{throw Eh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function Eh(s,t,i,r,l){const u=r&&!r.isEmpty(),f=l!==void 0;let p=`Function ${t}() called with invalid data`;i&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${r}`),f&&(y+=` in document ${l}`),y+=")"),new ft(et.INVALID_ARGUMENT,p+s+y)}function V0(s,t){return s.some((i=>i.isEqual(t)))}class M0{constructor(t,i,r,l,u){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new we(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new $R(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(Gh("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class $R extends M0{data(){return super.data()}}function Gh(s,t){return typeof t=="string"?wp(s,t):t instanceof hu?t._internalPath:t._delegate._internalPath}function j0(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ft(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xp{}class Rp extends xp{}function si(s,t,...i){let r=[];t instanceof xp&&r.push(t),r=r.concat(i),(function(u){const f=u.filter((y=>y instanceof Cp)).length,p=u.filter((y=>y instanceof Kh)).length;if(f>1||f>0&&p>0)throw new ft(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)s=l._apply(s);return s}class Kh extends Rp{constructor(t,i,r){super(),this._field=t,this._op=i,this._value=r,this.type="where"}static _create(t,i,r){return new Kh(t,i,r)}_apply(t){const i=this._parse(t);return L0(t._query,i),new Cs(t.firestore,t.converter,xm(t._query,i))}_parse(t){const i=du(t.firestore);return(function(u,f,p,y,_,b,x){let R;if(_.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ft(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){RE(x,b);const Z=[];for(const J of x)Z.push(xE(y,u,J));R={arrayValue:{values:Z}}}else R=xE(y,u,x)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||RE(x,b),R=YR(p,f,x,b==="in"||b==="not-in");return Fe.create(_,b,R)})(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}}function zn(s,t,i){const r=t,l=Gh("where",s);return Kh._create(l,r,i)}class Cp extends xp{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new Cp(t,i)}_parse(t){const i=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return i.length===1?i[0]:yi.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return i.getFilters().length===0?t:((function(l,u){let f=l;const p=u.getFlattenedFilters();for(const y of p)L0(f,y),f=xm(f,y)})(t._query,i),new Cs(t.firestore,t.converter,xm(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ip extends Rp{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new Ip(t,i)}_apply(t){const i=(function(l,u,f){if(l.startAt!==null)throw new ft(et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new ft(et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wl(u,f)})(t._query,this._field,this._direction);return new Cs(t.firestore,t.converter,(function(l,u){const f=l.explicitOrderBy.concat([u]);return new Io(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,i))}}function Yh(s,t="asc"){const i=t,r=Gh("orderBy",s);return Ip._create(r,i)}class kp extends Rp{constructor(t,i,r){super(),this.type=t,this._limit=i,this._limitType=r}static _create(t,i,r){return new kp(t,i,r)}_apply(t){return new Cs(t.firestore,t.converter,dh(t._query,this._limit,this._limitType))}}function XR(s){return kp._create("limit",s,"F")}function xE(s,t,i){if(typeof(i=Ne(i))=="string"){if(i==="")throw new ft(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MT(t)&&i.indexOf("/")!==-1)throw new ft(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const r=t.path.child(ce.fromString(i));if(!bt.isDocumentKey(r))throw new ft(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qv(s,new bt(r))}if(i instanceof we)return qv(s,i._key);throw new ft(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ch(i)}.`)}function RE(s,t){if(!Array.isArray(s)||s.length===0)throw new ft(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function L0(s,t){const i=(function(l,u){for(const f of l)for(const p of f.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(i!==null)throw i===t.op?new ft(et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ft(et.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}class JR{convertValue(t,i="none"){switch(Sr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ke(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(br(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw Rt(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return xr(t,((l,u)=>{r[l]=this.convertValue(u,i)})),r}convertVectorValue(t){const i=t.fields?.[hh].arrayValue?.values?.map((r=>ke(r.doubleValue)));return new Qi(i)}convertGeoPoint(t){return new Yi(ke(t.latitude),ke(t.longitude))}convertArray(t,i){return(t.values||[]).map((r=>this.convertValue(r,i)))}convertServerTimestamp(t,i){switch(i){case"previous":const r=Nh(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp($l(t));default:return null}}convertTimestamp(t){const i=Tr(t);return new ye(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=ce.fromString(t);te(s0(r),9688,{name:t});const l=new Xl(r.get(1),r.get(3)),u=new bt(r.popFirst(5));return l.isEqual(i)||As(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),u}}function Np(s,t,i){let r;return r=s?i&&(i.merge||i.mergeFields)?s.toFirestore(t,i):s.toFirestore(t):t,r}class Ul{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class oa extends M0{constructor(t,i,r,l,u,f){super(t,i,r,l,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(Gh("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(et.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=oa._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}oa._jsonSchemaVersion="firestore/documentSnapshot/1.0",oa._jsonSchema={type:Ge("string",oa._jsonSchemaVersion),bundleSource:Ge("string","DocumentSnapshot"),bundleName:Ge("string"),bundle:Ge("string")};class eh extends oa{data(t={}){return super.data(t)}}class la{constructor(t,i,r,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new Ul(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const t=[];return this.forEach((i=>t.push(i))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach((r=>{t.call(i,new eh(this._firestore,this._userDataWriter,r.key,r,new Ul(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ft(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const y=new eh(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Ul(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const y=new eh(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Ul(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,b=-1;return p.type!==0&&(_=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),b=f.indexOf(p.doc.key)),{type:WR(p.type),doc:y,oldIndex:_,newIndex:b}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(et.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=la._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Qm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(i.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function WR(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rt(61501,{type:s})}}function nh(s){s=vn(s,we);const t=vn(s.firestore,Wi);return PR(cu(t),s._key).then((i=>P0(t,s,i)))}la._jsonSchemaVersion="firestore/querySnapshot/1.0",la._jsonSchema={type:Ge("string",la._jsonSchemaVersion),bundleSource:Ge("string","QuerySnapshot"),bundleName:Ge("string"),bundle:Ge("string")};class Dp extends JR{constructor(t){super(),this.firestore=t}convertBytes(t){return new ii(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new we(this.firestore,null,i)}}function lr(s){s=vn(s,Cs);const t=vn(s.firestore,Wi),i=cu(t),r=new Dp(t);return j0(s._query),UR(i,s._query).then((l=>new la(t,r,s,l)))}function cm(s,t,i){s=vn(s,we);const r=vn(s.firestore,Wi),l=Np(s.converter,t,i);return mu(r,[Tp(du(r),"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,En.none())])}function Hi(s,t,i,...r){s=vn(s,we);const l=vn(s.firestore,Wi),u=du(l);let f;return f=typeof(t=Ne(t))=="string"||t instanceof hu?N0(u,"updateDoc",s._key,t,i,r):k0(u,"updateDoc",s._key,t),mu(l,[f.toMutation(s._key,En.exists(!0))])}function Lm(s){return mu(vn(s.firestore,Wi),[new Lh(s._key,En.none())])}function So(s,t){const i=vn(s.firestore,Wi),r=he(s),l=Np(s.converter,t);return mu(i,[Tp(du(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,En.exists(!1))]).then((()=>r))}function Fi(s,...t){s=Ne(s);let i={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||wE(t[r])||(i=t[r++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(wE(t[r])){const y=t[r];t[r]=y.next?.bind(y),t[r+1]=y.error?.bind(y),t[r+2]=y.complete?.bind(y)}let u,f,p;if(s instanceof we)f=vn(s.firestore,Wi),p=Dh(s._key.path),u={next:y=>{t[r]&&t[r](P0(f,s,y))},error:t[r+1],complete:t[r+2]};else{const y=vn(s,Cs);f=vn(y.firestore,Wi),p=y._query;const _=new Dp(f);u={next:b=>{t[r]&&t[r](new la(f,_,y,b))},error:t[r+1],complete:t[r+2]},j0(s._query)}return(function(_,b,x,R){const z=new Ep(R),Z=new yp(b,z,x);return _.asyncQueue.enqueueAndForget((async()=>mp(await vh(_),Z))),()=>{z.Nu(),_.asyncQueue.enqueueAndForget((async()=>pp(await vh(_),Z)))}})(cu(f),p,l,u)}function mu(s,t){return(function(r,l){const u=new Ts;return r.asyncQueue.enqueueAndForget((async()=>xR(await LR(r),l,u))),u.promise})(cu(s),t)}function P0(s,t,i){const r=i.docs.get(t._key),l=new Dp(s);return new oa(s,l,t._key,r,new Ul(i.hasPendingWrites,i.fromCache),t.converter)}class ZR{constructor(t,i){this._firestore=t,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=du(t)}set(t,i,r){this._verifyNotCommitted();const l=hm(t,this._firestore),u=Np(l.converter,i,r),f=Tp(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,r);return this._mutations.push(f.toMutation(l._key,En.none())),this}update(t,i,r,...l){this._verifyNotCommitted();const u=hm(t,this._firestore);let f;return f=typeof(i=Ne(i))=="string"||i instanceof hu?N0(this._dataReader,"WriteBatch.update",u._key,i,r,l):k0(this._dataReader,"WriteBatch.update",u._key,i),this._mutations.push(f.toMutation(u._key,En.exists(!0))),this}delete(t){this._verifyNotCommitted();const i=hm(t,this._firestore);return this._mutations=this._mutations.concat(new Lh(i._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ft(et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hm(s,t){if((s=Ne(s)).firestore!==t)throw new ft(et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function fm(){return new bp("serverTimestamp")}function tC(...s){return new Sp("arrayUnion",s)}function Pm(s){return cu(s=vn(s,Wi)),new ZR(s,(t=>mu(s,t)))}(function(t,i=!0){(function(l){xo=l})(wo),po(new ua("firestore",((r,{instanceIdentifier:l,options:u})=>{const f=r.getProvider("app").getImmediate(),p=new Wi(new Y1(r.getProvider("auth-internal")),new X1(f,r.getProvider("app-check-internal")),(function(_,b){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ft(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(_.options.projectId,b)})(f,l),f);return u={useFetchStreams:i,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),gr(Iv,kv,t),gr(Iv,kv,"esm2020")})();function U0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eC=U0,z0=new iu("auth","Firebase",U0());const Th=new Fm("@firebase/auth");function nC(s,...t){Th.logLevel<=Ft.WARN&&Th.warn(`Auth (${wo}): ${s}`,...t)}function ih(s,...t){Th.logLevel<=Ft.ERROR&&Th.error(`Auth (${wo}): ${s}`,...t)}function _i(s,...t){throw Op(s,...t)}function $i(s,...t){return Op(s,...t)}function B0(s,t,i){const r={...eC(),[t]:i};return new iu("auth","Firebase",r).create(t,{appName:s.name})}function bs(s){return B0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Op(s,...t){if(typeof s!="string"){const i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return z0.create(s,...t)}function xt(s,t,...i){if(!s)throw Op(t,...i)}function vs(s){const t="INTERNAL ASSERTION FAILED: "+s;throw ih(t),new Error(t)}function xs(s,t){s||vs(t)}function Um(){return typeof self<"u"&&self.location?.href||""}function iC(){return CE()==="http:"||CE()==="https:"}function CE(){return typeof self<"u"&&self.location?.protocol||null}function sC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iC()||bA()||"connection"in navigator)?navigator.onLine:!0}function rC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class pu{constructor(t,i){this.shortDelay=t,this.longDelay=i,xs(i>t,"Short delay should be less than long delay!"),this.isMobile=vA()||SA()}get(){return sC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vp(s,t){xs(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}class q0{static initialize(t,i,r){this.fetchImpl=t,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const aC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const oC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lC=new pu(3e4,6e4);function Cr(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function Ir(s,t,i,r,l={}){return H0(s,l,async()=>{let u={},f={};r&&(t==="GET"?f=r:u={body:JSON.stringify(r)});const p=su({key:s.config.apiKey,...f}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const _={method:t,headers:y,...u};return TA()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&Ao(s.emulatorConfig.host)&&(_.credentials="include"),q0.fetch()(await F0(s,s.config.apiHost,i,p),_)})}async function H0(s,t,i){s._canInitEmulator=!1;const r={...aC,...t};try{const l=new cC(s),u=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw $c(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const p=u.ok?f.errorMessage:f.error.message,[y,_]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw $c(s,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw $c(s,"email-already-in-use",f);if(y==="USER_DISABLED")throw $c(s,"user-disabled",f);const b=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw B0(s,b,_);_i(s,b)}}catch(l){if(l instanceof Rs)throw l;_i(s,"network-request-failed",{message:String(l)})}}async function gu(s,t,i,r,l={}){const u=await Ir(s,t,i,r,l);return"mfaPendingCredential"in u&&_i(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function F0(s,t,i,r){const l=`${t}${i}?${r}`,u=s,f=u.config.emulator?Vp(s.config,l):`${s.config.apiScheme}://${l}`;return oC.includes(i)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function uC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r($i(this.auth,"network-request-failed")),lC.get())})}}function $c(s,t,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const l=$i(s,t,r);return l.customData._tokenResponse=i,l}function IE(s){return s!==void 0&&s.enterprise!==void 0}class hC{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return uC(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fC(s,t){return Ir(s,"GET","/v2/recaptchaConfig",Cr(s,t))}async function dC(s,t){return Ir(s,"POST","/v1/accounts:delete",t)}async function bh(s,t){return Ir(s,"POST","/v1/accounts:lookup",t)}function Gl(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function mC(s,t=!1){const i=Ne(s),r=await i.getIdToken(t),l=Mp(r);xt(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u?.sign_in_provider;return{claims:l,token:r,authTime:Gl(dm(l.auth_time)),issuedAtTime:Gl(dm(l.iat)),expirationTime:Gl(dm(l.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function dm(s){return Number(s)*1e3}function Mp(s){const[t,i,r]=s.split(".");if(t===void 0||i===void 0||r===void 0)return ih("JWT malformed, contained fewer than 3 sections"),null;try{const l=JE(i);return l?JSON.parse(l):(ih("Failed to decode base64 JWT payload"),null)}catch(l){return ih("Caught error parsing JWT payload as JSON",l?.toString()),null}}function kE(s){const t=Mp(s);return xt(t,"internal-error"),xt(typeof t.exp<"u","internal-error"),xt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function eu(s,t,i=!1){if(i)return t;try{return await t}catch(r){throw r instanceof Rs&&pC(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function pC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class gC{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class zm{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gl(this.lastLoginAt),this.creationTime=Gl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sh(s){const t=s.auth,i=await s.getIdToken(),r=await eu(s,bh(t,{idToken:i}));xt(r?.users.length,t,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?G0(l.providerUserInfo):[],f=_C(s.providerData,u),p=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!f?.length,_=p?y:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new zm(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(s,b)}async function yC(s){const t=Ne(s);await Sh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function _C(s,t){return[...s.filter(r=>!t.some(l=>l.providerId===r.providerId)),...t]}function G0(s){return s.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}async function vC(s,t){const i=await H0(s,{},async()=>{const r=su({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,f=await F0(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return s.emulatorConfig&&Ao(s.emulatorConfig.host)&&(y.credentials="include"),q0.fetch()(f,y)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function EC(s,t){return Ir(s,"POST","/v2/accounts:revokeToken",Cr(s,t))}class ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){xt(t.idToken,"internal-error"),xt(typeof t.idToken<"u","internal-error"),xt(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):kE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){xt(t.length!==0,"internal-error");const i=kE(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(xt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:r,refreshToken:l,expiresIn:u}=await vC(t,i);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(t,i,r){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,i){const{refreshToken:r,accessToken:l,expirationTime:u}=i,f=new ho;return r&&(xt(typeof r=="string","internal-error",{appName:t}),f.refreshToken=r),l&&(xt(typeof l=="string","internal-error",{appName:t}),f.accessToken=l),u&&(xt(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ho,this.toJSON())}_performRefresh(){return vs("not implemented")}}function or(s,t){xt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class gi{constructor({uid:t,auth:i,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new gC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new zm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await eu(this,this.stsTokenManager.getToken(this.auth,t));return xt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return mC(this,t)}reload(){return yC(this)}_assign(t){this!==t&&(xt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new gi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){xt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),i&&await Sh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ni(this.auth.app))return Promise.reject(bs(this.auth));const t=await this.getIdToken();return await eu(this,dC(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const r=i.displayName??void 0,l=i.email??void 0,u=i.phoneNumber??void 0,f=i.photoURL??void 0,p=i.tenantId??void 0,y=i._redirectEventId??void 0,_=i.createdAt??void 0,b=i.lastLoginAt??void 0,{uid:x,emailVerified:R,isAnonymous:z,providerData:Z,stsTokenManager:J}=i;xt(x&&J,t,"internal-error");const Q=ho.fromJSON(this.name,J);xt(typeof x=="string",t,"internal-error"),or(r,t.name),or(l,t.name),xt(typeof R=="boolean",t,"internal-error"),xt(typeof z=="boolean",t,"internal-error"),or(u,t.name),or(f,t.name),or(p,t.name),or(y,t.name),or(_,t.name),or(b,t.name);const W=new gi({uid:x,auth:t,email:l,emailVerified:R,displayName:r,isAnonymous:z,photoURL:f,phoneNumber:u,tenantId:p,stsTokenManager:Q,createdAt:_,lastLoginAt:b});return Z&&Array.isArray(Z)&&(W.providerData=Z.map(ut=>({...ut}))),y&&(W._redirectEventId=y),W}static async _fromIdTokenResponse(t,i,r=!1){const l=new ho;l.updateFromServerResponse(i);const u=new gi({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:r});return await Sh(u),u}static async _fromGetAccountInfoResponse(t,i,r){const l=i.users[0];xt(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?G0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!u?.length,p=new ho;p.updateFromIdToken(r);const y=new gi({uid:l.localId,auth:t,stsTokenManager:p,isAnonymous:f}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new zm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(y,_),y}}const NE=new Map;function Es(s){xs(s instanceof Function,"Expected a class definition");let t=NE.get(s);return t?(xs(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,NE.set(s,t),t)}class K0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}K0.type="NONE";const DE=K0;function sh(s,t,i){return`firebase:${s}:${t}:${i}`}class fo{constructor(t,i,r){this.persistence=t,this.auth=i,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=sh(this.userKey,l.apiKey,u),this.fullPersistenceKey=sh("persistence",l.apiKey,u),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await bh(this.auth,{idToken:t}).catch(()=>{});return i?gi._fromGetAccountInfoResponse(this.auth,i,t):null}return gi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,r="authUser"){if(!i.length)return new fo(Es(DE),t,r);const l=(await Promise.all(i.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=l[0]||Es(DE);const f=sh(r,t.config.apiKey,t.name);let p=null;for(const _ of i)try{const b=await _._get(f);if(b){let x;if(typeof b=="string"){const R=await bh(t,{idToken:b}).catch(()=>{});if(!R)break;x=await gi._fromGetAccountInfoResponse(t,R,b)}else x=gi._fromJSON(t,b);_!==u&&(p=x),u=_;break}}catch{}const y=l.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new fo(u,t,r):(u=y[0],p&&await u._set(f,p.toJSON()),await Promise.all(i.map(async _=>{if(_!==u)try{await _._remove(f)}catch{}})),new fo(u,t,r))}}function OE(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(X0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Y0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(W0(t))return"Blackberry";if(Z0(t))return"Webos";if(Q0(t))return"Safari";if((t.includes("chrome/")||$0(t))&&!t.includes("edge/"))return"Chrome";if(J0(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function Y0(s=pn()){return/firefox\//i.test(s)}function Q0(s=pn()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $0(s=pn()){return/crios\//i.test(s)}function X0(s=pn()){return/iemobile/i.test(s)}function J0(s=pn()){return/android/i.test(s)}function W0(s=pn()){return/blackberry/i.test(s)}function Z0(s=pn()){return/webos/i.test(s)}function jp(s=pn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function TC(s=pn()){return jp(s)&&!!window.navigator?.standalone}function bC(){return AA()&&document.documentMode===10}function tb(s=pn()){return jp(s)||J0(s)||Z0(s)||W0(s)||/windows phone/i.test(s)||X0(s)}function eb(s,t=[]){let i;switch(s){case"Browser":i=OE(pn());break;case"Worker":i=`${OE(pn())}-${s}`;break;default:i=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${wo}/${r}`}class SC{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const r=u=>new Promise((f,p)=>{try{const y=t(u);f(y)}catch(y){p(y)}});r.onAbort=i,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const r of this.queue)await r(t),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function AC(s,t={}){return Ir(s,"GET","/v2/passwordPolicy",Cr(s,t))}const wC=6;class xC{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??wC,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=t.length>=r),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let l=0;l<t.length;l++)r=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,i,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class RC{constructor(t,i,r,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new SC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=Es(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fo.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await bh(this,{idToken:t}),r=await gi._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(ni(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,p=await this.tryRedirectSignIn(t);(!u||u===f)&&p?.user&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return xt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await Sh(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=rC()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ni(this.app))return Promise.reject(bs(this));const i=t?Ne(t):null;return i&&xt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&xt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ni(this.app)?Promise.reject(bs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ni(this.app)?Promise.reject(bs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await AC(this),i=new xC(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new iu("auth","Firebase",t())}onAuthStateChanged(t,i,r){return this.registerStateListener(this.authStateSubscription,t,i,r)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,r){return this.registerStateListener(this.idTokenSubscription,t,i,r)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await EC(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const r=await this.getOrInitRedirectPersistenceManager(i);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&Es(t)||this._popupRedirectResolver;xt(i,this,"argument-error"),this.redirectPersistenceManager=await fo.create(this,[Es(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,r,l){if(this._deleted)return()=>{};const u=typeof i=="function"?i:i.next.bind(i);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(xt(p,this,"internal-error"),p.then(()=>{f||u(this.currentUser)}),typeof i=="function"){const y=t.addObserver(i,r,l);return()=>{f=!0,y()}}else{const y=t.addObserver(i);return()=>{f=!0,y()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return xt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=eb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if(ni(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&nC(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ga(s){return Ne(s)}class VE{constructor(t){this.auth=t,this.observer=null,this.addObserver=DA(i=>this.observer=i)}get next(){return xt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CC(s){Qh=s}function nb(s){return Qh.loadJS(s)}function IC(){return Qh.recaptchaEnterpriseScript}function kC(){return Qh.gapiScript}function NC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class DC{constructor(){this.enterprise=new OC}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class OC{ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const VC="recaptcha-enterprise",ib="NO_RECAPTCHA";class MC{constructor(t){this.type=VC,this.auth=ga(t)}async verify(t="verify",i=!1){async function r(u){if(!i){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,p)=>{fC(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const _=new hC(y);return u.tenantId==null?u._agentRecaptchaConfig=_:u._tenantRecaptchaConfigs[u.tenantId]=_,f(_.siteKey)}}).catch(y=>{p(y)})})}function l(u,f,p){const y=window.grecaptcha;IE(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:t}).then(_=>{f(_)}).catch(()=>{f(ib)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DC().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(p=>{if(!i&&IE(window.grecaptcha))l(p,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=IC();y.length!==0&&(y+=p),nb(y).then(()=>{l(p,u,f)}).catch(_=>{f(_)})}}).catch(p=>{f(p)})})}}async function ME(s,t,i,r=!1,l=!1){const u=new MC(s);let f;if(l)f=ib;else try{f=await u.verify(i)}catch{f=await u.verify(i,!0)}const p={...t};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,_=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Bm(s,t,i,r,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await ME(s,t,i,i==="getOobCode");return r(s,u)}else return r(s,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await ME(s,t,i,i==="getOobCode");return r(s,f)}else return Promise.reject(u)})}function jC(s,t){const i=Km(s,"auth");if(i.isInitialized()){const l=i.getImmediate(),u=i.getOptions();if(vr(u,t??{}))return l;_i(l,"already-initialized")}return i.initialize({options:t})}function LC(s,t){const i=t?.persistence||[],r=(Array.isArray(i)?i:[i]).map(Es);t?.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t?.popupRedirectResolver)}function PC(s,t,i){const r=ga(s);xt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const l=!1,u=sb(t),{host:f,port:p}=UC(t),y=p===null?"":`:${p}`,_={url:`${u}//${f}${y}/`},b=Object.freeze({host:f,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){xt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xt(vr(_,r.config.emulator)&&vr(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,Ao(f)?(eT(`${u}//${f}${y}`),nT("Auth",!0)):zC()}function sb(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function UC(s){const t=sb(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:jE(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:jE(f)}}}function jE(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function zC(){function s(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Lp{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return vs("not implemented")}_getIdTokenResponse(t){return vs("not implemented")}_linkToIdToken(t,i){return vs("not implemented")}_getReauthenticationResolver(t){return vs("not implemented")}}async function BC(s,t){return Ir(s,"POST","/v1/accounts:signUp",t)}async function qC(s,t){return gu(s,"POST","/v1/accounts:signInWithPassword",Cr(s,t))}async function HC(s,t){return gu(s,"POST","/v1/accounts:signInWithEmailLink",Cr(s,t))}async function FC(s,t){return gu(s,"POST","/v1/accounts:signInWithEmailLink",Cr(s,t))}class nu extends Lp{constructor(t,i,r,l=null){super("password",r),this._email=t,this._password=i,this._tenantId=l}static _fromEmailAndPassword(t,i){return new nu(t,i,"password")}static _fromEmailAndCode(t,i,r=null){return new nu(t,i,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(t,i,"signInWithPassword",qC);case"emailLink":return HC(t,{email:this._email,oobCode:this._password});default:_i(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const r={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(t,r,"signUpPassword",BC);case"emailLink":return FC(t,{idToken:i,email:this._email,oobCode:this._password});default:_i(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function mo(s,t){return gu(s,"POST","/v1/accounts:signInWithIdp",Cr(s,t))}const GC="http://localhost";class fa extends Lp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new fa(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):_i("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:l,...u}=i;if(!r||!l)return null;const f=new fa(r,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const i=this.buildRequest();return mo(t,i)}_linkToIdToken(t,i){const r=this.buildRequest();return r.idToken=i,mo(t,r)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,mo(t,i)}buildRequest(){const t={requestUri:GC,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=su(i)}return t}}function KC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YC(s){const t=Vl(Ml(s)).link,i=t?Vl(Ml(t)).deep_link_id:null,r=Vl(Ml(s)).deep_link_id;return(r?Vl(Ml(r)).link:null)||r||i||t||s}class Pp{constructor(t){const i=Vl(Ml(t)),r=i.apiKey??null,l=i.oobCode??null,u=KC(i.mode??null);xt(r&&l&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=l,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(t){const i=YC(t);try{return new Pp(i)}catch{return null}}}class Do{constructor(){this.providerId=Do.PROVIDER_ID}static credential(t,i){return nu._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=Pp.parseLink(i);return xt(r,"argument-error"),nu._fromEmailAndCode(t,r.code,r.tenantId)}}Do.PROVIDER_ID="password";Do.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Do.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class rb{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class yu extends rb{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class ur extends yu{constructor(){super("facebook.com")}static credential(t){return fa._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ur.credentialFromTaggedObject(t)}static credentialFromError(t){return ur.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ur.credential(t.oauthAccessToken)}catch{return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";ur.PROVIDER_ID="facebook.com";class cr extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return fa._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return cr.credentialFromTaggedObject(t)}static credentialFromError(t){return cr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return cr.credential(i,r)}catch{return null}}}cr.GOOGLE_SIGN_IN_METHOD="google.com";cr.PROVIDER_ID="google.com";class hr extends yu{constructor(){super("github.com")}static credential(t){return fa._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return hr.credentialFromTaggedObject(t)}static credentialFromError(t){return hr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return hr.credential(t.oauthAccessToken)}catch{return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com";hr.PROVIDER_ID="github.com";class fr extends yu{constructor(){super("twitter.com")}static credential(t,i){return fa._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return fr.credentialFromTaggedObject(t)}static credentialFromError(t){return fr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=t;if(!i||!r)return null;try{return fr.credential(i,r)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";async function QC(s,t){return gu(s,"POST","/v1/accounts:signUp",Cr(s,t))}class da{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,r,l=!1){const u=await gi._fromIdTokenResponse(t,r,l),f=LE(r);return new da({user:u,providerId:f,_tokenResponse:r,operationType:i})}static async _forOperation(t,i,r){await t._updateTokensIfNecessary(r,!0);const l=LE(r);return new da({user:t,providerId:l,_tokenResponse:r,operationType:i})}}function LE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Ah extends Rs{constructor(t,i,r,l){super(i.code,i.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,i,r,l){return new Ah(t,i,r,l)}}function ab(s,t,i,r){return(t==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(s,u,t,r):u})}async function $C(s,t,i=!1){const r=await eu(s,t._linkToIdToken(s.auth,await s.getIdToken()),i);return da._forOperation(s,"link",r)}async function XC(s,t,i=!1){const{auth:r}=s;if(ni(r.app))return Promise.reject(bs(r));const l="reauthenticate";try{const u=await eu(s,ab(r,l,t,s),i);xt(u.idToken,r,"internal-error");const f=Mp(u.idToken);xt(f,r,"internal-error");const{sub:p}=f;return xt(s.uid===p,r,"user-mismatch"),da._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&_i(r,"user-mismatch"),u}}async function ob(s,t,i=!1){if(ni(s.app))return Promise.reject(bs(s));const r="signIn",l=await ab(s,r,t),u=await da._fromIdTokenResponse(s,r,l);return i||await s._updateCurrentUser(u.user),u}async function JC(s,t){return ob(ga(s),t)}async function lb(s){const t=ga(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function WC(s,t,i){if(ni(s.app))return Promise.reject(bs(s));const r=ga(s),f=await Bm(r,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QC).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&lb(s),y}),p=await da._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function ZC(s,t,i){return ni(s.app)?Promise.reject(bs(s)):JC(Ne(s),Do.credential(t,i)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lb(s),r})}function tI(s,t,i,r){return Ne(s).onIdTokenChanged(t,i,r)}function eI(s,t,i){return Ne(s).beforeAuthStateChanged(t,i)}function nI(s,t,i,r){return Ne(s).onAuthStateChanged(t,i,r)}function PE(s){return Ne(s).signOut()}const wh="__sak";class ub{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(wh,"1"),this.storage.removeItem(wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const iI=1e3,sI=10;class cb extends ub{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),l=this.localCache[i];r!==l&&t(i,l,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((f,p,y)=>{this.notifyListeners(f,y)});return}const r=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!i&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);bC()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,sI):l()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},iI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}cb.type="LOCAL";const rI=cb;class hb extends ub{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}hb.type="SESSION";const fb=hb;function aI(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}class $h{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const r=new $h(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:r,eventType:l,data:u}=i.data,f=this.handlersMap[l];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(f).map(async _=>_(i.origin,u)),y=await aI(p);i.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];function Up(s="",t=10){let i="";for(let r=0;r<t;r++)i+=Math.floor(Math.random()*10);return s+i}class oI{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((p,y)=>{const _=Up("",20);l.port1.start();const b=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(x){const R=x;if(R.data.eventId===_)switch(R.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(R.data.response);break;default:clearTimeout(b),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:_,data:i},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Xi(){return window}function lI(s){Xi().location.href=s}function db(){return typeof Xi().WorkerGlobalScope<"u"&&typeof Xi().importScripts=="function"}async function uI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cI(){return navigator?.serviceWorker?.controller||null}function hI(){return db()?self:null}const mb="firebaseLocalStorageDb",fI=1,xh="firebaseLocalStorage",pb="fbase_key";class _u{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Xh(s,t){return s.transaction([xh],t?"readwrite":"readonly").objectStore(xh)}function dI(){const s=indexedDB.deleteDatabase(mb);return new _u(s).toPromise()}function qm(){const s=indexedDB.open(mb,fI);return new Promise((t,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(xh,{keyPath:pb})}catch(l){i(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(xh)?t(r):(r.close(),await dI(),t(await qm()))})})}async function UE(s,t,i){const r=Xh(s,!0).put({[pb]:t,value:i});return new _u(r).toPromise()}async function mI(s,t){const i=Xh(s,!1).get(t),r=await new _u(i).toPromise();return r===void 0?null:r.value}function zE(s,t){const i=Xh(s,!0).delete(t);return new _u(i).toPromise()}const pI=800,gI=3;class gb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qm(),this.db)}async _withRetries(t){let i=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(i++>gI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return db()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance(hI()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await uI(),!this.activeServiceWorker)return;this.sender=new oI(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||cI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await qm();return await UE(t,wh,"1"),await zE(t,wh),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>UE(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(r=>mI(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>zE(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const u=Xh(l,!1).getAll();return new _u(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(t.length!==0)for(const{fbase_key:l,value:u}of t)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gb.type="LOCAL";const yI=gb;new pu(3e4,6e4);function _I(s,t){return t?Es(t):(xt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class zp extends Lp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return mo(t,this._buildIdpRequest())}_linkToIdToken(t,i){return mo(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return mo(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function vI(s){return ob(s.auth,new zp(s),s.bypassAuthState)}function EI(s){const{auth:t,user:i}=s;return xt(i,t,"internal-error"),XC(i,new zp(s),s.bypassAuthState)}async function TI(s){const{auth:t,user:i}=s;return xt(i,t,"internal-error"),$C(i,new zp(s),s.bypassAuthState)}class yb{constructor(t,i,r,l,u=!1){this.auth=t,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:r,postBody:l,tenantId:u,error:f,type:p}=t;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:i,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return vI;case"linkViaPopup":case"linkViaRedirect":return TI;case"reauthViaPopup":case"reauthViaRedirect":return EI;default:_i(this.auth,"internal-error")}}resolve(t){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bI=new pu(2e3,1e4);class uo extends yb{constructor(t,i,r,l,u){super(t,i,l,u),this.provider=r,this.authWindow=null,this.pollId=null,uo.currentPopupAction&&uo.currentPopupAction.cancel(),uo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return xt(t,this.auth,"internal-error"),t}async onExecution(){xs(this.filter.length===1,"Popup operations only handle one event");const t=Up();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject($i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject($i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,bI.get())};t()}}uo.currentPopupAction=null;const SI="pendingRedirect",rh=new Map;class AI extends yb{constructor(t,i,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let t=rh.get(this.auth._key());if(!t){try{const r=await wI(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(i){t=()=>Promise.reject(i)}rh.set(this.auth._key(),t)}return this.bypassAuthState||rh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wI(s,t){const i=CI(t),r=RI(s);if(!await r._isAvailable())return!1;const l=await r._get(i)==="true";return await r._remove(i),l}function xI(s,t){rh.set(s._key(),t)}function RI(s){return Es(s._redirectPersistence)}function CI(s){return sh(SI,s.config.apiKey,s.name)}async function II(s,t,i=!1){if(ni(s.app))return Promise.reject(bs(s));const r=ga(s),l=_I(r,t),f=await new AI(r,l,i).execute();return f&&!i&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,t)),f}const kI=600*1e3;class NI{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(i=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!DI(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!_b(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";i.onError($i(this.auth,r))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const r=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=kI&&this.cachedEventUids.clear(),this.cachedEventUids.has(BE(t))}saveEventToCache(t){this.cachedEventUids.add(BE(t)),this.lastProcessedEventTime=Date.now()}}function BE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function _b({type:s,error:t}){return s==="unknown"&&t?.code==="auth/no-auth-event"}function DI(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _b(s);default:return!1}}async function OI(s,t={}){return Ir(s,"GET","/v1/projects",t)}const VI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MI=/^https?/;async function jI(s){if(s.config.emulator)return;const{authorizedDomains:t}=await OI(s);for(const i of t)try{if(LI(i))return}catch{}_i(s,"unauthorized-domain")}function LI(s){const t=Um(),{protocol:i,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&f.hostname===r}if(!MI.test(i))return!1;if(VI.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}const PI=new pu(3e4,6e4);function qE(){const s=Xi().___jsl;if(s?.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function UI(s){return new Promise((t,i)=>{function r(){qE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{qE(),i($i(s,"network-request-failed"))},timeout:PI.get()})}if(Xi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Xi().gapi?.load)r();else{const l=NC("iframefcb");return Xi()[l]=()=>{gapi.load?r():i($i(s,"network-request-failed"))},nb(`${kC()}?onload=${l}`).catch(u=>i(u))}}).catch(t=>{throw ah=null,t})}let ah=null;function zI(s){return ah=ah||UI(s),ah}const BI=new pu(5e3,15e3),qI="__/auth/iframe",HI="emulator/auth/iframe",FI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KI(s){const t=s.config;xt(t.authDomain,s,"auth-domain-config-required");const i=t.emulator?Vp(t,HI):`https://${s.config.authDomain}/${qI}`,r={apiKey:t.apiKey,appName:s.name,v:wo},l=GI.get(s.config.apiHost);l&&(r.eid=l);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${i}?${su(r).slice(1)}`}async function YI(s){const t=await zI(s),i=Xi().gapi;return xt(i,s,"internal-error"),t.open({where:document.body,url:KI(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FI,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const f=$i(s,"network-request-failed"),p=Xi().setTimeout(()=>{u(f)},BI.get());function y(){Xi().clearTimeout(p),l(r)}r.ping(y).then(y,()=>{u(f)})}))}const QI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$I=500,XI=600,JI="_blank",WI="http://localhost";class HE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZI(s,t,i,r=$I,l=XI){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...QI,width:r.toString(),height:l.toString(),top:u,left:f},_=pn().toLowerCase();i&&(p=$0(_)?JI:i),Y0(_)&&(t=t||WI,y.scrollbars="yes");const b=Object.entries(y).reduce((R,[z,Z])=>`${R}${z}=${Z},`,"");if(TC(_)&&p!=="_self")return t2(t||"",p),new HE(null);const x=window.open(t||"",p,b);xt(x,s,"popup-blocked");try{x.focus()}catch{}return new HE(x)}function t2(s,t){const i=document.createElement("a");i.href=s,i.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}const e2="__/auth/handler",n2="emulator/auth/handler",i2=encodeURIComponent("fac");async function FE(s,t,i,r,l,u){xt(s.config.authDomain,s,"auth-domain-config-required"),xt(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:wo,eventId:l};if(t instanceof rb){t.setDefaultLanguage(s.languageCode),f.providerId=t.providerId||"",NA(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[b,x]of Object.entries({}))f[b]=x}if(t instanceof yu){const b=t.getScopes().filter(x=>x!=="");b.length>0&&(f.scopes=b.join(","))}s.tenantId&&(f.tid=s.tenantId);const p=f;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const y=await s._getAppCheckToken(),_=y?`#${i2}=${encodeURIComponent(y)}`:"";return`${s2(s)}?${su(p).slice(1)}${_}`}function s2({config:s}){return s.emulator?Vp(s,n2):`https://${s.authDomain}/${e2}`}const mm="webStorageSupport";class r2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fb,this._completeRedirectFn=II,this._overrideRedirectResult=xI}async _openPopup(t,i,r,l){xs(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await FE(t,i,r,Um(),l);return ZI(t,u,Up())}async _openRedirect(t,i,r,l){await this._originValidation(t);const u=await FE(t,i,r,Um(),l);return lI(u),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:u}=this.eventManagers[i];return l?Promise.resolve(l):(xs(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(t){const i=await YI(t),r=new NI(t);return i.register("authEvent",l=>(xt(l?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=i,r}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(mm,{type:mm},l=>{const u=l?.[0]?.[mm];u!==void 0&&i(!!u),_i(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=jI(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return tb()||Q0()||jp()}}const a2=r2;var GE="@firebase/auth",KE="1.12.0";class o2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){xt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function l2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function u2(s){po(new ua("auth",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;xt(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eb(s)},_=new RC(r,l,u,y);return LC(_,i),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,r)=>{t.getProvider("auth-internal").initialize()})),po(new ua("auth-internal",t=>{const i=ga(t.getProvider("auth").getImmediate());return(r=>new o2(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(GE,KE,l2(s)),gr(GE,KE,"esm2020")}const c2=300,h2=tT("authIdTokenMaxAge")||c2;let YE=null;const f2=s=>async t=>{const i=t&&await t.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>h2)return;const l=i?.token;YE!==l&&(YE=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function d2(s=aT()){const t=Km(s,"auth");if(t.isInitialized())return t.getImmediate();const i=jC(s,{popupRedirectResolver:a2,persistence:[yI,rI,fb]}),r=tT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=f2(u.toString());eI(i,f,()=>f(i.currentUser)),tI(i,p=>f(p))}}const l=WE("auth");return l&&PC(i,`http://${l}`),i}function m2(){return document.getElementsByTagName("head")?.[0]??document}CC({loadJS(s){return new Promise((t,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=l=>{const u=$i("internal-error");u.customData=l,i(u)},r.type="text/javascript",r.charset="UTF-8",m2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});u2("Browser");const p2={apiKey:"AIzaSyDd7oNAtznb5DT6R6yAP7Y1yMeVoY4fKhU",authDomain:"notar-app.firebaseapp.com",projectId:"notar-app",storageBucket:"notar-app.firebasestorage.app",messagingSenderId:"620852234294",appId:"1:620852234294:web:e32df64dccc8a2b8ed3097"},vb=rT(p2),wt=BR(vb),Kl=d2(vb),g2=({onBack:s,showNotification:t})=>{const[i,r]=dt.useState(new Date().toISOString().slice(0,7)),[l,u]=dt.useState([]),[f,p]=dt.useState(!1),[y,_]=dt.useState([]),[b,x]=dt.useState({}),[R,z]=dt.useState(!1),[Z,J]=dt.useState([]),Q=(U,rt)=>{const C=new Date(U);return C.setDate(C.getDate()+parseInt(rt)),C.toISOString().slice(0,10)},[W,ut]=dt.useState({customer_id:"",customer_name:"",address:"",type:"b2c",payment_term:14,date:new Date().toISOString().slice(0,10),due_date:Q(new Date().toISOString().slice(0,10),14),rows:[{date:new Date().toISOString().slice(0,10),text:"",price_work:"",price_material:""}]});dt.useEffect(()=>{(async()=>{const C=await nh(he(wt,"settings","company_profile"));C.exists()&&(_(C.data().tasks||[]),x(C.data()))})(),(async()=>{const C=si(Te(wt,"customers"),Yh("name")),L=await lr(C);J(L.docs.map(nt=>({id:nt.id,...nt.data()})))})()},[]);const gt=U=>{const rt=U.target.value,C=Z.find(L=>L.id===rt);ut(C?L=>({...L,customer_id:C.id,customer_name:C.name,address:`${C.street||""}, ${C.zip||""} ${C.city||""}`,type:C.type||"b2c"}):L=>({...L,customer_id:""}))},Mt=U=>{ut(rt=>({...rt,date:U,due_date:Q(U,rt.payment_term)}))},jt=U=>{ut(rt=>({...rt,payment_term:U,due_date:Q(rt.date,U)}))},Ct=()=>{ut({...W,rows:[...W.rows,{date:W.date,text:"",price_work:"",price_material:""}]})},N=(U,rt,C)=>{const L=[...W.rows];L[U][rt]=C,ut({...W,rows:L})},S=U=>{const rt=W.rows.filter((C,L)=>L!==U);ut({...W,rows:rt})},A=U=>{const rt=parseFloat(U.price_work)||0,C=parseFloat(U.price_material)||0;return rt+C},O=async()=>{if(!W.customer_name||W.rows.length===0)return t("Tyt asiakas ja vhintn yksi rivi.","error");p(!0);try{const U=he(wt,"settings","company_profile"),rt=await nh(U);let C=1e3;rt.exists()&&rt.data().invoice_start_number&&(C=parseInt(rt.data().invoice_start_number));let L=W.customer_id;if(!L){const At=Z.find(Et=>Et.name.toLowerCase()===W.customer_name.toLowerCase());if(At)L=At.id;else{const Et=W.address.split(","),Jt=Et[0]?.trim()||"",Ke=Et[1]?.trim()||"",tn=Ke.split(" ")[0]||"",fe=Ke.split(" ").slice(1).join(" ")||"";L=(await So(Te(wt,"customers"),{name:W.customer_name,type:W.type,street:Jt,zip:tn,city:fe,contracts:{},group_names:[],created_at:fm()})).id,t("Uusi asiakas tallennettu rekisteriin!","info")}}const ot=1+(b.alv_pros?parseFloat(b.alv_pros):25.5)/100;let ct=0;const ht=W.rows.map(At=>{const Et=parseFloat(At.price_work)||0,Jt=parseFloat(At.price_material)||0,tn=(Et+Jt)*ot;ct+=tn;let fe=[];return Et>0&&fe.push(`Ty: ${Et.toFixed(2)}`),Jt>0&&fe.push(`Tarvike: ${Jt.toFixed(2)}`),{type:"row",text:`${new Date(At.date).getDate()+"."+(new Date(At.date).getMonth()+1)+"."} ${At.text}`,total:tn,details:fe.join(", ")+" (alv0)",raw_work_net:Et,raw_material_net:Jt,raw_date:At.date}}),vt=C.toString();await So(Te(wt,"invoices"),{invoice_number:vt,title:W.customer_name,customer_id:L,customer_name:W.customer_name,customer_type:W.type,billing_address:W.address,month:i,date:W.date,due_date:W.due_date,rows:ht,total_sum:ct,status:"open",created_at:fm(),is_quick_invoice:!0}),await Hi(U,{invoice_start_number:(C+1).toString()}),t("Pikalasku luotu ja arkistoitu! ","success"),z(!1),ut({customer_id:"",customer_name:"",address:"",type:"b2c",payment_term:14,date:new Date().toISOString().slice(0,10),due_date:Q(new Date().toISOString().slice(0,10),14),rows:[{date:new Date().toISOString().slice(0,10),text:"",price_work:"",price_material:""}]})}catch(U){console.error(U),t("Virhe: "+U.message,"error")}finally{p(!1)}},k=U=>U.task_type==="fixed_monthly"||U.origin==="contract_generated"?"Sopimukset":["extra","material"].includes(U.task_type)?"Erillistyt":"Kiinteisthuolto",j=U=>{const rt=String(U).replace(/\D/g,""),C=[7,3,1];let L=0;for(let ot=0;ot<rt.length;ot++)L+=parseInt(rt.charAt(rt.length-1-ot))*C[ot%3];const nt=(10-L%10)%10;return rt+nt},I=(U,rt,C,L)=>{if(!U||!rt||!C||!L)return"";const nt=U.replace(/[^0-9]/g,"");if(nt.length<16)return"";const ot=nt.slice(0,16),ct=parseFloat(rt).toFixed(2);let[ht,vt]=ct.split(".");ht=ht.padStart(6,"0").slice(-6);const At=ht+vt,Et=C.replace(/[^0-9]/g,"").padStart(20,"0"),Jt=new Date(L),Ke=Jt.getFullYear().toString().slice(-2),tn=(Jt.getMonth()+1).toString().padStart(2,"0"),fe=Jt.getDate().toString().padStart(2,"0"),xe=Ke+tn+fe;return`4${ot}${At}000${Et}${xe}`},Ut=async()=>{if(window.confirm(`Haluatko varmasti poistaa merkinnt, ett ${i} kk-maksut on laskutettu?`)){p(!0);try{const[U,rt]=i.split("-"),C=`${i}-01`,L=new Date(U,rt,0).getDate(),nt=`${i}-${L}`,ot=si(Te(wt,"work_entries"),zn("origin","==","fixed_fee"),zn("date",">=",C),zn("date","<=",nt)),ct=await lr(ot);if(ct.empty){t("Ei nollattavaa.","error"),p(!1);return}const ht=Pm(wt);ct.docs.forEach(vt=>ht.delete(vt.ref)),await ht.commit(),t(`Nollattu ${ct.size} kk-maksua.`,"success"),u([])}catch(U){console.error(U),t("Virhe: "+U.message,"error")}finally{p(!1)}}},B=async()=>{p(!0),u([]);try{const[U,rt]=i.split("-"),C=`${i}-01`,L=new Date(U,rt,0).getDate(),nt=`${i}-${L}`,ot=`${rt}/${U}`,ct=si(Te(wt,"work_entries"),zn("invoiced","==",!1),zn("date",">=",C),zn("date","<=",nt)),vt=(await lr(ct)).docs.map(It=>({id:It.id,...It.data(),origin:"work_entry"})),At=si(Te(wt,"work_entries"),zn("origin","==","fixed_fee"),zn("date",">=",C),zn("date","<=",nt)),Jt=(await lr(At)).docs.map(It=>It.data()),Ke=(It,_t,ee)=>Jt.some(Oe=>Oe.customer_id===It&&Oe.task_id===ee&&(_t?Oe.property_id===_t:!0)),tn=await lr(Te(wt,"customers")),fe=await lr(Te(wt,"properties")),xe={};tn.forEach(It=>{xe[It.id]={id:It.id,...It.data()}});const vi={};fe.forEach(It=>{const _t=It.data();vi[It.id]={address:_t.address,cost_center:_t.cost_center,group:_t.group,contracts:_t.contracts,customer_id:_t.customer_id,id:It.id}});const Ei=y.filter(It=>It.type==="fixed_monthly"),Zi=[];fe.docs.forEach(It=>{const _t={id:It.id,...It.data()};Ei.forEach(ee=>{const Oe=_t.contracts?.[ee.id];if(Oe?.active&&!Ke(_t.customer_id,_t.id,ee.id)){const $e=xe[_t.customer_id];$e&&Zi.push({id:`gen_${_t.id}_${ee.id}`,customer_id:$e.id,customer_name:$e.name,property_id:_t.id,property_address:_t.address,task_id:ee.id,task_name:ee.label,task_type:"fixed_monthly",price_work:Oe.price,date:nt,description:`${ee.label} (${ot})`,origin:"contract_generated",group:_t.group||$e.group_names?.[0]||"Sopimukset",cost_center:_t.cost_center})}})}),Object.values(xe).forEach(It=>{It.type==="b2c"&&Ei.forEach(_t=>{const ee=It.contracts?.[_t.id];ee?.active&&!Ke(It.id,null,_t.id)&&Zi.push({id:`gen_${It.id}_${_t.id}`,customer_id:It.id,customer_name:It.name,task_id:_t.id,task_name:_t.label,task_type:"fixed_monthly",price_work:ee.price,date:nt,description:`${_t.label} (${ot})`,origin:"contract_generated",group:"Yksityiset"})})});const Is=[...vt,...Zi];if(Is.length===0){t("Ei laskutettavaa.","error"),p(!1);return}const de={};Is.forEach(It=>{const _t=xe[It.customer_id];if(!_t)return;let ee=It.customer_id,Oe=_t.name;const $e=k(It);if(_t.type==="isannointi"){let en=It.group||vi[It.property_id]?.group||"Muu";ee=`${It.customer_id}_${en}_${$e}`,Oe=`${_t.name} - ${en} - ${$e}`}de[ee]||(de[ee]={key:ee,customer:_t,title:Oe,category:$e,entries:[]}),de[ee].entries.push(It)});const qn=1+(b.alv_pros?parseFloat(b.alv_pros):25.5)/100,ya=Object.values(de).map(It=>{const{customer:_t,entries:ee}=It,Oe=[];let $e=0;ee.sort((gn,Hn)=>(gn.property_address||"ZZZ").localeCompare(Hn.property_address||"ZZZ")||new Date(gn.date)-new Date(Hn.date));const en={};return ee.forEach(gn=>{let Hn=gn.cost_center||vi[gn.property_id]?.cost_center,Tn=_t.type==="b2c"?gn.property_address||"Yksityinen":Hn?`Viite: KP ${Hn} / ${gn.property_address}`:`Viite: - / ${gn.property_address}`;en[Tn]||(en[Tn]=[]),en[Tn].push(gn)}),Object.entries(en).forEach(([gn,Hn])=>{(_t.type!=="b2c"||Object.keys(en).length>1)&&Oe.push({type:"header",text:gn});const Tn={},kr=[];Hn.forEach(Pt=>{if(["checkbox","kg","fixed","hourly"].includes(Pt.task_type)&&!["extra","material","fixed_monthly"].includes(Pt.task_type)){const Ve=`${Pt.task_name}_${Pt.price_work}`;Tn[Ve]||(Tn[Ve]={name:Pt.task_name,price:parseFloat(Pt.price_work||0),dates:[],unit:Pt.task_type==="kg"?"kg":"kpl",totalQty:0}),Tn[Ve].dates.push(new Date(Pt.date).getDate()+"."+(new Date(Pt.date).getMonth()+1)+"."),Tn[Ve].totalQty+=Pt.task_type==="kg"?parseFloat(Pt.value||0):1}else kr.push(Pt)}),Object.values(Tn).forEach(Pt=>{const _e=Pt.totalQty*Pt.price*qn;$e+=_e,Oe.push({type:"row",text:`${Pt.name} (${Pt.dates.sort().join(", ")})`,details:`${Pt.totalQty} ${Pt.unit} x ${Pt.price}  (alv0)`,total:_e})}),kr.forEach(Pt=>{const _e=parseFloat(Pt.price_work||0)+parseFloat(Pt.price_material||0),Ve=_e*qn;$e+=Ve;let me=Pt.description||Pt.task_name;Pt.task_type!=="fixed_monthly"&&(me=`${new Date(Pt.date).getDate()}.${new Date(Pt.date).getMonth()+1}. ${me}`),Oe.push({type:"row",text:me,details:`Netto: ${_e.toFixed(2)} (alv0)`,total:Ve})})}),{id:It.key,customerId:_t.id,customerName:_t.name,invoiceTitle:It.title,customerType:_t.type,billingAddress:`${_t.street||""}, ${_t.zip||""} ${_t.city||""}`,rows:Oe,totalSum:$e/qn,rawEntries:ee}});u(ya.sort((It,_t)=>It.invoiceTitle.localeCompare(_t.invoiceTitle))),t(`Luotu ${ya.length} laskuluonnosta.`,"success")}catch(U){console.error(U),t("Virhe: "+U.message,"error")}finally{p(!1)}},M=async()=>{if(window.confirm("Hyvksytnk laskut?")){p(!0);try{const U=he(wt,"settings","company_profile"),rt=await nh(U);let C=rt.exists()?parseInt(rt.data().invoice_start_number||1e3):1e3;const L=Pm(wt),nt=fm(),ct=1+(b.alv_pros?parseFloat(b.alv_pros):25.5)/100;for(const ht of l){const vt=C.toString();C++;const At=he(Te(wt,"invoices")),Et=new Date;Et.setDate(Et.getDate()+14),L.set(At,{invoice_number:vt,title:ht.invoiceTitle,customer_id:ht.customerId,customer_name:ht.customerName,customer_type:ht.customerType,billing_address:ht.billingAddress,month:i,date:new Date().toISOString().slice(0,10),due_date:Et.toISOString().slice(0,10),rows:ht.rows,total_sum:ht.totalSum*ct,status:"open",created_at:nt});for(const Jt of ht.rawEntries)Jt.origin==="work_entry"?L.update(he(wt,"work_entries",Jt.id),{invoiced:!0,invoice_id:At.id}):Jt.origin==="contract_generated"&&L.set(he(Te(wt,"work_entries")),{...Jt,origin:"fixed_fee",invoiced:!0,invoice_id:At.id,created_at:nt})}L.update(U,{invoice_start_number:C.toString()}),await L.commit(),t("Laskut luotu! ","success"),u([])}catch(U){console.error(U),t("Virhe: "+U.message,"error")}finally{p(!1)}}},$=U=>{const C=1+(b.alv_pros?parseFloat(b.alv_pros):25.5)/100,L=U.invoice_number||"Luonnos",nt=j(L),ot=new Date(U.date||new Date).toLocaleDateString("fi-FI"),ct=U.due_date?new Date(U.due_date).toLocaleDateString("fi-FI"):Q(U.date||new Date,14).split("-").reverse().join("."),ht=U.totalSum*C,vt=I(b.iban,ht,nt,U.due_date||U.date),At=document.getElementById("printFrame");At&&At.remove();const Et=document.createElement("iframe");Et.id="printFrame",Et.style.position="fixed",Et.style.right="0",Et.style.bottom="0",Et.style.width="0",Et.style.height="0",Et.style.border="0",document.body.appendChild(Et);const Jt=Et.contentWindow.document,Ke=U.customerType==="b2c"||U.customer_type==="b2c",tn=U.rows.map(fe=>{if(fe.type==="header")return`<tr style="background-color: #f0f0f0; font-weight: bold;"><td colspan="2" style="border-top: 2px solid #666;">${fe.text}</td></tr>`;let xe=Ke?fe.total:fe.total/C;return`<tr><td style="padding: 6px 8px; border: 1px solid #ccc;">${fe.text} ${fe.details?`<br><small style="font-size: 11px; color: #444; font-style: italic;">${fe.details}</small>`:""}</td><td style="text-align:right; padding: 6px 8px; border: 1px solid #ccc;">${xe.toFixed(2)} </td></tr>`}).join("");Jt.open(),Jt.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Lasku ${L}</title>
                <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"><\/script>
                <style>
                    @page { size: A4; margin: 10mm 15mm; }
                    body { font-family: Arial, sans-serif; font-size: 13px; color: #000; line-height: 1.3; padding: 10px; }
                    .header { display: flex; justify-content: space-between; margin-bottom: 40px; }
                    .company-name { font-size: 18px; font-weight: bold; text-transform: uppercase; }
                    .meta-box { text-align: left; width: 300px; }
                    .meta-row { display: flex; justify-content: space-between; margin-bottom: 2px; }
                    .meta-label { font-weight: bold; font-size: 11px; }
                    .recipient { margin-top: 10px; margin-bottom: 30px; border: 1px solid #aaa; padding: 15px; width: 300px; min-height: 80px;}
                    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
                    th { text-align: left; background-color: #ddd; padding: 6px 8px; border: 1px solid #999; font-size: 11px; }
                    .totals-section { display: flex; justify-content: flex-end; margin-bottom: 40px; }
                    .total-final { font-size: 14px; font-weight: bold; border-top: 1px solid #000; padding-top: 5px; }
                    .footer-wrapper { border-top: 2px dashed #000; padding-top: 10px; margin-top: 50px; }
                    .footer-content { display: flex; justify-content: space-between; font-size: 12px; }
                    .barcode-container { margin-top: 20px; text-align: center; }
                    svg#barcode { width: 100%; max-width: 450px; height: 60px; }
                </style>
            </head>
            <body>
                <div class="header">
                    <div>
                        <div class="company-name">${b.nimi||""}</div>
                        <div style="font-size:12px">${b.katu||""}<br>${b.postinro||""} ${b.toimipaikka||""}</div>
                    </div>
                    <div class="meta-box">
                        <div class="meta-row"><span class="meta-label">PIVMR:</span> <span>${ot}</span></div>
                        <div class="meta-row"><span class="meta-label">LASKUN NRO:</span> <span>${L}</span></div>
                        <div class="meta-row"><span class="meta-label">VIITENUMERO:</span> <span>${nt}</span></div>
                        <div class="meta-row" style="margin-top:10px"><span class="meta-label">ERPIV:</span> <span>${ct}</span></div>
                    </div>
                </div>
                <div class="recipient"><b>${U.customerName||U.customer_name}</b><br>${(U.billingAddress||U.billing_address||"").replace(",","<br>")}</div>
                <table>
                    <thead><tr><th style="border: 1px solid #999; padding: 6px 8px;">KUVAUS</th><th style="text-align:right; border: 1px solid #999; padding: 6px 8px;">SUMMA ${Ke?"(sis. ALV)":"(alv 0%)"}</th></tr></thead>
                    <tbody>${tn}</tbody>
                </table>
                <div class="totals-section">
                    <div style="width:250px">
                        ${Ke?"":`<div style="display:flex;justify-content:space-between"><span>VEROTON:</span><span>${U.totalSum.toFixed(2)} </span></div>`}
                        <div class="total-final" style="display:flex;justify-content:space-between"><span>YHTEENS:</span><span>${ht.toFixed(2)} </span></div>
                    </div>
                </div>
                <div class="footer-wrapper">
                    <div class="footer-content">
                        <div><b>Saaja:</b> ${b.nimi||""}<br><b>IBAN:</b> ${b.iban||""}</div>
                        <div style="text-align:right"><b>Viite:</b> ${nt}<br><b>Erpiv:</b> ${ct}<br><b>Summa:</b> ${ht.toFixed(2)} </div>
                    </div>
                    ${vt?`<div class="barcode-container"><svg id="barcode"></svg><div style="font-family:monospace;margin-top:5px">${vt}</div></div>`:""}
                </div>
                <script>
                    window.onload = function() {
                        if ("${vt}") JsBarcode("#barcode", "${vt}", {format: "CODE128", width: 1.5, height: 40, displayValue: false});
                        setTimeout(() => { window.print(); }, 800);
                    };
                <\/script>
            </body>
            </html>
        `),Jt.close(),setTimeout(()=>{Et.contentWindow.focus(),Et.contentWindow.print()},1e3)},at=l.reduce((U,rt)=>U+rt.totalSum,0);return m.jsxs("div",{className:"admin-section",children:[m.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),m.jsx("h2",{children:"Laskutus"}),l.length>0&&m.jsxs("div",{className:"card-box",style:{background:"linear-gradient(145deg, #1e1e1e, #252525)",border:"1px solid #4caf50",textAlign:"center",marginBottom:"20px"},children:[m.jsxs("h3",{style:{margin:0,color:"#4caf50",fontSize:"1.5rem"},children:["Laskutusta yhteens (ALV 0%): ",at.toFixed(2)," "]}),m.jsxs("p",{style:{margin:"5px 0 0 0",fontSize:"0.85rem",color:"#aaa"},children:["Sislt ",l.length," laskuluonnosta valitulta kuukaudelta."]})]}),m.jsxs("div",{className:"card-box",style:{display:"flex",gap:"20px",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between"},children:[m.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[m.jsx("label",{children:"Valitse kuukausi:"}),m.jsx("input",{type:"month",value:i,onChange:U=>r(U.target.value),style:{fontSize:"1.1rem"}}),m.jsx("button",{onClick:B,className:"save-btn",disabled:f,children:f?"Haetaan...":" Hae laskutettavat"})]}),m.jsx("button",{onClick:()=>z(!0),className:"save-btn",style:{background:"#ff9800",border:"1px solid #ffb74d"},children:" Luo tyhj lasku"}),m.jsx("div",{style:{width:"100%",textAlign:"right"},children:m.jsx("button",{onClick:Ut,className:"back-btn",style:{borderColor:"#d32f2f",color:"#d32f2f",fontSize:"0.8rem"},children:" Nollaa KK-laskutustieto"})}),l.length>0&&m.jsx("button",{onClick:M,className:"save-btn",style:{background:"#e65100",width:"100%"},children:" Hyvksy & Merkitse laskutetuksi"})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[l.map((U,rt)=>m.jsxs("div",{style:{background:"#1e1e1e",border:"1px solid #444",borderRadius:"8px",overflow:"hidden"},children:[m.jsxs("div",{style:{background:"#333",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsxs("div",{children:[m.jsx("h3",{style:{margin:0},children:U.invoiceTitle}),m.jsx("span",{style:{fontSize:"0.8em",color:"#aaa"},children:U.customerType==="b2c"?"Yksityinen (Sis. ALV)":"Yritys/Isnninti (+ ALV)"})]}),m.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[m.jsx("div",{style:{textAlign:"right"},children:m.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#4caf50"},children:[U.totalSum.toFixed(2),"  ",m.jsx("span",{style:{fontSize:"0.7rem",color:"#aaa"},children:"(ALV 0%)"})]})}),m.jsx("button",{onClick:()=>$(U),className:"icon-btn",style:{fontSize:"1.5rem"},title:"Esikatselu",children:""})]})]}),m.jsx("div",{style:{padding:"15px"},children:m.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},children:[m.jsx("thead",{children:m.jsxs("tr",{style:{borderBottom:"1px solid #555",color:"#aaa",textAlign:"left"},children:[m.jsx("th",{style:{paddingBottom:"5px"},children:"Kuvaus"}),m.jsx("th",{style:{textAlign:"right"},children:"Yhteens"})]})}),m.jsx("tbody",{children:U.rows.map((C,L)=>m.jsx("tr",{style:{borderBottom:C.type==="header"?"2px solid #444":"1px solid #2c2c2c",background:C.type==="header"?"#2c2c2c":"transparent"},children:C.type==="header"?m.jsx("td",{colSpan:"2",style:{padding:"15px 5px 5px 5px",fontWeight:"bold",color:"#2196f3",fontSize:"1rem"},children:C.text}):m.jsxs(m.Fragment,{children:[m.jsxs("td",{style:{padding:"8px 5px"},children:[C.text,m.jsx("br",{}),m.jsx("small",{style:{color:"#aaa"},children:C.details})]}),m.jsxs("td",{style:{textAlign:"right",fontWeight:"bold"},children:[C.total.toFixed(2)," "]})]})},L))})]})})]},rt)),l.length===0&&!f&&m.jsx("p",{style:{textAlign:"center",color:"#666",marginTop:"20px"},children:"Ei laskuja nkyviss."})]}),R&&m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-content",style:{maxWidth:"800px"},children:[m.jsx("h3",{children:"Uusi Lasku (Manuaalinen)"}),m.jsx("p",{style:{fontSize:"0.9rem",color:"#aaa",marginBottom:"15px"},children:"Uusi asiakas tallentuu automaattisesti rekisteriin."}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Valitse asiakas (tai kirjoita uusi nimi)"}),m.jsxs("select",{value:W.customer_id,onChange:gt,style:{marginBottom:"5px"},children:[m.jsx("option",{value:"",children:"-- LUO UUSI ASIAKAS --"}),Z.map(U=>m.jsx("option",{value:U.id,children:U.name},U.id))]}),m.jsx("input",{placeholder:"Asiakkaan nimi...",value:W.customer_name,onChange:U=>ut(rt=>({...rt,customer_name:U.target.value}))})]}),m.jsxs("div",{className:"form-group",style:{background:"#2c2c2c",padding:"10px",borderRadius:"6px",border:"1px solid #444"},children:[m.jsx("label",{style:{marginBottom:"5px"},children:"Asiakastyyppi"}),m.jsxs("div",{style:{display:"flex",gap:"20px"},children:[m.jsxs("label",{style:{cursor:"pointer",display:"flex",alignItems:"center"},children:[m.jsx("input",{type:"radio",checked:W.type==="b2c",onChange:()=>ut(U=>({...U,type:"b2c"})),style:{width:"auto",marginRight:"5px"}}),"Yksityinen (Sis. ALV)"]}),m.jsxs("label",{style:{cursor:"pointer",display:"flex",alignItems:"center"},children:[m.jsx("input",{type:"radio",checked:W.type!=="b2c",onChange:()=>ut(U=>({...U,type:"b2b"})),style:{width:"auto",marginRight:"5px"}}),"Yritys (+ ALV)"]})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Osoite"}),m.jsx("input",{value:W.address,onChange:U=>ut(rt=>({...rt,address:U.target.value})),placeholder:"Katuosoite, Postinro Ptp"})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{children:[m.jsx("label",{children:"Laskun Pivys"}),m.jsx("input",{type:"date",value:W.date,onChange:U=>Mt(U.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{children:"Maksuehto / Erpiv"}),m.jsxs("div",{style:{display:"flex",gap:"5px"},children:[m.jsxs("select",{value:W.payment_term,onChange:U=>jt(U.target.value),style:{flex:1},children:[m.jsx("option",{value:"7",children:"7 pv netto"}),m.jsx("option",{value:"14",children:"14 pv netto"}),m.jsx("option",{value:"30",children:"30 pv netto"})]}),m.jsx("input",{type:"date",value:W.due_date,onChange:U=>ut(rt=>({...rt,due_date:U.target.value}))})]})]})]}),m.jsx("label",{children:"Laskurivit (Hinnat aina ALV 0%):"}),m.jsxs("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid #444",padding:"10px",borderRadius:"6px",marginBottom:"15px"},children:[W.rows.map((U,rt)=>m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"130px 2fr 100px 100px 40px",gap:"5px",marginBottom:"8px",alignItems:"end"},children:[m.jsxs("div",{children:[m.jsx("label",{style:{fontSize:"0.7em"},children:"Pvm"}),m.jsx("input",{type:"date",value:U.date,onChange:C=>N(rt,"date",C.target.value),style:{fontSize:"0.9rem"}})]}),m.jsxs("div",{children:[m.jsx("label",{style:{fontSize:"0.7em"},children:"Kuvaus"}),m.jsx("input",{placeholder:"Mit tehtiin...",value:U.text,onChange:C=>N(rt,"text",C.target.value),style:{fontSize:"0.9rem"}})]}),m.jsxs("div",{children:[m.jsx("label",{style:{fontSize:"0.7em"},children:"Ty  (0%)"}),m.jsx("input",{type:"number",placeholder:"0.00",value:U.price_work,onChange:C=>N(rt,"price_work",C.target.value),style:{textAlign:"right",fontSize:"0.9rem"}})]}),m.jsxs("div",{children:[m.jsx("label",{style:{fontSize:"0.7em"},children:"Tarvike  (0%)"}),m.jsx("input",{type:"number",placeholder:"0.00",value:U.price_material,onChange:C=>N(rt,"price_material",C.target.value),style:{textAlign:"right",fontSize:"0.9rem"}})]}),m.jsx("button",{onClick:()=>S(rt),style:{background:"none",border:"none",color:"#ff5252",cursor:"pointer",padding:"10px"},children:""})]},rt)),m.jsx("button",{onClick:Ct,className:"back-btn",style:{width:"100%",marginTop:"5px",borderStyle:"dashed"},children:"+ Lis rivi"})]}),m.jsxs("div",{style:{textAlign:"right",fontWeight:"bold",fontSize:"1.2rem",marginBottom:"20px"},children:["Yhteens (sis. ALV ",b.alv_pros||25.5,"%): ",(W.rows.reduce((U,rt)=>U+A(rt),0)*(1+parseFloat(b.alv_pros||25.5)/100)).toFixed(2)," "]}),m.jsxs("div",{style:{display:"flex",gap:"10px"},children:[m.jsx("button",{onClick:O,className:"save-btn",disabled:f,children:" Tallenna & Luo Lasku"}),m.jsx("button",{onClick:()=>z(!1),className:"back-btn",children:"Peruuta"})]})]})})]})},y2=({onBack:s,showNotification:t,requestConfirm:i})=>{const[r,l]=dt.useState([]),[u,f]=dt.useState(!0),[p,y]=dt.useState({}),[_,b]=dt.useState(!1),[x,R]=dt.useState(""),[z,Z]=dt.useState(""),[J,Q]=dt.useState({start:"",end:""}),[W,ut]=dt.useState(null);dt.useEffect(()=>{(async()=>{const M=await nh(he(wt,"settings","company_profile"));M.exists()&&y(M.data())})()},[]),dt.useEffect(()=>{f(!0);const B=si(Te(wt,"invoices"),Yh("created_at","desc"),XR(100)),M=Fi(B,$=>{const at=$.docs.map(U=>({id:U.id,...U.data()}));l(at),f(!1)},$=>{console.error("Virhe:",$),f(!1)});return()=>M()},[]);const gt=[...new Set(r.map(B=>B.customer_name))].sort(),Mt=B=>{const M=String(B).replace(/\D/g,""),$=[7,3,1];let at=0;for(let rt=0;rt<M.length;rt++)at+=parseInt(M.charAt(M.length-1-rt))*$[rt%3];const U=(10-at%10)%10;return M+U},jt=B=>{if(B.due_date)return new Date(B.due_date).toLocaleDateString("fi-FI");const M=new Date(B.date);return M.setDate(M.getDate()+14),M.toLocaleDateString("fi-FI")},Ct=(B,M,$,at)=>{if(!B||!M||!$||!at)return"";const U=B.replace(/[^0-9]/g,"");if(U.length<16)return"";const rt=U.slice(0,16),C=parseFloat(M).toFixed(2);let[L,nt]=C.split(".");L=L.padStart(6,"0").slice(-6);const ot=L+nt,ct=$.replace(/[^0-9]/g,"").padStart(20,"0"),ht=new Date(at);ht.setDate(ht.getDate()+14);const vt=ht.getFullYear().toString().slice(-2),At=(ht.getMonth()+1).toString().padStart(2,"0"),Et=ht.getDate().toString().padStart(2,"0"),Jt=vt+At+Et;return`4${rt}${ot}000${ct}${Jt}`},N=B=>{i("Merkitnk lasku lhetetyksi? Tmn jlkeen muokkaus lukittuu.",async()=>{await Hi(he(wt,"invoices",B.id),{status:"sent"}),t("Merkitty lhetetyksi ja lukittu.","success")})},S=B=>{i("Merkitnk lasku maksetuksi?",async()=>{await Hi(he(wt,"invoices",B.id),{status:"paid"}),t("Merkitty maksetuksi.","success")})},A=B=>{i("Mittidnk lasku?",async()=>{await Hi(he(wt,"invoices",B.id),{status:"cancelled"}),t("Lasku mittity.","info")})},O=async()=>{if(!W)return;const B=W.rows.reduce((M,$)=>M+($.type==="row"?parseFloat($.total||0):0),0);await Hi(he(wt,"invoices",W.id),{customer_name:W.customer_name,billing_address:W.billing_address,rows:W.rows,total_sum:B}),ut(null),t("Lasku pivitetty!","success")},k=B=>{i(`VAROITUS: Haluatko poistaa laskun kokonaan?

- Lasku poistuu arkistosta.
- Tyt palautuvat "tekemttmiksi".`,async()=>{f(!0);try{const M=Pm(wt),$=si(Te(wt,"work_entries"),zn("invoice_id","==",B.id));(await lr($)).docs.forEach(U=>{const rt=U.data();rt.origin==="contract_generated"||rt.origin==="fixed_fee"?M.delete(U.ref):M.update(U.ref,{invoiced:!1,invoice_id:null})}),M.delete(he(wt,"invoices",B.id)),await M.commit(),t("Lasku poistettu ja tyt palautettu.","success")}catch(M){t("Virhe: "+M.message,"error")}finally{f(!1)}})},j=B=>{const M=B.invoice_number||"Luonnos",$=Mt(M),at=jt(B),U=new Date(B.date).toLocaleDateString("fi-FI"),rt=B.customer_type==="b2c",L=1+(p.alv_pros?parseFloat(p.alv_pros):25.5)/100,nt=Ct(p.iban,B.total_sum,$,B.date),ot=document.getElementById("printFrame");ot&&ot.remove();const ct=document.createElement("iframe");ct.id="printFrame",ct.style.position="fixed",ct.style.right="0",ct.style.bottom="0",ct.style.width="0",ct.style.height="0",ct.style.border="0",document.body.appendChild(ct);const ht=ct.contentWindow.document,vt=B.rows.map(At=>{if(At.type==="header")return`<tr class="row-header"><td colspan="2">${At.text}</td></tr>`;let Et=rt?At.total:At.total/L;return`<tr><td>${At.text} ${At.details?`<span class="small-text">${At.details}</span>`:""}</td><td style="text-align:right">${Et.toFixed(2)} </td></tr>`}).join("");ht.open(),ht.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Lasku ${M}</title>
                <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"><\/script>
                <style>
                    @page { size: A4; margin: 10mm 15mm; }
                    body { font-family: Arial, sans-serif; font-size: 13px; color: #000; line-height: 1.3; padding: 10px; }
                    .header { display: flex; justify-content: space-between; margin-bottom: 40px; }
                    .company-name { font-size: 18px; font-weight: bold; text-transform: uppercase; }
                    .meta-box { text-align: left; width: 300px; }
                    .meta-row { display: flex; justify-content: space-between; margin-bottom: 2px; }
                    .meta-label { font-weight: bold; font-size: 11px; }
                    .recipient { margin-top: 10px; margin-bottom: 30px; border: 1px solid #aaa; padding: 15px; width: 300px; min-height: 80px;}
                    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
                    th { text-align: left; background-color: #ddd; padding: 6px 8px; border: 1px solid #999; font-size: 11px; }
                    td { padding: 6px 8px; border: 1px solid #ccc; vertical-align: top; }
                    .row-header td { background-color: #f0f0f0; font-weight: bold; border-top: 2px solid #666; }
                    .small-text { font-size: 11px; color: #444; display: block; font-style: italic; }
                    .totals-section { display: flex; justify-content: flex-end; margin-bottom: 40px; }
                    .total-final { font-size: 14px; font-weight: bold; border-top: 1px solid #000; padding-top: 5px; }
                    .footer-wrapper { border-top: 2px dashed #000; padding-top: 10px; margin-top: 50px; }
                    .footer-content { display: flex; justify-content: space-between; font-size: 12px; }
                    .barcode-container { margin-top: 20px; text-align: center; }
                    svg#barcode { width: 100%; max-width: 450px; height: 60px; }
                </style>
            </head>
            <body>
                <div class="header">
                    <div>
                        <div class="company-name">${p.nimi||""}</div>
                        <div style="font-size:12px">${p.katu||""}<br>${p.postinro||""} ${p.toimipaikka||""}</div>
                    </div>
                    <div class="meta-box">
                        <div class="meta-row"><span class="meta-label">PIVMR:</span> <span>${U}</span></div>
                        <div class="meta-row"><span class="meta-label">LASKUN NRO:</span> <span>${M}</span></div>
                        <div class="meta-row"><span class="meta-label">VIITENUMERO:</span> <span>${$}</span></div>
                        <div class="meta-row" style="margin-top:10px"><span class="meta-label">ERPIV:</span> <span>${at}</span></div>
                    </div>
                </div>
                <div class="recipient"><b>${B.customer_name}</b><br>${B.billing_address?B.billing_address.replace(",","<br>"):""}</div>
                <table>
                    <thead><tr><th>KUVAUS</th><th style="text-align:right">SUMMA</th></tr></thead>
                    <tbody>${vt}</tbody>
                </table>
                <div class="totals-section">
                    <div style="width:250px">
                        ${rt?"":`<div style="display:flex;justify-content:space-between"><span>VEROTON:</span><span>${(B.total_sum/L).toFixed(2)} </span></div>`}
                        <div class="total-final" style="display:flex;justify-content:space-between"><span>YHTEENS:</span><span>${B.total_sum.toFixed(2)} </span></div>
                    </div>
                </div>
                <div class="footer-wrapper">
                    <div class="footer-content">
                        <div><b>Saaja:</b> ${p.nimi||""}<br><b>IBAN:</b> ${p.iban||""}</div>
                        <div style="text-align:right"><b>Viite:</b> ${$}<br><b>Erpiv:</b> ${at}<br><b>Summa:</b> ${B.total_sum.toFixed(2)} </div>
                    </div>
                    ${nt?`<div class="barcode-container"><svg id="barcode"></svg><div style="font-family:monospace;margin-top:5px">${nt}</div></div>`:""}
                </div>
                <script>
                    window.onload = function() {
                        if ("${nt}") JsBarcode("#barcode", "${nt}", {format: "CODE128", width: 1.5, height: 40, displayValue: false});
                        setTimeout(() => { window.print(); }, 800);
                    };
                <\/script>
            </body>
            </html>
        `),ht.close()},I=B=>{const M=new Date;let $=new Date;if(B==="thisMonth")$=new Date(M.getFullYear(),M.getMonth(),1);else if(B==="prevMonth")$=new Date(M.getFullYear(),M.getMonth()-1,1),M.setDate(0);else if(B==="3kk")$.setMonth($.getMonth()-3);else if(B==="year")$.setFullYear($.getFullYear()-1);else if(B==="clear"){Q({start:"",end:""});return}const at=U=>U.toISOString().split("T")[0];Q({start:at($),end:at(M)})},Ut=r.filter(B=>{const M=x.toLowerCase(),$=!x||B.customer_name.toLowerCase().includes(M)||B.title.toLowerCase().includes(M)||B.invoice_number&&B.invoice_number.includes(M),at=!z||B.customer_name===z;let U=!0;return J.start&&J.end&&(U=B.date>=J.start&&B.date<=J.end),$&&at&&U});return m.jsxs("div",{className:"admin-section",children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[m.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),m.jsx("h2",{style:{margin:0},children:"Laskuarkisto"})]}),m.jsxs("div",{className:"card-box",style:{padding:"15px"},children:[m.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[m.jsxs("div",{style:{flex:1,position:"relative",display:"flex",alignItems:"center",background:"#2c2c2c",borderRadius:"6px",padding:"8px 12px",border:"1px solid #444"},children:[m.jsx("span",{style:{fontSize:"1.1rem",marginRight:"10px"},children:""}),m.jsx("input",{placeholder:"Hae asiakasta tai laskun numeroa...",value:x,onChange:B=>R(B.target.value),style:{border:"none",background:"transparent",color:"white",fontSize:"1rem",outline:"none",width:"100%"}}),x&&m.jsx("button",{onClick:()=>R(""),style:{background:"none",border:"none",color:"#888",cursor:"pointer",fontSize:"1.1rem"},children:""})]}),m.jsx("button",{onClick:()=>b(!_),className:"save-btn",style:{background:_?"#1976d2":"#333",minWidth:"120px"},children:_?"Piilota ":"Suodattimet "})]}),_&&m.jsxs("div",{style:{marginTop:"15px",borderTop:"1px solid #444",paddingTop:"15px",display:"flex",flexDirection:"column",gap:"15px"},children:[m.jsxs("div",{children:[m.jsx("label",{style:{marginBottom:"5px",color:"#aaa"},children:"Aikajakso:"}),m.jsxs("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:[m.jsx("button",{className:"back-btn",onClick:()=>I("thisMonth"),children:"Tm kuu"}),m.jsx("button",{className:"back-btn",onClick:()=>I("prevMonth"),children:"Edellinen"}),m.jsx("button",{className:"back-btn",onClick:()=>I("3kk"),children:"3 kk"}),m.jsx("button",{className:"back-btn",onClick:()=>I("year"),children:"Vuosi"}),m.jsx("button",{className:"back-btn",onClick:()=>I("clear"),style:{color:"#ff5252",borderColor:"#ff5252"},children:"Tyhjenn"})]})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{children:[m.jsx("label",{children:"Tarkka aikavli:"}),m.jsxs("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[m.jsx("input",{type:"date",value:J.start,onChange:B=>Q({...J,start:B.target.value})}),m.jsx("span",{children:"-"}),m.jsx("input",{type:"date",value:J.end,onChange:B=>Q({...J,end:B.target.value})})]})]}),m.jsxs("div",{children:[m.jsx("label",{children:"Asiakas:"}),m.jsxs("select",{value:z,onChange:B=>Z(B.target.value),children:[m.jsx("option",{value:"",children:"-- Kaikki --"}),gt.map(B=>m.jsx("option",{value:B,children:B},B))]})]})]})]})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[u&&m.jsx("p",{style:{textAlign:"center",color:"#aaa"},children:"Ladataan laskuja..."}),Ut.map(B=>m.jsxs("div",{className:"card-box",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 15px",opacity:B.status==="cancelled"?.6:1},children:[m.jsxs("div",{style:{flex:1},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",flexWrap:"wrap"},children:[m.jsxs("span",{style:{fontWeight:"bold"},children:[B.customer_name," (#",B.invoice_number||"---",")"]}),B.status==="open"&&m.jsx("span",{style:{background:"#ff9800",color:"black",padding:"2px 5px",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"bold"},children:"AVOIN / LUONNOS"}),B.status==="sent"&&m.jsx("span",{style:{background:"#2196f3",color:"white",padding:"2px 5px",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"bold"},children:"LHETETTY"}),B.status==="paid"&&m.jsx("span",{style:{background:"#4caf50",color:"white",padding:"2px 5px",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"bold"},children:"MAKSETTU"})]}),m.jsxs("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:[B.date,"  ",B.total_sum.toFixed(2)," "]})]}),m.jsxs("div",{style:{display:"flex",gap:"5px"},children:[m.jsx("button",{onClick:()=>j(B),className:"icon-btn",children:""}),B.status==="open"&&m.jsx("button",{onClick:()=>ut(B),className:"icon-btn",style:{color:"#ff9800"},title:"Muokkaa",children:""}),B.status==="open"&&m.jsx("button",{onClick:()=>N(B),className:"icon-btn",style:{color:"#2196f3"},title:"Merkitse lhetetyksi",children:""}),B.status==="sent"&&m.jsx("button",{onClick:()=>S(B),className:"icon-btn",style:{color:"#4caf50"},title:"Merkitse maksetuksi",children:""}),B.status==="open"&&m.jsx("button",{onClick:()=>A(B),className:"icon-btn",style:{color:"#d32f2f"},title:"Mitti",children:""}),m.jsx("button",{onClick:()=>k(B),className:"icon-btn",style:{color:"#ff5252"},title:"Poista",children:""})]})]},B.id))]}),W&&m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-content",style:{maxWidth:"600px"},children:[m.jsxs("h3",{children:["Muokkaa laskua #",W.invoice_number]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Asiakas"}),m.jsx("input",{value:W.customer_name,onChange:B=>ut({...W,customer_name:B.target.value})})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Osoite"}),m.jsx("input",{value:W.billing_address,onChange:B=>ut({...W,billing_address:B.target.value})})]}),m.jsx("label",{children:"Rivit (Hinnat sis. ALV):"}),m.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid #444",padding:"10px",borderRadius:"6px",marginBottom:"15px"},children:W.rows.map((B,M)=>B.type==="row"&&m.jsxs("div",{style:{display:"flex",gap:"5px",marginBottom:"5px",flexDirection:"column",borderBottom:"1px solid #333",paddingBottom:"10px"},children:[m.jsx("input",{value:B.text,onChange:$=>{const at=[...W.rows];at[M].text=$.target.value,ut({...W,rows:at})},style:{flex:3}}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("label",{style:{fontSize:"0.8rem"},children:"Summa ():"}),m.jsx("input",{type:"number",value:B.total.toFixed(2),onChange:$=>{const at=[...W.rows];at[M].total=parseFloat($.target.value)||0,ut({...W,rows:at})},style:{width:"100px",textAlign:"right"}})]})]},M))}),m.jsxs("div",{style:{display:"flex",gap:"10px"},children:[m.jsx("button",{onClick:O,className:"save-btn",children:"Tallenna"}),m.jsx("button",{onClick:()=>ut(null),className:"back-btn",children:"Peruuta"})]})]})})]})},_2=({onBack:s})=>m.jsxs("div",{className:"admin-section",children:[m.jsx("button",{onClick:s,className:"back-btn",style:{marginBottom:"20px"},children:" Takaisin"}),m.jsxs("div",{className:"card-box",style:{textAlign:"left",lineHeight:"1.6"},children:[m.jsx("h1",{style:{textAlign:"center",color:"#2196f3"},children:" SOVELLUKSEN KYTTOPAS "}),m.jsx("p",{style:{textAlign:"center",fontStyle:"italic",color:"#aaa"},children:"Krkln Notar Oy - Versio 1.0"}),m.jsx("hr",{style:{borderColor:"#444",margin:"20px 0"}}),m.jsx("h2",{style:{color:"#4caf50"},children:"1. ASENNUS PUHELIMEEN (PWA)"}),m.jsx("p",{children:'Sovellusta kytetn suoraan selaimen kautta, mutta se on suunniteltu asennettavaksi "sovelluskuvakkeeksi" puhelimen kotinytlle.'}),m.jsxs("ul",{children:[m.jsxs("li",{children:[m.jsx("b",{children:"Android (Chrome):"}),m.jsx("br",{}),"1. Avaa sovellus Chromella.",m.jsx("br",{}),"2. Paina selaimen oikeasta ylkulmasta kolmea pistett.",m.jsx("br",{}),"3. Valitse ",m.jsx("b",{children:'"Asenna sovellus"'})," tai ",m.jsx("b",{children:'"Lis aloitusnyttn"'}),"."]}),m.jsxs("li",{children:[m.jsx("b",{children:"iPhone (Safari):"}),m.jsx("br",{}),"1. Avaa sovellus Safarilla.",m.jsx("br",{}),'2. Paina alareunan "Jaa"-painiketta (neli ja nuoli yls).',m.jsx("br",{}),"3. Rullaa valikkoa alaspin ja valitse ",m.jsx("b",{children:'"Lis kotivalikkoon"'}),"."]}),m.jsxs("li",{children:[m.jsx("b",{children:"Hyty:"})," Nin sovellus toimii ilman selaimen osoitepalkkeja ja on aina yhden painalluksen pss."]})]}),m.jsx("h2",{style:{color:"#4caf50"},children:"2. TYT-NKYM (KENTTTY)"}),m.jsx("p",{children:"Tm on kentttyntekijn pnkym. Joka kerta kun ty suoritetaan, se kuitataan tll reaaliajassa."}),m.jsxs("ul",{children:[m.jsxs("li",{children:[m.jsx("b",{children:"Tytehtvn valinta:"})," Valitse suoritettu ty (esim. Auraus tai Hiekoitus). Tehtvt nkyvt omina vrillisin painikkeinaan."]}),m.jsxs("li",{children:[m.jsx("b",{children:"Massakirjaus (Checkbox):"}),' Net listan vain niist kohteista, joilla on kyseinen ty sopimuksessaan. Valitse tehdyt kohteet ja paina "Tallenna valinnat".']}),m.jsxs("li",{children:[m.jsx("b",{children:"Mrperusteinen (kg):"})," Esimerkiksi hiekoituksessa sytetn kytetty mr kiloina suoraan kohteen kohdalle."]}),m.jsxs("li",{children:[m.jsx("b",{children:"Tsmkirjaus (Listyt & Liitetyt):"})," Jos tyt ei ole vakiosopimuksessa, valitse asiakas ja kohde, kirjoita selite ja mrittele hinta (Ty ja Tarvikkeet erikseen ALV 0%)."]}),m.jsxs("li",{children:[m.jsx("b",{children:"Selaa & Muokkaa:"})," Alareunan painikkeesta pset nkemn omat kirjauksesi. Voit korjata virheit tai poistaa turhia kirjauksia niin kauan kuin niit ei ole viel laskutettu."]})]}),m.jsx("h2",{style:{color:"#4caf50"},children:"3. TOIMISTON OHJAUSPANEELI"}),m.jsx("h3",{children:"A. Asiakasrekisteri"}),m.jsxs("ul",{children:[m.jsxs("li",{children:[m.jsx("b",{children:"Asiakaskortti:"})," Hallinnoi yhteystietoja, laskutusosoitetta ja maksuehtoa (7pv, 14pv, 30pv tai kiinte erpiv)."]}),m.jsxs("li",{children:[m.jsx("b",{children:"Kohteet ja ryhmt:"})," Voit luoda asiakkaalle ryhmi (esim. eri taloyhtit isnnitsijn alla) ja list niihin kohteita (osoitteita)."]}),m.jsxs("li",{children:[m.jsx("b",{children:"Hinnoittelun hierarkia:"})," Sovellus tarkistaa hinnan ensin kohteelta. Jos kohteelle ei ole asetettu omaa hintaa, kytetn asiakkaan oletushinnastoa."]})]}),m.jsx("h3",{children:"B. Yrityksen Asetukset"}),m.jsxs("ul",{children:[m.jsxs("li",{children:[m.jsx("b",{children:"Tiedot:"})," Mrittele IBAN, Y-tunnus ja oletus-ALV% (esim. 25.5), joka vaikuttaa laskulaskentaan."]}),m.jsxs("li",{children:[m.jsx("b",{children:"Tytehtvien hallinta:"})," Voit luoda uusia tehtvi ja mritt niiden tyypin (Checkbox, Kerta, KK-sopimus, kg tai Tuntity)."]})]}),m.jsx("h3",{children:"C. Laskutus (Automaatio)"}),m.jsxs("ul",{children:[m.jsxs("li",{children:[m.jsx("b",{children:"Generointi:"}),' Valitse kuukausi ja paina "Hae laskutettavat". Sovellus ker kaikki kyseisen kuukauden kirjaukset ja yhdist ne asiakaskohtaisiksi laskuiksi.']}),m.jsxs("li",{children:[m.jsx("b",{children:"KK-sopimukset:"})," Sovellus huomioi automaattisesti kaikki kiintehintaiset kuukausisopimukset, vaikka tykirjausta ei olisi tehty."]}),m.jsxs("li",{children:[m.jsx("b",{children:"Hyvksynt:"}),' "Hyvksy & Merkitse" siirt laskut arkistoon, lukitsee tykirjaukset laskutetuiksi ja kasvattaa laskunumerointia.']})]}),m.jsx("h3",{children:"D. Pikalasku (Manuaalinen)"}),m.jsx("p",{children:"Kytetn erillisten laskujen tekoon ilman kenttkirjauksia."}),m.jsxs("ul",{children:[m.jsxs("li",{children:[m.jsx("b",{children:"Asiakkaan luonti:"})," Jos kirjoitat uuden nimen pikalaskuun, jrjestelm tallentaa sen automaattisesti asiakasrekisteriin myhemp kytt varten."]}),m.jsxs("li",{children:[m.jsx("b",{children:"ALV-ksittely:"})," Syt hinnat aina ALV 0%. Sovellus laskee loppusumman verollisena yrityksen asetusten mukaan."]}),m.jsxs("li",{children:[m.jsx("b",{children:"Maksuehdot:"})," Pikalaskulle voi valita laskukohtaisen maksuehdon ja erpivn."]})]}),m.jsx("h2",{style:{color:"#4caf50"},children:"4. LASKUARKISTO JA LUKITUS"}),m.jsxs("ul",{children:[m.jsxs("li",{children:[m.jsx("b",{children:"Tilat:"}),m.jsx("br",{}),"-  ",m.jsx("b",{children:"Avoin/Luonnos:"})," Laskua voi viel muokata () tai poistaa kokonaan.",m.jsx("br",{}),"-  ",m.jsx("b",{children:"Lhetetty ():"})," Lukitsee laskun sislln. Merkitse lasku lhetetyksi, kun olet toimittanut sen asiakkaalle.",m.jsx("br",{}),"-  ",m.jsx("b",{children:"Maksettu ():"})," Kuittaa laskun hoidetuksi."]}),m.jsxs("li",{children:[m.jsx("b",{children:"Tulostus ():"})," Luo virallisen A4-laskun esikatselun, joka sislt viivakoodin, viitenumeron ja eritellyt rivit."]})]}),m.jsx("h2",{style:{color:"#4caf50"},children:"5. TIETOTURVA"}),m.jsx("p",{children:"Sovellus vaatii kirjautumisen shkpostilla ja salasanalla. Istunto silyy laitteella, joten sisnkirjautumista ei tarvitse tehd jatkuvasti uudelleen, ellei kyttj kirjaudu ulos ohjauspaneelista."})]})]}),v2=()=>{const[s,t]=dt.useState(""),[i,r]=dt.useState(""),[l,u]=dt.useState(!1),[f,p]=dt.useState(""),y=async _=>{_.preventDefault(),p("");try{l?await WC(Kl,s,i):await ZC(Kl,s,i)}catch(b){console.error("Login error:",b),b.code==="auth/invalid-credential"?p("Vr shkposti tai salasana."):b.code==="auth/email-already-in-use"?p("Shkposti on jo kytss."):b.code==="auth/weak-password"?p("Salasanan pit olla vhintn 6 merkki."):p("Virhe: "+b.message)}};return m.jsx("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px"},children:m.jsxs("div",{className:"card-box",style:{maxWidth:"400px",width:"100%",textAlign:"center"},children:[m.jsx("h2",{style:{marginTop:0},children:l?"Luo tunnus":"Kirjaudu sisn"}),m.jsx("p",{style:{color:"#aaa",marginBottom:"20px"},children:"Krkln Notar Oy"}),m.jsxs("form",{onSubmit:y,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{style:{textAlign:"left"},children:"Shkposti"}),m.jsx("input",{type:"email",value:s,onChange:_=>t(_.target.value),required:!0,placeholder:"esim. posti@firma.fi"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{style:{textAlign:"left"},children:"Salasana"}),m.jsx("input",{type:"password",value:i,onChange:_=>r(_.target.value),required:!0,placeholder:"******"})]}),f&&m.jsx("div",{style:{backgroundColor:"rgba(211, 47, 47, 0.1)",color:"#ff5252",padding:"10px",borderRadius:"6px",marginBottom:"15px",border:"1px solid #d32f2f"},children:f}),m.jsx("button",{type:"submit",className:"save-btn",style:{width:"100%",padding:"15px"},children:l?"Rekisteridy":"Kirjaudu"})]}),m.jsx("div",{style:{marginTop:"20px",borderTop:"1px solid #444",paddingTop:"15px"},children:m.jsx("button",{onClick:()=>{u(!l),p("")},className:"back-btn",style:{border:"none",color:"#2196f3",textDecoration:"underline"},children:l?"Onko sinulla jo tunnus? Kirjaudu":"Eik tunnusta? Rekisteridy"})})]})})},E2="/notar-app/assets/logo-D7EU7HDK.jpeg",T2=["toni@kauppinen.info","tapio.sarajarvi@phnet.fi "],b2=({msg:s,type:t})=>s?m.jsxs("div",{className:`notification-toast ${t}`,children:[t==="success"?"":""," ",s]}):null,S2=({isOpen:s,message:t,onConfirm:i,onCancel:r})=>s?m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-content",style:{textAlign:"center"},children:[m.jsx("h3",{children:"Vahvistus"}),m.jsx("p",{style:{whiteSpace:"pre-wrap"},children:t}),m.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center",marginTop:"20px"},children:[m.jsx("button",{onClick:i,className:"save-btn",children:"Kyll"}),m.jsx("button",{onClick:r,className:"back-btn",children:"Peruuta"})]})]})}):null,QE=({task:s,contractData:t,onToggle:i,onPriceChange:r,isOverridden:l=!1})=>{const u=t?.active||!1,f=t?.price||"";let p="",y="0";return s.type==="kg"?p=" / kg":s.type==="hourly"?p=" / h":s.type==="fixed"?p=" (Kerta)":s.type==="fixed_monthly"?p=" / kk":(s.type==="extra"||s.type==="material")&&(p="",y="0"),m.jsxs("div",{style:{marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #333",paddingBottom:"8px",backgroundColor:l?"#2e2e10":"transparent",padding:l?"5px":"0",borderRadius:"4px"},children:[m.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",fontWeight:u?"bold":"normal",flex:1,color:"white"},children:[m.jsx("input",{type:"checkbox",className:"big-checkbox",checked:u,onChange:i}),s.label,l&&m.jsx("span",{style:{fontSize:"0.7em",color:"#ffb74d"},children:"(Kohdekohtainen)"})]}),u&&m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[m.jsx("input",{type:"number",placeholder:y,value:f,onChange:r,style:{width:"90px",padding:"8px",textAlign:"right"}}),m.jsx("span",{style:{fontSize:"0.8em",color:"#aaa"},children:p})]})]})},A2=({currentView:s,setCurrentView:t})=>{const[i,r]=dt.useState(new Date),[l,u]=dt.useState(null),[f,p]=dt.useState("Paikannetaan..."),[y,_]=dt.useState(null);dt.useEffect(()=>{const J=setInterval(()=>r(new Date),1e3);return()=>clearInterval(J)},[]),dt.useEffect(()=>{if(!navigator.geolocation){p("Ei paikannusta");return}navigator.geolocation.getCurrentPosition(async J=>{const Q=J.coords.latitude,W=J.coords.longitude;_({lat:Q.toFixed(3),lon:W.toFixed(3)});try{const gt=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${Q}&longitude=${W}&current_weather=true`)).json();u(gt.current_weather);const jt=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${Q}&lon=${W}`)).json(),Ct=jt.address.city||jt.address.town||jt.address.village||jt.address.municipality||"Tuntematon",N=jt.address.road||"";p(N?`${N}, ${Ct}`:Ct)}catch(ut){console.error("Stietojen haku eponnistui",ut),p("S ei saatavilla")}},J=>{console.error("Sijaintivirhe",J),p("Lahti (Oletus)")})},[]);const b=J=>J===void 0?"":J<=1?"":J<=3?"":J<=48?"":J<=67?"":J<=77?"":J<=82?"":J<=86?"":J<=99?"":"",R=["SU","MA","TI","KE","TO","PE","LA"][i.getDay()],z=i.toLocaleDateString("fi-FI"),Z=i.toLocaleTimeString("fi-FI",{hour:"2-digit",minute:"2-digit"}).replace(".",".");return m.jsxs("div",{className:"info-bar-container",children:[m.jsxs("div",{className:"info-left",children:[m.jsxs("div",{className:"weather-box",children:[m.jsx("span",{className:"weather-icon",children:l?b(l.weathercode):"..."}),m.jsx("span",{className:"weather-temp",children:l?`${l.temperature>0?"+":""}${l.temperature}C`:"--"})]}),m.jsxs("div",{className:"location-box",children:[m.jsx("div",{children:f}),y&&m.jsxs("div",{className:"coords",children:["N ",y.lat," E ",y.lon]})]})]}),m.jsxs("div",{className:"info-center",children:[m.jsx("button",{className:`nav-btn ${s==="tyot"||s==="log"?"active":""}`,onClick:()=>t("tyot"),children:" Tyt"}),m.jsx("button",{className:`nav-btn ${s!=="tyot"&&s!=="log"?"active":""}`,onClick:()=>t("admin"),children:" Toimisto"})]}),m.jsx("div",{className:"info-right",children:m.jsxs("div",{className:"time-box",children:[m.jsx("div",{className:"clock-time",children:Z}),m.jsxs("div",{className:"clock-date",children:[R," ",z]})]})})]})},w2=({onBack:s,showNotification:t,requestConfirm:i})=>{const[r,l]=dt.useState([]),[u,f]=dt.useState(""),[p,y]=dt.useState(null);dt.useEffect(()=>{const R=si(Te(wt,"work_entries"),zn("invoiced","==",!1)),z=Fi(R,Z=>{const J=Z.docs.map(Q=>({id:Q.id,...Q.data()}));J.sort((Q,W)=>Q.date<W.date?1:-1),l(J)});return()=>z()},[]);const _=R=>{i("Poistetaanko tm kirjaus pysyvsti?",async()=>{await Lm(he(wt,"work_entries",R)),t("Kirjaus poistettu","success")})},b=async()=>{if(p)try{await Hi(he(wt,"work_entries",p.id),{date:p.date,description:p.description||"",value:p.value||!0,price_work:p.price_work||"0",price_material:p.price_material||"0"}),t("Muutokset tallennettu!","success"),y(null)}catch(R){t("Virhe: "+R.message,"error")}},x=r.filter(R=>R.customer_name&&R.customer_name.toLowerCase().includes(u.toLowerCase())||R.property_address&&R.property_address.toLowerCase().includes(u.toLowerCase())||R.task_name&&R.task_name.toLowerCase().includes(u.toLowerCase()));return m.jsxs("div",{className:"admin-section",children:[m.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),m.jsx("h2",{children:"Tyhistoria"}),m.jsxs("div",{className:"card-box",children:[m.jsx("input",{placeholder:" Etsi...",value:u,onChange:R=>f(R.target.value),style:{marginBottom:"10px"}}),m.jsxs("p",{style:{fontSize:"0.9em",color:"#aaa"},children:["Yhteens: ",x.length," kirjausta"]})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[x.map(R=>m.jsxs("div",{style:{background:"#1e1e1e",padding:"15px",borderRadius:"8px",border:"1px solid #333",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[m.jsxs("div",{children:[m.jsxs("div",{style:{fontWeight:"bold",color:"#2196f3",fontSize:"1.1rem"},children:[R.task_name," ",m.jsxs("span",{style:{color:"white",fontSize:"0.9rem"},children:["- ",R.date]})]}),m.jsx("div",{style:{fontWeight:"bold",marginTop:"5px"},children:R.customer_name}),m.jsx("div",{style:{fontSize:"0.9rem"},children:R.property_address}),m.jsxs("div",{style:{marginTop:"5px",fontSize:"0.9rem",color:"#ccc"},children:[R.task_type==="kg"&&m.jsxs("span",{children:["Mr: ",m.jsxs("b",{children:[R.value," kg"]})," | "]}),m.jsxs("span",{children:["Hinta: ",m.jsxs("b",{children:[R.price_work," "]})]}),R.price_material>0&&m.jsxs("span",{children:[" + Tarvike ",R.price_material," "]}),R.description&&m.jsx("div",{style:{marginTop:"3px"},children:m.jsxs("i",{children:['"',R.description,'"']})})]})]}),m.jsxs("div",{style:{display:"flex",gap:"10px"},children:[m.jsx("button",{onClick:()=>y(R),className:"icon-btn edit-btn",title:"Muokkaa",children:""}),m.jsx("button",{onClick:()=>_(R.id),className:"icon-btn delete-btn",title:"Poista",children:""})]})]},R.id)),x.length===0&&m.jsx("p",{children:"Ei kirjauksia."})]}),p&&m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-content",children:[m.jsx("h3",{children:"Muokkaa kirjausta"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Pivmr"}),m.jsx("input",{type:"date",value:p.date,onChange:R=>y({...p,date:R.target.value})})]}),p.task_type==="kg"&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Mr (kg)"}),m.jsx("input",{type:"number",value:p.value,onChange:R=>y({...p,value:R.target.value})})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{children:[m.jsx("label",{children:"Ty Hinta ()"}),m.jsx("input",{type:"number",value:p.price_work,onChange:R=>y({...p,price_work:R.target.value})})]}),p.task_type==="material"&&m.jsxs("div",{children:[m.jsx("label",{children:"Tarvike ()"}),m.jsx("input",{type:"number",value:p.price_material,onChange:R=>y({...p,price_material:R.target.value})})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Selite"}),m.jsx("input",{value:p.description||"",onChange:R=>y({...p,description:R.target.value}),placeholder:"Listiedot..."})]}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:b,className:"save-btn",children:"Tallenna"}),m.jsx("button",{onClick:()=>y(null),className:"back-btn",children:"Peruuta"})]})]})})]})},x2=({availableTasks:s,onOpenLog:t,showNotification:i})=>{const[r,l]=dt.useState(null),u=s.filter(B=>B.showInWorkView!==!1),[f,p]=dt.useState(new Date().toISOString().slice(0,10)),[y,_]=dt.useState([]),[b,x]=dt.useState({}),[R,z]=dt.useState("all"),[Z,J]=dt.useState([]),[Q,W]=dt.useState(""),[ut,gt]=dt.useState(""),[Mt,jt]=dt.useState([]),[Ct,N]=dt.useState(""),[S,A]=dt.useState(""),[O,k]=dt.useState("");dt.useEffect(()=>{if(!r)return;if(["checkbox","fixed","kg","hourly"].includes(r.type))Fi(Te(wt,"customers"),M=>{const $=M.docs.map(at=>({id:at.id,...at.data()}));Fi(Te(wt,"properties"),at=>{const U=at.docs.map(L=>({id:L.id,...L.data()}));let rt=[];U.forEach(L=>{const nt=$.find(vt=>vt.id===L.customer_id);if(!nt)return;const ot=L.contracts?.[r.id],ct=nt.contracts?.[r.id];if(ot?.active||ct?.active){const vt=ot?.active?ot.price:ct?.price||"0";rt.push({id:L.id,type:"property",name:L.address,group:L.group||"Ei ryhm",customerName:nt.name,customerType:nt.type,parentId:nt.id,contractPrice:vt})}}),$.forEach(L=>{const nt=L.contracts?.[r.id];L.type==="b2c"&&nt?.active&&rt.push({id:L.id,type:"customer",name:L.street?`${L.name} (${L.street})`:L.name,group:"Yksityiset",customerName:L.name,customerType:"b2c",parentId:L.id,contractPrice:nt.price||"0"})}),_(rt);const C={};rt.forEach(L=>C[L.id]=r.type==="kg"?"":!0),x(C)})});else{const M=si(Te(wt,"customers"),Yh("name"));Fi(M,$=>J($.docs.map(at=>({id:at.id,...at.data()}))))}},[r]),dt.useEffect(()=>{if(Q){const B=si(Te(wt,"properties"),zn("customer_id","==",Q));Fi(B,M=>jt(M.docs.map($=>({id:$.id,...$.data()}))))}},[Q]);const j=async()=>{const B=[];for(const[M,$]of Object.entries(b)){if(!$)continue;const at=y.find(U=>U.id===M);at&&B.push(So(Te(wt,"work_entries"),{date:f,task_id:r.id,task_name:r.label,task_type:r.type,property_id:M,property_address:at.name,customer_name:at.customerName,group:at.group,customer_id:at.parentId,value:$,price_work:at.contractPrice,invoiced:!1,created_at:new Date}))}await Promise.all(B),i(`Tallennettu ${B.length} kirjausta!`,"success"),l(null)},I=async()=>{if(!Q||!S)return i("Tyt pakolliset kentt!","error");const B=Z.find($=>$.id===Q);let M={id:Q,address:B.street||B.name,group:"Yksityinen"};if(ut){const $=Mt.find(at=>at.id===ut);$&&(M={id:$.id,address:$.address,group:$.group})}else if(B.type!=="b2c")return i("Valitse kohde listasta!","error");await So(Te(wt,"work_entries"),{date:f,task_id:r.id,task_name:r.label,task_type:r.type,property_id:M.id,property_address:M.address,group:M.group,customer_id:Q,customer_name:B.name,description:Ct,price_work:S,price_material:O,invoiced:!1,created_at:new Date}),i("Kirjaus tallennettu!","success"),l(null),N(""),A(""),k("")};if(!r)return m.jsxs("div",{children:[m.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"Valitse tytehtv:"}),m.jsx("div",{className:"button-grid",children:u.map(B=>m.jsx("button",{className:"work-button",style:{backgroundColor:B.color||"#2196f3"},onClick:()=>l(B),children:B.label},B.id))}),m.jsx("div",{style:{textAlign:"center",marginTop:"30px"},children:m.jsx("button",{onClick:t,className:"back-btn",style:{padding:"15px",width:"100%",fontSize:"1rem"},children:" Selaa & Muokkaa kirjauksia "})})]});const Ut=["checkbox","fixed","kg","hourly"].includes(r.type);return m.jsxs("div",{className:"admin-section",children:[m.jsx("button",{onClick:()=>l(null),className:"back-btn",style:{marginBottom:"20px"},children:" Takaisin"}),m.jsx("h2",{style:{borderBottom:`4px solid ${r.color}`,display:"inline-block",paddingBottom:"5px"},children:r.label}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Pivmr:"}),m.jsx("input",{type:"date",value:f,onChange:B=>p(B.target.value),style:{maxWidth:"200px"}})]}),Ut&&m.jsxs("div",{children:[m.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",flexWrap:"wrap"},children:[m.jsx("button",{className:`nav-btn ${R==="isannointi"?"active":""}`,onClick:()=>z("isannointi"),style:{flex:1,fontSize:"0.8rem"},children:" Isnn."}),m.jsx("button",{className:`nav-btn ${R==="b2b"?"active":""}`,onClick:()=>z("b2b"),style:{flex:1,fontSize:"0.8rem"},children:" Yritys"}),m.jsx("button",{className:`nav-btn ${R==="b2c"?"active":""}`,onClick:()=>z("b2c"),style:{flex:1,fontSize:"0.8rem"},children:" Yksity."}),m.jsx("button",{className:`nav-btn ${R==="all"?"active":""}`,onClick:()=>z("all"),style:{flex:1,fontSize:"0.8rem"},children:"Kaikki"})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[Array.from(new Set(y.filter(B=>R==="all"||B.customerType===R).map(B=>`${B.customerName}::${B.group}`))).map(B=>{const[M,$]=B.split("::"),at=y.filter(U=>U.customerName===M&&U.group===$);return m.jsxs("div",{className:"card-box",style:{padding:"10px"},children:[m.jsx("h4",{style:{margin:"0 0 5px 0",color:"#fff"},children:M}),m.jsx("div",{style:{fontSize:"0.9em",color:"#2196f3",marginBottom:"10px",fontWeight:"bold"},children:$}),at.map(U=>m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #333",alignItems:"center"},children:[m.jsx("span",{children:U.name}),r.type==="kg"?m.jsx("input",{type:"number",placeholder:"kg",value:b[U.id]||"",onChange:rt=>x({...b,[U.id]:rt.target.value}),style:{width:"80px",padding:"5px"}}):m.jsx("input",{type:"checkbox",className:"big-checkbox",checked:!!b[U.id],onChange:rt=>x({...b,[U.id]:rt.target.checked})})]},U.id))]},B)}),y.length===0&&m.jsx("p",{children:"Ei kohteita."})]}),m.jsx("button",{onClick:j,className:"save-btn",style:{width:"100%",marginTop:"20px",padding:"15px"},children:"Tallenna Valinnat "})]}),!Ut&&m.jsxs("div",{className:"card-box",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Asiakas:"}),m.jsxs("select",{value:Q,onChange:B=>{W(B.target.value),gt("")},children:[m.jsx("option",{value:"",children:"-- Valitse --"}),Z.map(B=>m.jsx("option",{value:B.id,children:B.name},B.id))]})]}),(Mt.length>0||Q&&Z.find(B=>B.id===Q)?.type!=="b2c")&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Kohde:"}),m.jsxs("select",{value:ut,onChange:B=>gt(B.target.value),children:[m.jsx("option",{value:"",children:"-- Valitse --"}),Mt.map(B=>m.jsx("option",{value:B.id,children:B.address},B.id))]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Selite:"}),m.jsx("input",{value:Ct,onChange:B=>N(B.target.value),placeholder:"Mit tehtiin..."})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{children:[m.jsx("label",{children:"Ty ()"}),m.jsx("input",{type:"number",value:S,onChange:B=>A(B.target.value)})]}),r.type==="material"&&m.jsxs("div",{children:[m.jsx("label",{children:"Tarvike ()"}),m.jsx("input",{type:"number",value:O,onChange:B=>k(B.target.value)})]})]}),m.jsx("button",{onClick:I,className:"save-btn",style:{width:"100%",marginTop:"20px"},children:"Tallenna Kirjaus "})]})]})},R2=({onBack:s,showNotification:t,requestConfirm:i,user:r})=>{const[l,u]=dt.useState({nimi:"",y_tunnus:"",alv_pros:"25.5",katu:"",postinro:"",toimipaikka:"",email:"",puhelin:"",iban:"",invoice_start_number:"1000",tasks:[]}),[f,p]=dt.useState(!1),[y,_]=dt.useState(null),[b,x]=dt.useState(""),[R,z]=dt.useState("checkbox"),[Z,J]=dt.useState("#2196f3"),[Q,W]=dt.useState(!0),[ut,gt]=dt.useState(!1);dt.useEffect(()=>{const A=Fi(he(wt,"settings","company_profile"),O=>{O.exists()&&u({...O.data(),tasks:O.data().tasks||[]})});return()=>A()},[]);const Mt=async()=>{if(!b)return t("Nimi puuttuu!","error");if(l.tasks.some(k=>k.color===Z&&k.id!==y))return t("Vri kytss!","error");let A=[...l.tasks];const O={label:b,type:R,color:Z,showInWorkView:Q};y?A=A.map(k=>k.id===y?{...k,...O}:k):A.push({id:b.toLowerCase().replace(/[^a-z0-9]/g,"_")+"_"+Date.now(),...O}),await cm(he(wt,"settings","company_profile"),{...l,tasks:A}),p(!1),t("Tehtv tallennettu!","success")},jt=A=>i("Poistetaanko tehtv?",async()=>await cm(he(wt,"settings","company_profile"),{...l,tasks:l.tasks.filter(O=>O.id!==A)})),Ct=async()=>{await cm(he(wt,"settings","company_profile"),l),t("Tiedot tallennettu!","success")},N=A=>{_(A.id),x(A.label),z(A.type||"checkbox"),J(A.color||"#2196f3"),W(A.showInWorkView!==!1),p(!0)},S=async()=>{if(window.confirm("Ladataanko koko tietokanta (JSON)? Tm voi kest hetken.")){gt(!0);try{const A={generated_at:new Date().toISOString(),collections:{}},O=["customers","properties","work_entries","invoices","settings"];for(const B of O){const M=si(Te(wt,B)),$=await lr(M);A.collections[B]=$.docs.map(at=>({id:at.id,...at.data()}))}const k=JSON.stringify(A,null,2),j=new Blob([k],{type:"application/json"}),I=URL.createObjectURL(j),Ut=document.createElement("a");Ut.href=I,Ut.download=`NOTAR_BACKUP_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(Ut),Ut.click(),document.body.removeChild(Ut),t("Varmuuskopio ladattu onnistuneesti! ","success")}catch(A){console.error(A),t("Virhe varmuuskopioinnissa: "+A.message,"error")}finally{gt(!1)}}};return m.jsxs("div",{className:"admin-section",children:[m.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),m.jsx("h2",{children:"Yrityksen Asetukset"}),m.jsxs("div",{className:"card-box",children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[m.jsx("h3",{children:"1. Tytehtvt"}),m.jsx("button",{onClick:()=>{_(null),x(""),J("#2196f3"),p(!0)},className:"save-btn",children:"+ Lis"})]}),m.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:l.tasks.map(A=>m.jsxs("div",{className:"task-pill",style:{borderLeft:`5px solid ${A.color}`,opacity:A.showInWorkView===!1?.6:1},children:[m.jsxs("span",{style:{flex:1},children:[m.jsx("strong",{children:A.label})," ",m.jsxs("small",{children:["(",A.type==="fixed_monthly"?"KK-sopimus":A.type,")"]})]}),m.jsxs("div",{style:{display:"flex",gap:"5px"},children:[m.jsx("button",{onClick:()=>N(A),className:"icon-btn edit-btn",title:"Muokkaa",children:""}),m.jsx("button",{onClick:()=>jt(A.id),className:"icon-btn delete-btn",title:"Poista",children:""})]})]},A.id))})]}),m.jsxs("div",{className:"card-box",children:[m.jsx("h3",{children:"2. Yrityksen tiedot"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Nimi"}),m.jsx("input",{value:l.nimi,onChange:A=>u({...l,nimi:A.target.value})})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{children:[m.jsx("label",{children:"Y-tunnus"}),m.jsx("input",{value:l.y_tunnus,onChange:A=>u({...l,y_tunnus:A.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{children:"ALV %"}),m.jsx("input",{value:l.alv_pros,onChange:A=>u({...l,alv_pros:A.target.value})})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Katuosoite"}),m.jsx("input",{value:l.katu,onChange:A=>u({...l,katu:A.target.value})})]}),m.jsxs("div",{className:"form-row three-col",children:[m.jsxs("div",{children:[m.jsx("label",{children:"Postinro"}),m.jsx("input",{value:l.postinro,onChange:A=>u({...l,postinro:A.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{children:"Ptp"}),m.jsx("input",{value:l.toimipaikka,onChange:A=>u({...l,toimipaikka:A.target.value})})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Puhelin"}),m.jsx("input",{value:l.puhelin,onChange:A=>u({...l,puhelin:A.target.value})})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Email"}),m.jsx("input",{value:l.email,onChange:A=>u({...l,email:A.target.value})})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{children:[m.jsx("label",{children:"IBAN"}),m.jsx("input",{value:l.iban,onChange:A=>u({...l,iban:A.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{style:{color:"#ff9800"},children:"Seuraavan laskun nro"}),m.jsx("input",{type:"number",value:l.invoice_start_number||"",onChange:A=>u({...l,invoice_start_number:A.target.value}),style:{textAlign:"center",fontWeight:"bold"}})]})]}),m.jsx("button",{className:"save-btn",onClick:Ct,children:"Tallenna"})]}),r&&r.email==="toni@kauppinen.info"&&m.jsx("div",{className:"card-box",style:{border:"1px solid #4caf50"},children:m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsxs("div",{children:[m.jsx("h3",{style:{margin:0,color:"#4caf50"},children:"3. Datan Hallinta (ADMIN)"}),m.jsx("p",{style:{fontSize:"0.85rem",color:"#aaa",margin:"5px 0 0 0"},children:"Lataa kaikki tiedot koneelle (JSON)."})]}),m.jsx("button",{onClick:S,className:"save-btn",disabled:ut,style:{background:"#2e7d32"},children:ut?"Ladataan...":" Lataa Varmuuskopio"})]})}),f&&m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-content",children:[m.jsx("h3",{children:y?"Muokkaa":"Lis"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Nimi"}),m.jsx("input",{value:b,onChange:A=>x(A.target.value)})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{children:[m.jsx("label",{children:"Tyyppi"}),m.jsxs("select",{value:R,onChange:A=>z(A.target.value),children:[m.jsx("option",{value:"checkbox",children:"Perus (Tehty/Ei)"}),m.jsx("option",{value:"fixed",children:"Kntt (Kertakorvaus)"}),m.jsx("option",{value:"fixed_monthly",children:"Kiinte KK-sopimus"}),m.jsx("option",{value:"kg",children:"Mr (kg)"}),m.jsx("option",{value:"hourly",children:"Tuntity"}),m.jsx("option",{value:"extra",children:"Listy"}),m.jsx("option",{value:"material",children:"Liitety"})]})]}),m.jsxs("div",{children:[m.jsx("label",{children:"Vri"}),m.jsx("input",{type:"color",value:Z,onChange:A=>J(A.target.value),style:{height:"45px",width:"100%"}})]})]}),m.jsx("div",{className:"form-group",children:m.jsxs("label",{style:{display:"flex",alignItems:"center"},children:[m.jsx("input",{type:"checkbox",className:"big-checkbox",checked:Q,onChange:A=>W(A.target.checked),style:{marginRight:"10px"}}),"Nyt etusivulla"]})}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:Mt,className:"save-btn",children:"Tallenna"}),m.jsx("button",{onClick:()=>p(!1),className:"back-btn",children:"Peruuta"})]})]})})]})},C2=({asiakas:s,onBack:t,onDeleted:i,availableTasks:r,showNotification:l,requestConfirm:u})=>{const[f,p]=dt.useState({...s,contracts:s.contracts||{},group_names:s.group_names||[],street:s.street||"",zip:s.zip||"",city:s.city||"",phone:s.phone||"",email:s.email||"",payment_term_type:s.payment_term_type||"14pv",fixed_due_day:s.fixed_due_day||""}),[y,_]=dt.useState([]),[b,x]=dt.useState(""),[R,z]=dt.useState(null),[Z,J]=dt.useState({isOpen:!1,mode:"add",group:null,id:null,address:"",cost_center:""});dt.useEffect(()=>{const S=si(Te(wt,"properties"),zn("customer_id","==",s.id));return Fi(S,A=>{_(A.docs.map(O=>({id:O.id,...O.data()})))})},[s.id]);const Q=async()=>{await Hi(he(wt,"customers",s.id),f),l("Tiedot tallennettu!","success")},W=()=>u("Poistetaanko asiakas?",async()=>{await Lm(he(wt,"customers",s.id)),i()}),ut=(S,A,O)=>{p(k=>({...k,contracts:{...k.contracts,[S]:{...k.contracts[S],[A]:O}}}))},gt=async()=>{b&&(await Hi(he(wt,"customers",s.id),{group_names:tC(b)}),p({...f,group_names:[...f.group_names,b]}),x(""))},Mt=async()=>{const{mode:S,group:A,id:O,address:k,cost_center:j}=Z;if(!k)return l("Osoite vaaditaan!","error");S==="add"?await So(Te(wt,"properties"),{customer_id:s.id,group:A,address:k,cost_center:j,contracts:{}}):await Hi(he(wt,"properties",O),{address:k,cost_center:j}),J({...Z,isOpen:!1})},jt=S=>u("Poistetaanko kohde?",async()=>await Lm(he(wt,"properties",S.id))),Ct=async()=>{R&&(await Hi(he(wt,"properties",R.id),{contracts:R.contracts}),z(null),l("Hinnat tallennettu!","success"))},N=()=>{const S=new Date;if(f.payment_term_type==="fixed"){const A=parseInt(f.fixed_due_day);if(!A)return"??.??.????";let O=new Date(S.getFullYear(),S.getMonth(),A);return S.getDate()>A&&O.setMonth(O.getMonth()+1),O.toLocaleDateString("fi-FI")}else{const A=parseInt(f.payment_term_type)||14,O=new Date(S);return O.setDate(O.getDate()+A),O.toLocaleDateString("fi-FI")}};return m.jsxs("div",{className:"admin-section",children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[m.jsx("button",{onClick:t,className:"back-btn",children:" Takaisin"}),m.jsx("button",{onClick:W,className:"save-btn",style:{background:"#d32f2f"},children:"Poista Asiakas"})]}),m.jsx("h2",{children:f.name}),m.jsxs("div",{className:"card-box",children:[m.jsx("h3",{children:"Perustiedot"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Nimi"}),m.jsx("input",{value:f.name,onChange:S=>p({...f,name:S.target.value})})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{children:[m.jsx("label",{children:"Y-tunnus"}),m.jsx("input",{value:f.y_tunnus||"",onChange:S=>p({...f,y_tunnus:S.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{children:"Tyyppi"}),m.jsxs("select",{value:f.type||"b2b",onChange:S=>p({...f,type:S.target.value}),children:[m.jsx("option",{value:"isannointi",children:"Isnninti"}),m.jsx("option",{value:"b2b",children:"Yritys"}),m.jsx("option",{value:"b2c",children:"Yksityinen"})]})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Katuosoite (Laskutus)"}),m.jsx("input",{value:f.street||"",onChange:S=>p({...f,street:S.target.value})})]}),m.jsxs("div",{className:"form-row three-col",children:[m.jsxs("div",{children:[m.jsx("label",{children:"Postinro"}),m.jsx("input",{value:f.zip||"",onChange:S=>p({...f,zip:S.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{children:"Ptp"}),m.jsx("input",{value:f.city||"",onChange:S=>p({...f,city:S.target.value})})]})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{children:[m.jsx("label",{children:"Puhelin"}),m.jsx("input",{value:f.phone||"",onChange:S=>p({...f,phone:S.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{children:"Email"}),m.jsx("input",{value:f.email||"",onChange:S=>p({...f,email:S.target.value})})]})]}),m.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#2c2c2c",borderRadius:"8px",border:"1px solid #444"},children:[m.jsx("label",{style:{color:"#ff9800",marginBottom:"10px"},children:"Maksuehto / Erpiv"}),m.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[m.jsxs("select",{value:f.payment_term_type||"14pv",onChange:S=>p({...f,payment_term_type:S.target.value}),style:{flex:1},children:[m.jsx("option",{value:"14pv",children:"14 pv netto (Yleinen)"}),m.jsx("option",{value:"7pv",children:"7 pv netto (Nopea)"}),m.jsx("option",{value:"30pv",children:"30 pv netto (Yritys)"}),m.jsx("option",{value:"fixed",children:"Kiinte erpiv"})]}),f.payment_term_type==="fixed"&&m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[m.jsx("span",{style:{fontSize:"0.9rem"},children:"Piv:"}),m.jsx("input",{type:"number",placeholder:"PP",value:f.fixed_due_day||"",onChange:S=>p({...f,fixed_due_day:S.target.value}),style:{width:"60px",textAlign:"center"},min:"1",max:"31"})]})]}),m.jsxs("p",{style:{fontSize:"0.8em",color:"#aaa",marginTop:"8px",fontStyle:"italic"},children:["Jos lasku tehdn tnn, erpivksi tulee: ",m.jsx("strong",{style:{color:"#4caf50"},children:N()})]})]}),m.jsx("button",{onClick:Q,className:"save-btn",style:{marginTop:"20px",width:"100%"},children:"Tallenna muutokset"})]}),m.jsxs("div",{className:"card-box",children:[m.jsx("h3",{children:"Oletushinnasto"}),r.map(S=>m.jsx(QE,{task:S,contractData:f.contracts?.[S.id],onToggle:A=>ut(S.id,"active",A.target.checked),onPriceChange:A=>ut(S.id,"price",A.target.value)},S.id)),m.jsx("button",{onClick:Q,className:"save-btn",style:{marginTop:"15px"},children:"Tallenna muutokset"})]}),m.jsxs("div",{style:{marginTop:"30px"},children:[m.jsx("h3",{children:"Kohteet ja Ryhmittely"}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[m.jsx("input",{placeholder:"Uusi Ryhm...",value:b,onChange:S=>x(S.target.value),style:{flex:1}}),m.jsx("button",{onClick:gt,className:"save-btn",children:"+ Luo Ryhm"})]}),f.group_names.map((S,A)=>{const O=y.filter(k=>k.group===S);return m.jsxs("div",{style:{border:"1px solid #444",borderRadius:"8px",marginBottom:"15px",background:"#252525"},children:[m.jsxs("div",{style:{background:"#333",padding:"10px",display:"flex",justifyContent:"space-between",borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},children:[m.jsxs("strong",{children:[" ",S]}),m.jsx("button",{onClick:()=>J({isOpen:!0,mode:"add",group:S,id:null,address:"",cost_center:""}),style:{fontSize:"0.9em",cursor:"pointer",background:"none",color:"#2196f3"},children:"+ Lis kohde"})]}),O.map(k=>m.jsxs("div",{style:{padding:"10px",borderBottom:"1px solid #333"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[m.jsxs("div",{children:[m.jsx("div",{style:{fontWeight:"bold"},children:k.address}),m.jsx("div",{style:{fontSize:"0.9em",color:"#aaa"},children:k.cost_center?`KP: ${k.cost_center}`:""})]}),m.jsxs("div",{style:{display:"flex",gap:"5px"},children:[m.jsx("button",{onClick:()=>J({isOpen:!0,mode:"edit",group:S,id:k.id,address:k.address,cost_center:k.cost_center}),className:"icon-btn edit-btn",children:""}),m.jsx("button",{onClick:()=>z(k),className:"icon-btn",style:{color:"#f57c00"},children:""}),m.jsx("button",{onClick:()=>jt(k),className:"icon-btn delete-btn",children:""})]})]}),m.jsx("div",{style:{marginTop:"8px",display:"flex",gap:"5px",flexWrap:"wrap"},children:k.contracts&&r.map(j=>{const I=k.contracts[j.id];return I&&I.active?m.jsxs("span",{style:{fontSize:"0.75em",background:"#2e2e10",padding:"3px 8px",borderRadius:"4px",border:"1px solid #ffb74d",color:"#ffb74d"},children:[j.label,": ",I.price,""]},j.id):null})})]},k.id))]},A)})]}),Z.isOpen&&m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-content",children:[m.jsx("h3",{children:Z.mode==="add"?"Lis kohde":"Muokkaa"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Osoite"}),m.jsx("input",{value:Z.address,onChange:S=>J({...Z,address:S.target.value}),autoFocus:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Kustannuspaikka (KP)"}),m.jsx("input",{value:Z.cost_center,onChange:S=>J({...Z,cost_center:S.target.value})})]}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:Mt,className:"save-btn",children:"Tallenna"}),m.jsx("button",{onClick:()=>J({...Z,isOpen:!1}),className:"back-btn",children:"Peruuta"})]})]})}),R&&m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-content",children:[m.jsxs("h3",{children:["Hinnasto: ",R.address]}),m.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto"},children:r.map(S=>S.type==="extra"||S.type==="material"?null:m.jsx("div",{style:{marginBottom:"10px"},children:m.jsx(QE,{task:S,isOverridden:!0,contractData:R.contracts?.[S.id],onToggle:A=>{const O={...R.contracts};O[S.id]||(O[S.id]={}),O[S.id].active=A.target.checked,z({...R,contracts:O})},onPriceChange:A=>{const O={...R.contracts};O[S.id].price=A.target.value,z({...R,contracts:O})}})},S.id))}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:Ct,className:"save-btn",children:"Tallenna"}),m.jsx("button",{onClick:()=>z(null),className:"back-btn",children:"Peruuta"})]})]})})]})},I2=({onBack:s,availableTasks:t,showNotification:i,requestConfirm:r})=>{const[l,u]=dt.useState([]),[f,p]=dt.useState(null);dt.useEffect(()=>{const z=si(Te(wt,"customers"),Yh("name"));return Fi(z,Z=>u(Z.docs.map(J=>({id:J.id,...J.data()}))))},[]);const y=async()=>{const z=await So(Te(wt,"customers"),{name:"Uusi Asiakas",type:"b2b",created_at:new Date,contracts:{},group_names:[]});p({id:z.id,name:"",type:"b2b",contracts:{},group_names:[]})};if(f)return m.jsx(C2,{asiakas:f,onBack:()=>p(null),onDeleted:()=>p(null),availableTasks:t,showNotification:i,requestConfirm:r});const _=l.filter(z=>z.type==="isannointi"),b=l.filter(z=>z.type==="b2b"),x=l.filter(z=>z.type==="b2c"),R=(z,Z,J)=>m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsxs("h3",{style:{color:"#aaa",fontSize:"1rem",borderBottom:"1px solid #333",paddingBottom:"5px",marginBottom:"10px"},children:[J," ",z," (",Z.length,")"]}),Z.length===0&&m.jsx("p",{style:{color:"#666",fontStyle:"italic"},children:"Ei asiakkaita."}),Z.map(Q=>m.jsxs("div",{className:"card-box",onClick:()=>p(Q),style:{cursor:"pointer",display:"flex",justifyContent:"space-between",padding:"15px",marginBottom:"8px",borderLeft:`4px solid ${z==="Isnninti"?"#2196f3":z==="Yritykset"?"#ff9800":"#4caf50"}`},children:[m.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:Q.name}),m.jsx("span",{style:{color:"#2196f3"},children:"Avaa "})]},Q.id))]});return m.jsxs("div",{className:"admin-section",children:[m.jsx("button",{onClick:s,className:"back-btn",children:" Takaisin"}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"20px 0"},children:[m.jsx("h2",{children:"Asiakasrekisteri"}),m.jsx("button",{onClick:y,className:"save-btn",children:"+ Uusi Asiakas"})]}),R("Isnninti",_,""),R("Yritykset",b,""),R("Yksityiset",x,"")]})};function k2(){const[s,t]=dt.useState(null),[i,r]=dt.useState(!0),[l,u]=dt.useState("tyot"),[f,p]=dt.useState([]),[y,_]=dt.useState(null),[b,x]=dt.useState({isOpen:!1,message:"",onConfirm:null});dt.useEffect(()=>{const Q=nI(Kl,W=>{W&&!T2.includes(W.email)?(alert(`Psy evtty: ${W.email}
Tll kyttjll ei ole oikeuksia sovellukseen.`),PE(Kl),t(null)):t(W),r(!1)});return()=>Q()},[]);const R=(Q,W="success")=>{_({msg:Q,type:W}),setTimeout(()=>_(null),3e3)},z=(Q,W)=>{x({isOpen:!0,message:Q,onConfirm:()=>{W(),x({isOpen:!1,message:"",onConfirm:null})}})};dt.useEffect(()=>{if(!s)return;const Q=Fi(he(wt,"settings","company_profile"),W=>{W.exists()&&W.data().tasks?p(W.data().tasks):p([])});return()=>Q()},[s]);const Z=async()=>{await PE(Kl),u("tyot")},J=()=>m.jsxs("div",{className:"admin-section",style:{textAlign:"center"},children:[m.jsx("h2",{children:"Toimiston Ohjauspaneeli"}),m.jsxs("div",{className:"button-grid",style:{marginTop:"30px"},children:[m.jsx("div",{className:"work-button",style:{backgroundColor:"#455a64"},onClick:()=>u("settings"),children:m.jsx("h3",{children:" Omat Tiedot & Tyt"})}),m.jsx("div",{className:"work-button",style:{backgroundColor:"#00695c"},onClick:()=>u("customers"),children:m.jsx("h3",{children:" Asiakasrekisteri"})}),m.jsx("div",{className:"work-button",style:{backgroundColor:"#795548"},onClick:()=>u("invoicing"),children:m.jsx("h3",{children:" Laskutus"})}),m.jsx("div",{className:"work-button",style:{backgroundColor:"#37474f"},onClick:()=>u("archive"),children:m.jsx("h3",{children:" Laskuarkisto"})}),m.jsx("div",{className:"work-button",style:{backgroundColor:"#607d8b"},onClick:()=>u("instructions"),children:m.jsx("h3",{children:" Ohjekirja"})})]}),m.jsxs("button",{onClick:Z,className:"back-btn",style:{marginTop:"40px",borderColor:"#d32f2f",color:"#d32f2f"},children:["Kirjaudu ulos (",s.email,")"]})]});return i?m.jsx("div",{style:{color:"white",textAlign:"center",marginTop:"50px"},children:"Ladataan..."}):s?m.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"10px"},children:[m.jsx("div",{className:"logo-container",children:m.jsx("img",{src:E2,alt:"Krkln Notar Oy",className:"app-logo"})}),m.jsx(b2,{msg:y?.msg,type:y?.type}),m.jsx(S2,{isOpen:b.isOpen,message:b.message,onConfirm:b.onConfirm,onCancel:()=>x({...b,isOpen:!1})}),m.jsx(A2,{currentView:l,setCurrentView:u}),l==="tyot"&&m.jsx(x2,{availableTasks:f,onOpenLog:()=>u("log"),showNotification:R}),l==="log"&&m.jsx(w2,{onBack:()=>u("tyot"),showNotification:R,requestConfirm:z}),l==="admin"&&m.jsx(J,{}),l==="settings"&&m.jsx(R2,{onBack:()=>u("admin"),showNotification:R,requestConfirm:z,user:s}),l==="customers"&&m.jsx(I2,{onBack:()=>u("admin"),availableTasks:f,showNotification:R,requestConfirm:z}),l==="invoicing"&&m.jsx(g2,{onBack:()=>u("admin"),showNotification:R}),l==="archive"&&m.jsx(y2,{onBack:()=>u("admin"),showNotification:R,requestConfirm:z}),l==="instructions"&&m.jsx(_2,{onBack:()=>u("admin")}),m.jsx("footer",{className:"footer-logo-container",children:m.jsx("img",{src:"alaMKlogo.png",alt:"mikkokalevi 2026  All Rights Reserved.",className:"footer-logo"})})]}):m.jsx(v2,{})}rA.createRoot(document.getElementById("root")).render(m.jsx(dt.StrictMode,{children:m.jsx(k2,{})}));
